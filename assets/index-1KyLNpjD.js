(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function a(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=a(r);fetch(r.href,s)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function ca(e){const t=Object.create(null);for(const a of e.split(","))t[a]=1;return a=>a in t}const Te={},Vt=[],ot=()=>{},Wf=()=>!1,F0=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),la=e=>e.startsWith("onUpdate:"),He=Object.assign,fa=(e,t)=>{const a=e.indexOf(t);a>-1&&e.splice(a,1)},Uf=Object.prototype.hasOwnProperty,ke=(e,t)=>Uf.call(e,t),ve=Array.isArray,jt=e=>m0(e)==="[object Map]",R0=e=>m0(e)==="[object Set]",za=e=>m0(e)==="[object Date]",be=e=>typeof e=="function",Ne=e=>typeof e=="string",rt=e=>typeof e=="symbol",Ae=e=>e!==null&&typeof e=="object",nl=e=>(Ae(e)||be(e))&&be(e.then)&&be(e.catch),il=Object.prototype.toString,m0=e=>il.call(e),Vf=e=>m0(e).slice(8,-1),al=e=>m0(e)==="[object Object]",ua=e=>Ne(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,c0=ca(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),H0=e=>{const t=Object.create(null);return a=>t[a]||(t[a]=e(a))},jf=/-(\w)/g,St=H0(e=>e.replace(jf,(t,a)=>a?a.toUpperCase():"")),Kf=/\B([A-Z])/g,Ft=H0(e=>e.replace(Kf,"-$1").toLowerCase()),sl=H0(e=>e.charAt(0).toUpperCase()+e.slice(1)),er=H0(e=>e?`on${sl(e)}`:""),Tt=(e,t)=>!Object.is(e,t),E0=(e,...t)=>{for(let a=0;a<e.length;a++)e[a](...t)},ol=(e,t,a,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:a})},Xi=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Ga;const z0=()=>Ga||(Ga=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ha(e){if(ve(e)){const t={};for(let a=0;a<e.length;a++){const n=e[a],r=Ne(n)?Zf(n):ha(n);if(r)for(const s in r)t[s]=r[s]}return t}else if(Ne(e)||Ae(e))return e}const Xf=/;(?![^(]*\))/g,Jf=/:([^]+)/,Qf=/\/\*[^]*?\*\//g;function Zf(e){const t={};return e.replace(Qf,"").split(Xf).forEach(a=>{if(a){const n=a.split(Jf);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function dt(e){let t="";if(Ne(e))t=e;else if(ve(e))for(let a=0;a<e.length;a++){const n=dt(e[a]);n&&(t+=n+" ")}else if(Ae(e))for(const a in e)e[a]&&(t+=a+" ");return t.trim()}const e1="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",t1=ca(e1);function cl(e){return!!e||e===""}function r1(e,t){if(e.length!==t.length)return!1;let a=!0;for(let n=0;a&&n<e.length;n++)a=Zt(e[n],t[n]);return a}function Zt(e,t){if(e===t)return!0;let a=za(e),n=za(t);if(a||n)return a&&n?e.getTime()===t.getTime():!1;if(a=rt(e),n=rt(t),a||n)return e===t;if(a=ve(e),n=ve(t),a||n)return a&&n?r1(e,t):!1;if(a=Ae(e),n=Ae(t),a||n){if(!a||!n)return!1;const r=Object.keys(e).length,s=Object.keys(t).length;if(r!==s)return!1;for(const l in e){const c=e.hasOwnProperty(l),f=t.hasOwnProperty(l);if(c&&!f||!c&&f||!Zt(e[l],t[l]))return!1}}return String(e)===String(t)}function ll(e,t){return e.findIndex(a=>Zt(a,t))}const fl=e=>!!(e&&e.__v_isRef===!0),st=e=>Ne(e)?e:e==null?"":ve(e)||Ae(e)&&(e.toString===il||!be(e.toString))?fl(e)?st(e.value):JSON.stringify(e,ul,2):String(e),ul=(e,t)=>fl(t)?ul(e,t.value):jt(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((a,[n,r],s)=>(a[tr(n,s)+" =>"]=r,a),{})}:R0(t)?{[`Set(${t.size})`]:[...t.values()].map(a=>tr(a))}:rt(t)?tr(t):Ae(t)&&!ve(t)&&!al(t)?String(t):t,tr=(e,t="")=>{var a;return rt(e)?`Symbol(${(a=e.description)!=null?a:t})`:e};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Xe;class n1{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Xe,!t&&Xe&&(this.index=(Xe.scopes||(Xe.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,a;if(this.scopes)for(t=0,a=this.scopes.length;t<a;t++)this.scopes[t].pause();for(t=0,a=this.effects.length;t<a;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,a;if(this.scopes)for(t=0,a=this.scopes.length;t<a;t++)this.scopes[t].resume();for(t=0,a=this.effects.length;t<a;t++)this.effects[t].resume()}}run(t){if(this._active){const a=Xe;try{return Xe=this,t()}finally{Xe=a}}}on(){Xe=this}off(){Xe=this.parent}stop(t){if(this._active){this._active=!1;let a,n;for(a=0,n=this.effects.length;a<n;a++)this.effects[a].stop();for(this.effects.length=0,a=0,n=this.cleanups.length;a<n;a++)this.cleanups[a]();if(this.cleanups.length=0,this.scopes){for(a=0,n=this.scopes.length;a<n;a++)this.scopes[a].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function i1(){return Xe}let Ee;const rr=new WeakSet;class hl{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Xe&&Xe.active&&Xe.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,rr.has(this)&&(rr.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||pl(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ya(this),vl(this);const t=Ee,a=tt;Ee=this,tt=!0;try{return this.fn()}finally{gl(this),Ee=t,tt=a,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)va(t);this.deps=this.depsTail=void 0,Ya(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?rr.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Ji(this)&&this.run()}get dirty(){return Ji(this)}}let dl=0,l0,f0;function pl(e,t=!1){if(e.flags|=8,t){e.next=f0,f0=e;return}e.next=l0,l0=e}function da(){dl++}function pa(){if(--dl>0)return;if(f0){let t=f0;for(f0=void 0;t;){const a=t.next;t.next=void 0,t.flags&=-9,t=a}}let e;for(;l0;){let t=l0;for(l0=void 0;t;){const a=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(n){e||(e=n)}t=a}}if(e)throw e}function vl(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function gl(e){let t,a=e.depsTail,n=a;for(;n;){const r=n.prevDep;n.version===-1?(n===a&&(a=r),va(n),a1(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=r}e.deps=t,e.depsTail=a}function Ji(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(bl(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function bl(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===d0))return;e.globalVersion=d0;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!Ji(e)){e.flags&=-3;return}const a=Ee,n=tt;Ee=e,tt=!0;try{vl(e);const r=e.fn(e._value);(t.version===0||Tt(r,e._value))&&(e._value=r,t.version++)}catch(r){throw t.version++,r}finally{Ee=a,tt=n,gl(e),e.flags&=-3}}function va(e,t=!1){const{dep:a,prevSub:n,nextSub:r}=e;if(n&&(n.nextSub=r,e.prevSub=void 0),r&&(r.prevSub=n,e.nextSub=void 0),a.subs===e&&(a.subs=n,!n&&a.computed)){a.computed.flags&=-5;for(let s=a.computed.deps;s;s=s.nextDep)va(s,!0)}!t&&!--a.sc&&a.map&&a.map.delete(a.key)}function a1(e){const{prevDep:t,nextDep:a}=e;t&&(t.nextDep=a,e.prevDep=void 0),a&&(a.prevDep=t,e.nextDep=void 0)}let tt=!0;const ml=[];function At(){ml.push(tt),tt=!1}function Mt(){const e=ml.pop();tt=e===void 0?!0:e}function Ya(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const a=Ee;Ee=void 0;try{t()}finally{Ee=a}}}let d0=0;class s1{constructor(t,a){this.sub=t,this.dep=a,this.version=a.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ga{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!Ee||!tt||Ee===this.computed)return;let a=this.activeLink;if(a===void 0||a.sub!==Ee)a=this.activeLink=new s1(Ee,this),Ee.deps?(a.prevDep=Ee.depsTail,Ee.depsTail.nextDep=a,Ee.depsTail=a):Ee.deps=Ee.depsTail=a,yl(a);else if(a.version===-1&&(a.version=this.version,a.nextDep)){const n=a.nextDep;n.prevDep=a.prevDep,a.prevDep&&(a.prevDep.nextDep=n),a.prevDep=Ee.depsTail,a.nextDep=void 0,Ee.depsTail.nextDep=a,Ee.depsTail=a,Ee.deps===a&&(Ee.deps=n)}return a}trigger(t){this.version++,d0++,this.notify(t)}notify(t){da();try{for(let a=this.subs;a;a=a.prevSub)a.sub.notify()&&a.sub.dep.notify()}finally{pa()}}}function yl(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)yl(n)}const a=e.dep.subs;a!==e&&(e.prevSub=a,a&&(a.nextSub=e)),e.dep.subs=e}}const Qi=new WeakMap,Ot=Symbol(""),Zi=Symbol(""),p0=Symbol("");function Oe(e,t,a){if(tt&&Ee){let n=Qi.get(e);n||Qi.set(e,n=new Map);let r=n.get(a);r||(n.set(a,r=new ga),r.map=n,r.key=a),r.track()}}function pt(e,t,a,n,r,s){const l=Qi.get(e);if(!l){d0++;return}const c=f=>{f&&f.trigger()};if(da(),t==="clear")l.forEach(c);else{const f=ve(e),p=f&&ua(a);if(f&&a==="length"){const v=Number(n);l.forEach((d,u)=>{(u==="length"||u===p0||!rt(u)&&u>=v)&&c(d)})}else switch((a!==void 0||l.has(void 0))&&c(l.get(a)),p&&c(l.get(p0)),t){case"add":f?p&&c(l.get("length")):(c(l.get(Ot)),jt(e)&&c(l.get(Zi)));break;case"delete":f||(c(l.get(Ot)),jt(e)&&c(l.get(Zi)));break;case"set":jt(e)&&c(l.get(Ot));break}}pa()}function Gt(e){const t=Ce(e);return t===e?t:(Oe(t,"iterate",p0),Ze(e)?t:t.map(Ie))}function G0(e){return Oe(e=Ce(e),"iterate",p0),e}const o1={__proto__:null,[Symbol.iterator](){return nr(this,Symbol.iterator,Ie)},concat(...e){return Gt(this).concat(...e.map(t=>ve(t)?Gt(t):t))},entries(){return nr(this,"entries",e=>(e[1]=Ie(e[1]),e))},every(e,t){return ut(this,"every",e,t,void 0,arguments)},filter(e,t){return ut(this,"filter",e,t,a=>a.map(Ie),arguments)},find(e,t){return ut(this,"find",e,t,Ie,arguments)},findIndex(e,t){return ut(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return ut(this,"findLast",e,t,Ie,arguments)},findLastIndex(e,t){return ut(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return ut(this,"forEach",e,t,void 0,arguments)},includes(...e){return ir(this,"includes",e)},indexOf(...e){return ir(this,"indexOf",e)},join(e){return Gt(this).join(e)},lastIndexOf(...e){return ir(this,"lastIndexOf",e)},map(e,t){return ut(this,"map",e,t,void 0,arguments)},pop(){return a0(this,"pop")},push(...e){return a0(this,"push",e)},reduce(e,...t){return $a(this,"reduce",e,t)},reduceRight(e,...t){return $a(this,"reduceRight",e,t)},shift(){return a0(this,"shift")},some(e,t){return ut(this,"some",e,t,void 0,arguments)},splice(...e){return a0(this,"splice",e)},toReversed(){return Gt(this).toReversed()},toSorted(e){return Gt(this).toSorted(e)},toSpliced(...e){return Gt(this).toSpliced(...e)},unshift(...e){return a0(this,"unshift",e)},values(){return nr(this,"values",Ie)}};function nr(e,t,a){const n=G0(e),r=n[t]();return n!==e&&!Ze(e)&&(r._next=r.next,r.next=()=>{const s=r._next();return s.value&&(s.value=a(s.value)),s}),r}const c1=Array.prototype;function ut(e,t,a,n,r,s){const l=G0(e),c=l!==e&&!Ze(e),f=l[t];if(f!==c1[t]){const d=f.apply(e,s);return c?Ie(d):d}let p=a;l!==e&&(c?p=function(d,u){return a.call(this,Ie(d),u,e)}:a.length>2&&(p=function(d,u){return a.call(this,d,u,e)}));const v=f.call(l,p,n);return c&&r?r(v):v}function $a(e,t,a,n){const r=G0(e);let s=a;return r!==e&&(Ze(e)?a.length>3&&(s=function(l,c,f){return a.call(this,l,c,f,e)}):s=function(l,c,f){return a.call(this,l,Ie(c),f,e)}),r[t](s,...n)}function ir(e,t,a){const n=Ce(e);Oe(n,"iterate",p0);const r=n[t](...a);return(r===-1||r===!1)&&wa(a[0])?(a[0]=Ce(a[0]),n[t](...a)):r}function a0(e,t,a=[]){At(),da();const n=Ce(e)[t].apply(e,a);return pa(),Mt(),n}const l1=ca("__proto__,__v_isRef,__isVue"),wl=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(rt));function f1(e){rt(e)||(e=String(e));const t=Ce(this);return Oe(t,"has",e),t.hasOwnProperty(e)}class xl{constructor(t=!1,a=!1){this._isReadonly=t,this._isShallow=a}get(t,a,n){if(a==="__v_skip")return t.__v_skip;const r=this._isReadonly,s=this._isShallow;if(a==="__v_isReactive")return!r;if(a==="__v_isReadonly")return r;if(a==="__v_isShallow")return s;if(a==="__v_raw")return n===(r?s?w1:Tl:s?kl:Cl).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const l=ve(t);if(!r){let f;if(l&&(f=o1[a]))return f;if(a==="hasOwnProperty")return f1}const c=Reflect.get(t,a,Re(t)?t:n);return(rt(a)?wl.has(a):l1(a))||(r||Oe(t,"get",a),s)?c:Re(c)?l&&ua(a)?c:c.value:Ae(c)?r?Sl(c):ma(c):c}}class _l extends xl{constructor(t=!1){super(!1,t)}set(t,a,n,r){let s=t[a];if(!this._isShallow){const f=It(s);if(!Ze(n)&&!It(n)&&(s=Ce(s),n=Ce(n)),!ve(t)&&Re(s)&&!Re(n))return f?!1:(s.value=n,!0)}const l=ve(t)&&ua(a)?Number(a)<t.length:ke(t,a),c=Reflect.set(t,a,n,Re(t)?t:r);return t===Ce(r)&&(l?Tt(n,s)&&pt(t,"set",a,n):pt(t,"add",a,n)),c}deleteProperty(t,a){const n=ke(t,a);t[a];const r=Reflect.deleteProperty(t,a);return r&&n&&pt(t,"delete",a,void 0),r}has(t,a){const n=Reflect.has(t,a);return(!rt(a)||!wl.has(a))&&Oe(t,"has",a),n}ownKeys(t){return Oe(t,"iterate",ve(t)?"length":Ot),Reflect.ownKeys(t)}}class u1 extends xl{constructor(t=!1){super(!0,t)}set(t,a){return!0}deleteProperty(t,a){return!0}}const h1=new _l,d1=new u1,p1=new _l(!0);const ea=e=>e,k0=e=>Reflect.getPrototypeOf(e);function v1(e,t,a){return function(...n){const r=this.__v_raw,s=Ce(r),l=jt(s),c=e==="entries"||e===Symbol.iterator&&l,f=e==="keys"&&l,p=r[e](...n),v=a?ea:t?ta:Ie;return!t&&Oe(s,"iterate",f?Zi:Ot),{next(){const{value:d,done:u}=p.next();return u?{value:d,done:u}:{value:c?[v(d[0]),v(d[1])]:v(d),done:u}},[Symbol.iterator](){return this}}}}function T0(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function g1(e,t){const a={get(r){const s=this.__v_raw,l=Ce(s),c=Ce(r);e||(Tt(r,c)&&Oe(l,"get",r),Oe(l,"get",c));const{has:f}=k0(l),p=t?ea:e?ta:Ie;if(f.call(l,r))return p(s.get(r));if(f.call(l,c))return p(s.get(c));s!==l&&s.get(r)},get size(){const r=this.__v_raw;return!e&&Oe(Ce(r),"iterate",Ot),Reflect.get(r,"size",r)},has(r){const s=this.__v_raw,l=Ce(s),c=Ce(r);return e||(Tt(r,c)&&Oe(l,"has",r),Oe(l,"has",c)),r===c?s.has(r):s.has(r)||s.has(c)},forEach(r,s){const l=this,c=l.__v_raw,f=Ce(c),p=t?ea:e?ta:Ie;return!e&&Oe(f,"iterate",Ot),c.forEach((v,d)=>r.call(s,p(v),p(d),l))}};return He(a,e?{add:T0("add"),set:T0("set"),delete:T0("delete"),clear:T0("clear")}:{add(r){!t&&!Ze(r)&&!It(r)&&(r=Ce(r));const s=Ce(this);return k0(s).has.call(s,r)||(s.add(r),pt(s,"add",r,r)),this},set(r,s){!t&&!Ze(s)&&!It(s)&&(s=Ce(s));const l=Ce(this),{has:c,get:f}=k0(l);let p=c.call(l,r);p||(r=Ce(r),p=c.call(l,r));const v=f.call(l,r);return l.set(r,s),p?Tt(s,v)&&pt(l,"set",r,s):pt(l,"add",r,s),this},delete(r){const s=Ce(this),{has:l,get:c}=k0(s);let f=l.call(s,r);f||(r=Ce(r),f=l.call(s,r)),c&&c.call(s,r);const p=s.delete(r);return f&&pt(s,"delete",r,void 0),p},clear(){const r=Ce(this),s=r.size!==0,l=r.clear();return s&&pt(r,"clear",void 0,void 0),l}}),["keys","values","entries",Symbol.iterator].forEach(r=>{a[r]=v1(r,e,t)}),a}function ba(e,t){const a=g1(e,t);return(n,r,s)=>r==="__v_isReactive"?!e:r==="__v_isReadonly"?e:r==="__v_raw"?n:Reflect.get(ke(a,r)&&r in n?a:n,r,s)}const b1={get:ba(!1,!1)},m1={get:ba(!1,!0)},y1={get:ba(!0,!1)};const Cl=new WeakMap,kl=new WeakMap,Tl=new WeakMap,w1=new WeakMap;function x1(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function _1(e){return e.__v_skip||!Object.isExtensible(e)?0:x1(Vf(e))}function ma(e){return It(e)?e:ya(e,!1,h1,b1,Cl)}function C1(e){return ya(e,!1,p1,m1,kl)}function Sl(e){return ya(e,!0,d1,y1,Tl)}function ya(e,t,a,n,r){if(!Ae(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=r.get(e);if(s)return s;const l=_1(e);if(l===0)return e;const c=new Proxy(e,l===2?n:a);return r.set(e,c),c}function Kt(e){return It(e)?Kt(e.__v_raw):!!(e&&e.__v_isReactive)}function It(e){return!!(e&&e.__v_isReadonly)}function Ze(e){return!!(e&&e.__v_isShallow)}function wa(e){return e?!!e.__v_raw:!1}function Ce(e){const t=e&&e.__v_raw;return t?Ce(t):e}function k1(e){return!ke(e,"__v_skip")&&Object.isExtensible(e)&&ol(e,"__v_skip",!0),e}const Ie=e=>Ae(e)?ma(e):e,ta=e=>Ae(e)?Sl(e):e;function Re(e){return e?e.__v_isRef===!0:!1}function et(e){return El(e,!1)}function T1(e){return El(e,!0)}function El(e,t){return Re(e)?e:new S1(e,t)}class S1{constructor(t,a){this.dep=new ga,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=a?t:Ce(t),this._value=a?t:Ie(t),this.__v_isShallow=a}get value(){return this.dep.track(),this._value}set value(t){const a=this._rawValue,n=this.__v_isShallow||Ze(t)||It(t);t=n?t:Ce(t),Tt(t,a)&&(this._rawValue=t,this._value=n?t:Ie(t),this.dep.trigger())}}function E1(e){return Re(e)?e.value:e}const A1={get:(e,t,a)=>t==="__v_raw"?e:E1(Reflect.get(e,t,a)),set:(e,t,a,n)=>{const r=e[t];return Re(r)&&!Re(a)?(r.value=a,!0):Reflect.set(e,t,a,n)}};function Al(e){return Kt(e)?e:new Proxy(e,A1)}class M1{constructor(t,a,n){this.fn=t,this.setter=a,this._value=void 0,this.dep=new ga(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=d0-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!a,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&Ee!==this)return pl(this,!0),!0}get value(){const t=this.dep.track();return bl(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function B1(e,t,a=!1){let n,r;return be(e)?n=e:(n=e.get,r=e.set),new M1(n,r,a)}const S0={},P0=new WeakMap;let Dt;function P1(e,t=!1,a=Dt){if(a){let n=P0.get(a);n||P0.set(a,n=[]),n.push(e)}}function N1(e,t,a=Te){const{immediate:n,deep:r,once:s,scheduler:l,augmentJob:c,call:f}=a,p=C=>r?C:Ze(C)||r===!1||r===0?vt(C,1):vt(C);let v,d,u,o,h=!1,i=!1;if(Re(e)?(d=()=>e.value,h=Ze(e)):Kt(e)?(d=()=>p(e),h=!0):ve(e)?(i=!0,h=e.some(C=>Kt(C)||Ze(C)),d=()=>e.map(C=>{if(Re(C))return C.value;if(Kt(C))return p(C);if(be(C))return f?f(C,2):C()})):be(e)?t?d=f?()=>f(e,2):e:d=()=>{if(u){At();try{u()}finally{Mt()}}const C=Dt;Dt=v;try{return f?f(e,3,[o]):e(o)}finally{Dt=C}}:d=ot,t&&r){const C=d,S=r===!0?1/0:r;d=()=>vt(C(),S)}const g=i1(),m=()=>{v.stop(),g&&g.active&&fa(g.effects,v)};if(s&&t){const C=t;t=(...S)=>{C(...S),m()}}let b=i?new Array(e.length).fill(S0):S0;const x=C=>{if(!(!(v.flags&1)||!v.dirty&&!C))if(t){const S=v.run();if(r||h||(i?S.some((I,F)=>Tt(I,b[F])):Tt(S,b))){u&&u();const I=Dt;Dt=v;try{const F=[S,b===S0?void 0:i&&b[0]===S0?[]:b,o];f?f(t,3,F):t(...F),b=S}finally{Dt=I}}}else v.run()};return c&&c(x),v=new hl(d),v.scheduler=l?()=>l(x,!1):x,o=C=>P1(C,!1,v),u=v.onStop=()=>{const C=P0.get(v);if(C){if(f)f(C,4);else for(const S of C)S();P0.delete(v)}},t?n?x(!0):b=v.run():l?l(x.bind(null,!0),!0):v.run(),m.pause=v.pause.bind(v),m.resume=v.resume.bind(v),m.stop=m,m}function vt(e,t=1/0,a){if(t<=0||!Ae(e)||e.__v_skip||(a=a||new Set,a.has(e)))return e;if(a.add(e),t--,Re(e))vt(e.value,t,a);else if(ve(e))for(let n=0;n<e.length;n++)vt(e[n],t,a);else if(R0(e)||jt(e))e.forEach(n=>{vt(n,t,a)});else if(al(e)){for(const n in e)vt(e[n],t,a);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&vt(e[n],t,a)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function y0(e,t,a,n){try{return n?e(...n):e()}catch(r){Y0(r,t,a)}}function ct(e,t,a,n){if(be(e)){const r=y0(e,t,a,n);return r&&nl(r)&&r.catch(s=>{Y0(s,t,a)}),r}if(ve(e)){const r=[];for(let s=0;s<e.length;s++)r.push(ct(e[s],t,a,n));return r}}function Y0(e,t,a,n=!0){const r=t?t.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:l}=t&&t.appContext.config||Te;if(t){let c=t.parent;const f=t.proxy,p=`https://vuejs.org/error-reference/#runtime-${a}`;for(;c;){const v=c.ec;if(v){for(let d=0;d<v.length;d++)if(v[d](e,f,p)===!1)return}c=c.parent}if(s){At(),y0(s,null,10,[e,f,p]),Mt();return}}L1(e,a,r,n,l)}function L1(e,t,a,n=!0,r=!1){if(r)throw e;console.error(e)}const Ye=[];let it=-1;const Xt=[];let xt=null,$t=0;const Ml=Promise.resolve();let N0=null;function q1(e){const t=N0||Ml;return e?t.then(this?e.bind(this):e):t}function D1(e){let t=it+1,a=Ye.length;for(;t<a;){const n=t+a>>>1,r=Ye[n],s=v0(r);s<e||s===e&&r.flags&2?t=n+1:a=n}return t}function xa(e){if(!(e.flags&1)){const t=v0(e),a=Ye[Ye.length-1];!a||!(e.flags&2)&&t>=v0(a)?Ye.push(e):Ye.splice(D1(t),0,e),e.flags|=1,Bl()}}function Bl(){N0||(N0=Ml.then(Nl))}function O1(e){ve(e)?Xt.push(...e):xt&&e.id===-1?xt.splice($t+1,0,e):e.flags&1||(Xt.push(e),e.flags|=1),Bl()}function Wa(e,t,a=it+1){for(;a<Ye.length;a++){const n=Ye[a];if(n&&n.flags&2){if(e&&n.id!==e.uid)continue;Ye.splice(a,1),a--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function Pl(e){if(Xt.length){const t=[...new Set(Xt)].sort((a,n)=>v0(a)-v0(n));if(Xt.length=0,xt){xt.push(...t);return}for(xt=t,$t=0;$t<xt.length;$t++){const a=xt[$t];a.flags&4&&(a.flags&=-2),a.flags&8||a(),a.flags&=-2}xt=null,$t=0}}const v0=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Nl(e){try{for(it=0;it<Ye.length;it++){const t=Ye[it];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),y0(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;it<Ye.length;it++){const t=Ye[it];t&&(t.flags&=-2)}it=-1,Ye.length=0,Pl(),N0=null,(Ye.length||Xt.length)&&Nl()}}let De=null,Ll=null;function L0(e){const t=De;return De=e,Ll=e&&e.type.__scopeId||null,t}function Wt(e,t=De,a){if(!t||e._n)return e;const n=(...r)=>{n._d&&es(-1);const s=L0(t);let l;try{l=e(...r)}finally{L0(s),n._d&&es(1)}return l};return n._n=!0,n._c=!0,n._d=!0,n}function Ut(e,t){if(De===null)return e;const a=j0(De),n=e.dirs||(e.dirs=[]);for(let r=0;r<t.length;r++){let[s,l,c,f=Te]=t[r];s&&(be(s)&&(s={mounted:s,updated:s}),s.deep&&vt(l),n.push({dir:s,instance:a,value:l,oldValue:void 0,arg:c,modifiers:f}))}return e}function Nt(e,t,a,n){const r=e.dirs,s=t&&t.dirs;for(let l=0;l<r.length;l++){const c=r[l];s&&(c.oldValue=s[l].value);let f=c.dir[n];f&&(At(),ct(f,a,8,[e.el,c,e,t]),Mt())}}const I1=Symbol("_vte"),F1=e=>e.__isTeleport;function _a(e,t){e.shapeFlag&6&&e.component?(e.transition=t,_a(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}/*! #__NO_SIDE_EFFECTS__ */function $0(e,t){return be(e)?He({name:e.name},t,{setup:e}):e}function ql(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function Dl(e){const t=Lu(),a=T1(null);if(t){const r=t.refs===Te?t.refs={}:t.refs;Object.defineProperty(r,e,{enumerable:!0,get:()=>a.value,set:s=>a.value=s})}return a}function q0(e,t,a,n,r=!1){if(ve(e)){e.forEach((h,i)=>q0(h,t&&(ve(t)?t[i]:t),a,n,r));return}if(Jt(n)&&!r){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&q0(e,t,a,n.component.subTree);return}const s=n.shapeFlag&4?j0(n.component):n.el,l=r?null:s,{i:c,r:f}=e,p=t&&t.r,v=c.refs===Te?c.refs={}:c.refs,d=c.setupState,u=Ce(d),o=d===Te?()=>!1:h=>ke(u,h);if(p!=null&&p!==f&&(Ne(p)?(v[p]=null,o(p)&&(d[p]=null)):Re(p)&&(p.value=null)),be(f))y0(f,c,12,[l,v]);else{const h=Ne(f),i=Re(f);if(h||i){const g=()=>{if(e.f){const m=h?o(f)?d[f]:v[f]:f.value;r?ve(m)&&fa(m,s):ve(m)?m.includes(s)||m.push(s):h?(v[f]=[s],o(f)&&(d[f]=v[f])):(f.value=[s],e.k&&(v[e.k]=f.value))}else h?(v[f]=l,o(f)&&(d[f]=l)):i&&(f.value=l,e.k&&(v[e.k]=l))};l?(g.id=-1,Ke(g,a)):g()}}}z0().requestIdleCallback;z0().cancelIdleCallback;const Jt=e=>!!e.type.__asyncLoader,Ol=e=>e.type.__isKeepAlive;function R1(e,t){Il(e,"a",t)}function H1(e,t){Il(e,"da",t)}function Il(e,t,a=Fe){const n=e.__wdc||(e.__wdc=()=>{let r=a;for(;r;){if(r.isDeactivated)return;r=r.parent}return e()});if(W0(t,n,a),a){let r=a.parent;for(;r&&r.parent;)Ol(r.parent.vnode)&&z1(n,t,a,r),r=r.parent}}function z1(e,t,a,n){const r=W0(t,e,n,!0);Fl(()=>{fa(n[t],r)},a)}function W0(e,t,a=Fe,n=!1){if(a){const r=a[e]||(a[e]=[]),s=t.__weh||(t.__weh=(...l)=>{At();const c=w0(a),f=ct(t,a,e,l);return c(),Mt(),f});return n?r.unshift(s):r.push(s),s}}const mt=e=>(t,a=Fe)=>{(!b0||e==="sp")&&W0(e,(...n)=>t(...n),a)},G1=mt("bm"),Ca=mt("m"),Y1=mt("bu"),$1=mt("u"),W1=mt("bum"),Fl=mt("um"),U1=mt("sp"),V1=mt("rtg"),j1=mt("rtc");function K1(e,t=Fe){W0("ec",e,t)}const X1=Symbol.for("v-ndc");function kt(e,t,a,n){let r;const s=a,l=ve(e);if(l||Ne(e)){const c=l&&Kt(e);let f=!1;c&&(f=!Ze(e),e=G0(e)),r=new Array(e.length);for(let p=0,v=e.length;p<v;p++)r[p]=t(f?Ie(e[p]):e[p],p,void 0,s)}else if(typeof e=="number"){r=new Array(e);for(let c=0;c<e;c++)r[c]=t(c+1,c,void 0,s)}else if(Ae(e))if(e[Symbol.iterator])r=Array.from(e,(c,f)=>t(c,f,void 0,s));else{const c=Object.keys(e);r=new Array(c.length);for(let f=0,p=c.length;f<p;f++){const v=c[f];r[f]=t(e[v],v,f,s)}}else r=[];return r}function Yt(e,t,a={},n,r){if(De.ce||De.parent&&Jt(De.parent)&&De.parent.ce)return t!=="default"&&(a.name=t),_e(),O0(Me,null,[$e("slot",a,n)],64);let s=e[t];s&&s._c&&(s._d=!1),_e();const l=s&&Rl(s(a)),c=a.key||l&&l.key,f=O0(Me,{key:(c&&!rt(c)?c:`_${t}`)+""},l||[],l&&e._===1?64:-2);return s&&s._c&&(s._d=!0),f}function Rl(e){return e.some(t=>Ta(t)?!(t.type===Et||t.type===Me&&!Rl(t.children)):!0)?e:null}const ra=e=>e?of(e)?j0(e):ra(e.parent):null,u0=He(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>ra(e.parent),$root:e=>ra(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>zl(e),$forceUpdate:e=>e.f||(e.f=()=>{xa(e.update)}),$nextTick:e=>e.n||(e.n=q1.bind(e.proxy)),$watch:e=>mu.bind(e)}),ar=(e,t)=>e!==Te&&!e.__isScriptSetup&&ke(e,t),J1={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:a,setupState:n,data:r,props:s,accessCache:l,type:c,appContext:f}=e;let p;if(t[0]!=="$"){const o=l[t];if(o!==void 0)switch(o){case 1:return n[t];case 2:return r[t];case 4:return a[t];case 3:return s[t]}else{if(ar(n,t))return l[t]=1,n[t];if(r!==Te&&ke(r,t))return l[t]=2,r[t];if((p=e.propsOptions[0])&&ke(p,t))return l[t]=3,s[t];if(a!==Te&&ke(a,t))return l[t]=4,a[t];na&&(l[t]=0)}}const v=u0[t];let d,u;if(v)return t==="$attrs"&&Oe(e.attrs,"get",""),v(e);if((d=c.__cssModules)&&(d=d[t]))return d;if(a!==Te&&ke(a,t))return l[t]=4,a[t];if(u=f.config.globalProperties,ke(u,t))return u[t]},set({_:e},t,a){const{data:n,setupState:r,ctx:s}=e;return ar(r,t)?(r[t]=a,!0):n!==Te&&ke(n,t)?(n[t]=a,!0):ke(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=a,!0)},has({_:{data:e,setupState:t,accessCache:a,ctx:n,appContext:r,propsOptions:s}},l){let c;return!!a[l]||e!==Te&&ke(e,l)||ar(t,l)||(c=s[0])&&ke(c,l)||ke(n,l)||ke(u0,l)||ke(r.config.globalProperties,l)},defineProperty(e,t,a){return a.get!=null?e._.accessCache[t]=0:ke(a,"value")&&this.set(e,t,a.value,null),Reflect.defineProperty(e,t,a)}};function Ua(e){return ve(e)?e.reduce((t,a)=>(t[a]=null,t),{}):e}let na=!0;function Q1(e){const t=zl(e),a=e.proxy,n=e.ctx;na=!1,t.beforeCreate&&Va(t.beforeCreate,e,"bc");const{data:r,computed:s,methods:l,watch:c,provide:f,inject:p,created:v,beforeMount:d,mounted:u,beforeUpdate:o,updated:h,activated:i,deactivated:g,beforeDestroy:m,beforeUnmount:b,destroyed:x,unmounted:C,render:S,renderTracked:I,renderTriggered:F,errorCaptured:y,serverPrefetch:A,expose:P,inheritAttrs:M,components:N,directives:B,filters:E}=t;if(p&&Z1(p,n,null),l)for(const R in l){const O=l[R];be(O)&&(n[R]=O.bind(a))}if(r){const R=r.call(a,a);Ae(R)&&(e.data=ma(R))}if(na=!0,s)for(const R in s){const O=s[R],w=be(O)?O.bind(a,a):be(O.get)?O.get.bind(a,a):ot,_=!be(O)&&be(O.set)?O.set.bind(a):ot,k=K0({get:w,set:_});Object.defineProperty(n,R,{enumerable:!0,configurable:!0,get:()=>k.value,set:q=>k.value=q})}if(c)for(const R in c)Hl(c[R],n,a,R);if(f){const R=be(f)?f.call(a):f;Reflect.ownKeys(R).forEach(O=>{au(O,R[O])})}v&&Va(v,e,"c");function L(R,O){ve(O)?O.forEach(w=>R(w.bind(a))):O&&R(O.bind(a))}if(L(G1,d),L(Ca,u),L(Y1,o),L($1,h),L(R1,i),L(H1,g),L(K1,y),L(j1,I),L(V1,F),L(W1,b),L(Fl,C),L(U1,A),ve(P))if(P.length){const R=e.exposed||(e.exposed={});P.forEach(O=>{Object.defineProperty(R,O,{get:()=>a[O],set:w=>a[O]=w})})}else e.exposed||(e.exposed={});S&&e.render===ot&&(e.render=S),M!=null&&(e.inheritAttrs=M),N&&(e.components=N),B&&(e.directives=B),A&&ql(e)}function Z1(e,t,a=ot){ve(e)&&(e=ia(e));for(const n in e){const r=e[n];let s;Ae(r)?"default"in r?s=A0(r.from||n,r.default,!0):s=A0(r.from||n):s=A0(r),Re(s)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>s.value,set:l=>s.value=l}):t[n]=s}}function Va(e,t,a){ct(ve(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,a)}function Hl(e,t,a,n){let r=n.includes(".")?tf(a,n):()=>a[n];if(Ne(e)){const s=t[e];be(s)&&gt(r,s)}else if(be(e))gt(r,e.bind(a));else if(Ae(e))if(ve(e))e.forEach(s=>Hl(s,t,a,n));else{const s=be(e.handler)?e.handler.bind(a):t[e.handler];be(s)&&gt(r,s,e)}}function zl(e){const t=e.type,{mixins:a,extends:n}=t,{mixins:r,optionsCache:s,config:{optionMergeStrategies:l}}=e.appContext,c=s.get(t);let f;return c?f=c:!r.length&&!a&&!n?f=t:(f={},r.length&&r.forEach(p=>D0(f,p,l,!0)),D0(f,t,l)),Ae(t)&&s.set(t,f),f}function D0(e,t,a,n=!1){const{mixins:r,extends:s}=t;s&&D0(e,s,a,!0),r&&r.forEach(l=>D0(e,l,a,!0));for(const l in t)if(!(n&&l==="expose")){const c=eu[l]||a&&a[l];e[l]=c?c(e[l],t[l]):t[l]}return e}const eu={data:ja,props:Ka,emits:Ka,methods:o0,computed:o0,beforeCreate:Ge,created:Ge,beforeMount:Ge,mounted:Ge,beforeUpdate:Ge,updated:Ge,beforeDestroy:Ge,beforeUnmount:Ge,destroyed:Ge,unmounted:Ge,activated:Ge,deactivated:Ge,errorCaptured:Ge,serverPrefetch:Ge,components:o0,directives:o0,watch:ru,provide:ja,inject:tu};function ja(e,t){return t?e?function(){return He(be(e)?e.call(this,this):e,be(t)?t.call(this,this):t)}:t:e}function tu(e,t){return o0(ia(e),ia(t))}function ia(e){if(ve(e)){const t={};for(let a=0;a<e.length;a++)t[e[a]]=e[a];return t}return e}function Ge(e,t){return e?[...new Set([].concat(e,t))]:t}function o0(e,t){return e?He(Object.create(null),e,t):t}function Ka(e,t){return e?ve(e)&&ve(t)?[...new Set([...e,...t])]:He(Object.create(null),Ua(e),Ua(t??{})):t}function ru(e,t){if(!e)return t;if(!t)return e;const a=He(Object.create(null),e);for(const n in t)a[n]=Ge(e[n],t[n]);return a}function Gl(){return{app:null,config:{isNativeTag:Wf,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let nu=0;function iu(e,t){return function(n,r=null){be(n)||(n=He({},n)),r!=null&&!Ae(r)&&(r=null);const s=Gl(),l=new WeakSet,c=[];let f=!1;const p=s.app={_uid:nu++,_component:n,_props:r,_container:null,_context:s,_instance:null,version:Ru,get config(){return s.config},set config(v){},use(v,...d){return l.has(v)||(v&&be(v.install)?(l.add(v),v.install(p,...d)):be(v)&&(l.add(v),v(p,...d))),p},mixin(v){return s.mixins.includes(v)||s.mixins.push(v),p},component(v,d){return d?(s.components[v]=d,p):s.components[v]},directive(v,d){return d?(s.directives[v]=d,p):s.directives[v]},mount(v,d,u){if(!f){const o=p._ceVNode||$e(n,r);return o.appContext=s,u===!0?u="svg":u===!1&&(u=void 0),e(o,v,u),f=!0,p._container=v,v.__vue_app__=p,j0(o.component)}},onUnmount(v){c.push(v)},unmount(){f&&(ct(c,p._instance,16),e(null,p._container),delete p._container.__vue_app__)},provide(v,d){return s.provides[v]=d,p},runWithContext(v){const d=Qt;Qt=p;try{return v()}finally{Qt=d}}};return p}}let Qt=null;function au(e,t){if(Fe){let a=Fe.provides;const n=Fe.parent&&Fe.parent.provides;n===a&&(a=Fe.provides=Object.create(n)),a[e]=t}}function A0(e,t,a=!1){const n=Fe||De;if(n||Qt){const r=Qt?Qt._context.provides:n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(r&&e in r)return r[e];if(arguments.length>1)return a&&be(t)?t.call(n&&n.proxy):t}}const Yl={},$l=()=>Object.create(Yl),Wl=e=>Object.getPrototypeOf(e)===Yl;function su(e,t,a,n=!1){const r={},s=$l();e.propsDefaults=Object.create(null),Ul(e,t,r,s);for(const l in e.propsOptions[0])l in r||(r[l]=void 0);a?e.props=n?r:C1(r):e.type.props?e.props=r:e.props=s,e.attrs=s}function ou(e,t,a,n){const{props:r,attrs:s,vnode:{patchFlag:l}}=e,c=Ce(r),[f]=e.propsOptions;let p=!1;if((n||l>0)&&!(l&16)){if(l&8){const v=e.vnode.dynamicProps;for(let d=0;d<v.length;d++){let u=v[d];if(U0(e.emitsOptions,u))continue;const o=t[u];if(f)if(ke(s,u))o!==s[u]&&(s[u]=o,p=!0);else{const h=St(u);r[h]=aa(f,c,h,o,e,!1)}else o!==s[u]&&(s[u]=o,p=!0)}}}else{Ul(e,t,r,s)&&(p=!0);let v;for(const d in c)(!t||!ke(t,d)&&((v=Ft(d))===d||!ke(t,v)))&&(f?a&&(a[d]!==void 0||a[v]!==void 0)&&(r[d]=aa(f,c,d,void 0,e,!0)):delete r[d]);if(s!==c)for(const d in s)(!t||!ke(t,d))&&(delete s[d],p=!0)}p&&pt(e.attrs,"set","")}function Ul(e,t,a,n){const[r,s]=e.propsOptions;let l=!1,c;if(t)for(let f in t){if(c0(f))continue;const p=t[f];let v;r&&ke(r,v=St(f))?!s||!s.includes(v)?a[v]=p:(c||(c={}))[v]=p:U0(e.emitsOptions,f)||(!(f in n)||p!==n[f])&&(n[f]=p,l=!0)}if(s){const f=Ce(a),p=c||Te;for(let v=0;v<s.length;v++){const d=s[v];a[d]=aa(r,f,d,p[d],e,!ke(p,d))}}return l}function aa(e,t,a,n,r,s){const l=e[a];if(l!=null){const c=ke(l,"default");if(c&&n===void 0){const f=l.default;if(l.type!==Function&&!l.skipFactory&&be(f)){const{propsDefaults:p}=r;if(a in p)n=p[a];else{const v=w0(r);n=p[a]=f.call(null,t),v()}}else n=f;r.ce&&r.ce._setProp(a,n)}l[0]&&(s&&!c?n=!1:l[1]&&(n===""||n===Ft(a))&&(n=!0))}return n}const cu=new WeakMap;function Vl(e,t,a=!1){const n=a?cu:t.propsCache,r=n.get(e);if(r)return r;const s=e.props,l={},c=[];let f=!1;if(!be(e)){const v=d=>{f=!0;const[u,o]=Vl(d,t,!0);He(l,u),o&&c.push(...o)};!a&&t.mixins.length&&t.mixins.forEach(v),e.extends&&v(e.extends),e.mixins&&e.mixins.forEach(v)}if(!s&&!f)return Ae(e)&&n.set(e,Vt),Vt;if(ve(s))for(let v=0;v<s.length;v++){const d=St(s[v]);Xa(d)&&(l[d]=Te)}else if(s)for(const v in s){const d=St(v);if(Xa(d)){const u=s[v],o=l[d]=ve(u)||be(u)?{type:u}:He({},u),h=o.type;let i=!1,g=!0;if(ve(h))for(let m=0;m<h.length;++m){const b=h[m],x=be(b)&&b.name;if(x==="Boolean"){i=!0;break}else x==="String"&&(g=!1)}else i=be(h)&&h.name==="Boolean";o[0]=i,o[1]=g,(i||ke(o,"default"))&&c.push(d)}}const p=[l,c];return Ae(e)&&n.set(e,p),p}function Xa(e){return e[0]!=="$"&&!c0(e)}const jl=e=>e[0]==="_"||e==="$stable",ka=e=>ve(e)?e.map(at):[at(e)],lu=(e,t,a)=>{if(t._n)return t;const n=Wt((...r)=>ka(t(...r)),a);return n._c=!1,n},Kl=(e,t,a)=>{const n=e._ctx;for(const r in e){if(jl(r))continue;const s=e[r];if(be(s))t[r]=lu(r,s,n);else if(s!=null){const l=ka(s);t[r]=()=>l}}},Xl=(e,t)=>{const a=ka(t);e.slots.default=()=>a},Jl=(e,t,a)=>{for(const n in t)(a||n!=="_")&&(e[n]=t[n])},fu=(e,t,a)=>{const n=e.slots=$l();if(e.vnode.shapeFlag&32){const r=t._;r?(Jl(n,t,a),a&&ol(n,"_",r,!0)):Kl(t,n)}else t&&Xl(e,t)},uu=(e,t,a)=>{const{vnode:n,slots:r}=e;let s=!0,l=Te;if(n.shapeFlag&32){const c=t._;c?a&&c===1?s=!1:Jl(r,t,a):(s=!t.$stable,Kl(t,r)),l=t}else t&&(Xl(e,t),l={default:1});if(s)for(const c in r)!jl(c)&&l[c]==null&&delete r[c]},Ke=Tu;function hu(e){return du(e)}function du(e,t){const a=z0();a.__VUE__=!0;const{insert:n,remove:r,patchProp:s,createElement:l,createText:c,createComment:f,setText:p,setElementText:v,parentNode:d,nextSibling:u,setScopeId:o=ot,insertStaticContent:h}=e,i=(D,G,$,Q=null,K=null,Z=null,re=void 0,ie=null,ne=!!G.dynamicChildren)=>{if(D===G)return;D&&!s0(D,G)&&(Q=oe(D),q(D,K,Z,!0),D=null),G.patchFlag===-2&&(ne=!1,G.dynamicChildren=null);const{type:te,ref:W,shapeFlag:V}=G;switch(te){case V0:g(D,G,$,Q);break;case Et:m(D,G,$,Q);break;case or:D==null&&b(G,$,Q,re);break;case Me:N(D,G,$,Q,K,Z,re,ie,ne);break;default:V&1?S(D,G,$,Q,K,Z,re,ie,ne):V&6?B(D,G,$,Q,K,Z,re,ie,ne):(V&64||V&128)&&te.process(D,G,$,Q,K,Z,re,ie,ne,ue)}W!=null&&K&&q0(W,D&&D.ref,Z,G||D,!G)},g=(D,G,$,Q)=>{if(D==null)n(G.el=c(G.children),$,Q);else{const K=G.el=D.el;G.children!==D.children&&p(K,G.children)}},m=(D,G,$,Q)=>{D==null?n(G.el=f(G.children||""),$,Q):G.el=D.el},b=(D,G,$,Q)=>{[D.el,D.anchor]=h(D.children,G,$,Q,D.el,D.anchor)},x=({el:D,anchor:G},$,Q)=>{let K;for(;D&&D!==G;)K=u(D),n(D,$,Q),D=K;n(G,$,Q)},C=({el:D,anchor:G})=>{let $;for(;D&&D!==G;)$=u(D),r(D),D=$;r(G)},S=(D,G,$,Q,K,Z,re,ie,ne)=>{G.type==="svg"?re="svg":G.type==="math"&&(re="mathml"),D==null?I(G,$,Q,K,Z,re,ie,ne):A(D,G,K,Z,re,ie,ne)},I=(D,G,$,Q,K,Z,re,ie)=>{let ne,te;const{props:W,shapeFlag:V,transition:H,dirs:j}=D;if(ne=D.el=l(D.type,Z,W&&W.is,W),V&8?v(ne,D.children):V&16&&y(D.children,ne,null,Q,K,sr(D,Z),re,ie),j&&Nt(D,null,Q,"created"),F(ne,D,D.scopeId,re,Q),W){for(const ae in W)ae!=="value"&&!c0(ae)&&s(ne,ae,null,W[ae],Z,Q);"value"in W&&s(ne,"value",null,W.value,Z),(te=W.onVnodeBeforeMount)&&nt(te,Q,D)}j&&Nt(D,null,Q,"beforeMount");const X=pu(K,H);X&&H.beforeEnter(ne),n(ne,G,$),((te=W&&W.onVnodeMounted)||X||j)&&Ke(()=>{te&&nt(te,Q,D),X&&H.enter(ne),j&&Nt(D,null,Q,"mounted")},K)},F=(D,G,$,Q,K)=>{if($&&o(D,$),Q)for(let Z=0;Z<Q.length;Z++)o(D,Q[Z]);if(K){let Z=K.subTree;if(G===Z||nf(Z.type)&&(Z.ssContent===G||Z.ssFallback===G)){const re=K.vnode;F(D,re,re.scopeId,re.slotScopeIds,K.parent)}}},y=(D,G,$,Q,K,Z,re,ie,ne=0)=>{for(let te=ne;te<D.length;te++){const W=D[te]=ie?_t(D[te]):at(D[te]);i(null,W,G,$,Q,K,Z,re,ie)}},A=(D,G,$,Q,K,Z,re)=>{const ie=G.el=D.el;let{patchFlag:ne,dynamicChildren:te,dirs:W}=G;ne|=D.patchFlag&16;const V=D.props||Te,H=G.props||Te;let j;if($&&Lt($,!1),(j=H.onVnodeBeforeUpdate)&&nt(j,$,G,D),W&&Nt(G,D,$,"beforeUpdate"),$&&Lt($,!0),(V.innerHTML&&H.innerHTML==null||V.textContent&&H.textContent==null)&&v(ie,""),te?P(D.dynamicChildren,te,ie,$,Q,sr(G,K),Z):re||O(D,G,ie,null,$,Q,sr(G,K),Z,!1),ne>0){if(ne&16)M(ie,V,H,$,K);else if(ne&2&&V.class!==H.class&&s(ie,"class",null,H.class,K),ne&4&&s(ie,"style",V.style,H.style,K),ne&8){const X=G.dynamicProps;for(let ae=0;ae<X.length;ae++){const se=X[ae],pe=V[se],ce=H[se];(ce!==pe||se==="value")&&s(ie,se,pe,ce,K,$)}}ne&1&&D.children!==G.children&&v(ie,G.children)}else!re&&te==null&&M(ie,V,H,$,K);((j=H.onVnodeUpdated)||W)&&Ke(()=>{j&&nt(j,$,G,D),W&&Nt(G,D,$,"updated")},Q)},P=(D,G,$,Q,K,Z,re)=>{for(let ie=0;ie<G.length;ie++){const ne=D[ie],te=G[ie],W=ne.el&&(ne.type===Me||!s0(ne,te)||ne.shapeFlag&70)?d(ne.el):$;i(ne,te,W,null,Q,K,Z,re,!0)}},M=(D,G,$,Q,K)=>{if(G!==$){if(G!==Te)for(const Z in G)!c0(Z)&&!(Z in $)&&s(D,Z,G[Z],null,K,Q);for(const Z in $){if(c0(Z))continue;const re=$[Z],ie=G[Z];re!==ie&&Z!=="value"&&s(D,Z,ie,re,K,Q)}"value"in $&&s(D,"value",G.value,$.value,K)}},N=(D,G,$,Q,K,Z,re,ie,ne)=>{const te=G.el=D?D.el:c(""),W=G.anchor=D?D.anchor:c("");let{patchFlag:V,dynamicChildren:H,slotScopeIds:j}=G;j&&(ie=ie?ie.concat(j):j),D==null?(n(te,$,Q),n(W,$,Q),y(G.children||[],$,W,K,Z,re,ie,ne)):V>0&&V&64&&H&&D.dynamicChildren?(P(D.dynamicChildren,H,$,K,Z,re,ie),(G.key!=null||K&&G===K.subTree)&&Ql(D,G,!0)):O(D,G,$,W,K,Z,re,ie,ne)},B=(D,G,$,Q,K,Z,re,ie,ne)=>{G.slotScopeIds=ie,D==null?G.shapeFlag&512?K.ctx.activate(G,$,Q,re,ne):E(G,$,Q,K,Z,re,ne):T(D,G,ne)},E=(D,G,$,Q,K,Z,re)=>{const ie=D.component=Nu(D,Q,K);if(Ol(D)&&(ie.ctx.renderer=ue),qu(ie,!1,re),ie.asyncDep){if(K&&K.registerDep(ie,L,re),!D.el){const ne=ie.subTree=$e(Et);m(null,ne,G,$)}}else L(ie,D,G,$,K,Z,re)},T=(D,G,$)=>{const Q=G.component=D.component;if(Cu(D,G,$))if(Q.asyncDep&&!Q.asyncResolved){R(Q,G,$);return}else Q.next=G,Q.update();else G.el=D.el,Q.vnode=G},L=(D,G,$,Q,K,Z,re)=>{const ie=()=>{if(D.isMounted){let{next:V,bu:H,u:j,parent:X,vnode:ae}=D;{const we=Zl(D);if(we){V&&(V.el=ae.el,R(D,V,re)),we.asyncDep.then(()=>{D.isUnmounted||ie()});return}}let se=V,pe;Lt(D,!1),V?(V.el=ae.el,R(D,V,re)):V=ae,H&&E0(H),(pe=V.props&&V.props.onVnodeBeforeUpdate)&&nt(pe,X,V,ae),Lt(D,!0);const ce=Qa(D),he=D.subTree;D.subTree=ce,i(he,ce,d(he.el),oe(he),D,K,Z),V.el=ce.el,se===null&&ku(D,ce.el),j&&Ke(j,K),(pe=V.props&&V.props.onVnodeUpdated)&&Ke(()=>nt(pe,X,V,ae),K)}else{let V;const{el:H,props:j}=G,{bm:X,m:ae,parent:se,root:pe,type:ce}=D,he=Jt(G);Lt(D,!1),X&&E0(X),!he&&(V=j&&j.onVnodeBeforeMount)&&nt(V,se,G),Lt(D,!0);{pe.ce&&pe.ce._injectChildStyle(ce);const we=D.subTree=Qa(D);i(null,we,$,Q,D,K,Z),G.el=we.el}if(ae&&Ke(ae,K),!he&&(V=j&&j.onVnodeMounted)){const we=G;Ke(()=>nt(V,se,we),K)}(G.shapeFlag&256||se&&Jt(se.vnode)&&se.vnode.shapeFlag&256)&&D.a&&Ke(D.a,K),D.isMounted=!0,G=$=Q=null}};D.scope.on();const ne=D.effect=new hl(ie);D.scope.off();const te=D.update=ne.run.bind(ne),W=D.job=ne.runIfDirty.bind(ne);W.i=D,W.id=D.uid,ne.scheduler=()=>xa(W),Lt(D,!0),te()},R=(D,G,$)=>{G.component=D;const Q=D.vnode.props;D.vnode=G,D.next=null,ou(D,G.props,Q,$),uu(D,G.children,$),At(),Wa(D),Mt()},O=(D,G,$,Q,K,Z,re,ie,ne=!1)=>{const te=D&&D.children,W=D?D.shapeFlag:0,V=G.children,{patchFlag:H,shapeFlag:j}=G;if(H>0){if(H&128){_(te,V,$,Q,K,Z,re,ie,ne);return}else if(H&256){w(te,V,$,Q,K,Z,re,ie,ne);return}}j&8?(W&16&&ee(te,K,Z),V!==te&&v($,V)):W&16?j&16?_(te,V,$,Q,K,Z,re,ie,ne):ee(te,K,Z,!0):(W&8&&v($,""),j&16&&y(V,$,Q,K,Z,re,ie,ne))},w=(D,G,$,Q,K,Z,re,ie,ne)=>{D=D||Vt,G=G||Vt;const te=D.length,W=G.length,V=Math.min(te,W);let H;for(H=0;H<V;H++){const j=G[H]=ne?_t(G[H]):at(G[H]);i(D[H],j,$,null,K,Z,re,ie,ne)}te>W?ee(D,K,Z,!0,!1,V):y(G,$,Q,K,Z,re,ie,ne,V)},_=(D,G,$,Q,K,Z,re,ie,ne)=>{let te=0;const W=G.length;let V=D.length-1,H=W-1;for(;te<=V&&te<=H;){const j=D[te],X=G[te]=ne?_t(G[te]):at(G[te]);if(s0(j,X))i(j,X,$,null,K,Z,re,ie,ne);else break;te++}for(;te<=V&&te<=H;){const j=D[V],X=G[H]=ne?_t(G[H]):at(G[H]);if(s0(j,X))i(j,X,$,null,K,Z,re,ie,ne);else break;V--,H--}if(te>V){if(te<=H){const j=H+1,X=j<W?G[j].el:Q;for(;te<=H;)i(null,G[te]=ne?_t(G[te]):at(G[te]),$,X,K,Z,re,ie,ne),te++}}else if(te>H)for(;te<=V;)q(D[te],K,Z,!0),te++;else{const j=te,X=te,ae=new Map;for(te=X;te<=H;te++){const me=G[te]=ne?_t(G[te]):at(G[te]);me.key!=null&&ae.set(me.key,te)}let se,pe=0;const ce=H-X+1;let he=!1,we=0;const xe=new Array(ce);for(te=0;te<ce;te++)xe[te]=0;for(te=j;te<=V;te++){const me=D[te];if(pe>=ce){q(me,K,Z,!0);continue}let Be;if(me.key!=null)Be=ae.get(me.key);else for(se=X;se<=H;se++)if(xe[se-X]===0&&s0(me,G[se])){Be=se;break}Be===void 0?q(me,K,Z,!0):(xe[Be-X]=te+1,Be>=we?we=Be:he=!0,i(me,G[Be],$,null,K,Z,re,ie,ne),pe++)}const ge=he?vu(xe):Vt;for(se=ge.length-1,te=ce-1;te>=0;te--){const me=X+te,Be=G[me],ye=me+1<W?G[me+1].el:Q;xe[te]===0?i(null,Be,$,ye,K,Z,re,ie,ne):he&&(se<0||te!==ge[se]?k(Be,$,ye,2):se--)}}},k=(D,G,$,Q,K=null)=>{const{el:Z,type:re,transition:ie,children:ne,shapeFlag:te}=D;if(te&6){k(D.component.subTree,G,$,Q);return}if(te&128){D.suspense.move(G,$,Q);return}if(te&64){re.move(D,G,$,ue);return}if(re===Me){n(Z,G,$);for(let V=0;V<ne.length;V++)k(ne[V],G,$,Q);n(D.anchor,G,$);return}if(re===or){x(D,G,$);return}if(Q!==2&&te&1&&ie)if(Q===0)ie.beforeEnter(Z),n(Z,G,$),Ke(()=>ie.enter(Z),K);else{const{leave:V,delayLeave:H,afterLeave:j}=ie,X=()=>n(Z,G,$),ae=()=>{V(Z,()=>{X(),j&&j()})};H?H(Z,X,ae):ae()}else n(Z,G,$)},q=(D,G,$,Q=!1,K=!1)=>{const{type:Z,props:re,ref:ie,children:ne,dynamicChildren:te,shapeFlag:W,patchFlag:V,dirs:H,cacheIndex:j}=D;if(V===-2&&(K=!1),ie!=null&&q0(ie,null,$,D,!0),j!=null&&(G.renderCache[j]=void 0),W&256){G.ctx.deactivate(D);return}const X=W&1&&H,ae=!Jt(D);let se;if(ae&&(se=re&&re.onVnodeBeforeUnmount)&&nt(se,G,D),W&6)Y(D.component,$,Q);else{if(W&128){D.suspense.unmount($,Q);return}X&&Nt(D,null,G,"beforeUnmount"),W&64?D.type.remove(D,G,$,ue,Q):te&&!te.hasOnce&&(Z!==Me||V>0&&V&64)?ee(te,G,$,!1,!0):(Z===Me&&V&384||!K&&W&16)&&ee(ne,G,$),Q&&z(D)}(ae&&(se=re&&re.onVnodeUnmounted)||X)&&Ke(()=>{se&&nt(se,G,D),X&&Nt(D,null,G,"unmounted")},$)},z=D=>{const{type:G,el:$,anchor:Q,transition:K}=D;if(G===Me){U($,Q);return}if(G===or){C(D);return}const Z=()=>{r($),K&&!K.persisted&&K.afterLeave&&K.afterLeave()};if(D.shapeFlag&1&&K&&!K.persisted){const{leave:re,delayLeave:ie}=K,ne=()=>re($,Z);ie?ie(D.el,Z,ne):ne()}else Z()},U=(D,G)=>{let $;for(;D!==G;)$=u(D),r(D),D=$;r(G)},Y=(D,G,$)=>{const{bum:Q,scope:K,job:Z,subTree:re,um:ie,m:ne,a:te}=D;Ja(ne),Ja(te),Q&&E0(Q),K.stop(),Z&&(Z.flags|=8,q(re,D,G,$)),ie&&Ke(ie,G),Ke(()=>{D.isUnmounted=!0},G),G&&G.pendingBranch&&!G.isUnmounted&&D.asyncDep&&!D.asyncResolved&&D.suspenseId===G.pendingId&&(G.deps--,G.deps===0&&G.resolve())},ee=(D,G,$,Q=!1,K=!1,Z=0)=>{for(let re=Z;re<D.length;re++)q(D[re],G,$,Q,K)},oe=D=>{if(D.shapeFlag&6)return oe(D.component.subTree);if(D.shapeFlag&128)return D.suspense.next();const G=u(D.anchor||D.el),$=G&&G[I1];return $?u($):G};let J=!1;const fe=(D,G,$)=>{D==null?G._vnode&&q(G._vnode,null,null,!0):i(G._vnode||null,D,G,null,null,null,$),G._vnode=D,J||(J=!0,Wa(),Pl(),J=!1)},ue={p:i,um:q,m:k,r:z,mt:E,mc:y,pc:O,pbc:P,n:oe,o:e};return{render:fe,hydrate:void 0,createApp:iu(fe)}}function sr({type:e,props:t},a){return a==="svg"&&e==="foreignObject"||a==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:a}function Lt({effect:e,job:t},a){a?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function pu(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Ql(e,t,a=!1){const n=e.children,r=t.children;if(ve(n)&&ve(r))for(let s=0;s<n.length;s++){const l=n[s];let c=r[s];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=r[s]=_t(r[s]),c.el=l.el),!a&&c.patchFlag!==-2&&Ql(l,c)),c.type===V0&&(c.el=l.el)}}function vu(e){const t=e.slice(),a=[0];let n,r,s,l,c;const f=e.length;for(n=0;n<f;n++){const p=e[n];if(p!==0){if(r=a[a.length-1],e[r]<p){t[n]=r,a.push(n);continue}for(s=0,l=a.length-1;s<l;)c=s+l>>1,e[a[c]]<p?s=c+1:l=c;p<e[a[s]]&&(s>0&&(t[n]=a[s-1]),a[s]=n)}}for(s=a.length,l=a[s-1];s-- >0;)a[s]=l,l=t[l];return a}function Zl(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Zl(t)}function Ja(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const gu=Symbol.for("v-scx"),bu=()=>A0(gu);function gt(e,t,a){return ef(e,t,a)}function ef(e,t,a=Te){const{immediate:n,deep:r,flush:s,once:l}=a,c=He({},a),f=t&&n||!t&&s!=="post";let p;if(b0){if(s==="sync"){const o=bu();p=o.__watcherHandles||(o.__watcherHandles=[])}else if(!f){const o=()=>{};return o.stop=ot,o.resume=ot,o.pause=ot,o}}const v=Fe;c.call=(o,h,i)=>ct(o,v,h,i);let d=!1;s==="post"?c.scheduler=o=>{Ke(o,v&&v.suspense)}:s!=="sync"&&(d=!0,c.scheduler=(o,h)=>{h?o():xa(o)}),c.augmentJob=o=>{t&&(o.flags|=4),d&&(o.flags|=2,v&&(o.id=v.uid,o.i=v))};const u=N1(e,t,c);return b0&&(p?p.push(u):f&&u()),u}function mu(e,t,a){const n=this.proxy,r=Ne(e)?e.includes(".")?tf(n,e):()=>n[e]:e.bind(n,n);let s;be(t)?s=t:(s=t.handler,a=t);const l=w0(this),c=ef(r,s.bind(n),a);return l(),c}function tf(e,t){const a=t.split(".");return()=>{let n=e;for(let r=0;r<a.length&&n;r++)n=n[a[r]];return n}}const yu=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${St(t)}Modifiers`]||e[`${Ft(t)}Modifiers`];function wu(e,t,...a){if(e.isUnmounted)return;const n=e.vnode.props||Te;let r=a;const s=t.startsWith("update:"),l=s&&yu(n,t.slice(7));l&&(l.trim&&(r=a.map(v=>Ne(v)?v.trim():v)),l.number&&(r=a.map(Xi)));let c,f=n[c=er(t)]||n[c=er(St(t))];!f&&s&&(f=n[c=er(Ft(t))]),f&&ct(f,e,6,r);const p=n[c+"Once"];if(p){if(!e.emitted)e.emitted={};else if(e.emitted[c])return;e.emitted[c]=!0,ct(p,e,6,r)}}function rf(e,t,a=!1){const n=t.emitsCache,r=n.get(e);if(r!==void 0)return r;const s=e.emits;let l={},c=!1;if(!be(e)){const f=p=>{const v=rf(p,t,!0);v&&(c=!0,He(l,v))};!a&&t.mixins.length&&t.mixins.forEach(f),e.extends&&f(e.extends),e.mixins&&e.mixins.forEach(f)}return!s&&!c?(Ae(e)&&n.set(e,null),null):(ve(s)?s.forEach(f=>l[f]=null):He(l,s),Ae(e)&&n.set(e,l),l)}function U0(e,t){return!e||!F0(t)?!1:(t=t.slice(2).replace(/Once$/,""),ke(e,t[0].toLowerCase()+t.slice(1))||ke(e,Ft(t))||ke(e,t))}function Qa(e){const{type:t,vnode:a,proxy:n,withProxy:r,propsOptions:[s],slots:l,attrs:c,emit:f,render:p,renderCache:v,props:d,data:u,setupState:o,ctx:h,inheritAttrs:i}=e,g=L0(e);let m,b;try{if(a.shapeFlag&4){const C=r||n,S=C;m=at(p.call(S,C,v,d,o,u,h)),b=c}else{const C=t;m=at(C.length>1?C(d,{attrs:c,slots:l,emit:f}):C(d,null)),b=t.props?c:xu(c)}}catch(C){h0.length=0,Y0(C,e,1),m=$e(Et)}let x=m;if(b&&i!==!1){const C=Object.keys(b),{shapeFlag:S}=x;C.length&&S&7&&(s&&C.some(la)&&(b=_u(b,s)),x=e0(x,b,!1,!0))}return a.dirs&&(x=e0(x,null,!1,!0),x.dirs=x.dirs?x.dirs.concat(a.dirs):a.dirs),a.transition&&_a(x,a.transition),m=x,L0(g),m}const xu=e=>{let t;for(const a in e)(a==="class"||a==="style"||F0(a))&&((t||(t={}))[a]=e[a]);return t},_u=(e,t)=>{const a={};for(const n in e)(!la(n)||!(n.slice(9)in t))&&(a[n]=e[n]);return a};function Cu(e,t,a){const{props:n,children:r,component:s}=e,{props:l,children:c,patchFlag:f}=t,p=s.emitsOptions;if(t.dirs||t.transition)return!0;if(a&&f>=0){if(f&1024)return!0;if(f&16)return n?Za(n,l,p):!!l;if(f&8){const v=t.dynamicProps;for(let d=0;d<v.length;d++){const u=v[d];if(l[u]!==n[u]&&!U0(p,u))return!0}}}else return(r||c)&&(!c||!c.$stable)?!0:n===l?!1:n?l?Za(n,l,p):!0:!!l;return!1}function Za(e,t,a){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let r=0;r<n.length;r++){const s=n[r];if(t[s]!==e[s]&&!U0(a,s))return!0}return!1}function ku({vnode:e,parent:t},a){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=a,t=t.parent;else break}}const nf=e=>e.__isSuspense;function Tu(e,t){t&&t.pendingBranch?ve(e)?t.effects.push(...e):t.effects.push(e):O1(e)}const Me=Symbol.for("v-fgt"),V0=Symbol.for("v-txt"),Et=Symbol.for("v-cmt"),or=Symbol.for("v-stc"),h0=[];let Je=null;function _e(e=!1){h0.push(Je=e?null:[])}function Su(){h0.pop(),Je=h0[h0.length-1]||null}let g0=1;function es(e,t=!1){g0+=e,e<0&&Je&&t&&(Je.hasOnce=!0)}function af(e){return e.dynamicChildren=g0>0?Je||Vt:null,Su(),g0>0&&Je&&Je.push(e),e}function Se(e,t,a,n,r,s){return af(le(e,t,a,n,r,s,!0))}function O0(e,t,a,n,r){return af($e(e,t,a,n,r,!0))}function Ta(e){return e?e.__v_isVNode===!0:!1}function s0(e,t){return e.type===t.type&&e.key===t.key}const sf=({key:e})=>e??null,M0=({ref:e,ref_key:t,ref_for:a})=>(typeof e=="number"&&(e=""+e),e!=null?Ne(e)||Re(e)||be(e)?{i:De,r:e,k:t,f:!!a}:e:null);function le(e,t=null,a=null,n=0,r=null,s=e===Me?0:1,l=!1,c=!1){const f={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&sf(t),ref:t&&M0(t),scopeId:Ll,slotScopeIds:null,children:a,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:n,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:De};return c?(Ea(f,a),s&128&&e.normalize(f)):a&&(f.shapeFlag|=Ne(a)?8:16),g0>0&&!l&&Je&&(f.patchFlag>0||s&6)&&f.patchFlag!==32&&Je.push(f),f}const $e=Eu;function Eu(e,t=null,a=null,n=0,r=null,s=!1){if((!e||e===X1)&&(e=Et),Ta(e)){const c=e0(e,t,!0);return a&&Ea(c,a),g0>0&&!s&&Je&&(c.shapeFlag&6?Je[Je.indexOf(e)]=c:Je.push(c)),c.patchFlag=-2,c}if(Fu(e)&&(e=e.__vccOpts),t){t=Au(t);let{class:c,style:f}=t;c&&!Ne(c)&&(t.class=dt(c)),Ae(f)&&(wa(f)&&!ve(f)&&(f=He({},f)),t.style=ha(f))}const l=Ne(e)?1:nf(e)?128:F1(e)?64:Ae(e)?4:be(e)?2:0;return le(e,t,a,n,r,l,s,!0)}function Au(e){return e?wa(e)||Wl(e)?He({},e):e:null}function e0(e,t,a=!1,n=!1){const{props:r,ref:s,patchFlag:l,children:c,transition:f}=e,p=t?Mu(r||{},t):r,v={__v_isVNode:!0,__v_skip:!0,type:e.type,props:p,key:p&&sf(p),ref:t&&t.ref?a&&s?ve(s)?s.concat(M0(t)):[s,M0(t)]:M0(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:c,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Me?l===-1?16:l|16:l,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:f,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&e0(e.ssContent),ssFallback:e.ssFallback&&e0(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return f&&n&&_a(v,f.clone(v)),v}function Sa(e=" ",t=0){return $e(V0,null,e,t)}function qt(e="",t=!1){return t?(_e(),O0(Et,null,e)):$e(Et,null,e)}function at(e){return e==null||typeof e=="boolean"?$e(Et):ve(e)?$e(Me,null,e.slice()):Ta(e)?_t(e):$e(V0,null,String(e))}function _t(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:e0(e)}function Ea(e,t){let a=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(ve(t))a=16;else if(typeof t=="object")if(n&65){const r=t.default;r&&(r._c&&(r._d=!1),Ea(e,r()),r._c&&(r._d=!0));return}else{a=32;const r=t._;!r&&!Wl(t)?t._ctx=De:r===3&&De&&(De.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else be(t)?(t={default:t,_ctx:De},a=32):(t=String(t),n&64?(a=16,t=[Sa(t)]):a=8);e.children=t,e.shapeFlag|=a}function Mu(...e){const t={};for(let a=0;a<e.length;a++){const n=e[a];for(const r in n)if(r==="class")t.class!==n.class&&(t.class=dt([t.class,n.class]));else if(r==="style")t.style=ha([t.style,n.style]);else if(F0(r)){const s=t[r],l=n[r];l&&s!==l&&!(ve(s)&&s.includes(l))&&(t[r]=s?[].concat(s,l):l)}else r!==""&&(t[r]=n[r])}return t}function nt(e,t,a,n=null){ct(e,t,7,[a,n])}const Bu=Gl();let Pu=0;function Nu(e,t,a){const n=e.type,r=(t?t.appContext:e.appContext)||Bu,s={uid:Pu++,vnode:e,type:n,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new n1(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Vl(n,r),emitsOptions:rf(n,r),emit:null,emitted:null,propsDefaults:Te,inheritAttrs:n.inheritAttrs,ctx:Te,data:Te,props:Te,attrs:Te,slots:Te,refs:Te,setupState:Te,setupContext:null,suspense:a,suspenseId:a?a.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=wu.bind(null,s),e.ce&&e.ce(s),s}let Fe=null;const Lu=()=>Fe||De;let I0,sa;{const e=z0(),t=(a,n)=>{let r;return(r=e[a])||(r=e[a]=[]),r.push(n),s=>{r.length>1?r.forEach(l=>l(s)):r[0](s)}};I0=t("__VUE_INSTANCE_SETTERS__",a=>Fe=a),sa=t("__VUE_SSR_SETTERS__",a=>b0=a)}const w0=e=>{const t=Fe;return I0(e),e.scope.on(),()=>{e.scope.off(),I0(t)}},ts=()=>{Fe&&Fe.scope.off(),I0(null)};function of(e){return e.vnode.shapeFlag&4}let b0=!1;function qu(e,t=!1,a=!1){t&&sa(t);const{props:n,children:r}=e.vnode,s=of(e);su(e,n,s,t),fu(e,r,a);const l=s?Du(e,t):void 0;return t&&sa(!1),l}function Du(e,t){const a=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,J1);const{setup:n}=a;if(n){At();const r=e.setupContext=n.length>1?Iu(e):null,s=w0(e),l=y0(n,e,0,[e.props,r]),c=nl(l);if(Mt(),s(),(c||e.sp)&&!Jt(e)&&ql(e),c){if(l.then(ts,ts),t)return l.then(f=>{rs(e,f)}).catch(f=>{Y0(f,e,0)});e.asyncDep=l}else rs(e,l)}else cf(e)}function rs(e,t,a){be(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Ae(t)&&(e.setupState=Al(t)),cf(e)}function cf(e,t,a){const n=e.type;e.render||(e.render=n.render||ot);{const r=w0(e);At();try{Q1(e)}finally{Mt(),r()}}}const Ou={get(e,t){return Oe(e,"get",""),e[t]}};function Iu(e){const t=a=>{e.exposed=a||{}};return{attrs:new Proxy(e.attrs,Ou),slots:e.slots,emit:e.emit,expose:t}}function j0(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Al(k1(e.exposed)),{get(t,a){if(a in t)return t[a];if(a in u0)return u0[a](e)},has(t,a){return a in t||a in u0}})):e.proxy}function Fu(e){return be(e)&&"__vccOpts"in e}const K0=(e,t)=>B1(e,t,b0),Ru="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let oa;const ns=typeof window<"u"&&window.trustedTypes;if(ns)try{oa=ns.createPolicy("vue",{createHTML:e=>e})}catch{}const lf=oa?e=>oa.createHTML(e):e=>e,Hu="http://www.w3.org/2000/svg",zu="http://www.w3.org/1998/Math/MathML",ht=typeof document<"u"?document:null,is=ht&&ht.createElement("template"),Gu={insert:(e,t,a)=>{t.insertBefore(e,a||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,a,n)=>{const r=t==="svg"?ht.createElementNS(Hu,e):t==="mathml"?ht.createElementNS(zu,e):a?ht.createElement(e,{is:a}):ht.createElement(e);return e==="select"&&n&&n.multiple!=null&&r.setAttribute("multiple",n.multiple),r},createText:e=>ht.createTextNode(e),createComment:e=>ht.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>ht.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,a,n,r,s){const l=a?a.previousSibling:t.lastChild;if(r&&(r===s||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),a),!(r===s||!(r=r.nextSibling)););else{is.innerHTML=lf(n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e);const c=is.content;if(n==="svg"||n==="mathml"){const f=c.firstChild;for(;f.firstChild;)c.appendChild(f.firstChild);c.removeChild(f)}t.insertBefore(c,a)}return[l?l.nextSibling:t.firstChild,a?a.previousSibling:t.lastChild]}},Yu=Symbol("_vtc");function $u(e,t,a){const n=e[Yu];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):a?e.setAttribute("class",t):e.className=t}const as=Symbol("_vod"),Wu=Symbol("_vsh"),Uu=Symbol(""),Vu=/(^|;)\s*display\s*:/;function ju(e,t,a){const n=e.style,r=Ne(a);let s=!1;if(a&&!r){if(t)if(Ne(t))for(const l of t.split(";")){const c=l.slice(0,l.indexOf(":")).trim();a[c]==null&&B0(n,c,"")}else for(const l in t)a[l]==null&&B0(n,l,"");for(const l in a)l==="display"&&(s=!0),B0(n,l,a[l])}else if(r){if(t!==a){const l=n[Uu];l&&(a+=";"+l),n.cssText=a,s=Vu.test(a)}}else t&&e.removeAttribute("style");as in e&&(e[as]=s?n.display:"",e[Wu]&&(n.display="none"))}const ss=/\s*!important$/;function B0(e,t,a){if(ve(a))a.forEach(n=>B0(e,t,n));else if(a==null&&(a=""),t.startsWith("--"))e.setProperty(t,a);else{const n=Ku(e,t);ss.test(a)?e.setProperty(Ft(n),a.replace(ss,""),"important"):e[n]=a}}const os=["Webkit","Moz","ms"],cr={};function Ku(e,t){const a=cr[t];if(a)return a;let n=St(t);if(n!=="filter"&&n in e)return cr[t]=n;n=sl(n);for(let r=0;r<os.length;r++){const s=os[r]+n;if(s in e)return cr[t]=s}return t}const cs="http://www.w3.org/1999/xlink";function ls(e,t,a,n,r,s=t1(t)){n&&t.startsWith("xlink:")?a==null?e.removeAttributeNS(cs,t.slice(6,t.length)):e.setAttributeNS(cs,t,a):a==null||s&&!cl(a)?e.removeAttribute(t):e.setAttribute(t,s?"":rt(a)?String(a):a)}function fs(e,t,a,n,r){if(t==="innerHTML"||t==="textContent"){a!=null&&(e[t]=t==="innerHTML"?lf(a):a);return}const s=e.tagName;if(t==="value"&&s!=="PROGRESS"&&!s.includes("-")){const c=s==="OPTION"?e.getAttribute("value")||"":e.value,f=a==null?e.type==="checkbox"?"on":"":String(a);(c!==f||!("_value"in e))&&(e.value=f),a==null&&e.removeAttribute(t),e._value=a;return}let l=!1;if(a===""||a==null){const c=typeof e[t];c==="boolean"?a=cl(a):a==null&&c==="string"?(a="",l=!0):c==="number"&&(a=0,l=!0)}try{e[t]=a}catch{}l&&e.removeAttribute(r||t)}function Ct(e,t,a,n){e.addEventListener(t,a,n)}function Xu(e,t,a,n){e.removeEventListener(t,a,n)}const us=Symbol("_vei");function Ju(e,t,a,n,r=null){const s=e[us]||(e[us]={}),l=s[t];if(n&&l)l.value=n;else{const[c,f]=Qu(t);if(n){const p=s[t]=th(n,r);Ct(e,c,p,f)}else l&&(Xu(e,c,l,f),s[t]=void 0)}}const hs=/(?:Once|Passive|Capture)$/;function Qu(e){let t;if(hs.test(e)){t={};let n;for(;n=e.match(hs);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Ft(e.slice(2)),t]}let lr=0;const Zu=Promise.resolve(),eh=()=>lr||(Zu.then(()=>lr=0),lr=Date.now());function th(e,t){const a=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=a.attached)return;ct(rh(n,a.value),t,5,[n])};return a.value=e,a.attached=eh(),a}function rh(e,t){if(ve(t)){const a=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{a.call(e),e._stopped=!0},t.map(n=>r=>!r._stopped&&n&&n(r))}else return t}const ds=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,nh=(e,t,a,n,r,s)=>{const l=r==="svg";t==="class"?$u(e,n,l):t==="style"?ju(e,a,n):F0(t)?la(t)||Ju(e,t,a,n,s):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):ih(e,t,n,l))?(fs(e,t,n),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&ls(e,t,n,l,s,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Ne(n))?fs(e,St(t),n,s,t):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),ls(e,t,n,l))};function ih(e,t,a,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&ds(t)&&be(a));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const r=e.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return ds(t)&&Ne(a)?!1:t in e}const t0=e=>{const t=e.props["onUpdate:modelValue"]||!1;return ve(t)?a=>E0(t,a):t};function ah(e){e.target.composing=!0}function ps(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const bt=Symbol("_assign"),fr={created(e,{modifiers:{lazy:t,trim:a,number:n}},r){e[bt]=t0(r);const s=n||r.props&&r.props.type==="number";Ct(e,t?"change":"input",l=>{if(l.target.composing)return;let c=e.value;a&&(c=c.trim()),s&&(c=Xi(c)),e[bt](c)}),a&&Ct(e,"change",()=>{e.value=e.value.trim()}),t||(Ct(e,"compositionstart",ah),Ct(e,"compositionend",ps),Ct(e,"change",ps))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:a,modifiers:{lazy:n,trim:r,number:s}},l){if(e[bt]=t0(l),e.composing)return;const c=(s||e.type==="number")&&!/^0\d/.test(e.value)?Xi(e.value):e.value,f=t??"";c!==f&&(document.activeElement===e&&e.type!=="range"&&(n&&t===a||r&&e.value.trim()===f)||(e.value=f))}},ff={deep:!0,created(e,t,a){e[bt]=t0(a),Ct(e,"change",()=>{const n=e._modelValue,r=uf(e),s=e.checked,l=e[bt];if(ve(n)){const c=ll(n,r),f=c!==-1;if(s&&!f)l(n.concat(r));else if(!s&&f){const p=[...n];p.splice(c,1),l(p)}}else if(R0(n)){const c=new Set(n);s?c.add(r):c.delete(r),l(c)}else l(hf(e,s))})},mounted:vs,beforeUpdate(e,t,a){e[bt]=t0(a),vs(e,t,a)}};function vs(e,{value:t,oldValue:a},n){e._modelValue=t;let r;if(ve(t))r=ll(t,n.props.value)>-1;else if(R0(t))r=t.has(n.props.value);else{if(t===a)return;r=Zt(t,hf(e,!0))}e.checked!==r&&(e.checked=r)}const sh={created(e,{value:t},a){e.checked=Zt(t,a.props.value),e[bt]=t0(a),Ct(e,"change",()=>{e[bt](uf(e))})},beforeUpdate(e,{value:t,oldValue:a},n){e[bt]=t0(n),t!==a&&(e.checked=Zt(t,n.props.value))}};function uf(e){return"_value"in e?e._value:e.value}function hf(e,t){const a=t?"_trueValue":"_falseValue";return a in e?e[a]:t}const oh=He({patchProp:nh},Gu);let gs;function ch(){return gs||(gs=hu(oh))}const lh=(...e)=>{const t=ch().createApp(...e),{mount:a}=t;return t.mount=n=>{const r=uh(n);if(!r)return;const s=t._component;!be(s)&&!s.render&&!s.template&&(s.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const l=a(r,!1,fh(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),l},t};function fh(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function uh(e){return Ne(e)?document.querySelector(e):e}const X0=(e,t)=>{const a=e.__vccOpts||e;for(const[n,r]of t)a[n]=r;return a},hh={class:"virtual-keyboard"},dh={class:"tabs-nav"},ph=["onClick"],vh={class:"tabs-content"},gh={key:0,class:"tab-panel"},bh={key:1,class:"tab-panel"},mh={key:2,class:"tab-panel"},yh={key:3,class:"tab-panel"},wh={key:4,class:"tab-panel"},xh={key:5,class:"tab-panel"},_h={key:6,class:"tab-panel"},Ch={__name:"mutiKeyboard",setup(e){const t=et("input1"),a=[{id:"input1",name:"方式一"},{id:"input2",name:"方式二"},{id:"input3",name:"方式三"},{id:"input4",name:"方式四"},{id:"input5",name:"方式五"},{id:"input6",name:"方式六"},{id:"input9",name:"更多功能開發中..."}];return(n,r)=>(_e(),Se("div",hh,[le("div",dh,[(_e(),Se(Me,null,kt(a,s=>le("button",{key:s.id,class:dt(["tab-button",{active:t.value===s.id}]),onClick:l=>t.value=s.id},st(s.name),11,ph)),64))]),le("div",vh,[t.value==="input1"?(_e(),Se("div",gh,[Yt(n.$slots,"input1",{},void 0)])):qt("",!0),t.value==="input2"?(_e(),Se("div",bh,[Yt(n.$slots,"input2",{},void 0)])):qt("",!0),t.value==="input3"?(_e(),Se("div",mh,[Yt(n.$slots,"input3",{},void 0)])):qt("",!0),t.value==="input4"?(_e(),Se("div",yh,[Yt(n.$slots,"input4",{},void 0)])):qt("",!0),t.value==="input5"?(_e(),Se("div",wh,[Yt(n.$slots,"input5",{},void 0)])):qt("",!0),t.value==="input6"?(_e(),Se("div",xh,[Yt(n.$slots,"input6",{},void 0)])):qt("",!0),t.value==="input9"?(_e(),Se("div",_h,r[0]||(r[0]=[le("p",null,"TODO:",-1),le("p",null,"記得把Tab標題，弄成可以透過插槽提供",-1),le("p",null,"節奏搜尋",-1),le("p",null,"鍵盤圖片",-1),le("p",null,"判斷換行",-1)]))):qt("",!0)])]))}},kh=X0(Ch,[["__scopeId","data-v-4261fa82"]]),Th={class:"keyboard-container"},Sh={class:"current-value"},Eh={class:"keyboard"},Ah={class:"keyboard-row row-1"},Mh=["onClick"],Bh={class:"keyboard-row row-2"},Ph=["onClick"],Nh={class:"keyboard-row row-3"},Lh=["onClick"],qh={class:"keyboard-row row-4"},Dh=["onClick"],Oh={__name:"keyboard",emits:["keyPress"],setup(e,{emit:t}){const a=et(!1),n=[[{id:"1/4",label:"1/4",value:"B/4"},{id:"1/2",label:"1/2",value:"B/2"},{id:"1",label:"1",value:"B/1"}],[{id:"1/32",label:"8*1/32",value:"B/32B/32B/32B/32B/32B/32B/32B/32"},{id:"1/16",label:"4*1/16",value:"B/16B/16B/16B/16"},{id:"1/8",label:"2*1/8",value:"B/8B/8"}],[{id:"3/16+1/16",label:"3/16+1/16",value:"B/8>B/8"},{id:"1/16+3/16",label:"1/16+3/16",value:"B/8<B/8"}],[{id:"back",label:"back",value:"back"},{id:"bar",label:"|",value:"|"},{id:"clear",label:"clear",value:"clear"}]],r=[[{id:"1/12",label:"3*1/12",value:"(3:2B/8B/8B/8"},{id:"1/20",label:"5*1/20",value:"(5:2B/16B/16B/16B/16B/16"},{id:"1/24",label:"6*1/24",value:"(6:4B/16B/16B/16B/16B/16B/16"}],[{id:"1/24+1/8",label:"1/24+1/8",value:"(3B/16B/16B/16B/8"},{id:"1/8+1/24",label:"1/8+1/24",value:"B/8(3B/16B/16B/16"}],[{id:"back",label:"back",value:"back"},{id:"clear-bar",label:"clear",value:"clear"}]],s=K0(()=>a.value?r:n),l=()=>{a.value=!a.value},c=t,f=p=>{c("keyPress",p)};return(p,v)=>(_e(),Se("div",Th,[le("div",Sh,st(a.value?"分節奏":"倍節奏"),1),le("div",Eh,[le("div",Ah,[(_e(!0),Se(Me,null,kt(a.value?r[0]:n[0],d=>(_e(),Se("button",{key:d.id,onClick:u=>f(d.value),class:dt({"special-key":d.special})},st(d.label),11,Mh))),128))]),le("div",Bh,[(_e(!0),Se(Me,null,kt(a.value?r[1]:n[1],d=>(_e(),Se("button",{key:d.id,onClick:u=>f(d.value),class:dt({"special-key":d.special})},st(d.label),11,Ph))),128))]),le("div",Nh,[(_e(!0),Se(Me,null,kt(a.value?r[2]:n[2],d=>(_e(),Se("button",{key:d.id,onClick:u=>f(d.value),class:dt({"special-key":d.special})},st(d.label),11,Lh))),128))]),le("div",qh,[(_e(!0),Se(Me,null,kt(s.value[3],d=>(_e(),Se("button",{key:d.id,onClick:u=>f(d.value),class:dt({"special-key":d.special,"wide-key":d.wide})},st(d.label),11,Dh))),128))]),le("button",{class:dt(["shift-key",{active:a.value}]),onClick:l},"Shift",2)])]))}},Ih=X0(Oh,[["__scopeId","data-v-95d0938d"]]),Fh={class:"note-controls"},Rh=$0({__name:"keyboardLagacy",emits:["keyPress"],setup(e,{emit:t}){const a=t,n=l=>{a("keyPress",l)},r=()=>{a("keyPress","clear")},s=()=>{a("keyPress","deleteLast")};return(l,c)=>(_e(),Se("div",Fh,[le("button",{onClick:c[0]||(c[0]=f=>r())},"清除"),le("button",{onClick:c[1]||(c[1]=f=>s())},"刪除最後一個元素"),c[25]||(c[25]=le("br",null,null,-1)),le("button",{onClick:c[2]||(c[2]=f=>n("B"))},"全音符"),le("button",{onClick:c[3]||(c[3]=f=>n("B/2"))},"二分音符"),le("button",{onClick:c[4]||(c[4]=f=>n("B/4"))},"四分音符"),c[26]||(c[26]=le("br",null,null,-1)),le("button",{onClick:c[5]||(c[5]=f=>n("B/8"))},"八分音符"),le("button",{onClick:c[6]||(c[6]=f=>n("B/16"))},"十六分音符"),le("button",{onClick:c[7]||(c[7]=f=>n("B/32"))},"三十二分音符"),c[27]||(c[27]=le("br",null,null,-1)),le("button",{onClick:c[8]||(c[8]=f=>n("B/8B/8"))},"八分音符組"),le("button",{onClick:c[9]||(c[9]=f=>n("B/16B/16B/16B/16"))},"十六分音符組"),le("button",{onClick:c[10]||(c[10]=f=>n("B/32B/32B/32B/32B/32B/32B/32B/32"))},"三十二分音符組"),c[28]||(c[28]=le("br",null,null,-1)),le("button",{onClick:c[11]||(c[11]=f=>n("|"))},"小節線"),le("button",{onClick:c[12]||(c[12]=f=>n("||"))},"雙小節線"),le("button",{onClick:c[13]||(c[13]=f=>n("]"))},"結束"),le("button",{onClick:c[14]||(c[14]=f=>n(`
`))},"換行"),c[29]||(c[29]=le("h3",null,"Test Time Signature Change",-1)),le("button",{onClick:c[15]||(c[15]=f=>n("[M:3/4]"))},"3/4"),le("button",{onClick:c[16]||(c[16]=f=>n("[M:5/4]"))},"5/4"),le("button",{onClick:c[17]||(c[17]=f=>n("[M:6/4]"))},"6/4"),c[30]||(c[30]=le("h3",null,"Test Tempo Change",-1)),le("button",{onClick:c[18]||(c[18]=f=>n("[Q:1/4=60]"))},"1/4=60"),le("button",{onClick:c[19]||(c[19]=f=>n("[Q:1/4=120]"))},"1/4=120"),c[31]||(c[31]=le("h3",null,"tuplet group",-1)),le("button",{onClick:c[20]||(c[20]=f=>n("(3:2B/8B/8B/8"))},"12分"),le("button",{onClick:c[21]||(c[21]=f=>n("(5:4B/8B/8B/8B/8B/8"))},"10分"),le("button",{onClick:c[22]||(c[22]=f=>n("(5:4B/16B/16B/16B/16B/16"))},"20分"),le("button",{onClick:c[23]||(c[23]=f=>n("(7:4B/8B/8B/8B/8B/8B/8B/8"))},"14分"),le("button",{onClick:c[24]||(c[24]=f=>n("(7:4B/16B/16B/16B/16B/16B/16B/16"))},"28分")]))}});function Hh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ur,bs;function zh(){if(bs)return ur;bs=1;var e="6.5.2";return ur=e,ur}var hr,ms;function Aa(){if(ms)return hr;ms=1;var e=function(a,n){var r=this;if(n||(n={}),r.qpm=n.qpm?parseInt(n.qpm,10):null,!r.qpm){var s=a.metaText?a.metaText.tempo:null;r.qpm=a.getBpm(s)}r.extraMeasuresAtBeginning=n.extraMeasuresAtBeginning?parseInt(n.extraMeasuresAtBeginning,10):0,r.beatCallback=n.beatCallback,r.eventCallback=n.eventCallback,r.lineEndCallback=n.lineEndCallback,r.lineEndAnticipation=n.lineEndAnticipation?parseInt(n.lineEndAnticipation,10):0,r.beatSubdivisions=n.beatSubdivisions?parseInt(n.beatSubdivisions,10):1,r.joggerTimer=null,r.replaceTarget=function(c){r.noteTimings=c.setTiming(r.qpm,r.extraMeasuresAtBeginning),c.noteTimings.length===0&&(r.noteTimings=c.setTiming(0,0)),r.lineEndCallback&&(r.lineEndTimings=t(c.noteTimings,r.lineEndAnticipation)),r.startTime=null,r.currentBeat=0,r.currentEvent=0,r.currentLine=0,r.currentTime=0,r.isPaused=!1,r.isRunning=!1,r.pausedPercent=null,r.justUnpaused=!1,r.newSeekPercent=0,r.lastTimestamp=0,r.noteTimings.length!==0&&(r.millisecondsPerBeat=1e3/(r.qpm/60)/r.beatSubdivisions,r.lastMoment=r.noteTimings[r.noteTimings.length-1].milliseconds,r.totalBeats=Math.round(r.lastMoment/r.millisecondsPerBeat))},r.replaceTarget(a),r.doTiming=function(c){if(r.lastTimestamp!==c&&(r.lastTimestamp=c,r.startTime||(r.startTime=c),!r.isPaused&&r.isRunning)){for(r.currentTime=c-r.startTime,r.currentTime+=16;r.noteTimings.length>r.currentEvent&&r.noteTimings[r.currentEvent].milliseconds<r.currentTime;){if(r.eventCallback&&r.noteTimings[r.currentEvent].type==="event"){var f=r.startTime;r.eventCallback(r.noteTimings[r.currentEvent]),f!==r.startTime&&(r.currentTime=c-r.startTime)}r.currentEvent++}if(r.lineEndCallback&&r.lineEndTimings.length>r.currentLine&&r.lineEndTimings[r.currentLine].milliseconds<r.currentTime&&r.currentEvent<r.noteTimings.length){var p=r.noteTimings[r.currentEvent].milliseconds===r.currentTime?r.noteTimings[r.currentEvent]:r.noteTimings[r.currentEvent-1];r.lineEndCallback(r.lineEndTimings[r.currentLine],p,{line:r.currentLine,endTimings:r.lineEndTimings,currentTime:r.currentTime}),r.currentLine++}if(r.currentTime<r.lastMoment){if(requestAnimationFrame(r.doTiming),r.currentBeat*r.millisecondsPerBeat<r.currentTime){var v=r.doBeatCallback(c);v!==null&&(r.currentTime=v)}}else if(r.currentBeat<=r.totalBeats&&r.beatCallback){var d=r.doBeatCallback(c);d!==null&&(r.currentTime=d),requestAnimationFrame(r.doTiming)}if(r.currentTime>=r.lastMoment)if(r.eventCallback){var u=r.eventCallback(null);r.shouldStop(u).then(function(o){o&&r.stop()})}else r.stop()}},r.shouldStop=function(c){return new Promise(function(f){if(!c)return f(!0);if(c==="continue")return f(!1);c.then&&c.then(function(p){f(p!=="continue")})})},r.doBeatCallback=function(c){if(r.beatCallback){for(var f=r.currentEvent;f<r.noteTimings.length&&r.noteTimings[f].left===null;)f++;var p,v;if(f<r.noteTimings.length){for(p=r.noteTimings[f].milliseconds,f=Math.max(0,r.currentEvent-1);f>=0&&r.noteTimings[f].left===null;)f--;v=r.noteTimings[f]}var d={},u={};if(v){d.top=v.top,d.height=v.height;var o=Math.max(0,c-r.startTime-v.milliseconds),h=p-v.milliseconds,i=v.endX-v.left,g=h?o*i/h:0;d.left=v.left+g,r.currentEvent===0&&v.milliseconds>c-r.startTime&&(d.left=void 0),u={timestamp:c,startTime:r.startTime,ev:v,endMs:p,offMs:o,offPx:g,gapMs:h,gapPx:i}}else u={timestamp:c,startTime:r.startTime};var m=r.startTime;if(r.beatCallback(r.currentBeat/r.beatSubdivisions,r.totalBeats/r.beatSubdivisions,r.lastMoment,d,u),m!==r.startTime)return c-r.startTime;r.currentBeat++}return null};var l=60;r.animationJogger=function(){r.isRunning&&(r.doTiming(performance.now()),r.joggerTimer=setTimeout(r.animationJogger,l))},r.start=function(c,f){if(r.isRunning=!0,r.isPaused&&(r.isPaused=!1,c===void 0&&(r.justUnpaused=!0)),c)r.setProgress(c,f);else if(c===0)r.reset();else if(r.pausedPercent!==null){var p=performance.now();r.currentTime=r.lastMoment*r.pausedPercent,r.startTime=p-r.currentTime,r.pausedPercent=null,r.reportNext=!0}requestAnimationFrame(r.doTiming),r.joggerTimer=setTimeout(r.animationJogger,l)},r.pause=function(){r.isPaused=!0;var c=performance.now();r.pausedPercent=(c-r.startTime)/r.lastMoment,r.isRunning=!1,r.joggerTimer&&(clearTimeout(r.joggerTimer),r.joggerTimer=null)},r.currentMillisecond=function(){return r.currentTime},r.reset=function(){r.currentBeat=0,r.currentEvent=0,r.currentLine=0,r.startTime=null,r.pausedPercent=null},r.stop=function(){r.pause(),r.reset()},r.setProgress=function(c,f){var p;switch(f){case"seconds":r.currentTime=c*1e3,r.currentTime<0&&(r.currentTime=0),r.currentTime>r.lastMoment&&(r.currentTime=r.lastMoment),p=r.currentTime/r.lastMoment;break;case"beats":r.currentTime=c*r.millisecondsPerBeat*r.beatSubdivisions,r.currentTime<0&&(r.currentTime=0),r.currentTime>r.lastMoment&&(r.currentTime=r.lastMoment),p=r.currentTime/r.lastMoment;break;default:p=c,p<0&&(p=0),p>1&&(p=1),r.currentTime=r.lastMoment*p;break}r.isRunning||(r.pausedPercent=p);var v=performance.now();for(r.startTime=v-r.currentTime,r.currentEvent,r.currentEvent=0;r.noteTimings.length>r.currentEvent&&r.noteTimings[r.currentEvent].milliseconds<r.currentTime;)r.currentEvent++;if(r.lineEndCallback)for(r.currentLine=0;r.lineEndTimings.length>r.currentLine&&r.lineEndTimings[r.currentLine].milliseconds+r.lineEndAnticipation<r.currentTime;)r.currentLine++;var d=r.currentBeat;r.currentBeat=Math.floor(r.currentTime/r.millisecondsPerBeat),r.beatCallback&&d!==r.currentBeat&&r.doBeatCallback(r.startTime+r.currentTime),r.eventCallback&&r.currentEvent>=0&&r.noteTimings[r.currentEvent].type==="event"&&r.eventCallback(r.noteTimings[r.currentEvent]),r.lineEndCallback&&r.lineEndCallback(r.lineEndTimings[r.currentLine],r.noteTimings[r.currentEvent],{line:r.currentLine,endTimings:r.lineEndTimings}),r.joggerTimer=setTimeout(r.animationJogger,l)}};function t(a,n){for(var r=[],s=null,l=0;l<a.length;l++){var c=a[l];c.type!=="end"&&c.top!==s&&(r.push({measureNumber:c.measureNumber,milliseconds:c.milliseconds-n,top:c.top,bottom:c.top+c.height}),s=c.top)}return r}return hr=e,hr}var dr,ys;function Gh(){if(ys)return dr;ys=1;var e=Aa(),t={};return function(){var a,n;t.startAnimation=function(r,s,l){a&&(a.stop(),a=void 0),l.showCursor&&(n=r.querySelector(".abcjs-cursor"),n||(n=document.createElement("DIV"),n.className="abcjs-cursor cursor",n.style.position="absolute",r.appendChild(n),r.style.position="relative"));function c(h){for(var i=0;i<h.length;i++){var g=h[i];g.classList.contains("abcjs-bar")||(g.style.display="none")}}var f;function p(h){if(f){var i=r.querySelectorAll(f);c(i)}f=h}function v(h){var i=r.querySelectorAll(h);c(i)}function d(h){l.hideCurrentMeasure?v(h):l.hideFinishedMeasures&&p(h)}function u(h){return".abcjs-l"+h.line+".abcjs-m"+h.measureNumber}function o(h){if(h){if(h.measureStart){var i=u(h);i&&d(i)}n&&(n.style.left=h.left+"px",n.style.top=h.top+"px",n.style.width=h.width+"px",n.style.height=h.height+"px")}else a.stop(),a=void 0}a=new e(s,{qpm:l.bpm,eventCallback:o}),a.start()},t.pauseAnimation=function(r){a&&(r?a.pause():a.start())},t.stopAnimation=function(){a&&(a.stop(),a=void 0)}}(),dr=t,dr}var pr,ws;function yt(){if(ws)return pr;ws=1;var e={};return e.cloneArray=function(t){for(var a=[],n=0;n<t.length;n++)a.push(Object.assign({},t[n]));return a},e.cloneHashOfHash=function(t){var a={};for(var n in t)t.hasOwnProperty(n)&&(a[n]=Object.assign({},t[n]));return a},e.cloneHashOfArrayOfHash=function(t){var a={};for(var n in t)t.hasOwnProperty(n)&&(a[n]=e.cloneArray(t[n]));return a},e.strip=function(t){return t.replace(/^\s+/,"").replace(/\s+$/,"")},e.startsWith=function(t,a){return t.indexOf(a)===0},e.endsWith=function(t,a){var n=t.length-a.length;return n>=0&&t.lastIndexOf(a)===n},e.last=function(t){return t.length===0?null:t[t.length-1]},pr=e,pr}var vr,xs;function Ma(){if(xs)return vr;xs=1;var e=yt(),t={};return function(){var a,n,r,s,l;t.initialize=function(w,_,k,q,z){a=w,n=_,r=k,s=q,l=z,c()};function c(){r.annotationfont={face:"Helvetica",size:12,weight:"normal",style:"normal",decoration:"none"},r.gchordfont={face:"Helvetica",size:12,weight:"normal",style:"normal",decoration:"none"},r.historyfont={face:'"Times New Roman"',size:16,weight:"normal",style:"normal",decoration:"none"},r.infofont={face:'"Times New Roman"',size:14,weight:"normal",style:"italic",decoration:"none"},r.measurefont={face:'"Times New Roman"',size:14,weight:"normal",style:"italic",decoration:"none"},r.partsfont={face:'"Times New Roman"',size:15,weight:"normal",style:"normal",decoration:"none"},r.repeatfont={face:'"Times New Roman"',size:13,weight:"normal",style:"normal",decoration:"none"},r.textfont={face:'"Times New Roman"',size:16,weight:"normal",style:"normal",decoration:"none"},r.tripletfont={face:"Times",size:11,weight:"normal",style:"italic",decoration:"none"},r.vocalfont={face:'"Times New Roman"',size:13,weight:"bold",style:"normal",decoration:"none"},r.wordsfont={face:'"Times New Roman"',size:16,weight:"normal",style:"normal",decoration:"none"},s.formatting.composerfont={face:'"Times New Roman"',size:14,weight:"normal",style:"italic",decoration:"none"},s.formatting.subtitlefont={face:'"Times New Roman"',size:16,weight:"normal",style:"normal",decoration:"none"},s.formatting.tempofont={face:'"Times New Roman"',size:15,weight:"bold",style:"normal",decoration:"none"},s.formatting.titlefont={face:'"Times New Roman"',size:20,weight:"normal",style:"normal",decoration:"none"},s.formatting.footerfont={face:'"Times New Roman"',size:12,weight:"normal",style:"normal",decoration:"none"},s.formatting.headerfont={face:'"Times New Roman"',size:12,weight:"normal",style:"normal",decoration:"none"},s.formatting.voicefont={face:'"Times New Roman"',size:13,weight:"bold",style:"normal",decoration:"none"},s.formatting.tablabelfont={face:'"Trebuchet MS"',size:16,weight:"normal",style:"normal",decoration:"none"},s.formatting.tabnumberfont={face:'"Arial"',size:11,weight:"normal",style:"normal",decoration:"none"},s.formatting.tabgracefont={face:'"Arial"',size:8,weight:"normal",style:"normal",decoration:"none"},s.formatting.annotationfont=r.annotationfont,s.formatting.gchordfont=r.gchordfont,s.formatting.historyfont=r.historyfont,s.formatting.infofont=r.infofont,s.formatting.measurefont=r.measurefont,s.formatting.partsfont=r.partsfont,s.formatting.repeatfont=r.repeatfont,s.formatting.textfont=r.textfont,s.formatting.tripletfont=r.tripletfont,s.formatting.vocalfont=r.vocalfont,s.formatting.wordsfont=r.wordsfont}var f={gchordfont:!0,measurefont:!0,partsfont:!0,annotationfont:!0,composerfont:!0,historyfont:!0,infofont:!0,subtitlefont:!0,textfont:!0,titlefont:!0,voicefont:!0},p=function(w){switch(w){case"Arial-Italic":return{face:"Arial",weight:"normal",style:"italic",decoration:"none"};case"Arial-Bold":return{face:"Arial",weight:"bold",style:"normal",decoration:"none"};case"Bookman-Demi":return{face:"Bookman,serif",weight:"bold",style:"normal",decoration:"none"};case"Bookman-DemiItalic":return{face:"Bookman,serif",weight:"bold",style:"italic",decoration:"none"};case"Bookman-Light":return{face:"Bookman,serif",weight:"normal",style:"normal",decoration:"none"};case"Bookman-LightItalic":return{face:"Bookman,serif",weight:"normal",style:"italic",decoration:"none"};case"Courier":return{face:'"Courier New"',weight:"normal",style:"normal",decoration:"none"};case"Courier-Oblique":return{face:'"Courier New"',weight:"normal",style:"italic",decoration:"none"};case"Courier-Bold":return{face:'"Courier New"',weight:"bold",style:"normal",decoration:"none"};case"Courier-BoldOblique":return{face:'"Courier New"',weight:"bold",style:"italic",decoration:"none"};case"AvantGarde-Book":return{face:"AvantGarde,Arial",weight:"normal",style:"normal",decoration:"none"};case"AvantGarde-BookOblique":return{face:"AvantGarde,Arial",weight:"normal",style:"italic",decoration:"none"};case"AvantGarde-Demi":case"Avant-Garde-Demi":return{face:"AvantGarde,Arial",weight:"bold",style:"normal",decoration:"none"};case"AvantGarde-DemiOblique":return{face:"AvantGarde,Arial",weight:"bold",style:"italic",decoration:"none"};case"Helvetica-Oblique":return{face:"Helvetica",weight:"normal",style:"italic",decoration:"none"};case"Helvetica-Bold":return{face:"Helvetica",weight:"bold",style:"normal",decoration:"none"};case"Helvetica-BoldOblique":return{face:"Helvetica",weight:"bold",style:"italic",decoration:"none"};case"Helvetica-Narrow":return{face:'"Helvetica Narrow",Helvetica',weight:"normal",style:"normal",decoration:"none"};case"Helvetica-Narrow-Oblique":return{face:'"Helvetica Narrow",Helvetica',weight:"normal",style:"italic",decoration:"none"};case"Helvetica-Narrow-Bold":return{face:'"Helvetica Narrow",Helvetica',weight:"bold",style:"normal",decoration:"none"};case"Helvetica-Narrow-BoldOblique":return{face:'"Helvetica Narrow",Helvetica',weight:"bold",style:"italic",decoration:"none"};case"Palatino-Roman":return{face:"Palatino",weight:"normal",style:"normal",decoration:"none"};case"Palatino-Italic":return{face:"Palatino",weight:"normal",style:"italic",decoration:"none"};case"Palatino-Bold":return{face:"Palatino",weight:"bold",style:"normal",decoration:"none"};case"Palatino-BoldItalic":return{face:"Palatino",weight:"bold",style:"italic",decoration:"none"};case"NewCenturySchlbk-Roman":return{face:'"New Century",serif',weight:"normal",style:"normal",decoration:"none"};case"NewCenturySchlbk-Italic":return{face:'"New Century",serif',weight:"normal",style:"italic",decoration:"none"};case"NewCenturySchlbk-Bold":return{face:'"New Century",serif',weight:"bold",style:"normal",decoration:"none"};case"NewCenturySchlbk-BoldItalic":return{face:'"New Century",serif',weight:"bold",style:"italic",decoration:"none"};case"Times":case"Times-Roman":case"Times-Narrow":case"Times-Courier":case"Times-New-Roman":return{face:'"Times New Roman"',weight:"normal",style:"normal",decoration:"none"};case"Times-Italic":case"Times-Italics":return{face:'"Times New Roman"',weight:"normal",style:"italic",decoration:"none"};case"Times-Bold":return{face:'"Times New Roman"',weight:"bold",style:"normal",decoration:"none"};case"Times-BoldItalic":return{face:'"Times New Roman"',weight:"bold",style:"italic",decoration:"none"};case"ZapfChancery-MediumItalic":return{face:'"Zapf Chancery",cursive,serif',weight:"normal",style:"normal",decoration:"none"};default:return null}},v=function(w,_,k,q,z){function U(){var Z=parseInt(w[0].token);return w.shift(),_?w.length===0?{face:_.face,weight:_.weight,style:_.style,decoration:_.decoration,size:Z}:w.length===1&&w[0].token==="box"&&f[z]?{face:_.face,weight:_.weight,style:_.style,decoration:_.decoration,size:Z,box:!0}:(n("Extra parameters in font definition.",k,q),{face:_.face,weight:_.weight,style:_.style,decoration:_.decoration,size:Z}):(n("Can't set just the size of the font since there is no default value.",k,q),{face:'"Times New Roman"',weight:"normal",style:"normal",decoration:"none",size:Z})}if(w[0].token==="*"){if(w.shift(),w[0].type==="number")return U();n("Expected font size number after *.",k,q)}if(w[0].type==="number")return U();for(var Y=[],ee,oe="normal",J="normal",fe="none",ue=!1,de="face",D=!1;w.length;){var G=w.shift(),$=G.token.toLowerCase();switch(de){case"face":D||$!=="utf"&&G.type!=="number"&&$!=="bold"&&$!=="italic"&&$!=="underline"&&$!=="box"?Y.length>0&&G.token==="-"?(D=!0,Y[Y.length-1]=Y[Y.length-1]+G.token):D?(D=!1,Y[Y.length-1]=Y[Y.length-1]+G.token):Y.push(G.token):G.type==="number"?(ee?n("Font size specified twice in font definition.",k,q):ee=G.token,de="modifier"):$==="bold"?oe="bold":$==="italic"?J="italic":$==="underline"?fe="underline":$==="box"?(f[z]?ue=!0:n(`This font style doesn't support "box"`,k,q),de="finished"):$==="utf"?(G=w.shift(),de="size"):n("Unknown parameter "+G.token+" in font definition.",k,q);break;case"size":G.type==="number"?ee?n("Font size specified twice in font definition.",k,q):ee=G.token:n("Expected font size in font definition.",k,q),de="modifier";break;case"modifier":$==="bold"?oe="bold":$==="italic"?J="italic":$==="underline"?fe="underline":$==="box"?(f[z]?ue=!0:n(`This font style doesn't support "box"`,k,q),de="finished"):n("Unknown parameter "+G.token+" in font definition.",k,q);break;case"finished":n('Extra characters found after "box" in font definition.',k,q);break}}ee===void 0?_?ee=_.size:(n("Must specify the size of the font since there is no default value.",k,q),ee=12):ee=parseFloat(ee),Y=Y.join(" "),Y===""&&(_?Y=_.face:(n("Must specify the name of the font since there is no default value.",k,q),Y="sans-serif"));var Q=p(Y),K={};return Q?(K.face=Q.face,K.weight=Q.weight,K.style=Q.style,K.decoration=Q.decoration,K.size=ee,ue&&(K.box=!0),K):(K.face=Y,K.weight=oe,K.style=J,K.decoration=fe,K.size=ee,ue&&(K.box=!0),K)},d=function(w,_,k){return _.length===0?'Directive "'+w+'" requires a font as a parameter.':(r[w]=v(_,r[w],k,0,w),r.is_in_header&&(s.formatting[w]=r[w]),null)},u=function(w,_,k){return _.length===0?'Directive "'+w+'" requires a font as a parameter.':(s.formatting[w]=v(_,s.formatting[w],k,0,w),null)},o=function(w,_){var k="";_.forEach(function(z){k+=z.token});var q=parseFloat(k);if(isNaN(q)||q===0)return'Directive "'+w+'" requires a number as a parameter.';s.formatting.scale=q},h=["acoustic-bass-drum","bass-drum-1","side-stick","acoustic-snare","hand-clap","electric-snare","low-floor-tom","closed-hi-hat","high-floor-tom","pedal-hi-hat","low-tom","open-hi-hat","low-mid-tom","hi-mid-tom","crash-cymbal-1","high-tom","ride-cymbal-1","chinese-cymbal","ride-bell","tambourine","splash-cymbal","cowbell","crash-cymbal-2","vibraslap","ride-cymbal-2","hi-bongo","low-bongo","mute-hi-conga","open-hi-conga","low-conga","high-timbale","low-timbale","high-agogo","low-agogo","cabasa","maracas","short-whistle","long-whistle","short-guiro","long-guiro","claves","hi-wood-block","low-wood-block","mute-cuica","open-cuica","mute-triangle","open-triangle"],i=function(w){var _=w.split(/\s+/);if(_.length!==2&&_.length!==3)return{error:'Expected parameters "abc-note", "drum-sound", and optionally "note-head"'};var k=_[0],q=parseInt(_[1],10);if((isNaN(q)||q<35||q>81)&&_[1]&&(q=h.indexOf(_[1].toLowerCase())+35),isNaN(q)||q<35||q>81)return{error:'Expected drum name, received "'+_[1]+'"'};var z={sound:q};return _.length===3&&(z.noteHead=_[2]),{key:k,value:z}},g=function(w,_){var k=a.getMeasurement(_);return k.used===0||_.length!==0?{error:'Directive "'+w+'" requires a measurement as a parameter.'}:k.value},m=function(w,_){var k=a.getMeasurement(_);return k.used===0||_.length!==0?'Directive "'+w+'" requires a measurement as a parameter.':(s.formatting[w]=k.value,null)},b=function(w,_,k,q,z){if(k.length!==1||k[0].type!=="number")return'Directive "'+_+'" requires a number as a parameter.';var U=k[0].intt;return q!==void 0&&U<q?'Directive "'+_+'" requires a number greater than or equal to '+q+" as a parameter.":z!==void 0&&U>z?'Directive "'+_+'" requires a number less than or equal to '+z+" as a parameter.":(r[w]=U,null)},x=function(w,_,k){if(k.length===1&&(k[0].token==="true"||k[0].token==="false"))return r[w]=k[0].token==="true",null;var q=b(w,_,k,0,1);return q!==null?q:(r[w]=r[w]===1,null)},C=function(w,_,k,q){if(k.length!==1)return'Directive "'+_+'" requires one of [ '+q.join(", ")+" ] as a parameter.";for(var z=k[0].token,U=!1,Y=0;!U&&Y<q.length;Y++)q[Y]===z&&(U=!0);return U?(r[w]=z,null):'Directive "'+_+'" requires one of [ '+q.join(", ")+" ] as a parameter."},S=["nobarlines","barlines","beataccents","nobeataccents","droneon","droneoff","drumon","drumoff","fermatafixed","fermataproportional","gchordon","gchordoff","controlcombo","temperamentnormal","noportamento"],I=["gchord","ptstress","beatstring"],F=["bassvol","chordvol","c","channel","beatmod","deltaloudness","drumbars","gracedivider","makechordchannels","randomchordattack","chordattack","stressmodel","transpose","rtranspose","vol","volinc","gchordbars"],y=["program"],A=["ratio","snt","bendvelocity","pitchbend","control","temperamentlinear"],P=["beat"],M=["drone"],N=["portamento"],B=["expand","grace","trim"],E=["drum","chordname"],T=["bassprog","chordprog"],L=function(w,_,k){var q=w.shift().token,z=[];if(S.indexOf(q)>=0)w.length!==0&&n("Unexpected parameter in MIDI "+q,k,0);else if(I.indexOf(q)>=0)w.length!==1?n("Expected one parameter in MIDI "+q,k,0):z.push(w[0].token);else if(F.indexOf(q)>=0)w.length!==1?n("Expected one parameter in MIDI "+q,k,0):w[0].type!=="number"?n("Expected one integer parameter in MIDI "+q,k,0):z.push(w[0].intt);else if(y.indexOf(q)>=0)w.length!==1&&w.length!==2?n("Expected one or two parameters in MIDI "+q,k,0):w[0].type!=="number"||w.length===2&&w[1].type!=="number"?n("Expected integer parameter in MIDI "+q,k,0):(z.push(w[0].intt),w.length===2&&z.push(w[1].intt));else if(A.indexOf(q)>=0)w.length!==2?n("Expected two parameters in MIDI "+q,k,0):w[0].type!=="number"||w[1].type!=="number"?n("Expected two integer parameters in MIDI "+q,k,0):(z.push(w[0].intt),z.push(w[1].intt));else if(N.indexOf(q)>=0)w.length!==2?n("Expected two parameters in MIDI "+q,k,0):w[0].type!=="alpha"||w[1].type!=="number"?n("Expected one string and one integer parameters in MIDI "+q,k,0):(z.push(w[0].token),z.push(w[1].intt));else if(q==="drummap")w.length===2&&w[0].type==="alpha"&&w[1].type==="number"?(_.formatting||(_.formatting={}),_.formatting.midi||(_.formatting.midi={}),_.formatting.midi.drummap||(_.formatting.midi.drummap={}),_.formatting.midi.drummap[w[0].token]=w[1].intt,z=_.formatting.midi.drummap):w.length===3&&w[0].type==="punct"&&w[1].type==="alpha"&&w[2].type==="number"?(_.formatting||(_.formatting={}),_.formatting.midi||(_.formatting.midi={}),_.formatting.midi.drummap||(_.formatting.midi.drummap={}),_.formatting.midi.drummap[w[0].token+w[1].token]=w[2].intt,z=_.formatting.midi.drummap):n("Expected one note name and one integer parameter in MIDI "+q,k,0);else if(B.indexOf(q)>=0)w.length!==3||w[0].type!=="number"||w[1].token!=="/"||w[2].type!=="number"?n("Expected fraction parameter in MIDI "+q,k,0):(z.push(w[0].intt),z.push(w[2].intt));else if(P.indexOf(q)>=0)w.length!==4?n("Expected four parameters in MIDI "+q,k,0):w[0].type!=="number"||w[1].type!=="number"||w[2].type!=="number"||w[3].type!=="number"?n("Expected four integer parameters in MIDI "+q,k,0):(z.push(w[0].intt),z.push(w[1].intt),z.push(w[2].intt),z.push(w[3].intt));else if(M.indexOf(q)>=0)w.length!==5?n("Expected five parameters in MIDI "+q,k,0):w[0].type!=="number"||w[1].type!=="number"||w[2].type!=="number"||w[3].type!=="number"||w[4].type!=="number"?n("Expected five integer parameters in MIDI "+q,k,0):(z.push(w[0].intt),z.push(w[1].intt),z.push(w[2].intt),z.push(w[3].intt),z.push(w[4].intt));else if(y.indexOf(q)>=0)w.length!==1||w.length!==4?n("Expected one or two parameters in MIDI "+q,k,0):w[0].type!=="number"?n("Expected integer parameter in MIDI "+q,k,0):w.length===4?(w[1].token!=="octave"&&n("Expected octave parameter in MIDI "+q,k,0),w[2].token!=="="&&n("Expected octave parameter in MIDI "+q,k,0),w[3].type!=="number"&&n("Expected integer parameter for octave in MIDI "+q,k,0)):(z.push(w[0].intt),w.length===4&&z.push(w[3].intt));else if(E.indexOf(q)>=0)if(w.length<2)n("Expected string parameter and at least one integer parameter in MIDI "+q,k,0);else if(w[0].type!=="alpha")n("Expected string parameter and at least one integer parameter in MIDI "+q,k,0);else{var U=w.shift();for(z.push(U.token);w.length>0;)U=w.shift(),U.type!=="number"&&n("Expected integer parameter in MIDI "+q,k,0),z.push(U.intt)}else if(T.indexOf(q)>=0){if(w.length!==1&&w.length!==2)n("Expected one or two parameters in MIDI "+q,k,0);else if(w[0].type!=="number")n("Expected integer parameter in MIDI "+q,k,0);else if(w.length===2&&w[1].type!=="alpha")n("Expected alpha parameter in MIDI "+q,k,0);else if(z.push(w[0].intt),w.length===2){var Y=w[1].token;Y.indexOf("octave=")!=-1?(Y=Y.replace("octave=",""),Y=parseInt(Y),isNaN(Y)?n("Expected octave value in MIDI"+q):(Y<-1&&(n("Expected octave= in MIDI "+q+" to be >= -1 (recv:"+Y+")"),Y=-1),Y>3&&(n("Expected octave= in MIDI "+q+" to be <= 3 (recv:"+Y+")"),Y=3),z.push(Y))):n("Expected octave= in MIDI"+q)}}l.hasBeginMusic()?l.appendElement("midi",-1,-1,{cmd:q,params:z}):(_.formatting.midi===void 0&&(_.formatting.midi={}),_.formatting.midi[q]=z)};t.parseFontChangeLine=function(w){w=w.replace(/\$\$/g,"");var _=w.split("$");if(_.length>1&&r.setfont){var k=[];_[0]!==""&&k.push({text:_[0]});for(var q=1;q<_.length;q++)if(_[q][0]==="0")k.push({text:_[q].substring(1).replace(/\x03/g,"$$")});else{var z=parseInt(_[q][0],10);r.setfont[z]?k.push({font:r.setfont[z],text:_[q].substring(1).replace(/\x03/g,"$$")}):k[k.length-1].text+="$"+_[q].replace(/\x03/g,"$$")}return k}return w.replace(/\x03/g,"$$")};var R=["auto","above","below","hidden"];t.addDirective=function(w){var _=a.tokenize(w,0,w.length);if(_.length===0||_[0].type!=="alpha")return null;var k=w.substring(w.indexOf(_[0].token)+_[0].token.length);k=a.stripComment(k);var q=_.shift().token.toLowerCase(),z="",U;switch(q){case"bagpipes":s.formatting.bagpipes=!0;break;case"flatbeams":s.formatting.flatbeams=!0;break;case"jazzchords":s.formatting.jazzchords=!0;break;case"accentAbove":s.formatting.accentAbove=!0;break;case"germanAlphabet":s.formatting.germanAlphabet=!0;break;case"landscape":r.landscape=!0;break;case"papersize":r.papersize=k;break;case"graceslurs":if(_.length!==1)return"Directive graceslurs requires one parameter: 0 or 1";if(_[0].token==="0"||_[0].token==="false")s.formatting.graceSlurs=!1;else if(_[0].token==="1"||_[0].token==="true")s.formatting.graceSlurs=!0;else return"Directive graceslurs requires one parameter: 0 or 1 (received "+_[0].token+")";break;case"lineThickness":var Y=O(_);if(Y.value!==void 0&&(s.formatting.lineThickness=Y.value),Y.error)return Y.error;break;case"stretchlast":var ee=O(_);if(ee.value!==void 0&&(s.formatting.stretchlast=ee.value),ee.error)return ee.error;break;case"titlecaps":r.titlecaps=!0;break;case"titleleft":s.formatting.titleleft=!0;break;case"measurebox":s.formatting.measurebox=!0;break;case"vocal":return C("vocalPosition",q,_,R);case"dynamic":return C("dynamicPosition",q,_,R);case"gchord":return C("chordPosition",q,_,R);case"ornament":return C("ornamentPosition",q,_,R);case"volume":return C("volumePosition",q,_,R);case"botmargin":case"botspace":case"composerspace":case"indent":case"leftmargin":case"linesep":case"musicspace":case"partsspace":case"pageheight":case"pagewidth":case"rightmargin":case"stafftopmargin":case"staffsep":case"staffwidth":case"subtitlespace":case"sysstaffsep":case"systemsep":case"textspace":case"titlespace":case"topmargin":case"topspace":case"vocalspace":case"wordsspace":return m(q,_);case"voicescale":if(_.length!==1||_[0].type!=="number")return"voicescale requires one float as a parameter";var oe=_.shift();return r.currentVoice&&(r.currentVoice.scale=oe.floatt,l.changeVoiceScale(r.currentVoice.scale)),null;case"voicecolor":if(_.length!==1)return"voicecolor requires one string as a parameter";var J=_.shift();return r.currentVoice&&(r.currentVoice.color=J.token,l.changeVoiceColor(r.currentVoice.color)),null;case"vskip":var fe=Math.round(g(q,_));return fe.error?fe.error:(l.addSpacing(fe),null);case"scale":o(q,_);break;case"sep":if(_.length===0)l.addSeparator(14,14,85,{startChar:r.iChar,endChar:r.iChar+5});else{var ue=a.getMeasurement(_);if(ue.used===0)return'Directive "'+q+'" requires 3 numbers: space above, space below, length of line';var de=ue.value;if(ue=a.getMeasurement(_),ue.used===0)return'Directive "'+q+'" requires 3 numbers: space above, space below, length of line';var D=ue.value;if(ue=a.getMeasurement(_),ue.used===0||_.length!==0)return'Directive "'+q+'" requires 3 numbers: space above, space below, length of line';var G=ue.value;l.addSeparator(de,D,G,{startChar:r.iChar,endChar:r.iChar+k.length})}break;case"barsperstaff":if(z=b("barsperstaff",q,_),z!==null)return z;break;case"staffnonote":if(_.length!==1)return"Directive staffnonote requires one parameter: 0 or 1";if(_[0].token==="0")r.staffnonote=!0;else if(_[0].token==="1")r.staffnonote=!1;else return"Directive staffnonote requires one parameter: 0 or 1 (received "+_[0].token+")";break;case"printtempo":if(z=x("printTempo",q,_),z!==null)return z;break;case"partsbox":if(z=x("partsBox",q,_),z!==null)return z;r.partsfont.box=r.partsBox;break;case"freegchord":if(z=x("freegchord",q,_),z!==null)return z;break;case"measurenb":case"barnumbers":if(z=b("barNumbers",q,_),z!==null)return z;break;case"setbarnb":if(_.length!==1||_[0].type!=="number")return"Directive setbarnb requires a number as a parameter.";r.currBarNumber=l.setBarNumberImmediate(_[0].intt);break;case"keywarn":if(_.length!==1||_[0].type!=="number"||_[0].intt!==1&&_[0].intt!==0)return"Directive "+q+" requires 0 or 1 as a parameter.";r[q]=_[0].intt===1;break;case"begintext":var $="";for(U=a.nextLine();U&&U.indexOf("%%endtext")!==0;){if(e.startsWith(U,"%%")){var Q=U.substring(2);Q=Q.trim()+`
`,$+=Q}else $+=U.trim()+`
`;U=a.nextLine()}l.addText($,{startChar:r.iChar,endChar:r.iChar+$.length+7});break;case"continueall":r.continueall=!0;break;case"beginps":for(U=a.nextLine();U&&U.indexOf("%%endps")!==0;)a.nextLine();n("Postscript ignored",w,0);break;case"deco":k.length>0&&r.ignoredDecorations.push(k.substring(0,k.indexOf(" "))),n("Decoration redefinition ignored",w,0);break;case"text":var K=a.translateString(k);l.addText(t.parseFontChangeLine(K),{startChar:r.iChar,endChar:r.iChar+k.length+7});break;case"center":var Z=a.translateString(k);l.addCentered(t.parseFontChangeLine(Z));break;case"font":break;case"setfont":var re=a.tokenize(k,0,k.length);if(re.length>=4&&re[0].token==="-"&&re[1].type==="number"){var ie=parseInt(re[1].token);ie>=1&&ie<=9&&(r.setfont||(r.setfont=[]),re.shift(),re.shift(),r.setfont[ie]=v(re,r.setfont[ie],w,0,"setfont"))}break;case"gchordfont":case"partsfont":case"tripletfont":case"vocalfont":case"textfont":case"annotationfont":case"historyfont":case"infofont":case"measurefont":case"repeatfont":case"wordsfont":return d(q,_,w);case"composerfont":case"subtitlefont":case"tempofont":case"titlefont":case"voicefont":case"footerfont":case"headerfont":return u(q,_,w);case"barlabelfont":case"barnumberfont":case"barnumfont":return d("measurefont",_,w);case"staves":case"score":r.score_is_present=!0;for(var ne=function(wt,_0,zt,i0,C0){(_0||r.staves.length===0)&&r.staves.push({index:r.staves.length,numVoices:0});var Qe=e.last(r.staves);zt!==void 0&&Qe.bracket===void 0&&(Qe.bracket=zt),i0!==void 0&&Qe.brace===void 0&&(Qe.brace=i0),C0&&(Qe.connectBarLines="end"),r.voices[wt]===void 0&&(r.voices[wt]={staffNum:Qe.index,index:Qe.numVoices},Qe.numVoices++)},te=!1,W=!1,V=!1,H=!1,j=!1,X=!1,ae=!1,se,pe=function(){if(ae=!0,se){var wt="start";se.staffNum>0&&(r.staves[se.staffNum-1].connectBarLines==="start"||r.staves[se.staffNum-1].connectBarLines==="continue")&&(wt="continue"),r.staves[se.staffNum].connectBarLines=wt}};_.length;){var ce=_.shift();switch(ce.token){case"(":te?n("Can't nest parenthesis in %%score",w,ce.start):(te=!0,H=!0);break;case")":!te||H?n("Unexpected close parenthesis in %%score",w,ce.start):te=!1;break;case"[":W?n("Can't nest brackets in %%score",w,ce.start):(W=!0,j=!0);break;case"]":!W||j?n("Unexpected close bracket in %%score",w,ce.start):(W=!1,r.staves[se.staffNum].bracket="end");break;case"{":V?n("Can't nest braces in %%score",w,ce.start):(V=!0,X=!0);break;case"}":!V||X?n("Unexpected close brace in %%score",w,ce.start):(V=!1,r.staves[se.staffNum].brace="end");break;case"|":pe();break;default:for(var he="";(ce.type==="alpha"||ce.type==="number")&&(he+=ce.token,ce.continueId);)ce=_.shift();var we=!te||H,xe=j?"start":W?"continue":void 0,ge=X?"start":V?"continue":void 0;ne(he,we,xe,ge,ae),H=!1,j=!1,X=!1,ae=!1,se=r.voices[he],q==="staves"&&pe();break}}break;case"maxstaves":var me=a.getInt(k);me.digits===0?n("Expected number of staves in maxstaves"):me.value>0&&(s.formatting.maxStaves=me.value);break;case"newpage":var Be=a.getInt(k);l.addNewPage(Be.digits===0?-1:Be.value);break;case"abc":var ye=k.split(" ");switch(ye[0]){case"-copyright":case"-creator":case"-edited-by":case"-version":case"-charset":var ze=ye.shift();l.addMetaText(q+ze,ye.join(" "),{startChar:r.iChar,endChar:r.iChar+k.length+5});break;default:return"Unknown directive: "+q+ye[0]}break;case"header":case"footer":var Ue=a.getMeat(k,0,k.length);Ue=k.substring(Ue.start,Ue.end),Ue[0]==='"'&&Ue[Ue.length-1]==='"'&&(Ue=Ue.substring(1,Ue.length-1));var Le=Ue.split("	"),Pe={};Le.length===1?Pe={left:"",center:Le[0],right:""}:Le.length===2?Pe={left:Le[0],center:Le[1],right:""}:Pe={left:Le[0],center:Le[1],right:Le[2]},Le.length>3&&n("Too many tabs in "+q+": "+Le.length+" found.",k,0),l.addMetaTextObj(q,Pe,{startChar:r.iChar,endChar:r.iChar+w.length});break;case"midi":var Ve=a.tokenize(k,0,k.length,!0);Ve.length>0&&Ve[0].token==="="&&Ve.shift(),Ve.length===0?n("Expected midi command",k,0):L(Ve,s,k);break;case"percmap":var qe=i(k);qe.error?n(qe.error,w,8):(s.formatting.percmap||(s.formatting.percmap={}),s.formatting.percmap[qe.key]=qe.value);break;case"visualtranspose":var Ht=a.getInt(k);Ht.digits===0?n("Expected number of half steps in visualTranspose"):r.globalTranspose=Ht.value;break;case"map":case"playtempo":case"auquality":case"continuous":case"nobarcheck":s.formatting[q]=k;break;default:return"Unknown directive: "+q}return null},t.globalFormatting=function(w){for(var _ in w)if(w.hasOwnProperty(_)){var k=""+w[_],q=a.tokenize(k,0,k.length),z;switch(_){case"titlefont":case"gchordfont":case"composerfont":case"footerfont":case"headerfont":case"historyfont":case"infofont":case"measurefont":case"partsfont":case"repeatfont":case"subtitlefont":case"tempofont":case"textfont":case"voicefont":case"tripletfont":case"vocalfont":case"wordsfont":case"annotationfont":case"tablabelfont":case"tabnumberfont":case"tabgracefont":d(_,q,k);break;case"scale":o(_,q);break;case"partsbox":z=x("partsBox",_,q),z!==null&&n(z),r.partsfont.box=r.partsBox;break;case"freegchord":z=x("freegchord",_,q),z!==null&&n(z);break;case"fontboxpadding":(q.length!==1||q[0].type!=="number")&&n('Directive "'+_+'" requires a number as a parameter.'),s.formatting.fontboxpadding=q[0].floatt;break;case"stafftopmargin":(q.length!==1||q[0].type!=="number")&&n('Directive "'+_+'" requires a number as a parameter.'),s.formatting.stafftopmargin=q[0].floatt;break;case"stretchlast":var U=O(q);if(U.value!==void 0&&(s.formatting.stretchlast=U.value),U.error)return U.error;break;default:n("Formatting directive unrecognized: ",_,0)}}};function O(w){if(w.length===0)return{value:1};if(w.length===1)if(w[0].type==="number"){if(w[0].floatt>=0||w[0].floatt<=1)return{value:w[0].floatt}}else{if(w[0].token==="false")return{value:0};if(w[0].token==="true")return{value:1}}return{error:"Directive stretchlast requires zero or one parameter: false, true, or number between 0 and 1 (received "+w[0].token+")"}}}(),vr=t,vr}var gr,_s;function Yh(){if(_s)return gr;_s=1;var e={};const t=["C,,,","D,,,","E,,,","F,,,","G,,,","A,,,","B,,,","C,,","D,,","E,,","F,,","G,,","A,,","B,,","C,","D,","E,","F,","G,","A,","B,","C","D","E","F","G","A","B","c","d","e","f","g","a","b","c'","d'","e'","f'","g'","a'","b'","c''","d''","e''","f''","g''","a''","b''","c'''","d'''","e'''","f'''","g'''","a'''","b'''"];return e.pitchIndex=function(a){return t.indexOf(a)},e.noteName=function(a){return t[a]},gr=e,gr}var br,Cs;function df(){if(Cs)return br;Cs=1;var e=["C","C♯","D","D♯","E","F","F♯","G","G♯","A","A♯","B"],t=["C","D♭","D","E♭","E","F","G♭","G","A♭","A","B♭","B"],a=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],n=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"];function r(s,l,c,f){if(!l||l%12===0)return s;for(;l<0;)l+=12;l>11&&(l=l%12);var p=s.match(/^([A-G][b#♭♯]?)([^\/]+)?\/?([A-G][b#♭♯]?)?(.+)?/);if(!p)return s;var v=p[1],d=p[2],u=p[3],o=p[4],h=e.indexOf(v);if(h<0&&(h=t.indexOf(v)),h<0&&(h=a.indexOf(v)),h<0&&(h=n.indexOf(v)),h<0)return s;h+=l,h=h%12,c?f?s=n[h]:s=t[h]:f?s=a[h]:s=e[h];var i=d&&(d.indexOf("dim")>=0||d.indexOf("°")>=0);if(i&&s==="A#"&&(s="Bb"),i&&s==="D#"&&(s="Eb"),i&&s==="A♯"&&(s="B♭"),i&&s==="D♯"&&(s="E♭"),d&&(s+=d),u){var h=e.indexOf(u);h<0&&(h=t.indexOf(u)),h<0&&(h=a.indexOf(u)),h<0&&(h=n.indexOf(u)),s+="/",h>=0?(h+=l,h=h%12,c?f?s+=n[h]:s+=t[h]:f?s+=a[h]:s+=e[h]):s+=u}return o&&(s+=o),s}return br=r,br}var mr,ks;function pf(){if(ks)return mr;ks=1;var e={C:{modes:["CMaj","Amin","Am","GMix","DDor","EPhr","FLyd","BLoc"],stepsFromC:0},Db:{modes:["DbMaj","Bbmin","Bbm","AbMix","EbDor","FPhr","GbLyd","CLoc"],stepsFromC:1},D:{modes:["DMaj","Bmin","Bm","AMix","EDor","F#Phr","GLyd","C#Loc"],stepsFromC:2},Eb:{modes:["EbMaj","Cmin","Cm","BbMix","FDor","GPhr","AbLyd","DLoc"],stepsFromC:3},E:{modes:["EMaj","C#min","C#m","BMix","F#Dor","G#Phr","ALyd","D#Loc"],stepsFromC:4},F:{modes:["FMaj","Dmin","Dm","CMix","GDor","APhr","BbLyd","ELoc"],stepsFromC:5},Gb:{modes:["GbMaj","Ebmin","Ebm","DbMix","AbDor","BbPhr","CbLyd","FLoc"],stepsFromC:6},G:{modes:["GMaj","Emin","Em","DMix","ADor","BPhr","CLyd","F#Loc"],stepsFromC:7},Ab:{modes:["AbMaj","Fmin","Fm","EbMix","BbDor","CPhr","DbLyd","GLoc"],stepsFromC:8},A:{modes:["AMaj","F#min","F#m","EMix","BDor","C#Phr","DLyd","G#Loc"],stepsFromC:9},Bb:{modes:["BbMaj","Gmin","Gm","FMix","CDor","DPhr","EbLyd","ALoc"],stepsFromC:10},B:{modes:["BMaj","G#min","G#m","F#Mix","C#Dor","D#Phr","ELyd","A#Loc"],stepsFromC:11},"C#":{modes:["C#Maj","A#min","A#m","G#Mix","D#Dor","E#Phr","F#Lyd","B#Loc"],stepsFromC:1},"F#":{modes:["F#Maj","D#min","D#m","C#Mix","G#Dor","A#Phr","BLyd","E#Loc"],stepsFromC:6},Cb:{modes:["CbMaj","Abmin","Abm","GbMix","DbDor","EbPhr","FbLyd","BbLoc"],stepsFromC:11}},t=null;function a(){t={};for(var l=Object.keys(e),c=0;c<l.length;c++){var f=e[l[c]];t[l[c].toLowerCase()]=l[c];for(var p=0;p<f.modes.length;p++){var v=f.modes[p].toLowerCase();t[v]=l[c]}}}function n(l){t||a();var c=l.toLowerCase().match(/([a-g][b#]?)(maj|min|mix|dor|phr|lyd|loc|m)?/);if(!c||!c[2])return l;c=c[1]+c[2];var f=t[c];return f||l}function r(l,c){var f=e[l];if(!f||c==="")return l;var p=c.toLowerCase().match(/^(maj|min|mix|dor|phr|lyd|loc|m)/);if(!p)return l;for(var v=p[1],d=0;d<f.modes.length;d++){var u=f.modes[d],o=u.toLowerCase().indexOf(v);if(o!==-1&&o===u.length-v.length)return u.substring(0,u.length-v.length)}return l}function s(l,c){var f=e[l];if(!f)return l;for(;c<0;)c+=12;for(var p=(f.stepsFromC+c)%12,v=0;v<Object.keys(e).length;v++){var d=Object.keys(e)[v];if(e[d].stepsFromC===p)return d}return l}return mr={relativeMajor:n,relativeMode:r,transposeKey:s},mr}var yr,Ts;function vf(){if(Ts)return yr;Ts=1;var{relativeMajor:e}=pf(),t={acc:"sharp",note:"f"},a={acc:"sharp",note:"c"},n={acc:"sharp",note:"g"},r={acc:"sharp",note:"d"},s={acc:"sharp",note:"A"},l={acc:"sharp",note:"e"},c={acc:"sharp",note:"B"},f={acc:"flat",note:"B"},p={acc:"flat",note:"e"},v={acc:"flat",note:"A"},d={acc:"flat",note:"d"},u={acc:"flat",note:"G"},o={acc:"flat",note:"c"},h={acc:"flat",note:"F"},i={"C#":[t,a,n,r,s,l,c],"F#":[t,a,n,r,s,l],B:[t,a,n,r,s],E:[t,a,n,r],A:[t,a,n],D:[t,a],G:[t],C:[],F:[f],Bb:[f,p],Eb:[f,p,v],Cm:[f,p,v],Ab:[f,p,v,d],Db:[f,p,v,d,u],Gb:[f,p,v,d,u,o],Cb:[f,p,v,d,u,o,h],"A#":[f,p],"B#":[],"D#":[f,p,v],"E#":[f],"G#":[f,p,v,d],none:[]};function g(m){var b=i[e(m)];return b?JSON.parse(JSON.stringify(b)):null}return yr=g,yr}var wr,Ss;function gf(){if(Ss)return wr;Ss=1;var e=Yh(),t=df(),a=vf(),n={},r={C:0,"C#":1,Db:1,D:2,"D#":3,Eb:3,E:4,F:5,"F#":6,Gb:6,G:7,"G#":8,Ab:8,A:9,"A#":10,Bb:10,B:11},s=["C","Db","D","Eb","E","F","F#","G","Ab","A","Bb","B"],l=["C","C#","D","D#","E","F","F#","G","G#","A","Bb","B"];n.keySignature=function(u,o,h,i,g){if(u.clef.type==="perc"||u.clef.type==="none")return{accidentals:a(o),root:h,acc:i};g||(g=0),u.localTransposeVerticalMovement=0,u.localTransposePreferFlats=!1;var m=a(o);if(!m)return u.key;if(u.localTranspose=(u.globalTranspose?u.globalTranspose:0)+g,!u.localTranspose)return{accidentals:m,root:h,acc:i};if(u.globalTransposeOrigKeySig=m,u.localTranspose%12===0)return u.localTransposeVerticalMovement=u.localTranspose/12*7,{accidentals:m,root:h,acc:i};var b=o[0];o[1]==="b"||o[1]==="#"?(b+=o[1],o=o.substr(2)):o=o.substr(1);var x=r[b],C=x!==void 0;C||(x=0,b="C",o="");for(var S=x+u.localTranspose;S<0;)S+=12;S>11&&(S=S%12);var I=o[0]==="m"?l[S]:s[S],F=I+o,y=a(F);(y.length===0||y[0].acc==="flat")&&(u.localTransposePreferFlats=!0);var A=F.charCodeAt(0)-b.charCodeAt(0);return u.localTranspose>0?(A<0||A===0&&(b[1]==="#"||F[1]==="b"))&&(A+=7):u.localTranspose<0&&(A>0||A===0&&(b[1]==="b"||F[1]==="#"))&&(A-=7),u.localTranspose>0?u.localTransposeVerticalMovement=A+Math.floor(u.localTranspose/12)*7:u.localTransposeVerticalMovement=A+Math.ceil(u.localTranspose/12)*7,C?{accidentals:y,root:I[0],acc:I.length>1?I[1]:""}:{accidentals:[],root:h,acc:i}},n.chordName=function(u,o){return t(o,u.localTranspose,u.localTransposePreferFlats,u.freegchord)};var c=["c","d","e","f","g","a","b"];function f(u,o,h,i,g){for(var m=c[(u+49)%7],b=0,x=0;x<i.length;x++)i[x].note.toLowerCase()===m&&(b=p[i[x].acc]);for(var C=p[h],S=C-b,I=c[(o+49)%7],F=0,y=0;y<g.accidentals.length;y++)g.accidentals[y].note.toLowerCase()===I&&(F=p[g.accidentals[y].acc]);var A=S+F;return A<-2&&(o--,A+=I==="c"||I==="f"?1:2),A>2&&(o++,A-=I==="b"||I==="e"?1:2),[o,A]}var p={dblflat:-2,flat:-1,natural:0,sharp:1,dblsharp:2},v={"-2":"dblflat","-1":"flat",0:"natural",1:"sharp",2:"dblsharp"},d={"-2":"__","-1":"_",0:"=",1:"^",2:"^^"};return n.note=function(u,o){if(!(!u.localTranspose||u.clef.type==="perc")){var h=o.pitch;if(u.localTransposeVerticalMovement&&(o.pitch=o.pitch+u.localTransposeVerticalMovement,o.name)){var i=o.accidental?o.name.substring(1):o.name,g=o.accidental?o.name[0]:"",m=e.pitchIndex(i);o.name=g+e.noteName(m+u.localTransposeVerticalMovement)}if(o.accidental){var b=f(h,o.pitch,o.accidental,u.globalTransposeOrigKeySig,u.targetKey);o.pitch=b[0],o.accidental=v[b[1]],o.name&&(o.name=d[b[1]]+o.name.replace(/[_^=]/g,""))}}},wr=n,wr}var xr,Es;function Ba(){if(Es)return xr;Es=1;var e=Ma(),t=gf(),a={};return function(){var n,r,s,l;a.initialize=function(o,h,i,g,m){n=o,r=h,s=i,l=m},a.standardKey=function(o,h,i,g){return t.keySignature(s,o,h,i,g)};var c={treble:{clef:"treble",pitch:4,mid:0},"treble+8":{clef:"treble+8",pitch:4,mid:0},"treble-8":{clef:"treble-8",pitch:4,mid:0},"treble^8":{clef:"treble+8",pitch:4,mid:0},treble_8:{clef:"treble-8",pitch:4,mid:0},treble1:{clef:"treble",pitch:2,mid:2},treble2:{clef:"treble",pitch:4,mid:0},treble3:{clef:"treble",pitch:6,mid:-2},treble4:{clef:"treble",pitch:8,mid:-4},treble5:{clef:"treble",pitch:10,mid:-6},perc:{clef:"perc",pitch:6,mid:0},none:{clef:"none",mid:0},bass:{clef:"bass",pitch:8,mid:-12},"bass+8":{clef:"bass+8",pitch:8,mid:-12},"bass-8":{clef:"bass-8",pitch:8,mid:-12},"bass^8":{clef:"bass+8",pitch:8,mid:-12},bass_8:{clef:"bass-8",pitch:8,mid:-12},"bass+16":{clef:"bass",pitch:8,mid:-12},"bass-16":{clef:"bass",pitch:8,mid:-12},"bass^16":{clef:"bass",pitch:8,mid:-12},bass_16:{clef:"bass",pitch:8,mid:-12},bass1:{clef:"bass",pitch:2,mid:-6},bass2:{clef:"bass",pitch:4,mid:-8},bass3:{clef:"bass",pitch:6,mid:-10},bass4:{clef:"bass",pitch:8,mid:-12},bass5:{clef:"bass",pitch:10,mid:-14},tenor:{clef:"alto",pitch:8,mid:-8},tenor1:{clef:"alto",pitch:2,mid:-2},tenor2:{clef:"alto",pitch:4,mid:-4},tenor3:{clef:"alto",pitch:6,mid:-6},tenor4:{clef:"alto",pitch:8,mid:-8},tenor5:{clef:"alto",pitch:10,mid:-10},alto:{clef:"alto",pitch:6,mid:-6},alto1:{clef:"alto",pitch:2,mid:-2},alto2:{clef:"alto",pitch:4,mid:-4},alto3:{clef:"alto",pitch:6,mid:-6},alto4:{clef:"alto",pitch:8,mid:-8},alto5:{clef:"alto",pitch:10,mid:-10},"alto+8":{clef:"alto+8",pitch:6,mid:-6},"alto-8":{clef:"alto-8",pitch:6,mid:-6},"alto^8":{clef:"alto+8",pitch:6,mid:-6},alto_8:{clef:"alto-8",pitch:6,mid:-6}},f=function(o,h){var i=c[o],g=i?i.mid:0;return g+h};a.fixClef=function(o){var h=c[o.type];h&&(o.clefPos=h.pitch,o.type=h.clef)},a.deepCopyKey=function(o){var h={accidentals:[],root:o.root,acc:o.acc,mode:o.mode};return o.accidentals.forEach(function(i){h.accidentals.push(Object.assign({},i))}),h};var p={A:5,B:6,C:0,D:1,E:2,F:3,G:4,a:12,b:13,c:7,d:8,e:9,f:10,g:11};a.addPosToKey=function(o,h){var i=o.verticalPos;h.accidentals.forEach(function(g){var m=p[g.note];m=m-i,g.verticalPos=m}),h.impliedNaturals&&h.impliedNaturals.forEach(function(g){var m=p[g.note];m=m-i,g.verticalPos=m}),i<-10?(h.accidentals.forEach(function(g){g.verticalPos-=7,(g.verticalPos>=11||g.verticalPos===10&&g.acc==="flat")&&(g.verticalPos-=7),g.note==="A"&&g.acc==="sharp"&&(g.verticalPos-=7),(g.note==="G"||g.note==="F")&&g.acc==="flat"&&(g.verticalPos-=7)}),h.impliedNaturals&&h.impliedNaturals.forEach(function(g){g.verticalPos-=7,(g.verticalPos>=11||g.verticalPos===10&&g.acc==="flat")&&(g.verticalPos-=7),g.note==="A"&&g.acc==="sharp"&&(g.verticalPos-=7),(g.note==="G"||g.note==="F")&&g.acc==="flat"&&(g.verticalPos-=7)})):i<-4?(h.accidentals.forEach(function(g){g.verticalPos-=7,i===-8&&(g.note==="f"||g.note==="g")&&g.acc==="sharp"&&(g.verticalPos-=7)}),h.impliedNaturals&&h.impliedNaturals.forEach(function(g){g.verticalPos-=7,i===-8&&(g.note==="f"||g.note==="g")&&g.acc==="sharp"&&(g.verticalPos-=7)})):i>=7&&(h.accidentals.forEach(function(g){g.verticalPos+=7}),h.impliedNaturals&&h.impliedNaturals.forEach(function(g){g.verticalPos+=7}))},a.fixKey=function(o,h){var i=Object.assign({},h);return a.addPosToKey(o,i),i};var v=function(o){var h=0,i=o[h++];(i==="^"||i==="_")&&(i=o[h++]);var g=p[i];for(g===void 0&&(g=6);h<o.length;h++)if(o[h]===",")g-=7;else if(o[h]==="'")g+=7;else break;return{mid:g-6,str:o.substring(h)}},d=function(o){for(var h=0;h<o.length;h++)o[h].note==="b"?o[h].note="B":o[h].note==="a"?o[h].note="A":o[h].note==="F"?o[h].note="f":o[h].note==="E"?o[h].note="e":o[h].note==="D"?o[h].note="d":o[h].note==="C"?o[h].note="c":o[h].note==="G"&&o[h].acc==="sharp"?o[h].note="g":o[h].note==="g"&&o[h].acc==="flat"&&(o[h].note="G")};a.parseKey=function(o,h){o.length===0&&(o="none");var i=n.tokenize(o,0,o.length),g={};if(i.length===0)return r("Must pass in key signature.",o,0),g;switch(i[0].token){case"HP":e.addDirective("bagpipes"),s.key={root:"HP",accidentals:[],acc:"",mode:""},g.foundKey=!0,i.shift();break;case"Hp":e.addDirective("bagpipes"),s.key={root:"Hp",accidentals:[{acc:"natural",note:"g"},{acc:"sharp",note:"f"},{acc:"sharp",note:"c"}],acc:"",mode:""},g.foundKey=!0,i.shift();break;case"none":s.key={root:"none",accidentals:[],acc:"",mode:""},g.foundKey=!0,i.shift();break;default:var m=n.getKeyPitch(i[0].token);if(m.len>0){g.foundKey=!0;var b="",x="";i[0].token.length>1?i[0].token=i[0].token.substring(1):i.shift();var C=m.token;if(i.length>0){var S=n.getSharpFlat(i[0].token);if(S.len>0&&(i[0].token.length>1?i[0].token=i[0].token.substring(1):i.shift(),C+=S.token,b=S.token),i.length>0){var I=n.getMode(i[0].token);I.len>0&&(i.shift(),C+=I.token,x=I.token)}if(a.standardKey(C,m.token,b,0)===void 0)return r("Unsupported key signature: "+C,o,0),g}var F=a.deepCopyKey(s.key),y=!h&&s.globalTranspose?-s.globalTranspose:0,A;if(h&&(A=s.globalTransposeOrigKeySig),s.key=a.deepCopyKey(a.standardKey(C,m.token,b,y)),h&&(s.globalTransposeOrigKeySig=A),s.key.mode=x,F&&s.keywarn!==!1){for(var P,M=0;M<s.key.accidentals.length;M++)for(P=0;P<F.accidentals.length;P++)F.accidentals[P].note&&s.key.accidentals[M].note.toLowerCase()===F.accidentals[P].note.toLowerCase()&&(F.accidentals[P].note=null);for(P=0;P<F.accidentals.length;P++)F.accidentals[P].note&&(s.key.impliedNaturals||(s.key.impliedNaturals=[]),s.key.impliedNaturals.push({acc:"natural",note:F.accidentals[P].note}))}}break}if(i.length===0||(i[0].token==="exp"&&i.shift(),i.length===0)||(i[0].token==="oct"&&i.shift(),i.length===0))return g;var N=n.getKeyAccidentals2(i);if(N.warn&&r(N.warn,o,0),N.accs){g.foundKey||(g.foundKey=!0,s.key={root:"none",acc:"",mode:"",accidentals:[]}),d(N.accs);for(var B=0;B<N.accs.length;B++){for(var E=!1,T=0;T<s.key.accidentals.length&&!E;T++)s.key.accidentals[T].note===N.accs[B].note&&(E=!0,s.key.accidentals[T].acc!==N.accs[B].acc&&(s.key.accidentals[T].acc=N.accs[B].acc,s.key.explicitAccidentals||(s.key.explicitAccidentals=[]),s.key.explicitAccidentals.push(N.accs[B])));if(!E&&(s.key.explicitAccidentals||(s.key.explicitAccidentals=[]),s.key.explicitAccidentals.push(N.accs[B]),s.key.accidentals.push(N.accs[B]),s.key.impliedNaturals))for(var L=0;L<s.key.impliedNaturals.length;L++)s.key.impliedNaturals[L].note===N.accs[B].note&&s.key.impliedNaturals.splice(L,1)}}for(var R;i.length>0;)switch(i[0].token){case"m":case"middle":if(i.shift(),i.length===0)return r("Expected = after middle",o,0),g;if(R=i.shift(),R.token!=="="){r("Expected = after middle",o,R.start);break}if(i.length===0)return r("Expected parameter after middle=",o,0),g;var O=n.getPitchFromTokens(i);O.warn&&r(O.warn,o,0),O.position&&(s.clef.verticalPos=O.position-6);break;case"transpose":if(i.shift(),i.length===0)return r("Expected = after transpose",o,0),g;if(R=i.shift(),R.token!=="="){r("Expected = after transpose",o,R.start);break}if(i.length===0)return r("Expected parameter after transpose=",o,0),g;if(i[0].type!=="number"){r("Expected number after transpose",o,i[0].start);break}s.clef.transpose=i[0].intt,i.shift();break;case"stafflines":if(i.shift(),i.length===0)return r("Expected = after stafflines",o,0),g;if(R=i.shift(),R.token!=="="){r("Expected = after stafflines",o,R.start);break}if(i.length===0)return r("Expected parameter after stafflines=",o,0),g;if(i[0].type!=="number"){r("Expected number after stafflines",o,i[0].start);break}s.clef.stafflines=i[0].intt,i.shift();break;case"staffscale":if(i.shift(),i.length===0)return r("Expected = after staffscale",o,0),g;if(R=i.shift(),R.token!=="="){r("Expected = after staffscale",o,R.start);break}if(i.length===0)return r("Expected parameter after staffscale=",o,0),g;if(i[0].type!=="number"){r("Expected number after staffscale",o,i[0].start);break}s.clef.staffscale=i[0].floatt,i.shift();break;case"octave":if(i.shift(),i.length===0)return r("Expected = after octave",o,0),g;if(R=i.shift(),R.token!=="="){r("Expected = after octave",o,R.start);break}if(i.length===0)return r("Expected parameter after octave=",o,0),g;if(i[0].type!=="number"){r("Expected number after octave",o,i[0].start);break}s.octave=i[0].intt,i.shift();break;case"style":if(i.shift(),i.length===0)return r("Expected = after style",o,0),g;if(R=i.shift(),R.token!=="="){r("Expected = after style",o,R.start);break}if(i.length===0)return r("Expected parameter after style=",o,0),g;switch(i[0].token){case"normal":case"harmonic":case"rhythm":case"x":case"triangle":s.style=i[0].token,i.shift();break;default:r("error parsing style element: "+i[0].token,o,i[0].start);break}break;case"clef":if(i.shift(),i.length===0)return r("Expected = after clef",o,0),g;if(R=i.shift(),R.token!=="="){r("Expected = after clef",o,R.start);break}if(i.length===0)return r("Expected parameter after clef=",o,0),g;case"treble":case"bass":case"alto":case"tenor":case"perc":case"none":var w=i.shift();switch(w.token){case"treble":case"tenor":case"alto":case"bass":case"perc":case"none":break;case"C":w.token="alto";break;case"F":w.token="bass";break;case"G":w.token="treble";break;case"c":w.token="alto";break;case"f":w.token="bass";break;case"g":w.token="treble";break;default:r("Expected clef name. Found "+w.token,o,w.start);break}i.length>0&&i[0].type==="number"&&(w.token+=i[0].token,i.shift()),i.length>1&&(i[0].token==="-"||i[0].token==="+"||i[0].token==="^"||i[0].token==="_")&&i[1].token==="8"&&(w.token+=i[0].token+i[1].token,i.shift(),i.shift()),s.clef={type:w.token,verticalPos:f(w.token,0)},s.currentVoice&&s.currentVoice.transpose!==void 0&&(s.clef.transpose=s.currentVoice.transpose),g.foundClef=!0;break;default:r("Unknown parameter: "+i[0].token,o,i[0].start),i.shift()}return g};var u=function(o){var h=s.voices[o];if(!(s.currentVoice&&s.currentVoice.index===h.index&&s.currentVoice.staffNum===h.staffNum))return s.currentVoice=h,l.setCurrentVoice(h.staffNum,h.index,o)};a.parseVoice=function(o,h,i){var g=n.getMeat(o,h,i),m=g.start,b=g.end,x=n.getToken(o,m,b);if(x.length===0){r("Expected a voice id",o,m);return}var C=!1;s.voices[x]===void 0&&(s.voices[x]={},C=!0,s.score_is_present&&r("Can't have an unknown V: id when the %score directive is present",o,m)),m+=x.length,m+=n.eatWhiteSpace(o,m);for(var S={startStaff:C},I=function(O){var w=n.getVoiceToken(o,m,b);w.warn!==void 0?r("Expected value for "+O+" in voice: "+w.warn,o,m):w.err!==void 0?r("Expected value for "+O+" in voice: "+w.err,o,m):w.token.length===0&&o[m]!=='"'?r("Expected value for "+O+" in voice",o,m):S[O]=w.token,m+=w.len},F=function(O,w,_){var k=n.getVoiceToken(o,m,b);k.warn!==void 0?r("Expected value for "+w+" in voice: "+k.warn,o,m):k.err!==void 0?r("Expected value for "+w+" in voice: "+k.err,o,m):k.token.length===0&&o[m]!=='"'?r("Expected value for "+w+" in voice",o,m):(k.token=parseFloat(k.token),s.voices[O][w]=k.token),m+=k.len},y=function(O,w){var _=n.getVoiceToken(o,m,b);if(_.warn!==void 0)r("Expected value for "+O+" in voice: "+_.warn,o,m);else if(_.err!==void 0)r("Expected value for "+O+" in voice: "+_.err,o,m);else if(_.token.length===0&&o[m]!=='"')r("Expected value for "+O+" in voice",o,m);else return _.token;m+=_.len},A=function(O,w){var _={_B:2,_E:9,_b:-10,_e:-3},k=n.getVoiceToken(o,m,b);if(k.warn!==void 0)r("Expected one of (_B, _E, _b, _e) for "+w+" in voice: "+k.warn,o,m);else if(k.token.length===0&&o[m]!=='"')r("Expected one of (_B, _E, _b, _e) for "+w+" in voice",o,m);else{var q=_[k.token];q?s.voices[O][w]=q:r("Expected one of (_B, _E, _b, _e) for "+w+" in voice",o,m)}m+=k.len};m<b;){var P=n.getVoiceToken(o,m,b);if(m+=P.len,P.warn)r("Error parsing voice: "+P.warn,o,m);else{var M=null;switch(P.token){case"clef":case"cl":I("clef");var N=0;S.clef!==void 0&&(S.clef=S.clef.replace(/[',]/g,""),S.clef.indexOf("+16")!==-1&&(N+=14,S.clef=S.clef.replace("+16","")),S.verticalPos=f(S.clef,N));break;case"treble":case"bass":case"tenor":case"alto":case"perc":case"none":case"treble'":case"bass'":case"tenor'":case"alto'":case"none'":case"treble''":case"bass''":case"tenor''":case"alto''":case"none''":case"treble,":case"bass,":case"tenor,":case"alto,":case"none,":case"treble,,":case"bass,,":case"tenor,,":case"alto,,":case"none,,":case"treble+8":case"treble-8":case"treble^8":case"treble_8":case"treble1":case"treble2":case"treble3":case"treble4":case"treble5":case"bass+8":case"bass-8":case"bass^8":case"bass_8":case"bass+16":case"bass-16":case"bass^16":case"bass_16":case"bass1":case"bass2":case"bass3":case"bass4":case"bass5":case"tenor1":case"tenor2":case"tenor3":case"tenor4":case"tenor5":case"alto1":case"alto2":case"alto3":case"alto4":case"alto5":case"alto+8":case"alto-8":case"alto^8":case"alto_8":var B=0;S.clef=P.token.replace(/[',]/g,""),S.verticalPos=f(S.clef,B),s.voices[x].clef=P.token;break;case"staves":case"stave":case"stv":I("staves");break;case"brace":case"brc":I("brace");break;case"bracket":case"brk":I("bracket");break;case"name":case"nm":I("name");break;case"subname":case"sname":case"snm":I("subname");break;case"merge":S.startStaff=!1;break;case"stem":case"stems":M=n.getVoiceToken(o,m,b),M.warn!==void 0?r("Expected value for stems in voice: "+M.warn,o,m):M.err!==void 0?r("Expected value for stems in voice: "+M.err,o,m):M.token==="up"||M.token==="down"?s.voices[x].stem=M.token:r("Expected up or down for voice stem",o,m),m+=M.len;break;case"up":case"down":s.voices[x].stem=P.token;break;case"middle":case"m":I("verticalPos"),S.verticalPos=v(S.verticalPos).mid;break;case"gchords":case"gch":s.voices[x].suppressChords=!0,M=n.getVoiceToken(o,m,b),M.token==="0"&&(m=m+M.len);break;case"space":case"spc":I("spacing");break;case"scale":F(x,"scale");break;case"score":A(x,"scoreTranspose");break;case"transpose":F(x,"transpose");break;case"stafflines":F(x,"stafflines");break;case"staffscale":F(x,"staffscale");break;case"octave":F(x,"octave");break;case"volume":F(x,"volume");break;case"cue":var E=y("cue");E==="on"?s.voices[x].scale=.6:s.voices[x].scale=1;break;case"style":M=n.getVoiceToken(o,m,b),M.warn!==void 0?r("Expected value for style in voice: "+M.warn,o,m):M.err!==void 0?r("Expected value for style in voice: "+M.err,o,m):M.token==="normal"||M.token==="harmonic"||M.token==="rhythm"||M.token==="x"||M.token==="triangle"?s.voices[x].style=M.token:r("Expected one of [normal, harmonic, rhythm, x, triangle] for voice style",o,m),m+=M.len;break}}m+=n.eatWhiteSpace(o,m)}if((S.startStaff||s.staves.length===0)&&(s.staves.push({index:s.staves.length,meter:s.origMeter}),s.score_is_present||(s.staves[s.staves.length-1].numVoices=0)),s.voices[x].staffNum===void 0){s.voices[x].staffNum=s.staves.length-1;var T=0;for(var L in s.voices)s.voices.hasOwnProperty(L)&&s.voices[L].staffNum===s.voices[x].staffNum&&T++;s.voices[x].index=T-1}var R=s.staves[s.voices[x].staffNum];return s.score_is_present||R.numVoices++,S.clef&&(R.clef={type:S.clef,verticalPos:S.verticalPos}),S.spacing&&(R.spacing_below_offset=S.spacing),S.verticalPos&&(R.verticalPos=S.verticalPos),S.name&&(R.name?R.name.push(S.name):R.name=[S.name]),S.subname&&(R.subname?R.subname.push(S.subname):R.subname=[S.subname]),u(x)}}(),xr=a,xr}var _r,As;function $h(){if(As)return _r;As=1;var e=yt(),t=Ma(),a=Ba(),n=function(r,s,l,c,f){this.reset=function(d,u,o,h){a.initialize(d,u,o,h,f),t.initialize(d,u,o,h,f)},this.reset(r,s,l,c),this.setTitle=function(d,u){l.hasMainTitle?f.addSubtitle(d,{startChar:l.iChar,endChar:l.iChar+u+2}):(f.addMetaText("title",d,{startChar:l.iChar,endChar:l.iChar+u+2}),l.hasMainTitle=!0)},this.setMeter=function(d){if(d=r.stripComment(d),d==="C")return l.havent_set_length===!0&&(l.default_length=.125,l.havent_set_length=!1),{type:"common_time"};if(d==="C|")return l.havent_set_length===!0&&(l.default_length=.125,l.havent_set_length=!1),{type:"cut_time"};if(d==="o")return l.havent_set_length===!0&&(l.default_length=.125,l.havent_set_length=!1),{type:"tempus_perfectum"};if(d==="c")return l.havent_set_length===!0&&(l.default_length=.125,l.havent_set_length=!1),{type:"tempus_imperfectum"};if(d==="o.")return l.havent_set_length===!0&&(l.default_length=.125,l.havent_set_length=!1),{type:"tempus_perfectum_prolatio"};if(d==="c.")return l.havent_set_length===!0&&(l.default_length=.125,l.havent_set_length=!1),{type:"tempus_imperfectum_prolatio"};if(d.length===0||d.toLowerCase()==="none")return l.havent_set_length===!0&&(l.default_length=.125,l.havent_set_length=!1),null;var u=r.tokenize(d,0,d.length);try{var o=function(){var x={value:0,num:""},C=u.shift();for(C.token==="("&&(C=u.shift());;){if(C.type!=="number")throw"Expected top number of meter";if(x.value+=parseInt(C.token),x.num+=C.token,u.length===0||u[0].token==="/")return x;if(C=u.shift(),C.token===")"){if(u.length===0||u[0].token==="/")return x;throw"Unexpected paren in meter"}if(C.token!=="."&&C.token!=="+"||(x.num+=C.token,u.length===0))throw"Expected top number of meter";C=u.shift()}return x},h=function(){var x=o();if(u.length===0)return x;var C=u.shift();if(C.token!=="/")throw"Expected slash in meter";if(C=u.shift(),C.type!=="number")throw"Expected bottom number of meter";return x.den=C.token,x.value=x.value/parseInt(x.den),x};if(u.length===0)throw"Expected meter definition in M: line";for(var i={type:"specified",value:[]},g=0;;){var m=h();g+=m.value;var b={num:m.num};if(m.den!==void 0&&(b.den=m.den),i.value.push(b),u.length===0)break}return l.havent_set_length===!0&&(l.default_length=g<.75?.0625:.125,l.havent_set_length=!1),i}catch(x){s(x,d,0)}return null},this.calcTempo=function(d){var u=.25;l.meter&&l.meter.type==="specified"?u=1/parseInt(l.meter.value[0].den):l.origMeter&&l.origMeter.type==="specified"&&(u=1/parseInt(l.origMeter.value[0].den));for(var o=0;o<d.duration;o++)d.duration[o]=u*d.duration[o];return d},this.resolveTempo=function(){l.tempo&&(this.calcTempo(l.tempo),c.metaText.tempo=l.tempo,delete l.tempo)},this.addUserDefinition=function(d,u,o){var h=d.indexOf("=",u);if(h===-1){s("Need an = in a macro definition",d,u);return}var i=e.strip(d.substring(u,h)),g=e.strip(d.substring(h+1));if(i.length!==1){s("Macro definitions can only be one character",d,u);return}var m="HIJKLMNOPQRSTUVWXYhijklmnopqrstuvw~";if(m.indexOf(i)===-1){s("Macro definitions must be H-Y, h-w, or tilde",d,u);return}if(g.length===0){s("Missing macro definition",d,u);return}l.macros===void 0&&(l.macros={}),l.macros[i]=g},this.setDefaultLength=function(d,u,o){var h=d.substring(u,o).replace(/ /g,""),i=h.split("/");if(i.length===2){var g=parseInt(i[0]),m=parseInt(i[1]);m>0&&(l.default_length=g/m,l.havent_set_length=!1)}else i.length===1&&i[0]==="1"&&(l.default_length=1,l.havent_set_length=!1)};var p={larghissimo:20,adagissimo:24,sostenuto:28,grave:32,largo:40,lento:50,larghetto:60,adagio:68,adagietto:74,andante:80,andantino:88,"marcia moderato":84,"andante moderato":100,moderato:112,allegretto:116,"allegro moderato":120,allegro:126,animato:132,agitato:140,veloce:148,"mosso vivo":156,vivace:164,vivacissimo:172,allegrissimo:176,presto:184,prestissimo:210};this.setTempo=function(d,u,o,h){try{var i=r.tokenize(d,u,o);if(i.length===0)throw"Missing parameter in Q: field";var g={startChar:h+u-2,endChar:h+o},m=!0,b=i.shift();if(b.type==="quote"&&(g.preString=b.token,b=i.shift(),i.length===0))return p[g.preString.toLowerCase()]&&(g.bpm=p[g.preString.toLowerCase()],g.suppressBpm=!0),{type:"immediate",tempo:g};if(b.type==="alpha"&&b.token==="C"){if(i.length===0)throw"Missing tempo after C in Q: field";if(b=i.shift(),b.type==="punct"&&b.token==="="){if(i.length===0)throw"Missing tempo after = in Q: field";if(b=i.shift(),b.type!=="number")throw"Expected number after = in Q: field";g.duration=[1],g.bpm=parseInt(b.token)}else if(b.type==="number"){if(g.duration=[parseInt(b.token)],i.length===0)throw"Missing = after duration in Q: field";if(b=i.shift(),b.type!=="punct"||b.token!=="=")throw"Expected = after duration in Q: field";if(i.length===0)throw"Missing tempo after = in Q: field";if(b=i.shift(),b.type!=="number")throw"Expected number after = in Q: field";g.bpm=parseInt(b.token)}else throw"Expected number or equal after C in Q: field"}else if(b.type==="number"){var x=parseInt(b.token);if(i.length===0||i[0].type==="quote")g.duration=[1],g.bpm=x;else{if(m=!1,b=i.shift(),b.type!=="punct"&&b.token!=="/"||(b=i.shift(),b.type!=="number"))throw"Expected fraction in Q: field";var C=parseInt(b.token);for(g.duration=[x/C];i.length>0&&i[0].token!=="="&&i[0].type!=="quote";){if(b=i.shift(),b.type!=="number"||(x=parseInt(b.token),b=i.shift(),b.type!=="punct"&&b.token!=="/")||(b=i.shift(),b.type!=="number"))throw"Expected fraction in Q: field";C=parseInt(b.token),g.duration.push(x/C)}if(b=i.shift(),b.type!=="punct"&&b.token!=="=")throw"Expected = in Q: field";if(b=i.shift(),b.type!=="number")throw"Expected tempo in Q: field";g.bpm=parseInt(b.token)}}else throw"Unknown value in Q: field";if(i.length!==0&&(b=i.shift(),b.type==="quote"&&(g.postString=b.token,b=i.shift()),i.length!==0))throw"Unexpected string at end of Q: field";return l.printTempo===!1&&(g.suppress=!0),{type:m?"delaySet":"immediate",tempo:g}}catch(S){return s(S,d,u),{type:"none"}}},this.letter_to_inline_header=function(d,u,o){var h=!1,i=r.eatWhiteSpace(d,u);if(u+=i,d.length>=u+5&&d[u]==="["&&d[u+2]===":"){var g=d.indexOf("]",u),m=l.iChar+u,b=l.iChar+g+1;switch(d.substring(u,u+3)){case"[I:":var x=t.addDirective(d.substring(u+3,g));return x&&s(x,d,u),[g-u+1+i];case"[M:":var C=this.setMeter(d.substring(u+3,g));return f.hasBeginMusic()&&C?f.appendStartingElement("meter",m,b,C):l.meter=C,[g-u+1+i];case"[K:":var S=a.parseKey(d.substring(u+3,g),!0);return S.foundClef&&f.hasBeginMusic()&&f.appendStartingElement("clef",m,b,l.clef),S.foundKey&&f.hasBeginMusic()&&f.appendStartingElement("key",m,b,a.fixKey(l.clef,l.key)),[g-u+1+i];case"[P:":var I=t.parseFontChangeLine(d.substring(u+3,g));return o||c.lines.length<=c.lineNum?l.partForNextLine={title:I,startChar:m,endChar:b}:f.appendElement("part",m,b,{title:I}),[g-u+1+i];case"[L:":return this.setDefaultLength(d,u+3,g),[g-u+1+i];case"[Q:":if(g>0){var F=this.setTempo(d,u+3,g,l.iChar);return F.type==="delaySet"?f.hasBeginMusic()?f.appendElement("tempo",m,b,this.calcTempo(F.tempo)):l.tempoForNextLine=["tempo",m,b,this.calcTempo(F.tempo)]:F.type==="immediate"&&(!o&&f.hasBeginMusic()?f.appendElement("tempo",m,b,F.tempo):l.tempoForNextLine=["tempo",m,b,F.tempo]),[g-u+1+i,d[u+1],d.substring(u+3,g)]}break;case"[V:":if(g>0)return h=a.parseVoice(d,u+3,g),[g-u+1+i,d[u+1],d.substring(u+3,g),h];break;case"[r:":return[g-u+1+i]}}return[0]},this.letter_to_body_header=function(d,u){var o=!1;if(d.length>=u+3)switch(d.substring(u,u+2)){case"I:":var h=t.addDirective(d.substring(u+2));return h&&s(h,d,u),[d.length];case"M:":var i=this.setMeter(d.substring(u+2));return f.hasBeginMusic()&&i&&f.appendStartingElement("meter",l.iChar+u,l.iChar+d.length,i),[d.length];case"K:":var g=a.parseKey(d.substring(u+2),f.hasBeginMusic());return g.foundClef&&f.hasBeginMusic()&&l.keywarn!==!1&&f.appendStartingElement("clef",l.iChar+u,l.iChar+d.length,l.clef),g.foundKey&&f.hasBeginMusic()&&l.keywarn!==!1&&f.appendStartingElement("key",l.iChar+u,l.iChar+d.length,a.fixKey(l.clef,l.key)),[d.length];case"P:":return f.hasBeginMusic()&&f.appendElement("part",l.iChar+u,l.iChar+d.length,{title:d.substring(u+2)}),[d.length];case"L:":return this.setDefaultLength(d,u+2,d.length),[d.length];case"Q:":var m=d.indexOf("",u+2);m===-1&&(m=d.length);var b=this.setTempo(d,u+2,m,l.iChar);return b.type==="delaySet"?f.appendElement("tempo",l.iChar+u,l.iChar+d.length,this.calcTempo(b.tempo)):b.type==="immediate"&&f.appendElement("tempo",l.iChar+u,l.iChar+d.length,b.tempo),[m,d[u],e.strip(d.substring(u+2))];case"V:":return o=a.parseVoice(d,u+2,d.length),[d.length,d[u],e.strip(d.substring(u+2)),o]}return[0]};var v={A:"author",B:"book",C:"composer",D:"discography",F:"url",G:"group",I:"instruction",N:"notes",O:"origin",R:"rhythm",S:"source",W:"unalignedWords",Z:"transcription"};this.parseHeader=function(d){var u=v[d[0]],o=d.length-2,h=r.translateString(r.stripComment(d.substring(2)));if(u==="unalignedWords"||u==="notes")f.addMetaTextArray(u,t.parseFontChangeLine(h),{startChar:l.iChar,endChar:l.iChar+d.length});else if(u!==void 0)f.addMetaText(u,t.parseFontChangeLine(h),{startChar:l.iChar,endChar:l.iChar+d.length});else{var i=l.iChar,g=i+d.length;switch(d[0]){case"H":for(f.addMetaTextArray("history",t.parseFontChangeLine(h),{startChar:l.iChar,endChar:l.iChar+d.length}),d=r.peekLine();d&&d[1]!==":";)r.nextLine(),f.addMetaTextArray("history",t.parseFontChangeLine(r.translateString(r.stripComment(d))),{startChar:l.iChar,endChar:l.iChar+d.length}),d=r.peekLine();break;case"K":this.resolveTempo();var m=a.parseKey(d.substring(2),!1);!l.is_in_header&&f.hasBeginMusic()&&l.keywarn!==!1&&(m.foundClef&&f.appendStartingElement("clef",i,g,l.clef),m.foundKey&&f.appendStartingElement("key",i,g,a.fixKey(l.clef,l.key))),l.is_in_header=!1;break;case"L":this.setDefaultLength(d,2,d.length);break;case"M":l.origMeter=l.meter=this.setMeter(d.substring(2));break;case"P":l.is_in_header?f.addMetaText("partOrder",t.parseFontChangeLine(h),{startChar:l.iChar,endChar:l.iChar+d.length}):l.partForNextLine={title:h,startChar:i,endChar:g};break;case"Q":var b=this.setTempo(d,2,d.length,l.iChar);b.type==="delaySet"?l.tempo=b.tempo:b.type==="immediate"&&(c.metaText.tempo?l.tempoForNextLine=["tempo",i,g,b.tempo]:c.metaText.tempo=b.tempo);break;case"T":l.titlecaps&&(h=h.toUpperCase()),this.setTitle(t.parseFontChangeLine(r.theReverser(h)),o);break;case"U":this.addUserDefinition(d,2,d.length);break;case"V":if(a.parseVoice(d,2,d.length),!l.is_in_header)return{newline:!0};break;case"s":return{symbols:!0};case"w":return{words:!0};case"X":break;case"E":case"m":s("Ignored header",d,0);break;default:return{regular:!0}}}return{}}};return _r=n,_r}var je={},Ms;function Wh(){return Ms||(Ms=1,je.legalAccents=["trill","trillh","lowermordent","uppermordent","mordent","pralltriller","accent","fermata","invertedfermata","tenuto","0","1","2","3","4","5","+","wedge","open","thumb","snap","turn","roll","breath","shortphrase","mediumphrase","longphrase","segno","coda","D.S.","D.C.","fine","beambr1","beambr2","slide","marcato","upbow","downbow","/","//","///","////","trem1","trem2","trem3","trem4","turnx","invertedturn","invertedturnx","trill(","trill)","arpeggio","xstem","mark","umarcato","style=normal","style=harmonic","style=rhythm","style=x","style=triangle","D.C.alcoda","D.C.alfine","D.S.alcoda","D.S.alfine","editorial","courtesy"],je.volumeDecorations=["p","pp","f","ff","mf","mp","ppp","pppp","fff","ffff","sfz"],je.dynamicDecorations=["crescendo(","crescendo)","diminuendo(","diminuendo)","glissando(","glissando)","~(","~)"],je.accentPseudonyms=[["<","accent"],[">","accent"],["tr","trill"],["plus","+"],["emphasis","accent"],["^","umarcato"],["marcato","umarcato"]],je.accentDynamicPseudonyms=[["<(","crescendo("],["<)","crescendo)"],[">(","diminuendo("],[">)","diminuendo)"]],je.nonDecorations="ABCDEFGabcdefgxyzZ[]|^_{",je.durations=[.5,.75,.875,.9375,.96875,.984375,.25,.375,.4375,.46875,.484375,.4921875,.125,.1875,.21875,.234375,.2421875,.24609375,.0625,.09375,.109375,.1171875,.12109375,.123046875,.03125,.046875,.0546875,.05859375,.060546875,.0615234375,.015625,.0234375,.02734375,.029296875,.0302734375,.03076171875],je.pitches={A:5,B:6,C:0,D:1,E:2,F:3,G:4,a:12,b:13,c:7,d:8,e:9,f:10,g:11},je.rests={x:"invisible",X:"invisible-multimeasure",y:"spacer",z:"rest",Z:"multimeasure"},je.accMap={dblflat:"__",flat:"_",natural:"=",sharp:"^",dblsharp:"^^",quarterflat:"_/",quartersharp:"^/"},je.tripletQ={2:3,3:2,4:3,5:2,6:2,7:2,8:3,9:2}),je}var Cr,Bs;function Uh(){if(Bs)return Cr;Bs=1;var e=Ba(),t=gf(),a,n,r,s,l,c,{legalAccents:f,volumeDecorations:p,dynamicDecorations:v,accentPseudonyms:d,accentDynamicPseudonyms:u,nonDecorations:o,durations:h,pitches:i,rests:g,accMap:m,tripletQ:b}=Wh(),x=function(w,_,k,q,z,U){a=w,n=_,r=k,s=q,l=z,c=U,this.lineContinuation=!1},C=function(w,_,k){if(w.inTie[_]===void 0)return!1;var q=w.currentVoice?w.currentVoice.staffNum*100+w.currentVoice.index:0;return!!(w.inTie[_][q]&&(k.pitches!==void 0||k.rest.type!=="spacer"))},S={};x.prototype.parseMusic=function(w){c.resolveTempo(),r.is_in_header=!1;for(var _=0,k=r.iChar;a.isWhiteSpace(w[_])&&_<w.length;)_++;if(!(_===w.length||w[_]==="%")){var q=r.start_new_line;r.continueall===void 0?r.start_new_line=!0:r.start_new_line=!1;var z=0,U=c.letter_to_body_header(w,_);U[0]>0&&(_+=U[0],U[1]==="V"&&this.startNewLine());for(var Y=0;_<w.length;){var ee=_;if(w[_]==="%")break;var oe=c.letter_to_inline_header(w,_,q);if(oe[0]>0)_+=oe[0],oe[1]==="V"&&(q=!0);else{(!l.hasBeginMusic()||q&&!this.lineContinuation)&&(this.startNewLine(),q=!1);for(var J;;)if(J=a.eatWhiteSpace(w,_),J>0&&(_+=J),_>0&&w[_-1]===""&&(J=c.letter_to_body_header(w,_),J[0]>0&&(J[1]==="V"&&this.startNewLine(),_=J[0],r.start_new_line=!1)),J=N(w,_),J[0]>0&&(_+=J[0]),J=F(w,_),J[0]>0){S.chord||(S.chord=[]);var fe=a.translateString(J[1]);fe=fe.replace(/;/g,`
`);for(var ue=!1,de=0;de<S.chord.length;de++)S.chord[de].position===J[2]&&(ue=!0,S.chord[de].name+=`
`+fe);ue===!1&&(J[2]===null&&J[3]?S.chord.push({name:fe,rel_position:J[3]}):S.chord.push({name:fe,position:J[2]})),_+=J[0];var D=a.skipWhiteSpace(w.substring(_));D>0&&(S.force_end_beam_last=!0),_+=D}else if(o.indexOf(w[_])===-1?J=M(w,_):J=[0],J[0]>0)J[1]===null?_+1<w.length&&this.startNewLine():J[1].length>0&&(J[1].indexOf("style=")===0?S.style=J[1].substr(6):(S.decoration===void 0&&(S.decoration=[]),J[1]==="beambr1"?S.beambr=1:J[1]==="beambr2"?S.beambr=2:S.decoration.push(J[1]))),_+=J[0];else if(J=y(w,_),J[0]>0)S.gracenotes=J[1],_+=J[0];else break;if(J=B(w,_),J[0]>0){Y=0,S.gracenotes!==void 0&&(S.rest={type:"spacer"},S.duration=.125,r.addFormattingOptions(S,s.formatting,"note"),l.appendElement("note",k+_,k+_+J[0],S),r.measureNotEmpty=!0,S={});var G={type:J[1]};G.type.length===0?n("Unknown bar type",w,_):(r.inEnding&&G.type!=="bar_thin"&&(G.endEnding=!0,r.inEnding=!1),J[2]&&(G.startEnding=J[2],r.inEnding&&(G.endEnding=!0),r.inEnding=!0,J[1]==="bar_right_repeat"?r.restoreStartEndingHoldOvers():r.duplicateStartEndingHoldOvers()),S.decoration!==void 0&&(G.decoration=S.decoration),S.chord!==void 0&&(G.chord=S.chord),G.startEnding&&r.barFirstEndingNum===void 0?r.barFirstEndingNum=r.currBarNumber:G.startEnding&&G.endEnding&&r.barFirstEndingNum?r.currBarNumber=r.barFirstEndingNum:G.endEnding&&(r.barFirstEndingNum=void 0),G.type!=="bar_invisible"&&r.measureNotEmpty&&O()&&(r.currBarNumber++,r.barNumbers&&r.currBarNumber%r.barNumbers===0&&(G.barNumber=r.currBarNumber)),r.addFormattingOptions(S,s.formatting,"bar"),l.appendElement("bar",k+ee,k+_+J[0],G),r.measureNotEmpty=!1,S={}),_+=J[0]}else if(w[_]==="&")J=A(w,_),J[0]>0&&(l.appendElement("overlay",k,k+1,{}),_+=1,Y++);else{if(J=E(w,_),J.consumed>0&&(J.startSlur!==void 0&&(S.startSlur=J.startSlur),J.dottedSlur&&(S.dottedSlur=!0),J.triplet!==void 0&&(z>0?n("Can't nest triplets",w,_):(S.startTriplet=J.triplet,S.tripletMultiplier=J.tripletQ/J.triplet,S.tripletR=J.num_notes,z=J.num_notes===void 0?J.triplet:J.num_notes)),_+=J.consumed),w[_]==="["){_++;for(var $=null,Q=!1,K=!1;!K;){var Z=M(w,_);Z[0]>0&&(_+=Z[0]);var re=L(w,_,{},!1);if(re!==null&&re.pitch!==void 0)Z[0]>0&&Z[1].indexOf("style=")!==0&&(S.decoration===void 0&&(S.decoration=[]),S.decoration.push(Z[1])),re.end_beam&&(S.end_beam=!0,delete re.end_beam),S.pitches===void 0?(S.duration=re.duration,S.pitches=[re]):S.pitches.push(re),delete re.duration,Z[0]>0&&Z[1].indexOf("style=")===0&&(S.pitches[S.pitches.length-1].style=Z[1].substr(6)),r.inTieChord[S.pitches.length]&&(re.endTie=!0,r.inTieChord[S.pitches.length]=void 0),re.startTie&&(r.inTieChord[S.pitches.length]=!0),_=re.endChar,delete re.endChar;else if(w[_]===" ")n("Spaces are not allowed in chords",w,_),_++;else{if(_<w.length&&w[_]==="]"){_++,r.next_note_duration!==0&&(S.duration=S.duration*r.next_note_duration,r.next_note_duration=0),C(r,Y,S)&&(S.pitches.forEach(function(X){X.endTie=!0}),I(r,Y,!1)),z>0&&!(S.rest&&S.rest.type==="spacer")&&(z--,z===0&&(S.endTriplet=!0));for(var ie=!1;_<w.length&&!ie;){switch(w[_]){case" ":case"	":T(S);break;case")":S.endSlur===void 0?S.endSlur=1:S.endSlur++;break;case"-":S.pitches.forEach(function(X){X.startTie={}}),I(r,Y,!0);break;case">":case"<":var ne=R(w,_);_+=ne[0]-1,r.next_note_duration=ne[2],$?$=$*ne[1]:$=ne[1];break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"/":var te=a.getFraction(w,_);$=te.value,_=te.index;var W=w[_];W===" "&&(Q=!0),W==="-"||W===")"||W===" "||W==="<"||W===">"?_--:ie=!0;break;case"0":$=0;break;default:ie=!0;break}ie||_++}}else n("Expected ']' to end the chords",w,_);S.pitches!==void 0&&($!==null&&(S.duration=S.duration*$,Q&&T(S)),r.addFormattingOptions(S,s.formatting,"note"),l.appendElement("note",k+ee,k+_,S),r.measureNotEmpty=!0,S={}),K=!0}}}else{var V={},H=L(w,_,V,!0);if(V.endTie!==void 0&&I(r,Y,!0),H!==null){H.pitch!==void 0?(S.pitches=[{}],H.accidental!==void 0&&(S.pitches[0].accidental=H.accidental),S.pitches[0].pitch=H.pitch,S.pitches[0].name=H.name,(H.midipitch||H.midipitch===0)&&(S.pitches[0].midipitch=H.midipitch),H.endSlur!==void 0&&(S.pitches[0].endSlur=H.endSlur),H.endTie!==void 0&&(S.pitches[0].endTie=H.endTie),H.startSlur!==void 0&&(S.pitches[0].startSlur=H.startSlur),S.startSlur!==void 0&&(S.pitches[0].startSlur=S.startSlur),S.dottedSlur!==void 0&&(S.pitches[0].dottedSlur=!0),H.startTie!==void 0&&(S.pitches[0].startTie=H.startTie),S.startTie!==void 0&&(S.pitches[0].startTie=S.startTie)):(S.rest=H.rest,H.rest.type==="multimeasure"&&O()&&(r.currBarNumber+=H.rest.text-1),H.endSlur!==void 0&&(S.endSlur=H.endSlur),H.endTie!==void 0&&(S.rest.endTie=H.endTie),H.startSlur!==void 0&&(S.startSlur=H.startSlur),H.startTie!==void 0&&(S.rest.startTie=H.startTie),S.startTie!==void 0&&(S.rest.startTie=S.startTie)),H.chord!==void 0&&(S.chord=H.chord),H.duration!==void 0&&(S.duration=H.duration),H.decoration!==void 0&&(S.decoration=H.decoration),H.graceNotes!==void 0&&(S.graceNotes=H.graceNotes),delete S.startSlur,delete S.dottedSlur,C(r,Y,S)&&(S.pitches!==void 0?S.pitches[0].endTie=!0:S.rest.type!=="spacer"&&(S.rest.endTie=!0),I(r,Y,!1)),(H.startTie||S.startTie)&&I(r,Y,!0),_=H.endChar,z>0&&!(H.rest&&H.rest.type==="spacer")&&(z--,z===0&&(S.endTriplet=!0)),H.end_beam&&T(S),S.rest&&S.rest.type==="rest"&&S.duration===1&&P(r)<=1&&(S.rest.type="whole",S.duration=P(r)),S.duration<1&&h.indexOf(S.duration)===-1&&S.duration!==0&&(!S.rest||S.rest.type!=="spacer")&&n("Duration not representable: "+w.substring(ee,_),w,_),r.addFormattingOptions(S,s.formatting,"note");var j=l.appendElement("note",k+ee,k+_,S);j||(this.startNewLine(),l.appendElement("note",k+ee,k+_,S)),r.measureNotEmpty=!0,S={}}}_===ee&&(w[_]!==" "&&w[_]!=="`"&&n("Unknown character ignored",w,_),_++)}}}this.lineContinuation=w.indexOf("")>=0||U[0]>0,this.lineContinuation||(S={})}};var I=function(w,_,k){var q=w.currentVoice?w.currentVoice.staffNum*100+w.currentVoice.index:0;w.inTie[_]===void 0&&(w.inTie[_]=[]),w.inTie[_][q]=k},F=function(w,_){if(w[_]==='"'){var k=a.getBrackettedSubstring(w,_,5);if(k[2]||n("Missing the closing quote while parsing the chord symbol",w,_),k[0]>0&&k[1].length>0&&k[1][0]==="^")k[1]=k[1].substring(1),k[2]="above";else if(k[0]>0&&k[1].length>0&&k[1][0]==="_")k[1]=k[1].substring(1),k[2]="below";else if(k[0]>0&&k[1].length>0&&k[1][0]==="<")k[1]=k[1].substring(1),k[2]="left";else if(k[0]>0&&k[1].length>0&&k[1][0]===">")k[1]=k[1].substring(1),k[2]="right";else if(k[0]>0&&k[1].length>0&&k[1][0]==="@"){k[1]=k[1].substring(1);var q=a.getFloat(k[1]);if(q.digits===0)return n("Missing first position in absolutely positioned annotation.",w,_),k[1]=k[1].replace("@",""),k[2]="above",k;if(k[1]=k[1].substring(q.digits),k[1][0]!==",")return n("Missing comma absolutely positioned annotation.",w,_),k[1]=k[1].replace("@",""),k[2]="above",k;k[1]=k[1].substring(1);var z=a.getFloat(k[1]);if(z.digits===0)return n("Missing second position in absolutely positioned annotation.",w,_),k[1]=k[1].replace("@",""),k[2]="above",k;k[1]=k[1].substring(z.digits);var U=a.skipWhiteSpace(k[1]);k[1]=k[1].substring(U),k[2]=null,k[3]={x:q.value,y:z.value}}else r.freegchord!==!0&&(k[1]=k[1].replace(/([ABCDEFG0-9])b/g,"$1♭"),k[1]=k[1].replace(/([ABCDEFG0-9])#/g,"$1♯"),k[1]=k[1].replace(/^([ABCDEFG])([♯♭]?)o([^A-Za-z])/g,"$1$2°$3"),k[1]=k[1].replace(/^([ABCDEFG])([♯♭]?)o$/g,"$1$2°"),k[1]=k[1].replace(/^([ABCDEFG])([♯♭]?)0([^A-Za-z])/g,"$1$2ø$3"),k[1]=k[1].replace(/^([ABCDEFG])([♯♭]?)\^([^A-Za-z])/g,"$1$2∆$3")),k[2]="default",k[1]=t.chordName(r,k[1]);return k}return[0,""]},y=function(w,_){if(w[_]==="{"){var k=a.getBrackettedSubstring(w,_,1,"}");k[2]||n("Missing the closing '}' while parsing grace note",w,_),w[_+k[0]]===")"&&(k[0]++,k[1]+=")");for(var q=[],z=0,U=!1;z<k[1].length;){var Y=!1;k[1][z]==="/"&&(Y=!0,z++);var ee=L(k[1],z,{},!1);ee!==null?(ee.duration=ee.duration/(r.default_length*8),Y&&(ee.acciaccatura=!0),ee.rest?n("Rests not allowed as grace notes '"+k[1][z]+"' while parsing grace note",w,_):q.push(ee),U&&(ee.endTie=!0,U=!1),ee.startTie&&(U=!0),z=ee.endChar,delete ee.endChar,ee.end_beam&&(ee.endBeam=!0,delete ee.end_beam)):(k[1][z]===" "?q.length>0&&(q[q.length-1].endBeam=!0):n("Unknown character '"+k[1][z]+"' while parsing grace note",w,_),z++)}if(q.length)return[k[0],q]}return[0]};function A(w,_){if(w[_]==="&"){for(var k=_;w[_]&&w[_]!==":"&&w[_]!=="|";)_++;return[_-k,w.substring(k+1,_)]}return[0]}function P(w){var _=w.origMeter;return!_||_.type!=="specified"||!_.value||_.value.length===0?1:parseInt(_.value[0].num,10)/parseInt(_.value[0].den,10)}var M=function(w,_){var k=r.macros[w[_]];if(k!==void 0)return(k[0]==="!"||k[0]==="+")&&(k=k.substring(1)),(k[k.length-1]==="!"||k[k.length-1]==="+")&&(k=k.substring(0,k.length-1)),f.includes(k)?[1,k]:p.includes(k)?(r.volumePosition==="hidden"&&(k=""),[1,k]):v.includes(k)?(r.dynamicPosition==="hidden"&&(k=""),[1,k]):(r.ignoredDecorations.includes(k)||n("Unknown macro: "+k,w,_),[1,""]);switch(w[_]){case".":if(w[_+1]==="("||w[_+1]==="-")break;return[1,"staccato"];case"u":return[1,"upbow"];case"v":return[1,"downbow"];case"~":return[1,"irishroll"];case"!":case"+":var q=a.getBrackettedSubstring(w,_,5);if(q[1].length>1&&(q[1][0]==="^"||q[1][0]==="_")&&(q[1]=q[1].substring(1)),f.includes(q[1]))return q;if(p.includes(q[1]))return r.volumePosition==="hidden"&&(q[1]=""),q;if(v.includes(q[1]))return r.dynamicPosition==="hidden"&&(q[1]=""),q;var z=d.findIndex(function(U){return q[1]===U[0]});return z>=0?(q[1]=d[z][1],q):(z=u.findIndex(function(U){return q[1]===U[0]}),z>=0?(q[1]=u[z][1],r.dynamicPosition==="hidden"&&(q[1]=""),q):w[_]==="!"&&(q[0]===1||w[_+q[0]-1]!=="!")?[1,null]:(n("Unknown decoration: "+q[1],w,_),q[1]="",q));case"H":return[1,"fermata"];case"J":return[1,"slide"];case"L":return[1,"accent"];case"M":return[1,"mordent"];case"O":return[1,"coda"];case"P":return[1,"pralltriller"];case"R":return[1,"roll"];case"S":return[1,"segno"];case"T":return[1,"trill"];case"t":return[1,"trillh"]}return[0,0]},N=function(w,_){for(var k=_;a.isWhiteSpace(w[_]);)_++;return[_-k]},B=function(w,_){var k=a.getBarLine(w,_);if(k.len===0)return[0,""];if(k.warn)return n(k.warn,w,_),[k.len,""];for(var q=0;q<w.length&&w[_+k.len+q]===" ";q++);var z=k.len;if(w[_+k.len+q]==="["&&(k.len+=q+1),w[_+k.len]==='"'&&w[_+k.len-1]==="["){var U=a.getBrackettedSubstring(w,_+k.len,5);return[k.len+U[0],k.token,U[1]]}var Y=a.getTokenOf(w.substring(_+k.len),"1234567890-,");return Y.len===0||Y.token[0]==="-"?[z,k.token]:[k.len+Y.len,k.token,Y.token]},E=function(w,_){var k={},q=_;for(w[_]==="."&&w[_+1]==="("&&(k.dottedSlur=!0,_++);w[_]==="("||a.isWhiteSpace(w[_]);)w[_]==="("&&(_+1<w.length&&w[_+1]>="2"&&w[_+1]<="9"?(k.triplet!==void 0?n("Can't nest triplets",w,_):(k.triplet=w[_+1]-"0",k.tripletQ=b[k.triplet],k.num_notes=k.triplet,_+2<w.length&&w[_+2]===":"&&(_+3<w.length&&w[_+3]===":"?_+4<w.length&&w[_+4]>="1"&&w[_+4]<="9"?(k.num_notes=w[_+4]-"0",_+=3):n("expected number after the two colons after the triplet to mark the duration",w,_):_+3<w.length&&w[_+3]>="1"&&w[_+3]<="9"?(k.tripletQ=w[_+3]-"0",_+4<w.length&&w[_+4]===":"?_+5<w.length&&w[_+5]>="1"&&w[_+5]<="9"&&(k.num_notes=w[_+5]-"0",_+=4):_+=2):n("expected number after the triplet to mark the duration",w,_))),_++):k.startSlur===void 0?k.startSlur=1:k.startSlur++),_++;return k.consumed=_-q,k};x.prototype.startNewLine=function(){var w={startChar:-1,endChar:-1};r.partForNextLine.title&&(w.part=r.partForNextLine),w.clef=r.currentVoice&&r.staves[r.currentVoice.staffNum].clef!==void 0?Object.assign({},r.staves[r.currentVoice.staffNum].clef):Object.assign({},r.clef);var _=r.currentVoice?r.currentVoice.scoreTranspose:0;if(w.key=e.standardKey(r.key.root+r.key.acc+r.key.mode,r.key.root,r.key.acc,_),w.key.mode=r.key.mode,r.key.impliedNaturals&&(w.key.impliedNaturals=r.key.impliedNaturals),r.key.explicitAccidentals)for(var k=0;k<r.key.explicitAccidentals.length;k++){for(var q=!1,z=0;z<w.key.accidentals.length;z++)w.key.accidentals[z].note===r.key.explicitAccidentals[k].note&&(w.key.accidentals[z].acc=r.key.explicitAccidentals[k].acc,q=!0);q||w.key.accidentals.push(r.key.explicitAccidentals[k])}if(r.targetKey=w.key,w.key.explicitAccidentals&&delete w.key.explicitAccidentals,e.addPosToKey(w.clef,w.key),r.meter!==null?(r.currentVoice?(r.staves.forEach(function(oe){oe.meter=r.meter}),w.meter=r.staves[r.currentVoice.staffNum].meter,r.staves[r.currentVoice.staffNum].meter=null):w.meter=r.meter,r.meter=null):r.currentVoice&&r.staves[r.currentVoice.staffNum].meter&&(w.meter=r.staves[r.currentVoice.staffNum].meter,r.staves[r.currentVoice.staffNum].meter=null),r.currentVoice&&r.currentVoice.name&&(w.name=r.currentVoice.name),r.vocalfont&&(w.vocalfont=r.vocalfont),r.tripletfont&&(w.tripletfont=r.tripletfont),r.gchordfont&&(w.gchordfont=r.gchordfont),r.style&&(w.style=r.style),r.currentVoice){var U=r.staves[r.currentVoice.staffNum];U.brace&&(w.brace=U.brace),U.bracket&&(w.bracket=U.bracket),U.connectBarLines&&(w.connectBarLines=U.connectBarLines),U.name&&(w.name=U.name[r.currentVoice.index]),U.subname&&(w.subname=U.subname[r.currentVoice.index]),r.currentVoice.stem&&(w.stem=r.currentVoice.stem),r.currentVoice.stafflines&&(w.stafflines=r.currentVoice.stafflines),r.currentVoice.staffscale&&(w.staffscale=r.currentVoice.staffscale),r.currentVoice.scale&&(w.scale=r.currentVoice.scale),r.currentVoice.color&&(w.color=r.currentVoice.color),r.currentVoice.style&&(w.style=r.currentVoice.style),r.currentVoice.transpose&&(w.clef.transpose=r.currentVoice.transpose),w.currentVoice=r.currentVoice;for(var Y=Object.keys(r.voices),ee=0;ee<Y.length;ee++)w.currentVoice.staffNum===r.voices[Y[ee]].staffNum&&w.currentVoice.index===r.voices[Y[ee]].index&&(w.currentVoiceName=Y[ee])}r.barNumbers===0&&O()&&r.currBarNumber!==1&&(w.barNumber=r.currBarNumber),l.startNewLine(w),r.key.impliedNaturals&&delete r.key.impliedNaturals,r.partForNextLine={},r.tempoForNextLine.length===4&&l.appendElement(r.tempoForNextLine[0],r.tempoForNextLine[1],r.tempoForNextLine[2],r.tempoForNextLine[3]),r.tempoForNextLine=[]};var T=function(w){return w.duration!==void 0&&w.duration<.25&&(w.end_beam=!0),w},L=function(w,_,k,q){var z=function(de){return de==="octave"||de==="duration"||de==="Zduration"||de==="broken_rhythm"||de==="end_slur"},U;w[_]==="."&&w[_+1]==="-"&&(U=!0,_++);for(var Y="startSlur",ee=!1;;){switch(w[_]){case"(":if(Y==="startSlur")k.startSlur===void 0?k.startSlur=1:k.startSlur++;else return z(Y)?(k.endChar=_,k):null;break;case")":if(z(Y))k.endSlur===void 0?k.endSlur=1:k.endSlur++;else return null;break;case"^":if(Y==="startSlur")k.accidental="sharp",Y="sharp2";else if(Y==="sharp2")k.accidental="dblsharp",Y="pitch";else return z(Y)?(k.endChar=_,k):null;break;case"_":if(Y==="startSlur")k.accidental="flat",Y="flat2";else if(Y==="flat2")k.accidental="dblflat",Y="pitch";else return z(Y)?(k.endChar=_,k):null;break;case"=":if(Y==="startSlur")k.accidental="natural",Y="pitch";else return z(Y)?(k.endChar=_,k):null;break;case"A":case"B":case"C":case"D":case"E":case"F":case"G":case"a":case"b":case"c":case"d":case"e":case"f":case"g":if(Y==="startSlur"||Y==="sharp2"||Y==="flat2"||Y==="pitch"){if(k.pitch=i[w[_]],k.pitch+=7*(r.currentVoice&&r.currentVoice.octave!==void 0?r.currentVoice.octave:r.octave),k.name=w[_],k.accidental&&(k.name=m[k.accidental]+k.name),t.note(r,k),Y="octave",q&&r.next_note_duration!==0?(k.duration=r.default_length*r.next_note_duration,r.next_note_duration=0,ee=!0):k.duration=r.default_length,r.clef&&r.clef.type==="perc"||r.currentVoice&&r.currentVoice.clef==="perc"){var oe=w[_];k.accidental&&(oe=m[k.accidental]+oe),s.formatting&&s.formatting.midi&&s.formatting.midi.drummap&&(k.midipitch=s.formatting.midi.drummap[oe])}}else return z(Y)?(k.endChar=_,k):null;break;case",":if(Y==="octave")k.pitch-=7,k.name+=",";else return z(Y)?(k.endChar=_,k):null;break;case"'":if(Y==="octave")k.pitch+=7,k.name+="'";else return z(Y)?(k.endChar=_,k):null;break;case"x":case"X":case"y":case"z":case"Z":if(Y==="startSlur")k.rest={type:g[w[_]]},delete k.accidental,delete k.startSlur,delete k.startTie,delete k.endSlur,delete k.endTie,delete k.end_beam,delete k.grace_notes,k.rest.type.indexOf("multimeasure")>=0?(k.duration=s.getBarLength(),k.rest.text=1,Y="Zduration"):(q&&r.next_note_duration!==0?(k.duration=r.default_length*r.next_note_duration,r.next_note_duration=0,ee=!0):k.duration=r.default_length,Y="duration");else return z(Y)?(k.endChar=_,k):null;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"0":case"/":if(Y==="octave"||Y==="duration"){var J=a.getFraction(w,_);for(k.duration=k.duration*J.value,k.endChar=J.index;J.index<w.length&&(a.isWhiteSpace(w[J.index])||w[J.index]==="-");)w[J.index]==="-"?k.startTie={}:k=T(k),J.index++;_=J.index-1,Y="broken_rhythm"}else if(Y==="sharp2")k.accidental="quartersharp",Y="pitch";else if(Y==="flat2")k.accidental="quarterflat",Y="pitch";else if(Y==="Zduration"){var fe=a.getNumber(w,_);return k.duration=fe.num*s.getBarLength(),k.rest.text=fe.num,k.endChar=fe.index,k}else return null;break;case"-":if(Y==="startSlur")l.addTieToLastNote(U),k.endTie=!0;else if(Y==="octave"||Y==="duration"||Y==="end_slur")if(k.startTie={},!ee&&q)Y="broken_rhythm";else return a.isWhiteSpace(w[_+1])&&T(k),k.endChar=_+1,k;else return Y==="broken_rhythm"?(k.endChar=_,k):null;break;case" ":case"	":if(z(Y)){k.end_beam=!0,U=!1;do w[_]==="."&&w[_+1]==="-"&&(U=!0,_++),w[_]==="-"&&(k.startTie={},U&&(k.startTie.style="dotted")),_++;while(_<w.length&&(a.isWhiteSpace(w[_])||w[_]==="-")||w[_]==="."&&w[_+1]==="-");if(k.endChar=_,!ee&&q&&(w[_]==="<"||w[_]===">"))_--,Y="broken_rhythm";else return k}else return null;break;case">":case"<":if(z(Y))if(q){var ue=R(w,_);_+=ue[0]-1,r.next_note_duration=ue[2],k.duration=ue[1]*k.duration,Y="end_slur"}else return k.endChar=_,k;else return null;break;default:return z(Y)?(k.endChar=_,k):null}if(_++,_===w.length)return z(Y)?(k.endChar=_,k):null}return null},R=function(w,_){switch(w[_]){case">":return _<w.length-2&&w[_+1]===">"&&w[_+2]===">"?[3,1.875,.125]:_<w.length-1&&w[_+1]===">"?[2,1.75,.25]:[1,1.5,.5];case"<":return _<w.length-2&&w[_+1]==="<"&&w[_+2]==="<"?[3,.125,1.875]:_<w.length-1&&w[_+1]==="<"?[2,.25,1.75]:[1,.5,1.5]}return null};function O(){return r.currentVoice===void 0||r.currentVoice.staffNum===0&&r.currentVoice.index===0}return Cr=x,Cr}var kr,Ps;function Vh(){if(Ps)return kr;Ps=1;var e=yt(),t=function(a,n){this.lineIndex=0,this.lines=a,this.multilineVars=n,this.skipWhiteSpace=function(o){for(var h=0;h<o.length;h++)if(!this.isWhiteSpace(o[h]))return h;return o.length};var r=function(o,h){return h>=o.length};this.eatWhiteSpace=function(o,h){for(var i=h;i<o.length;i++)if(!this.isWhiteSpace(o[i]))return i-h;return i-h},this.getKeyPitch=function(o){var h=this.skipWhiteSpace(o);if(r(o,h))return{len:0};switch(o[h]){case"A":return{len:h+1,token:"A"};case"B":return{len:h+1,token:"B"};case"C":return{len:h+1,token:"C"};case"D":return{len:h+1,token:"D"};case"E":return{len:h+1,token:"E"};case"F":return{len:h+1,token:"F"};case"G":return{len:h+1,token:"G"}}return{len:0}},this.getSharpFlat=function(o){if(o==="bass")return{len:0};switch(o[0]){case"#":return{len:1,token:"#"};case"b":return{len:1,token:"b"}}return{len:0}},this.getMode=function(o){var h=function(m,b){for(;b<m.length&&(m[b]>="a"&&m[b]<="z"||m[b]>="A"&&m[b]<="Z");)b++;return b},i=this.skipWhiteSpace(o);if(r(o,i))return{len:0};var g=o.substring(i,i+3).toLowerCase();switch((g.length>1&&g[1]===" "||g[1]==="^"||g[1]==="_"||g[1]==="=")&&(g=g[0]),g){case"mix":return{len:h(o,i),token:"Mix"};case"dor":return{len:h(o,i),token:"Dor"};case"phr":return{len:h(o,i),token:"Phr"};case"lyd":return{len:h(o,i),token:"Lyd"};case"loc":return{len:h(o,i),token:"Loc"};case"aeo":return{len:h(o,i),token:"m"};case"maj":return{len:h(o,i),token:""};case"ion":return{len:h(o,i),token:""};case"min":return{len:h(o,i),token:"m"};case"m":return{len:h(o,i),token:"m"}}return{len:0}},this.getClef=function(o,h){var i=o,g=this.skipWhiteSpace(o);if(r(o,g))return{len:0};var m=!1,b=o.substring(g);if(e.startsWith(b,"clef=")&&(m=!0,b=b.substring(5),g+=5),b.length===0&&m)return{len:g+5,warn:"No clef specified: "+i};var x=this.skipWhiteSpace(b);if(r(b,x))return{len:0};x>0&&(g+=x,b=b.substring(x));var C=null;if(e.startsWith(b,"treble"))C="treble";else if(e.startsWith(b,"bass3"))C="bass3";else if(e.startsWith(b,"bass"))C="bass";else if(e.startsWith(b,"tenor"))C="tenor";else if(e.startsWith(b,"alto2"))C="alto2";else if(e.startsWith(b,"alto1"))C="alto1";else if(e.startsWith(b,"alto"))C="alto";else if(!h&&m&&e.startsWith(b,"none"))C="none";else if(e.startsWith(b,"perc"))C="perc";else if(!h&&m&&e.startsWith(b,"C"))C="tenor";else if(!h&&m&&e.startsWith(b,"F"))C="bass";else if(!h&&m&&e.startsWith(b,"G"))C="treble";else return{len:g+5,warn:"Unknown clef specified: "+i};return b=b.substring(C.length),x=this.isMatch(b,"+8"),x>0?C+="+8":(x=this.isMatch(b,"-8"),x>0&&(C+="-8")),{len:g+C.length,token:C,explicit:m}},this.getBarLine=function(o,h){switch(o[h]){case"]":switch(++h,o[h]){case"|":return{len:2,token:"bar_thick_thin"};case"[":return++h,o[h]>="1"&&o[h]<="9"||o[h]==='"'?{len:2,token:"bar_invisible"}:{len:1,warn:"Unknown bar symbol"};default:return{len:1,token:"bar_invisible"}}case":":switch(++h,o[h]){case":":return{len:2,token:"bar_dbl_repeat"};case"|":switch(++h,o[h]){case"]":switch(++h,o[h]){case"|":return++h,o[h]===":"?{len:5,token:"bar_dbl_repeat"}:{len:3,token:"bar_right_repeat"};default:return{len:3,token:"bar_right_repeat"}}case"|":return++h,o[h]===":"?{len:4,token:"bar_dbl_repeat"}:{len:3,token:"bar_right_repeat"};default:return{len:2,token:"bar_right_repeat"}}default:return{len:1,warn:"Unknown bar symbol"}}case"[":if(++h,o[h]==="|")switch(++h,o[h]){case":":return{len:3,token:"bar_left_repeat"};case"]":return{len:3,token:"bar_invisible"};default:return{len:2,token:"bar_thick_thin"}}else return o[h]>="1"&&o[h]<="9"||o[h]==='"'?{len:1,token:"bar_invisible"}:{len:0};case"|":switch(++h,o[h]){case"]":return{len:2,token:"bar_thin_thick"};case"|":return++h,o[h]===":"?{len:3,token:"bar_left_repeat"}:{len:2,token:"bar_thin_thin"};case":":for(var i=0;o[h+i]===":";)i++;return{len:1+i,token:"bar_left_repeat"};default:return{len:1,token:"bar_thin"}}}return{len:0}},this.getTokenOf=function(o,h){for(var i=0;i<o.length;i++)if(h.indexOf(o[i])<0)return{len:i,token:o.substring(0,i)};return{len:i,token:o}},this.getToken=function(o,h,i){for(var g=h;g<i&&!this.isWhiteSpace(o[g]);)g++;return o.substring(h,g)},this.isMatch=function(o,h){var i=this.skipWhiteSpace(o);return r(o,i)?0:e.startsWith(o.substring(i),h)?i+h.length:0},this.getPitchFromTokens=function(o){var h={},i={A:5,B:6,C:0,D:1,E:2,F:3,G:4,a:12,b:13,c:7,d:8,e:9,f:10,g:11};if(h.position=i[o[0].token],h.position===void 0)return{warn:"Pitch expected. Found: "+o[0].token};for(o.shift();o.length;)switch(o[0].token){case",":h.position-=7,o.shift();break;case"'":h.position+=7,o.shift();break;default:return h}return h},this.getKeyAccidentals2=function(o){for(var h;o.length>0;){var i;if(o[0].token==="^"){if(i="sharp",o.shift(),o.length===0)return{accs:h,warn:"Expected note name after "+i};switch(o[0].token){case"^":i="dblsharp",o.shift();break;case"/":i="quartersharp",o.shift();break}}else if(o[0].token==="=")i="natural",o.shift();else if(o[0].token==="_"){if(i="flat",o.shift(),o.length===0)return{accs:h,warn:"Expected note name after "+i};switch(o[0].token){case"_":i="dblflat",o.shift();break;case"/":i="quarterflat",o.shift();break}}else return{accs:h};if(o.length===0)return{accs:h,warn:"Expected note name after "+i};switch(o[0].token[0]){case"a":case"b":case"c":case"d":case"e":case"f":case"g":case"A":case"B":case"C":case"D":case"E":case"F":case"G":h===void 0&&(h=[]),h.push({acc:i,note:o[0].token[0]}),o[0].token.length===1?o.shift():o[0].token=o[0].token.substring(1);break;default:return{accs:h,warn:"Expected note name after "+i+" Found: "+o[0].token}}}return{accs:h}},this.getKeyAccidental=function(o){var h={"^":"sharp","^^":"dblsharp","=":"natural",_:"flat",__:"dblflat","_/":"quarterflat","^/":"quartersharp"},i=this.skipWhiteSpace(o);if(r(o,i))return{len:0};var g=null;switch(o[i]){case"^":case"_":case"=":g=o[i];break;default:return{len:0}}if(i++,r(o,i))return{len:1,warn:"Expected note name after accidental"};switch(o[i]){case"a":case"b":case"c":case"d":case"e":case"f":case"g":case"A":case"B":case"C":case"D":case"E":case"F":case"G":return{len:i+1,token:{acc:h[g],note:o[i]}};case"^":case"_":case"/":if(g+=o[i],i++,r(o,i))return{len:2,warn:"Expected note name after accidental"};switch(o[i]){case"a":case"b":case"c":case"d":case"e":case"f":case"g":case"A":case"B":case"C":case"D":case"E":case"F":case"G":return{len:i+1,token:{acc:h[g],note:o[i]}};default:return{len:2,warn:"Expected note name after accidental"}}break;default:return{len:1,warn:"Expected note name after accidental"}}},this.isWhiteSpace=function(o){return o===" "||o==="	"||o===""},this.getMeat=function(o,h,i){var g=o.indexOf("%",h);for(g>=0&&g<i&&(i=g);h<i&&(o[h]===" "||o[h]==="	"||o[h]==="");)h++;for(;h<i&&(o[i-1]===" "||o[i-1]==="	"||o[i-1]==="");)i--;return{start:h,end:i}};var s=function(o){return o>="A"&&o<="Z"||o>="a"&&o<="z"},l=function(o){return o>="0"&&o<="9"};this.tokenize=function(o,h,i,g){var m=this.getMeat(o,h,i);h=m.start,i=m.end;for(var b=[],x;h<i;){if(o[h]==='"'){for(x=h+1;x<i&&o[x]!=='"';)x++;b.push({type:"quote",token:o.substring(h+1,x),start:h+1,end:x}),x++}else if(s(o[h])){if(x=h+1,g)for(;x<i&&!this.isWhiteSpace(o[x]);)x++;else for(;x<i&&s(o[x]);)x++;b.push({type:"alpha",token:o.substring(h,x),continueId:l(o[x]),start:h,end:x}),h=x+1}else if(o[h]==="."&&l(o[x+1])){x=h+1;for(var C=null,S=null;x<i&&l(o[x]);)x++;S=parseFloat(o.substring(h,x)),b.push({type:"number",token:o.substring(h,x),intt:C,floatt:S,continueId:s(o[x]),start:h,end:x}),h=x+1}else if(l(o[h])||o[h]==="-"&&l(o[x+1])){x=h+1;for(var I=null,F=null;x<i&&l(o[x]);)x++;if(o[x]==="."&&l(o[x+1]))for(x++;x<i&&l(o[x]);)x++;else I=parseInt(o.substring(h,x));F=parseFloat(o.substring(h,x)),b.push({type:"number",token:o.substring(h,x),intt:I,floatt:F,continueId:s(o[x]),start:h,end:x}),h=x+1}else o[h]===" "||o[h]==="	"||b.push({type:"punct",token:o[h],start:h,end:h+1}),x=h+1;h=x}return b},this.getVoiceToken=function(o,h,i){for(var g=h;g<i&&this.isWhiteSpace(o[g])||o[g]==="=";)g++;if(o[g]==='"'){var m=o.indexOf('"',g+1);return m===-1||m>=i?{len:1,err:"Missing close quote"}:{len:m-h+1,token:this.translateString(o.substring(g+1,m))}}else{for(var b=g;b<i&&!this.isWhiteSpace(o[b])&&o[b]!=="=";)b++;return{len:b-h+1,token:o.substring(g,b)}}};var c={"`a":"à","'a":"á","^a":"â","~a":"ã",'"a':"ä",oa:"å",aa:"å","=a":"ā",ua:"ă",";a":"ą","`e":"è","'e":"é","^e":"ê",'"e':"ë","=e":"ē",ue:"ĕ",";e":"ę",".e":"ė","`i":"ì","'i":"í","^i":"î",'"i':"ï","=i":"ī",ui:"ĭ",";i":"į","`o":"ò","'o":"ó","^o":"ô","~o":"õ",'"o':"ö","=o":"ō",uo:"ŏ","/o":"ø","`u":"ù","'u":"ú","^u":"û","~u":"ũ",'"u':"ü",ou:"ů","=u":"ū",uu:"ŭ",";u":"ų","`A":"À","'A":"Á","^A":"Â","~A":"Ã",'"A':"Ä",oA:"Å",AA:"Å","=A":"Ā",uA:"Ă",";A":"Ą","`E":"È","'E":"É","^E":"Ê",'"E':"Ë","=E":"Ē",uE:"Ĕ",";E":"Ę",".E":"Ė","`I":"Ì","'I":"Í","^I":"Î","~I":"Ĩ",'"I':"Ï","=I":"Ī",uI:"Ĭ",";I":"Į",".I":"İ","`O":"Ò","'O":"Ó","^O":"Ô","~O":"Õ",'"O':"Ö","=O":"Ō",uO:"Ŏ","/O":"Ø","`U":"Ù","'U":"Ú","^U":"Û","~U":"Ũ",'"U':"Ü",oU:"Ů","=U":"Ū",uU:"Ŭ",";U":"Ų",ae:"æ",AE:"Æ",oe:"œ",OE:"Œ",ss:"ß","'c":"ć","^c":"ĉ",uc:"č",cc:"ç",".c":"ċ",cC:"Ç","'C":"Ć","^C":"Ĉ",uC:"Č",".C":"Ċ","~N":"Ñ","~n":"ñ","=s":"š",vs:"š",DH:"Ð",dh:"ð",HO:"Ő",Ho:"ő",HU:"Ű",Hu:"ű","'Y":"Ý","'y":"ý","^Y":"Ŷ","^y":"ŷ",'"Y':"Ÿ",'"y':"ÿ",vS:"Š",vZ:"Ž",vz:"ž"},f={"#":"♯",b:"♭","=":"♮"},p={201:"♯",202:"♭",203:"♮",241:"¡",242:"¢",252:"a",262:"2",272:"o",302:"Â",312:"Ê",322:"Ò",332:"Ú",342:"â",352:"ê",362:"ò",372:"ú",243:"£",253:"«",263:"3",273:"»",303:"Ã",313:"Ë",323:"Ó",333:"Û",343:"ã",353:"ë",363:"ó",373:"û",244:"¤",254:"¬",264:"  ́",274:"1⁄4",304:"Ä",314:"Ì",324:"Ô",334:"Ü",344:"ä",354:"ì",364:"ô",374:"ü",245:"¥",255:"-",265:"μ",275:"1⁄2",305:"Å",315:"Í",325:"Õ",335:"Ý",345:"å",355:"í",365:"õ",375:"ý",246:"¦",256:"®",266:"¶",276:"3⁄4",306:"Æ",316:"Î",326:"Ö",336:"Þ",346:"æ",356:"î",366:"ö",376:"þ",247:"§",257:" ̄",267:"·",277:"¿",307:"Ç",317:"Ï",327:"×",337:"ß",347:"ç",357:"ï",367:"÷",377:"ÿ",250:" ̈",260:"°",270:" ̧",300:"À",310:"È",320:"Ð",330:"Ø",340:"à",350:"è",360:"ð",370:"ø",251:"©",261:"±",271:"1",301:"Á",311:"É",321:"Ñ",331:"Ù",341:"á",351:"é",361:"ñ",371:"ù"};this.translateString=function(o){var h=o.split("\\");if(h.length===1)return o;var i=null;return h.forEach(function(g){if(i===null)i=g;else{var m=c[g.substring(0,2)];m!==void 0?i+=m+g.substring(2):(m=p[g.substring(0,3)],m!==void 0?i+=m+g.substring(3):(m=f[g.substring(0,1)],m!==void 0?i+=m+g.substring(1):i+="\\"+g))}}),i},this.getNumber=function(o,h){for(var i=0;h<o.length;)switch(o[h]){case"0":i=i*10,h++;break;case"1":i=i*10+1,h++;break;case"2":i=i*10+2,h++;break;case"3":i=i*10+3,h++;break;case"4":i=i*10+4,h++;break;case"5":i=i*10+5,h++;break;case"6":i=i*10+6,h++;break;case"7":i=i*10+7,h++;break;case"8":i=i*10+8,h++;break;case"9":i=i*10+9,h++;break;default:return{num:i,index:h}}return{num:i,index:h}},this.getFraction=function(o,h){var i=1,g=1;if(o[h]!=="/"){var m=this.getNumber(o,h);i=m.num,h=m.index}if(o[h]==="/")if(h++,o[h]==="/"){for(var b=.5;o[h++]==="/";)b=b/2;return{value:i*b,index:h-1}}else{var x=h,C=this.getNumber(o,h);C.num===0&&x===h&&(C.num=2),C.num!==0&&(g=C.num),h=C.index}return{value:i/g,index:h}};function v(o){const i=/^(\d+)\./.exec(o);return i?i[1]:null}var d=[{match:/,\s*The$/,replace:"The "},{match:/,\s*the$/,replace:"the "},{match:/,\s*A$/,replace:"A "},{match:/,\s*a$/,replace:"a "},{match:/,\s*An$/,replace:"An "},{match:/,\s*an$/,replace:"an "},{match:/,\s*Da$/,replace:"Da "},{match:/,\s*La$/,replace:"La "},{match:/,\s*Le$/,replace:"Le "},{match:/,\s*Les$/,replace:"Les "},{match:/,\s*Ye$/,replace:"Ye "}];this.theReverser=function(o){for(var h=0;h<d.length;h++){var i=d[h],g=o.match(i.match);if(g){var m=v(o);m&&(o=o.replace(m+".",""),o=o.trim());var b=g[0].length,x=i.replace+o.substring(0,o.length-b);return m&&(x=m+". "+x),x}}return o},this.stripComment=function(o){var h=o.indexOf("%");return h>=0?e.strip(o.substring(0,h)):e.strip(o)},this.getInt=function(o){var h=parseInt(o);if(isNaN(h))return{digits:0};var i=""+h,g=o.indexOf(i);return{value:h,digits:g+i.length}},this.getFloat=function(o){var h=parseFloat(o);if(isNaN(h))return{digits:0};var i=""+h,g=o.indexOf(i);return{value:h,digits:g+i.length}},this.getMeasurement=function(o){if(o.length===0)return{used:0};var h=1,i="";if(o[0].token==="-")o.shift(),i="-",h++;else if(o[0].type!=="number")return{used:0};if(i+=o.shift().token,o.length===0)return{used:1,value:parseInt(i)};var g=o.shift();if(g.token==="."){if(h++,o.length===0)return{used:h,value:parseInt(i)};if(o[0].type==="number"&&(g=o.shift(),i=i+"."+g.token,h++,o.length===0))return{used:h,value:parseFloat(i)};g=o.shift()}switch(g.token){case"pt":return{used:h+1,value:parseFloat(i)};case"px":return{used:h+1,value:parseFloat(i)};case"cm":return{used:h+1,value:parseFloat(i)/2.54*72};case"in":return{used:h+1,value:parseFloat(i)*72};default:return o.unshift(g),{used:h,value:parseFloat(i)}}};var u=function(o){return o=o.replace(/\\n/g,`
`),o=o.replace(/\\"/g,'"'),o};this.getBrackettedSubstring=function(o,h,i,g){for(var m=g||o[h],b=h+1,x=!1;b<o.length&&(x||o[b]!==m);)x=o[b]==="\\",++b;return o[b]===m?[b-h+1,u(o.substring(h+1,b)),!0]:(b=h+i,b>o.length-1&&(b=o.length-1),[b-h+1,u(o.substring(h+1,b)),!1])}};return t.prototype.peekLine=function(){return this.lines[this.lineIndex]},t.prototype.nextLine=function(){if(this.lineIndex>0&&(this.multilineVars.iChar+=this.lines[this.lineIndex-1].length+1),this.lineIndex<this.lines.length){var a=this.lines[this.lineIndex];return this.lineIndex++,a}return null},kr=t,kr}var Tr,Ns;function bf(){if(Ns)return Tr;Ns=1;function e(v,d,u){if(!(!d||v.lines.length===0)){var o=v.deline({lineBreaks:!1}),h=a(o,d);v.lines=t(o,h,u),v.lineBreaks=h}}function t(v,d,u){for(var o=[],h=[],i=[],g=1,m=0;m<d.length;m++){var b=d[m];if(v[b.ogLine].staff){var x=v[b.ogLine].staff[b.staff];if(o[b.line]||(o[b.line]={staff:[]}),!o[b.line].staff[b.staff]){o[b.line].staff[b.staff]={voices:[]},u!==void 0&&b.staff===0&&b.line>0&&(o[b.line].staff[b.staff].barNumber=g);for(var C=Object.keys(x),S=0;S<C.length;S++){var I=C[S]==="voices";C[S]==="meter"&&b.line!==0&&(I=!0),I||(o[b.line].staff[b.staff][C[S]]=x[C[S]])}h[b.staff]&&(o[b.line].staff[b.staff].key=h[b.staff])}o[b.line].staff[b.staff].voices[b.voice]||(o[b.line].staff[b.staff].voices[b.voice]=[]),o[b.line].staff[b.staff].voices[b.voice]=v[b.ogLine].staff[b.staff].voices[b.voice].slice(b.start,b.end+1),i[b.staff*10+b.voice]&&o[b.line].staff[b.staff].voices[b.voice].unshift({el_type:"stem",direction:i[b.staff*10+b.voice].direction});for(var F=o[b.line].staff[b.staff].voices[b.voice],y=F.length-1;y>=0;y--)if(F[y].el_type==="key"){h[b.staff]={root:F[y].root,acc:F[y].acc,mode:F[y].mode,accidentals:F[y].accidentals.filter(function(P){return P.acc!=="natural"})};break}for(y=F.length-1;y>=0;y--)if(F[y].el_type==="stem"){i[b.staff*10+b.voice]={direction:F[y].direction};break}if(u!==void 0&&b.staff===0&&b.voice===0)for(y=0;y<F.length;y++)F[y].el_type==="bar"&&(g++,y===F.length-1?delete F[y].barNumber:F[y].barNumber=g)}else o[b.line]=v[b.ogLine]}for(var A=0;A<o.length;A++)o[A].staff&&(o[A].staff=o[A].staff.filter(function(P){return P!=null}));return o}function a(v,d){for(var u=[],o=0,h=0,i=0,g=0;g<v.length;g++){var m=v[g];if(m.staff){var b=h,x=d[o];o++;for(var C=0;C<m.staff.length;C++)for(var S=m.staff[C],I=0;I<S.voices.length;I++){i=b;for(var F=0,y=0,A=S.voices[I],P=0,M=0;M<A.length;M++){var N=A[M];N.el_type==="bar"&&(x[y]===F&&(u.push({ogLine:g,line:i,staff:C,voice:I,start:P,end:M}),P=M+1,i++,h=Math.max(h,i),y++),F++)}u.push({ogLine:g,line:i,staff:C,voice:I,start:P,end:A.length}),i++,h=Math.max(h,i)}}else u.push({ogLine:g,line:i}),i++,h=Math.max(h,i)}return u}function n(v,d){for(var u=[],o=[],h=0,i=0;i<v.length;i++){var g=v[i],m=h+g;if(m<d)h=m;else{var b=d-h,x=m-d;b<x&&h>0?(u.push(i-1),o.push(Math.round(h-g)),h=g):i<v.length-1&&(u.push(i),o.push(Math.round(h)),h=0)}}return o.push(Math.round(h)),{lineBreaks:u,totals:o}}function r(v){for(var d=[],u=0;u<v.length;u++)d.push(v[u]);return d}function s(v,d,u,o,h,i,g,m,b,x,C){for(var S=x;S<v.length;S++){var I=v[S];u+=I,o+=I;var F=Math.abs(u-d[m]),y=Math.abs(F-i)<d[0]/10;if(y)if(F<i){var A=r(h),P=r(b);P.push(S-1),A.push(o-I),C.push({accumulator:u,lineAccumulator:I,lineWidths:A,lastVariance:Math.abs(u-d[m+1]),highestVariance:Math.max(g,i),currLine:m+1,lineBreaks:P,startIndex:S+1})}else F>i&&S<v.length-1&&(A=r(h),P=r(b),C.push({accumulator:u,lineAccumulator:o,lineWidths:A,lastVariance:F,highestVariance:Math.max(g,F),currLine:m,lineBreaks:P,startIndex:S+1}));F>i?(b.push(S-1),m++,g=Math.max(g,i),i=Math.abs(u-d[m]),h.push(o-I),o=I):i=F}h.push(o)}function l(v,d,u,o){for(var h=Math.ceil(v.total/d),i=Math.floor(v.total/h),g=[],m=0;m<h;m++)g.push(i*(m+1));var b=[];b.push({accumulator:0,lineAccumulator:0,lineWidths:[],lastVariance:999999,highestVariance:0,currLine:0,lineBreaks:[],startIndex:0});for(var x=0;x<b.length;)s(v.measureWidths,g,b[x].accumulator,b[x].lineAccumulator,b[x].lineWidths,b[x].lastVariance,b[x].highestVariance,b[x].currLine,b[x].lineBreaks,b[x].startIndex,b),x++;for(m=0;m<b.length;m++){var C=b[m];C.variances=[],C.aveVariance=0;for(var S=0;S<C.lineWidths.length;S++){var I=C.lineWidths[S];C.variances.push(I-g[0]),C.aveVariance+=Math.abs(I-g[0])}C.aveVariance=C.aveVariance/C.lineWidths.length,o.attempts.push({type:"optimizeLineWidths",lineBreaks:C.lineBreaks,variances:C.variances,aveVariance:C.aveVariance,widths:v.measureWidths})}var F=9999999,y=-1;for(m=0;m<b.length;m++)C=b[m],C.aveVariance<F&&(F=C.aveVariance,y=m);return{failed:!1,lineBreaks:b[y].lineBreaks,variance:b[y].highestVariance}}function c(v,d,u){for(var o=[],h=[],i=0,g=!1,m=0;m<v.length;m++)i+=v[m],i>d&&(g=!0),m%u===u-1&&(m!==v.length-1&&o.push(m),h.push(Math.round(i)),i=0);return{failed:g,totals:h,lineBreaks:o}}function f(v,d,u){var o={lineBreaks:v,staffwidth:d};for(var h in u)u.hasOwnProperty(h)&&h!=="wrap"&&h!=="staffwidth"&&(o[h]=u[h]);return{revisedParams:o}}function p(v,d,u){if(d.length===0||u.staffwidth<d[0].left)return{reParse:!1,explanation:"Staff width is narrower than the margin",revisedParams:u};var o=u.scale?Math.max(u.scale,.1):1,h=u.wrap.minSpacing?Math.max(parseFloat(u.wrap.minSpacing),1):1,i=u.wrap.minSpacingLimit?Math.max(parseFloat(u.wrap.minSpacingLimit),1):h-.1,g=u.wrap.maxSpacing?Math.max(parseFloat(u.wrap.maxSpacing),1):void 0;u.wrap.lastLineLimit&&!g&&(g=Math.max(parseFloat(u.wrap.lastLineLimit),1));for(var m=u.wrap.preferredMeasuresPerLine?Math.max(parseInt(u.wrap.preferredMeasuresPerLine,10),0):void 0,b=[],x=[],C=0;C<d.length;C++){var S=d[C],I=u.staffwidth-S.left,F=I/h/o,y=I/g/o,A=I/i/o,P={widths:S,lineBreakPoint:F,minLineSize:y,attempts:[],staffWidth:u.staffwidth,minWidth:Math.round(A)},M=null;if(m){var N=c(S.measureWidths,F,m);P.attempts.push({type:"Fixed Measures Per Line",preferredMeasuresPerLine:m,lineBreaks:N.lineBreaks,failed:N.failed,totals:N.totals}),N.failed||(M=N.lineBreaks)}if(!M){var B=n(S.measureWidths,F);P.attempts.push({type:"Free Form",lineBreaks:B.lineBreaks,totals:B.totals}),M=B.lineBreaks,M.length>0&&S.measureWidths.length<25&&(B=l(S,F,M,P),P.attempts.push({type:"Optimize",failed:B.failed,reason:B.reason,lineBreaks:B.lineBreaks,totals:B.totals}),B.failed||(M=B.lineBreaks))}b.push(M),x.push(P)}var E=u.staffwidth,T=f(b,E,u);return T.explanation=x,T.reParse=!0,T}return Tr={wrapLines:e,calcLineWraps:p},Tr}var Sr,Ls;function We(){if(Ls)return Sr;Ls=1;var e={};return e.FONTEM=360,e.FONTSIZE=30,e.STEP=e.FONTSIZE*93/720,e.SPACE=10,e.TOPNOTE=15,e.STAVEHEIGHT=100,e.INDENT=50,Sr=e,Sr}var Er,qs;function mf(){if(qs)return Er;qs=1;var e,t=yt();return function(){var a=1,n=128;e=function(i,g){g=g||{};var m,b=g.program||0,x=g.midiTranspose||0;i.visualTranspose&&(x-=i.visualTranspose);var C=g.channel||0,S=!1,I=g.drum||"",F=g.drumBars||1,y=g.drumIntro||0,A=I!=="",P=!!g.drumOff,M=[],N=50;b=parseInt(b,10),x=parseInt(x,10),C=parseInt(C,10),C===10&&(b=n),I=I.split(" "),F=parseInt(F,10),y=parseInt(y,10);var B=i.formatting.bagpipes;B&&(b=71);var E=[];if(i.formatting.midi){var T=i.formatting.midi;T.program&&T.program.length>0&&(b=T.program[0],T.program.length>1&&(b=T.program[1],C=T.program[0]),S=!0),T.transpose&&(x=T.transpose[0]),T.channel&&(C=T.channel[0],S=!0),T.drum&&(I=T.drum),T.drumbars&&(F=T.drumbars[0]),T.drumon&&(A=!0),C===10&&(b=n),T.beat&&E.push({el_type:"beat",beats:T.beat}),T.nobeataccents&&E.push({el_type:"beataccents",value:!1})}g.qpm?m=parseInt(g.qpm,10):i.metaText.tempo?m=p(i.metaText.tempo,i.getBeatLength()):g.defaultQpm?m=g.defaultQpm:m=180;var L=[];B&&L.push({el_type:"bagpipes"}),L.push({el_type:"instrument",program:b}),C&&L.push({el_type:"channel",channel:C}),x&&L.push({el_type:"transpose",transpose:x}),L.push({el_type:"tempo",qpm:m});for(var R=0;R<E.length;R++)L.push(E[R]);var O=[],w=[],_=[],k=[],q=[0],z={};z[0]={el_type:"tempo",qpm:m,timing:0};for(var U,Y=[],ee=[],oe=!1,J=i.lines,fe=0;fe<J.length;fe++){var ue=J[fe];if(ue.staff){let Le=function(Pe){var Ve={pppp:[15,10,5,1],ppp:[30,20,10,1],pp:[45,35,20,1],p:[60,50,35,1],mp:[75,65,50,1],mf:[90,80,65,1],f:[105,95,80,1],ff:[120,110,95,1],fff:[127,125,110,1],ffff:[127,125,110,1]},qe;if(Pe.decoration){if(Pe.decoration.indexOf("pppp")>=0?qe="pppp":Pe.decoration.indexOf("ppp")>=0?qe="ppp":Pe.decoration.indexOf("pp")>=0?qe="pp":Pe.decoration.indexOf("p")>=0?qe="p":Pe.decoration.indexOf("mp")>=0?qe="mp":Pe.decoration.indexOf("mf")>=0?qe="mf":Pe.decoration.indexOf("f")>=0?qe="f":Pe.decoration.indexOf("ff")>=0?qe="ff":Pe.decoration.indexOf("fff")>=0?qe="fff":Pe.decoration.indexOf("ffff")>=0&&(qe="ffff"),qe){U=Ve[qe].slice(0);let Qe=[U];Array.isArray(Pe.decoration)&&(Qe=[],Pe.decoration.forEach(Ha=>{Ha in Ve&&Qe.push(Ve[Ha].slice(0))})),O[D].push({el_type:"beat",beats:U.slice(0),volumesPerNotePitch:Qe}),_[Q]=!1,k[Q]=!1}if(Pe.decoration.indexOf("crescendo(")>=0){var Ht=r(K,V,"crescendo)"),wt=Math.min(127,U[0]+N),_0=s(K,V+Ht+1,Object.keys(Ve));_0&&(wt=Ve[_0][0]),Ht>0?_[Q]=Math.floor((wt-U[0])/Ht):_[Q]=!1,k[Q]=!1}else if(Pe.decoration.indexOf("crescendo)")>=0)_[Q]=!1;else if(Pe.decoration.indexOf("diminuendo(")>=0){var zt=r(K,V,"diminuendo)"),i0=Math.max(15,U[0]-N),C0=s(K,V+zt+1,Object.keys(Ve));C0&&(i0=Ve[C0][0]),_[Q]=!1,zt>0?k[Q]=Math.floor((i0-U[0])/zt):k[Q]=!1}else Pe.decoration.indexOf("diminuendo)")>=0&&(k[Q]=!1)}};for(var Ue=Le,de=ue.staff,D=0,G=0;G<de.length;G++){var $=de[G];if(!($.clef&&$.clef.type==="TAB"))for(var Q=0;Q<$.voices.length;Q++){var K=$.voices[Q];if(!O[D]){O[D]=[].concat(JSON.parse(JSON.stringify(L)));var Z=f(ue.staff,D);Z&&O[D].unshift({el_type:"name",trackName:Z})}if(x&&$.clef.type==="perc"&&O[D].push({el_type:"transpose",transpose:0}),$.clef&&$.clef.type==="perc"&&!S)for(var re=0;re<O[D].length;re++)O[D][re].el_type==="instrument"&&(O[D][re].program=n);else $.key&&u(O[D],$.key);$.meter&&o(O[D],$.meter),!oe&&A&&(O[D].push({el_type:"drum",params:{pattern:I,bars:F,on:A,intro:y}}),oe=!0),$.clef&&$.clef.type!=="perc"&&$.clef.transpose&&($.clef.el_type="clef",O[D].push({el_type:"transpose",transpose:$.clef.transpose}),w[D]=!1),$.clef&&$.clef.type&&($.clef.type.indexOf("-8")>=0?(O[D].push({el_type:"transpose",transpose:-12}),w[D]=!0):$.clef.type.indexOf("+8")>=0?(O[D].push({el_type:"transpose",transpose:12}),w[D]=!0):w[D]&&(O[D].push({el_type:"transpose",transpose:0}),w[D]=!1)),i.formatting.midi&&i.formatting.midi.drumoff&&(O[D].push({el_type:"bar"}),O[D].push({el_type:"drum",params:{pattern:"",on:!1}}));var ie=0,ne=0,te=0,W=0;U=[105,95,85,1];for(var V=0;V<K.length;V++){var H=K[V];switch(H.el_type){case"note":if(_[Q]&&(U[0]+=_[Q],U[1]+=_[Q],U[2]+=_[Q],O[D].push({el_type:"beat",beats:U.slice(0)})),k[Q]&&(U[0]+=k[Q],U[1]+=k[Q],U[2]+=k[Q],O[D].push({el_type:"beat",beats:U.slice(0)})),Le(H),!H.rest||H.rest.type!=="spacer"){var j={elem:H,el_type:"note",timing:q[D]};if(H.style?j.style=H.style:M[D]&&(j.style=M[D]),j.duration=H.duration===0?.25:H.duration,H.startTriplet){if(ne=H.tripletMultiplier,te=H.startTriplet*ne*H.duration,H.startTriplet!==H.tripletR&&V+H.tripletR<=K.length){for(var X=0,ae=V;ae<V+H.tripletR;ae++)X+=K[ae].duration;te=ne*X}j.duration=j.duration*ne,j.duration=Math.round(j.duration*1e6)/1e6,W=j.duration}else ne&&(H.endTriplet?(ne=0,j.duration=Math.round((te-W)*1e6)/1e6):(j.duration=j.duration*ne,j.duration=Math.round(j.duration*1e6)/1e6,W+=j.duration));H.rest&&(j.rest=H.rest),H.decoration&&(j.decoration=H.decoration.slice(0)),H.pitches&&(j.pitches=t.cloneArray(H.pitches)),H.gracenotes&&(j.gracenotes=t.cloneArray(H.gracenotes)),H.chord&&(j.chord=t.cloneArray(H.chord)),O[D].push(j),H.style==="rhythm"&&c(O),ie++,q[D]+=j.duration}break;case"key":case"keySignature":u(O[D],H);break;case"meter":o(O[D],H);break;case"clef":H.transpose&&O[D].push({el_type:"transpose",transpose:H.transpose}),H.type&&(H.type.indexOf("-8")>=0?O[D].push({el_type:"transpose",transpose:-12}):H.type.indexOf("+8")>=0&&O[D].push({el_type:"transpose",transpose:12}));break;case"tempo":m=p(H,i.getBeatLength()),O[D].push({el_type:"tempo",qpm:m,timing:q[D]}),z[""+q[D]]={el_type:"tempo",qpm:m,timing:q[D]};break;case"bar":ie>0&&O[D].push({el_type:"bar"}),Le(H),ie=0;var se=H.type==="bar_right_repeat"||H.type==="bar_dbl_repeat",pe=H.startEnding==="1",ce=H.type==="bar_left_repeat"||H.type==="bar_dbl_repeat"||H.type==="bar_right_repeat";if(se){var he=Y[D];he||(he=0);var we=ee[D];we||(we=O[D].length);for(var xe=he;xe<we;xe++){var ge=Object.assign({},O[D][xe]);ge.pitches&&(ge.pitches=t.cloneArray(ge.pitches)),O[D].push(ge)}ee[D]=void 0,Y[D]=void 0}pe&&(ee[D]=O[D].length),ce&&(Y[D]=O[D].length);break;case"style":M[D]=H.head;break;case"timeSignature":O[D].push(v(H));break;case"part":break;case"stem":case"scale":case"break":case"font":break;case"midi":var me=!1;switch(H.cmd){case"drumon":A=!0,me=!0;break;case"drumoff":A=!1,me=!0;break;case"drum":I=H.params,me=!0;break;case"drumbars":F=H.params[0],me=!0;break;case"drummap":break;case"channel":H.params[0]===10&&O[D].push({el_type:"instrument",program:n});break;case"program":h(O[D],{el_type:"instrument",program:H.params[0]}),S=!0;break;case"transpose":O[D].push({el_type:"transpose",transpose:H.params[0]});break;case"gchordoff":O[D].push({el_type:"gchordOn",tacet:!0});break;case"gchordon":O[D].push({el_type:"gchordOn",tacet:!1});break;case"beat":O[D].push({el_type:"beat",beats:H.params});break;case"nobeataccents":O[D].push({el_type:"beataccents",value:!1});break;case"beataccents":O[D].push({el_type:"beataccents",value:!0});break;case"vol":case"volinc":O[D].push({el_type:H.cmd,volume:H.params[0]});break;case"swing":case"gchord":case"bassvol":case"chordvol":O[D].push({el_type:H.cmd,param:H.params[0]});break;case"bassprog":case"chordprog":O[D].push({el_type:H.cmd,value:H.params[0],octaveShift:H.params[1]});break;case"gchordbars":O[D].push({el_type:H.cmd,param:H.params[0]});break;default:console.log("MIDI seq: midi cmd not handled: ",H.cmd,H)}me&&(O[0].push({el_type:"drum",params:{pattern:I,bars:F,intro:y,on:A}}),oe=!0);break;default:console.log("MIDI: element type "+H.el_type+" not handled.")}}D++,q[D]||(q[D]=0)}}}}if(l(O,z),y)for(var Be=i.getPickupLength(),ye=0;ye<O.length;ye++){for(var ze=0;O[ye][ze].el_type!=="note"&&O[ye].length>ze;)ze++;if(O[ye].length>ze){for(var ae=0;ae<y;ae++)Be===0||ae<y-1?(O[ye].splice(ze,0,{el_type:"note",rest:{type:"rest"},duration:a},{el_type:"bar"}),ze+=2):O[ye].splice(ze++,0,{el_type:"note",rest:{type:"rest"},duration:a-Be});P&&(A=!1,O[ye].splice(ze++,0,{el_type:"drum",params:{pattern:I,bars:F,intro:y,on:A}}),P=!1)}}return O.length>0&&O[0].length>0&&(O[0][0].pickupLength=i.getPickupLength()),O};function r(i,g,m){for(var b=0,x=g+1;x<i.length;x++)if(i[x].el_type==="note"&&b++,i[x].decoration&&i[x].decoration.indexOf(m)>=0)return b;return b}function s(i,g,m){for(var b=Math.min(i.length,g+3),x=g;x<b;x++)if(i[x].el_type==="note"&&i[x].decoration){for(var C=0;C<i[x].decoration.length;C++)if(m.indexOf(i[x].decoration[C])>=0)return i[x].decoration[C]}return null}function l(i,g){if(!(!g||g.length===0))for(var m=Object.keys(g),b=0;b<i.length;b++)for(var x=i[b],C=g[0]?g[0].qpm:0,S=0;S<x.length;S++){var I=x[S];I.el_type==="tempo"&&(C=I.qpm),m.indexOf(""+I.timing)>=0&&C!==g[""+I.timing].qpm&&(C=g[""+I.timing].qpm,I.el_type==="tempo"?(I.qpm=g[""+I.timing].qpm,S++):(i[b].splice(S,0,{el_type:"tempo",qpm:g[""+I.timing].qpm,timing:I.timing}),S+=2))}}function c(i){for(var g=0;g<i.length;g++)for(var m=i[g],b=m.length-1;b>=0&&m[b].el_type!=="bar";)m[b].noChordVoice=!0,b--}function f(i,g){if(!(!i||i.length<=g||!i[g].title))return i[g].title.join(" ")}function p(i,g){var m=.25;i.duration&&(m=i.duration[0]);var b=60;return i.bpm&&(b=i.bpm),m*b/g}function v(i){var g;switch(i.type){case"common_time":g={el_type:"meter",num:4,den:4};break;case"cut_time":g={el_type:"meter",num:2,den:2};break;case"specified":g={el_type:"meter",num:i.value[0].num,den:i.value[0].den};break;default:g={el_type:"meter"}}return a=g.num/g.den,g}function d(i){for(var g=[],m=0;m<i.length;m++)i[m].acc!=="natural"&&g.push(i[m]);return g}function u(i,g){var m;g.root==="HP"?m={el_type:"key",accidentals:[{acc:"natural",note:"g"},{acc:"sharp",note:"f"},{acc:"sharp",note:"c"}]}:m={el_type:"key",accidentals:d(g.accidentals)},h(i,m)}function o(i,g){var m=v(g);h(i,m)}function h(i,g){for(var m=i.length-1;m>=0;m--)if(i[m].el_type===g.el_type){JSON.stringify(i[m])!==JSON.stringify(g)&&i.push(g);return}i.push(g)}}(),Er=e,Er}var Ar,Ds;function jh(){if(Ds)return Ar;Ds=1;var e=function(p,v,d,u){this.chordTrack=[],this.chordTrackFinished=!1,this.chordChannel=p,this.currentChords=[],this.lastChord,this.chordLastBar,this.chordsOff=!!v,this.gChordTacet=this.chordsOff,this.hasRhythmHead=!1,this.transpose=0,this.lastBarTime=0,this.meter=u,this.tempoChangeFactor=1,this.bassInstrument=d.bassprog&&d.bassprog.length>=1?d.bassprog[0]:0,this.chordInstrument=d.chordprog&&d.chordprog.length>=1?d.chordprog[0]:0,this.bassOctaveShift=d.bassprog&&d.bassprog.length===2?d.bassprog[1]:0,this.chordOctaveShift=d.chordprog&&d.chordprog.length===2?d.chordprog[1]:0,this.boomVolume=d.bassvol&&d.bassvol.length===1?d.bassvol[0]:64,this.chickVolume=d.chordvol&&d.chordvol.length===1?d.chordvol[0]:48,d.gchord&&d.gchord.length>0?this.overridePattern=n(d.gchord[0]):this.overridePattern=void 0};e.prototype.setMeter=function(f){this.meter=f},e.prototype.setTempoChangeFactor=function(f){this.tempoChangeFactor=f},e.prototype.setLastBarTime=function(f){this.lastBarTime=f},e.prototype.setTranspose=function(f){this.transpose=f},e.prototype.setRhythmHead=function(f,p){this.hasRhythmHead=f;var v=[];if(f&&this.lastChord&&this.lastChord.chick)for(var d=0;d<this.lastChord.chick.length;d++){var u=Object.assign({},p.pitches[0]);u.actualPitch=this.lastChord.chick[d],v.push(u)}return v},e.prototype.barEnd=function(f){this.chordTrack.length>0&&!this.chordTrackFinished&&(this.resolveChords(this.lastBarTime,l(f.time)),this.currentChords=[]),this.chordLastBar=this.lastChord},e.prototype.gChordOn=function(f){this.chordsOff||(this.gChordTacet=f.tacet)},e.prototype.paramChange=function(f){switch(f.el_type){case"gchord":f.param&&f.param.length>0?this.overridePattern=n(f.param):this.overridePattern=void 0;break;case"bassprog":this.bassInstrument=f.value,f.octaveShift!=null&&f.octaveShift!=null?this.bassOctaveShift=f.octaveShift:this.bassOctaveShift=0;break;case"chordprog":this.chordInstrument=f.value,f.octaveShift!=null&&f.octaveShift!=null?this.chordOctaveShift=f.octaveShift:this.chordOctaveShift=0;break;case"bassvol":this.boomVolume=f.param;break;case"chordvol":this.chickVolume=f.param;break;default:console.log("unhandled midi param",f)}},e.prototype.finish=function(){this.chordTrackEmpty()||(this.chordTrackFinished=!0)},e.prototype.addTrack=function(f){this.chordTrackEmpty()||f.push(this.chordTrack)},e.prototype.findChord=function(f){if(this.gChordTacet)return"break";if(this.chordTrackFinished||!f.chord||f.chord.length===0)return null;for(var p=0;p<f.chord.length;p++){var v=f.chord[p];if(v.position==="default")return v.name;if(this.breakSynonyms.indexOf(v.name.toLowerCase())>=0)return"break"}return null},e.prototype.interpretChord=function(f){if(f.length!==0){if(f==="break")return{chick:[]};var p=f.substring(0,1);if(p==="("){if(f=f.substring(1,f.length-1),f.length===0)return;p=f.substring(0,1)}var v=this.basses[p];if(v){for(var d=this.transpose;d<-8;)d+=12;for(;d>8;)d-=12;v+=d,v<33?v+=12:v>44&&(v-=12);var u=v;v+=this.bassOctaveShift*12;var o=v-5,h;f.length===1&&(h=this.chordNotes(v,""));var i=f.substring(1),g=i.substring(0,1);g==="b"||g==="♭"?(u--,v--,o--,i=i.substring(1)):(g==="#"||g==="♯")&&(u++,v++,o++,i=i.substring(1));var m=i.split("/");if(h=this.chordNotes(u,m[0]),h.length>=3){var b=h[2]-h[0];o=o+b-7}if(m.length===2){var x=this.basses[m[1].substring(0,1)];if(x){var C=m[1].substring(1),S={"#":1,"♯":1,b:-1,"♭":-1}[C]||0;v=this.basses[m[1].substring(0,1)]+S+d,v+=this.bassOctaveShift*12,o=v}}return{boom:v,boom2:o,chick:h}}}},e.prototype.chordNotes=function(f,p){var v=this.chordIntervals[p];v||(p.slice(0,2).toLowerCase()==="ma"||p[0]==="M"?v=this.chordIntervals.M:p[0]==="m"||p[0]==="-"?v=this.chordIntervals.m:v=this.chordIntervals.M),f+=12,f+=this.chordOctaveShift*12;for(var d=[],u=0;u<v.length;u++)d.push(f+v[u]);return d},e.prototype.writeNote=function(f,p,v,d,u,o){f!==void 0&&this.chordTrack.push({cmd:"note",pitch:f,volume:v,start:this.lastBarTime+d*c(p,this.tempoChangeFactor),duration:c(u,this.tempoChangeFactor),gap:0,instrument:o})},e.prototype.chordTrackEmpty=function(){for(var f=!0,p=0;p<this.chordTrack.length&&f;p++)this.chordTrack[p].cmd==="note"&&(f=!1);return f},e.prototype.resolveChords=function(f,p){if(!this.hasRhythmHead){var v=this.meter.num,d=this.meter.den,u=1/d,o=u/2,h=parseInt(v,10)/parseInt(d,10),i=h-(p-f)/this.tempoChangeFactor;Math.abs(i)<1e-5&&(i=0),(this.currentChords.length===0||this.currentChords[0].beat!==0)&&this.currentChords.unshift({beat:0,chord:this.chordLastBar});var g=r(this.currentChords,8*v/d),m=this.overridePattern?this.overridePattern:this.rhythmPatterns[v+"/"+d];if(i){m=[];for(var b=(p-f)/this.tempoChangeFactor*8,x=0;x<b/2;x+=2)m.push("chick"),m.push("")}if(!m){m=[];for(var x=0;x<8*v/d/2;x++)m.push("chick"),m.push("")}for(var C=!0,S=Math.min(m.length,g.length),x=0;x<S;x++){x>0&&g[x-1]&&g[x]&&g[x-1].boom!==g[x].boom&&(C=!0);var I=m[x],F=I.indexOf("boom")>=0,y=!F&&x!==0&&m[0].indexOf("boom")>=0&&(!g[x-1]||g[x-1].boom!==g[x].boom),A=t(g[x],I,C,y);F&&(C=!1);for(var P=0;P<A.length;P++)this.writeNote(A[P],.125,F||y?this.boomVolume:this.chickVolume,x,o,F||y?this.bassInstrument:this.chordInstrument),y?y=!1:F=!1}}},e.prototype.processChord=function(f){if(!this.chordTrackFinished){var p=this.findChord(f);if(p){var v=this.interpretChord(p);if(v){this.chordTrack.length===0&&this.chordTrack.push({cmd:"program",channel:this.chordChannel,instrument:this.chordInstrument}),this.lastChord=v;var d=s(this.lastBarTime,l(f.time));this.currentChords.push({chord:this.lastChord,beat:d,start:l(f.time)})}}}};function t(f,p,v,d){var u=[];if(!f)return u;p.indexOf("boom")>=0?u.push(v?f.boom:f.boom2):d&&u.push(f.boom);var o=f.chick.length;if(p.indexOf("chick")>=0)for(var h=0;h<o;h++)u.push(f.chick[h]);switch(p){case"DO":u.push(f.chick[0]);break;case"MI":u.push(f.chick[1]);break;case"SOL":u.push(a(f,2));break;case"TI":u.push(a(f,3));break;case"TOP":u.push(a(f,4));break;case"do":u.push(f.chick[0]+12);break;case"mi":u.push(f.chick[1]+12);break;case"sol":u.push(a(f,2)+12);break;case"ti":u.push(a(f,3)+12);break;case"top":u.push(a(f,4)+12);break}return u}function a(f,p){var v=Math.floor(p/f.chick.length),d=f.chick[p%f.chick.length];return d+v*12}function n(f){for(var p=[],v=0;v<f.length;v++){var d=f[v];switch(d){case"z":p.push("");break;case"2":p.push("");break;case"c":p.push("chick");break;case"b":p.push("boom&chick");break;case"f":p.push("boom");break;case"G":p.push("DO");break;case"H":p.push("MI");break;case"I":p.push("SOL");break;case"J":p.push("TI");break;case"K":p.push("TOP");break;case"g":p.push("do");break;case"h":p.push("mi");break;case"i":p.push("sol");break;case"j":p.push("ti");break;case"k":p.push("top");break}}return p}function r(f,p,v){var d=[];if(f.length===0)return d;for(var u=f[0].chord,o=1;o<f.length;o++){for(var h=f[o];d.length<h.beat;)d.push(u);u=h.chord}for(;d.length<p;)d.push(u);return d}function s(f,p){var v=p-f;return v*8}e.prototype.breakSynonyms=["break","(break)","no chord","n.c.","tacet"],e.prototype.basses={A:33,B:35,C:36,D:38,E:40,F:41,G:43},e.prototype.chordIntervals={dim:[0,3,6],"°":[0,3,6],"˚":[0,3,6],dim7:[0,3,6,9],"°7":[0,3,6,9],"˚7":[0,3,6,9],ø7:[0,3,6,10],"m7(b5)":[0,3,6,10],m7b5:[0,3,6,10],"m7♭5":[0,3,6,10],"-7(b5)":[0,3,6,10],"-7b5":[0,3,6,10],"7b5":[0,4,6,10],"7(b5)":[0,4,6,10],"7♭5":[0,4,6,10],"7(b9,b5)":[0,4,6,10,13],"7b9,b5":[0,4,6,10,13],"7(#9,b5)":[0,4,6,10,15],"7#9b5":[0,4,6,10,15],"maj7(b5)":[0,4,6,11],maj7b5:[0,4,6,11],"13(b5)":[0,4,6,10,14,21],"13b5":[0,4,6,10,14,21],m:[0,3,7],"-":[0,3,7],m6:[0,3,7,9],"-6":[0,3,7,9],m7:[0,3,7,10],"-7":[0,3,7,10],"-(b6)":[0,3,7,8],"-b6":[0,3,7,8],"-6/9":[0,3,7,9,14],"-7(b9)":[0,3,7,10,13],"-7b9":[0,3,7,10,13],"-maj7":[0,3,7,11],"-9+7":[0,3,7,11,13],"-11":[0,3,7,11,14,17],m11:[0,3,7,11,14,17],"-maj9":[0,3,7,11,14],"-∆9":[0,3,7,11,14],mM9:[0,3,7,11,14],M:[0,4,7],6:[0,4,7,9],"6/9":[0,4,7,9,14],"6add9":[0,4,7,9,14],69:[0,4,7,9,14],7:[0,4,7,10],9:[0,4,7,10,14],11:[0,7,10,14,17],13:[0,4,7,10,14,21],"7b9":[0,4,7,10,13],"7♭9":[0,4,7,10,13],"7(b9)":[0,4,7,10,13],"7(#9)":[0,4,7,10,15],"7#9":[0,4,7,10,15],"(13)":[0,4,7,10,14,21],"7(9,13)":[0,4,7,10,14,21],"7(#9,b13)":[0,4,7,10,15,20],"7(#11)":[0,4,7,10,14,18],"7#11":[0,4,7,10,14,18],"7(b13)":[0,4,7,10,20],"7b13":[0,4,7,10,20],"9(#11)":[0,4,7,10,14,18],"9#11":[0,4,7,10,14,18],"13(#11)":[0,4,7,10,18,21],"13#11":[0,4,7,10,18,21],maj7:[0,4,7,11],"∆7":[0,4,7,11],Δ7:[0,4,7,11],maj9:[0,4,7,11,14],"maj7(9)":[0,4,7,11,14],"maj7(11)":[0,4,7,11,17],"maj7(#11)":[0,4,7,11,18],"maj7(13)":[0,4,7,14,21],"maj7(9,13)":[0,4,7,11,14,21],"7sus4":[0,5,7,10],m7sus4:[0,3,7,10,17],sus4:[0,5,7],sus2:[0,2,7],"7sus2":[0,2,7,10],"9sus4":[0,5,7,10,14],"13sus4":[0,5,7,10,14,21],aug7:[0,4,8,10],"+7":[0,4,8,10],"+":[0,4,8],"7#5":[0,4,8,10],"7♯5":[0,4,8,10],"7+5":[0,4,8,10],"9#5":[0,4,8,10,14],"9♯5":[0,4,8,10,14],"9+5":[0,4,8,10,14],"-7(#5)":[0,3,8,10],"-7#5":[0,3,8,10],"7(#5)":[0,4,8,10],"7(b9,#5)":[0,4,8,10,13],"7b9#5":[0,4,8,10,13],"maj7(#5)":[0,4,8,11],"maj7#5":[0,4,8,11],"maj7(#5,#11)":[0,4,8,11,18],"maj7#5#11":[0,4,8,11,18],"9(#5)":[0,4,8,10,14],"13(#5)":[0,4,8,10,14,21],"13#5":[0,4,8,10,14,21],5:[0,7],"5(8)":[0,7,12],"5add8":[0,7,12]},e.prototype.rhythmPatterns={"2/2":["boom","","","","chick","","",""],"3/2":["boom","","","","chick","","","","chick","","",""],"4/2":["boom","","","","chick","","","","boom","","","","chick","","",""],"2/4":["boom","","chick",""],"3/4":["boom","","chick","","chick",""],"4/4":["boom","","chick","","boom","","chick",""],"5/4":["boom","","chick","","chick","","boom","","chick",""],"6/4":["boom","","chick","","boom","","chick","","boom","","chick",""],"3/8":["boom","","chick"],"5/8":["boom","chick","chick","boom","chick"],"6/8":["boom","","chick","boom","","chick"],"7/8":["boom","chick","chick","boom","chick","boom","chick"],"9/8":["boom","","chick","boom","","chick","boom","","chick"],"10/8":["boom","chick","chick","boom","chick","chick","boom","chick","boom","chick"],"11/8":["boom","chick","chick","boom","chick","chick","boom","chick","boom","chick","chick"],"12/8":["boom","","chick","boom","","chick","boom","","chick","boom","","chick"]};function l(f){return f/1e6}function c(f,p){return Math.round(f*p*1e6)/1e6}return Ar=e,Ar}var Mr,Os;function yf(){if(Os)return Mr;Os=1;var e={f0:"_C",n0:"=C",s0:"^C",x0:"C",f1:"_D",n1:"=D",s1:"^D",x1:"D",f2:"_E",n2:"=E",s2:"^E",x2:"E",f3:"_F",n3:"=F",s3:"^F",x3:"F",f4:"_G",n4:"=G",s4:"^G",x4:"G",f5:"_A",n5:"=A",s5:"^A",x5:"A",f6:"_B",n6:"=B",s6:"^B",x6:"B",f7:"_c",n7:"=c",s7:"^c",x7:"c",f8:"_d",n8:"=d",s8:"^d",x8:"d",f9:"_e",n9:"=e",s9:"^e",x9:"e",f10:"_f",n10:"=f",s10:"^f",x10:"f",f11:"_g",n11:"=g",s11:"^g",x11:"g",f12:"_a",n12:"=a",s12:"^a",x12:"a",f13:"_b",n13:"=b",s13:"^b",x13:"b",f14:"_c'",n14:"=c'",s14:"^c'",x14:"c'",f15:"_d'",n15:"=d'",s15:"^d'",x15:"d'",f16:"_e'",n16:"=e'",s16:"^e'",x16:"e'"};function t(a){var n=(a.accidental?a.accidental[0]:"x")+a.verticalPos;return e[n]}return Mr=t,Mr}var Br,Is;function Kh(){if(Is)return Br;Is=1;var e,t=jh(),a=yf();return function(){var n,r,s,l,c,f=1,p,v,d,u,o,h,i={num:4,den:4},g=128,m,b=!0,x=105,C=95,S=85,I=[[x,C,S]],F=.25,y,A,P=0,M,N={},B,E=0,T,L=0,R=-.001,O=.4;e=function(W,V,H,j){V||(V={}),j||(j={}),n=[],r=[0,0,0,0,0,0,0],l=[],c=V.qpm,f=1,p=void 0,v=void 0,d=void 0,u=void 0,o=0,T=H,i={num:4,den:4},b=!0,x=105,C=95,S=85,I=[],F=.25,y=void 0,A=void 0,P=0,M=[],N={},B=1,W.length>0&&W[0].length>0&&(E=W[0][0].pickupLength),V.bassprog!==void 0&&!j.bassprog&&(j.bassprog=[V.bassprog]),V.bassvol!==void 0&&!j.bassvol&&(j.bassvol=[V.bassvol]),V.chordprog!==void 0&&!j.chordprog&&(j.chordprog=[V.chordprog]),V.chordvol!==void 0&&!j.chordvol&&(j.chordvol=[V.chordvol]),V.gchord!==void 0&&!j.gchord&&(j.gchord=[V.gchord]),h=new t(W.length,V.chordsOff,j,i),q(W,V);for(var X=0;X<W.length;X++){s=0,h.setTranspose(s);var ae=W[X];d=[{cmd:"program",channel:X,instrument:p}],u=void 0,m=0,h.setLastBarTime(0);var se=!1;(V.voicesOff===!0||V.voicesOff&&V.voicesOff.length&&V.voicesOff.indexOf(X)>=0)&&(se=!0);for(var pe=0;pe<ae.length;pe++){var ce=ae[pe];switch(ce.el_type){case"name":u={cmd:"text",type:"name",text:ce.trackName};break;case"note":J(ce,se);break;case"key":r=D(ce);break;case"meter":i=ce,h.setMeter(i),F=z(i),ie();break;case"tempo":c?f=ce.qpm?c/ce.qpm:1:c=ce.qpm,h.setTempoChangeFactor(f);break;case"transpose":s=ce.transpose,h.setTranspose(s);break;case"bar":h.barEnd(ce),n=[],X===0&&ne(W.length+1),h.setRhythmHead(!1),m=_(ce.time),h.setLastBarTime(m);break;case"bagpipes":break;case"instrument":if(p===void 0&&(p=ce.program),v=ce.program,d.length>0&&d[d.length-1].cmd==="program")d[d.length-1].instrument=ce.program;else{var he;for(he=d.length-1;he>=0&&d[he].cmd!=="program";he--);(he<0||d[he].instrument!==ce.program)&&d.push({cmd:"program",channel:0,instrument:ce.program})}break;case"channel":w(ce.channel);break;case"drum":N=re(ce.params),ie();break;case"gchordOn":h.gChordOn(ce);break;case"beat":x=ce.beats[0],C=ce.beats[1],S=ce.beats[2],ce.volumesPerNotePitch?I=ce.volumesPerNotePitch:I=[];break;case"vol":y=ce.volume;break;case"volinc":A=ce.volume;break;case"beataccents":b=ce.value;break;case"gchord":case"bassprog":case"chordprog":case"bassvol":case"chordvol":case"gchordbars":h.paramChange(ce);break;default:console.log("MIDI creation. Unknown el_type: "+ce.el_type+`
`);break}}d[0].instrument===void 0&&(d[0].instrument=p||0),u&&d.unshift(u),l.push(d),h.finish(),M.length>0}return V.detuneOctave&&te(l,parseInt(V.detuneOctave,10)),h.addTrack(l),M.length>0&&l.push(M),{tempo:c,instrument:p,tracks:l,totalDuration:o}};function w(W){for(var V=d.length-1;V>=0;V--)if(d[V].cmd==="program"){d[V].channel=W;return}}function _(W){return W/1e6}function k(W){return Math.round(W*f*1e6)/1e6}function q(W,V){for(var H=0;H<W.length;H++){for(var j=W[H],X={},ae=V.qpm,se=0,pe=1,ce=0;ce<j.length;ce++){var he=j[ce];if(he.el_type==="tempo"){ae?pe=he.qpm?ae/he.qpm:1:ae=he.qpm;continue}he.time=se;var we=he.duration?he.duration:0;if(se+=Math.round(we*pe*1e6),he.pitches){for(var xe=0;xe<he.pitches.length;xe++){var ge=he.pitches[xe];if(ge){if(ge.duration=he.duration,ge.startTie)X[ge.pitch]===void 0?X[ge.pitch]={el:ce,pitch:xe}:(j[X[ge.pitch].el].pitches[X[ge.pitch].pitch].duration+=ge.duration,he.pitches[xe]=null);else if(ge.endTie){var me=X[ge.pitch];if(me){var Be=ge.duration;delete j[me.el].pitches[me.pitch].startTie,j[me.el].pitches[me.pitch].duration+=Be,he.pitches[xe]=null,delete X[ge.pitch]}else delete ge.endTie}}}delete he.duration}}for(var ye in X)if(X.hasOwnProperty(ye)){var ze=X[ye];delete j[ze.el].pitches[ze.pitch].startTie}}}function z(W){switch(parseInt(W.den,10)){case 2:return .5;case 4:return .25;case 8:return W.num%3===0?.375:.125;case 16:return .125}return .25}function U(W,V,H){var j=H-W;return j/V}function Y(W,V,H){if(V)return 0;let j=x,X=C,ae=S;H!==void 0&&I.length>=H+1&&(j=I[H][0],X=I[H][1],ae=I[H][2]);var se;if(y!==void 0)se=y,y=void 0;else if(!b)se=X;else if(E>W)se=ae;else{var pe=U(m,z(i),W);pe===0?se=j:parseInt(pe,10)===pe?se=X:se=ae}return A&&(se+=A,A=void 0),se<0&&(se=0),se>127&&(se=127),V?0:se}function ee(W,V){var H={};if(W.decoration)for(var j=0;j<W.decoration.length;j++)W.decoration[j]==="staccato"?H.thisBreakBetweenNotes="staccato":W.decoration[j]==="tenuto"?H.thisBreakBetweenNotes="tenuto":W.decoration[j]==="accent"?H.velocity=Math.min(127,V*1.5):W.decoration[j]==="trill"?H.noteModification="trill":W.decoration[j]==="lowermordent"?H.noteModification="lowermordent":W.decoration[j]==="uppermordent"?H.noteModification="pralltriller":W.decoration[j]==="mordent"?H.noteModification="mordent":W.decoration[j]==="turn"?H.noteModification="turn":W.decoration[j]==="roll"?H.noteModification="roll":W.decoration[j]==="pralltriller"?H.noteModification="pralltriller":W.decoration[j]==="trillh"&&(H.noteModification="trillh");return H}function oe(W,V){var H=V.start,j=V.duration,X=k(1/32);switch(W){case"trill":for(var ae=2;j>0;)d.push({cmd:"note",pitch:V.pitch+ae,volume:V.volume,start:H,duration:X,gap:0,instrument:v,style:"decoration"}),ae=ae===2?0:2,j-=X,H+=X;break;case"trillh":for(var ae=1;j>0;)d.push({cmd:"note",pitch:V.pitch+ae,volume:V.volume,start:H,duration:X,gap:0,instrument:v,style:"decoration"}),ae=ae===1?0:1,j-=X,H+=X;break;case"pralltriller":d.push({cmd:"note",pitch:V.pitch,volume:V.volume,start:H,duration:X,gap:0,instrument:v,style:"decoration"}),j-=X,H+=X,d.push({cmd:"note",pitch:V.pitch+2,volume:V.volume,start:H,duration:X,gap:0,instrument:v,style:"decoration"}),j-=X,H+=X,d.push({cmd:"note",pitch:V.pitch,volume:V.volume,start:H,duration:j,gap:0,instrument:v});break;case"mordent":case"lowermordent":d.push({cmd:"note",pitch:V.pitch,volume:V.volume,start:H,duration:X,gap:0,instrument:v,style:"decoration"}),j-=X,H+=X,d.push({cmd:"note",pitch:V.pitch-2,volume:V.volume,start:H,duration:X,gap:0,instrument:v,style:"decoration"}),j-=X,H+=X,d.push({cmd:"note",pitch:V.pitch,volume:V.volume,start:H,duration:j,gap:0,instrument:v});break;case"turn":X=V.duration/4,d.push({cmd:"note",pitch:V.pitch+2,volume:V.volume,start:H,duration:X,gap:0,instrument:v,style:"decoration"}),d.push({cmd:"note",pitch:V.pitch,volume:V.volume,start:H+X,duration:X,gap:0,instrument:v,style:"decoration"}),d.push({cmd:"note",pitch:V.pitch-1,volume:V.volume,start:H+X*2,duration:X,gap:0,instrument:v,style:"decoration"}),d.push({cmd:"note",pitch:V.pitch,volume:V.volume,start:H+X*3,duration:X,gap:0,instrument:v,style:"decoration"});break;case"roll":for(;j>0;)d.push({cmd:"note",pitch:V.pitch,volume:V.volume,start:H,duration:X,gap:0,instrument:v,style:"decoration"}),j-=X*2,H+=X*2;break}}function J(W,V){var H=Y(_(W.time),V);h.processChord(W);var j;if(W.gracenotes&&W.pitches&&W.pitches.length>0&&W.pitches[0]&&(j=G(W.gracenotes,W.pitches[0].duration),W.elem&&(W.elem.midiGraceNotePitches=$(j,_(W.time),H*2/3,v))),W.elem){var X=_(W.time),ae=X/F/c*60*1e3;if(W.elem.currentTrackMilliseconds===void 0)W.elem.currentTrackMilliseconds=ae,W.elem.currentTrackWholeNotes=X;else if(W.elem.currentTrackMilliseconds.length===void 0)W.elem.currentTrackMilliseconds!==ae&&(W.elem.currentTrackMilliseconds=[W.elem.currentTrackMilliseconds,ae],W.elem.currentTrackWholeNotes=[W.elem.currentTrackWholeNotes,X]);else{for(var se=!1,pe=0;pe<W.elem.currentTrackMilliseconds.length;pe++)W.elem.currentTrackMilliseconds[pe]===ae&&(se=!0);se||(W.elem.currentTrackMilliseconds.push(ae),W.elem.currentTrackWholeNotes.push(X))}}if(W.pitches){var ce="",he=ee(W,H);he.thisBreakBetweenNotes&&(ce=he.thisBreakBetweenNotes),he.velocity&&(H=he.velocity);var we=W.pitches;W.style==="rhythm"&&(we=h.setRhythmHead(!0,W)),W.elem&&(W.elem.midiPitches=[]);for(var xe=0;xe<we.length;xe++){let Le=H;!he.velocity&&Array.isArray(W.decoration)&&W.decoration.length>xe&&(Le=Y(_(W.time),V,xe));var ge=we[xe];if(ge){ge.startSlur&&(P+=ge.startSlur.length),ge.endSlur&&(P-=ge.endSlur.length);var me=ge.actualPitch?ge.actualPitch:de(ge);if(v===g&&T){var Be=a(ge);Be&&T[Be]&&(me=T[Be].sound)}var ye={cmd:"note",pitch:me,volume:Le,start:_(W.time),duration:k(ge.duration),instrument:v,startChar:W.elem.startChar,endChar:W.elem.endChar};if(ye=Q(ye),W.gracenotes&&(ye.duration=ye.duration/2,ye.start=ye.start+ye.duration),W.elem&&W.elem.midiPitches.push(ye),he.noteModification)oe(he.noteModification,ye);else{switch(P>0?ye.endType="tenuto":ce&&(ye.endType=ce),ye.endType){case"tenuto":ye.gap=R;break;case"staccato":var ze=ye.duration*O;ye.gap=c/60*ze;break;default:ye.gap=L;break}d.push(ye)}}}d.length-1}var Ue=fe(W);o=Math.max(o,_(W.time)+k(Ue))}function fe(W){return W.pitches&&W.pitches.length>0&&W.pitches[0]?W.pitches[0].duration:W.elem?W.elem.duration:W.duration}var ue=[0,2,4,5,7,9,11];function de(W){if(W.midipitch!==void 0)return W.midipitch;var V=W.pitch;if(W.accidental)switch(W.accidental){case"sharp":n[V]=1;break;case"flat":n[V]=-1;break;case"natural":n[V]=0;break;case"dblsharp":n[V]=2;break;case"dblflat":n[V]=-2;break;case"quartersharp":n[V]=.25;break;case"quarterflat":n[V]=-.25;break}var H=K(V)*12+ue[Z(V)]+60;return n[V]!==void 0?H+=n[V]:H+=r[Z(V)],H+=s,H}function D(W){var V=[0,0,0,0,0,0,0];if(!W.accidentals)return V;for(var H=0;H<W.accidentals.length;H++){var j=W.accidentals[H],X;switch(j.acc){case"flat":X=-1;break;case"quarterflat":X=-.25;break;case"sharp":X=1;break;case"quartersharp":X=.25;break;default:X=0;break}var ae=j.note.toLowerCase(),se=Z(ae.charCodeAt(0)-99);V[se]+=X}return V}function G(W,V){for(var H=0,j=[],X,ae=0;ae<W.length;ae++)X=W[ae],H+=X.duration;var se=V/2/H;for(ae=0;ae<W.length;ae++){X=W[ae];var pe=de(X);if(v===g&&T){var ce=a(X);ce&&T[ce]&&(pe=T[ce].sound)}var he={pitch:pe,duration:X.duration*se};he=Q(he),j.push(he)}return j}function $(W,V,H,j){var X=[];H=Math.round(H);for(var ae=0;ae<W.length;ae++){var se=W[ae];d.push({cmd:"note",pitch:se.pitch,volume:H,start:V,duration:se.duration,gap:0,instrument:j,style:"grace"}),X.push({pitch:se.pitch,durationInMeasures:se.duration,volume:H,instrument:j}),V+=se.duration}return X}function Q(W){var V=""+W.pitch;return V.indexOf(".75")>=0?(W.pitch=Math.round(W.pitch),W.cents=-50):V.indexOf(".25")>=0&&(W.pitch=Math.round(W.pitch),W.cents=50),W}function K(W){return Math.floor(W/7)}function Z(W){return W=W%7,W<0&&(W+=7),W}function re(W){if(W.pattern.length===0||W.on===!1)return{on:!1};for(var V=W.pattern[0],H=[],j="",X=0,ae=0;ae<V.length;ae++)if(V[ae]==="d"&&X++,V[ae]==="d"||V[ae]==="z")j.length!==0?(H.push(j),j=V[ae]):j=j+V[ae];else{if(j.length===0)return{on:!1};j=j+V[ae]}if(j.length!==0&&H.push(j),W.pattern.length!==X*2+1)return{on:!1};for(var se={on:!0,bars:W.bars,pattern:[]},pe=z(i),ce=0,he=0;he<H.length;he++){j=H[he];for(var we=1,xe=!1,ge=0,me=1;me<j.length;me++)switch(j[me]){case"/":ge!==0&&(we*=ge),ge=0,xe=!0;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":ge=ge*10+j[me];break;default:return{on:!1}}xe?(ge===0&&(ge=2),we/=ge):ge&&(we*=ge),j[0]==="d"?(se.pattern.push({len:we*pe,pitch:W.pattern[1+ce],velocity:W.pattern[1+ce+X]}),ce++):se.pattern.push({len:we*pe,pitch:null})}return B=W.bars?W.bars:1,se}function ie(){if(!(!N||!N.pattern)){for(var W=N,V=0,H=i.num/i.den,j=0;j<W.pattern.length;j++)V+=W.pattern[j].len;var X=V/B/H;for(j=0;j<W.pattern.length;j++)W.pattern[j].len=W.pattern[j].len/X;N=W}}function ne(W){if(!(M.length===0&&!N.on)){var V=i.num/i.den;if(M.length===0){if(o<V)return;M.push({cmd:"program",channel:W,instrument:g})}if(N.on)for(var H=m,j=0;j<N.pattern.length;j++){var X=k(N.pattern[j].len);N.pattern[j].pitch&&M.push({cmd:"note",pitch:N.pattern[j].pitch,volume:N.pattern[j].velocity,start:H,duration:X,gap:0,instrument:g}),H+=X}}}function te(W,V){for(var H={},j=0;j<W.length;j++)for(var X=0;X<W[j].length;X++){var ae=W[j][X];ae.cmd==="note"&&(H[ae.start]===void 0&&(H[ae.start]=[]),H[ae.start].push({track:j,event:X,pitch:ae.pitch}))}var se=Object.keys(H);for(j=0;j<se.length;j++){var pe=H[se[j]];if(pe.length>1){pe=pe.sort(function(ge,me){return ge.pitch-me.pitch});var ce=pe[pe.length-1],he=ce.pitch%12,we=!1;for(X=0;!we&&X<pe.length-1;X++)pe[X].pitch%12===he&&(we=!0);if(we){var xe=W[ce.track][ce.event];xe.cents||(xe.cents=0),xe.cents+=V}}}}}(),Br=e,Br}var Pr,Fs;function Xh(){if(Fs)return Pr;Fs=1;function e(f,p){p||(p={});for(var v=!!p.lineBreaks,d=[],u=!1,o=[],h=[],i=[],g=[],m=[],b=[],x=[],C=0;C<f.length;C++){var S=f[C];if(S.staff){if(u&&!S.vskip)for(var I=d[d.length-1],F=0;F<I.staff.length;F++){var y=S.staff[F],A=I.staff[F];if(y&&(l(y.meter,o[F])||(a(y.meter,y.voices),o[F]=y.meter,delete y.meter),l(y.key,h[F])||(n(y.key,y.voices),h[F]=y.key,delete y.key),y.title&&(A.abbrevTitle=y.title),l(y.clef,i[F])||(r(y.clef,y.voices),i[F]=y.clef,delete y.clef),l(y.vocalfont,g[F])||(s(y.vocalfont,y.voices,"vocalfont"),g[F]=y.vocalfont,delete y.vocalfont),l(y.gchordfont,m[F])||(s(y.gchordfont,y.voices,"gchordfont"),m[F]=y.gchordfont,delete y.gchordfont),l(y.tripletfont,b[F])||(s(y.tripletfont,y.voices,"tripletfont"),b[F]=y.tripletfont,delete y.tripletfont),l(y.annotationfont,x[F])||(s(y.annotationfont,y.voices,"annotationfont"),x[F]=y.annotationfont,delete y.annotationfont)),y)for(var P=0;P<A.voices.length;P++){var M=A.voices[P],N=y.voices[P];v&&M.push({el_type:"break"}),N&&(A.voices[P]=M.concat(N))}}else{for(var B=0;B<S.staff.length;B++)h[B]=S.staff[B].key,o[B]=S.staff[B].meter,i[B]=S.staff[B].clef;d.push(c(S))}u=!0}else u=!1,d.push(S)}return d}function t(f,p){return f==="abselem"?"abselem":p}function a(f,p){f.el_type="meter",f.startChar=-1,f.endChar=-1;for(var v=0;v<p.length;v++)p[v].unshift(f)}function n(f,p){f.el_type="key",f.startChar=-1,f.endChar=-1;for(var v=0;v<p.length;v++)p[v].unshift(f)}function r(f,p){f.el_type="clef",f.startChar=-1,f.endChar=-1;for(var v=0;v<p.length;v++)p[v].unshift(f)}function s(f,p,v){f.el_type="font",f.type=v,f.startChar=-1,f.endChar=-1;for(var d=0;d<p.length;d++)p[d].unshift(f)}function l(f,p){if(!f)return!0;var v=JSON.stringify(f,t),d=JSON.stringify(p,t);return v===d}function c(f){for(var p={},v=Object.keys(f),d=0;d<v.length;d++)if(v[d]!=="staff")p[v[d]]=f[v[d]];else{p.staff=[];for(var u=0;u<f.staff.length;u++){for(var o={},h=Object.keys(f.staff[u]),i=0;i<h.length;i++)if(h[i]!=="voices")o[h[i]]=f.staff[u][h[i]];else{o.voices=[];for(var g=0;g<f.staff[u].voices.length;g++)o.voices.push([].concat(f.staff[u].voices[g]))}p.staff.push(o)}}return p}return Pr=e,Pr}var Nr,Rs;function wf(){if(Rs)return Nr;Rs=1;var e=yt(),t=We(),a=mf(),n=Kh(),r=Xh(),s=function(){this.reset=function(){this.version="1.1.0",this.media="screen",this.metaText={},this.metaTextInfo={},this.formatting={},this.lines=[],this.staffNum=0,this.voiceNum=0,this.lineNum=0,this.runningFonts={},delete this.visualTranspose},this.reset();function l(u,o,h,i){for(var g=0;g<i.length;g++)u[h][i[g]]=o[h][i[g]]}this.copyTopInfo=function(u){var o=["tempo","title","header","rhythm","origin","composer","author","partOrder"];l(this,u,"metaText",o),l(this,u,"metaTextInfo",o)},this.copyBottomInfo=function(u){var o=["unalignedWords","book","source","discography","notes","transcription","history","abc-copyright","abc-creator","abc-edited-by","footer"];l(this,u,"metaText",o),l(this,u,"metaTextInfo",o)},this.getBeatLength=function(){var u=this.getMeterFraction(),o=1;return(u.num===6||u.num===9||u.num===12||u.num===3&&u.den===8)&&(o=3),o/u.den};function c(u,o){for(var h=0,i=0;i<u.length;i++)if(u[i].staff)for(var g=0;g<u[i].staff.length;g++)for(var m=0;m<u[i].staff[g].voices.length;m++)for(var b=u[i].staff[g].voices[m],x=1,C=0;C<b.length;C++){var S=b[C].rest&&b[C].rest.type==="spacer";if(b[C].startTriplet&&(x=b[C].tripletMultiplier),b[C].duration&&!S&&b[C].el_type!=="tempo"&&(h+=b[C].duration*x),b[C].endTriplet&&(x=1),h>=o&&(h-=o),b[C].el_type==="bar")return h}return h}this.getPickupLength=function(){var u=this.getBarLength(),o=c(this.lines,u);return o<1e-8||u-o<1e-8?0:o},this.getBarLength=function(){var u=this.getMeterFraction();return u.num/u.den},this.getTotalTime=function(){return this.totalTime},this.getTotalBeats=function(){return this.totalBeats},this.millisecondsPerMeasure=function(u){var o;if(u)o=u;else{var h=this.metaText?this.metaText.tempo:null;o=this.getBpm(h)}o<=0&&(o=1);var i=this.getBeatsPerMeasure(),g=i/o;return g*6e4},this.getBeatsPerMeasure=function(){var u=this.getBeatLength(),o=this.getBarLength();return o/u},this.getMeter=function(){for(var u=0;u<this.lines.length;u++){var o=this.lines[u];if(o.staff)for(var h=0;h<o.staff.length;h++){var i=o.staff[h].meter;if(i)return i}}return{type:"common_time"}},this.getMeterFraction=function(){var u=this.getMeter(),o=4,h=4;return u&&(u.type==="specified"?(o=parseInt(u.value[0].num,10),h=parseInt(u.value[0].den,10)):u.type==="cut_time"?(o=2,h=2):u.type==="common_time"&&(o=4,h=4)),this.meter={num:o,den:h},this.meter},this.getKeySignature=function(){for(var u=0;u<this.lines.length;u++){var o=this.lines[u];if(o.staff){for(var h=0;h<o.staff.length;h++)if(o.staff[h].key)return o.staff[h].key}}return{}},this.getElementFromChar=function(u){for(var o=0;o<this.lines.length;o++){var h=this.lines[o];if(h.staff)for(var i=0;i<h.staff.length;i++)for(var g=h.staff[i],m=0;m<g.voices.length;m++)for(var b=g.voices[m],x=0;x<b.length;x++){var C=b[x];if(C.startChar&&C.endChar&&C.startChar<=u&&C.endChar>u)return C}}return null};function f(u){for(var o,h,i,g,m=u.length-1;m>=0;m--){var b=u[m];b.type==="bar"?(b.top=i,b.nextTop=o,o=i,b.bottom=g,b.nextBottom=h,h=g):b.type==="event"&&(i=b.top,g=b.top+b.height)}}function p(u){var o=[];for(var h in u)u.hasOwnProperty(h)&&o.push(u[h]);return o=o.sort(function(i,g){var m=i.milliseconds-g.milliseconds;return m!==0?m:i.type==="bar"?-1:1}),o}this.addElementToEvents=function(u,o,h,i,g,m,b,x,C,S){if(o.hint)return{isTiedState:void 0,duration:0};var I=o.durationClass?o.durationClass:o.duration;if(o.abcelem.rest&&o.abcelem.rest.type==="spacer"&&(I=0),I>0){for(var F=[],y=0;y<o.elemset.length;y++)o.elemset[y]!==null&&F.push(o.elemset[y]);var A=o.startTie;if(C!==void 0)u["event"+C].elements.push(F),S&&(u["event"+h]||(u["event"+h]={type:"event",milliseconds:h,line:m,measureNumber:b,top:i,height:g,left:null,width:0,elements:[],startChar:null,endChar:null,startCharArray:[],endCharArray:[]}),u["event"+h].measureStart=!0,S=!1),A||(C=void 0);else{if(!u["event"+h])u["event"+h]={type:"event",milliseconds:h,line:m,measureNumber:b,top:i,height:g,left:o.x,width:o.w,elements:[F],startChar:o.abcelem.startChar,endChar:o.abcelem.endChar,startCharArray:[o.abcelem.startChar],endCharArray:[o.abcelem.endChar],midiPitches:o.abcelem.midiPitches?e.cloneArray(o.abcelem.midiPitches):[]},o.abcelem.midiGraceNotePitches&&(u["event"+h].midiGraceNotePitches=e.cloneArray(o.abcelem.midiGraceNotePitches));else{if(u["event"+h].left?u["event"+h].left=Math.min(u["event"+h].left,o.x):u["event"+h].left=o.x,u["event"+h].elements.push(F),u["event"+h].startCharArray.push(o.abcelem.startChar),u["event"+h].endCharArray.push(o.abcelem.endChar),u["event"+h].startChar===null&&(u["event"+h].startChar=o.abcelem.startChar),u["event"+h].endChar===null&&(u["event"+h].endChar=o.abcelem.endChar),o.abcelem.midiPitches&&o.abcelem.midiPitches.length){u["event"+h].midiPitches||(u["event"+h].midiPitches=[]);for(var y=0;y<o.abcelem.midiPitches.length;y++)u["event"+h].midiPitches.push(o.abcelem.midiPitches[y])}if(o.abcelem.midiGraceNotePitches&&o.abcelem.midiGraceNotePitches.length){u["event"+h].midiGraceNotePitches||(u["event"+h].midiGraceNotePitches=[]);for(var P=0;P<o.abcelem.midiGraceNotePitches.length;P++)u["event"+h].midiGraceNotePitches.push(o.abcelem.midiGraceNotePitches[P])}}S&&(u["event"+h].measureStart=!0,S=!1)}}return{isTiedState:C,duration:I/x,nextIsBar:S||o.type==="bar"}},this.makeVoicesArray=function(){for(var u=[],o=[],h={},i=0;i<this.engraver.staffgroups.length;i++){var g=this.engraver.staffgroups[i];if(g&&g.staffs&&g.staffs.length>0){var m=g.staffs[0],b=m.absoluteY,x=b-m.top*t.STEP,C=g.staffs[g.staffs.length-1];b=C.absoluteY;for(var S=b-C.bottom*t.STEP,I=S-x,F=g.voices,y=0;y<F.length;y++)if(!(F[y].staff&&F[y].staff.isTabStaff)){var A=!1;u[y]||(u[y]=[]),o[y]===void 0&&(o[y]=0);for(var P=F[y].children,M=0;M<P.length;M++)P[M].type==="tempo"&&(h[o[y]]=this.getBpm(P[M].abcelem)),u[y].push({top:x,height:I,line:g.line,measureNumber:o[y],elem:P[M]}),P[M].type==="bar"&&A&&o[y]++,(P[M].type==="note"||P[M].type==="rest")&&(A=!0)}}}return this.tempoLocations=h,u},this.setupEvents=function(u,o,h,i){i||(i=1);for(var g=[],m={},b=u,x,C=!0,S=this.makeVoicesArray(),I=0,F=0;F<S.length;F++){var y=b,A=Math.round(y*1e3),P=0,M=-1,N=S[F],B=h;o=this.getBeatLength()*B/60;for(var E=-1,T=0;T<N.length;T++){var L=N[T].measureNumber;E!==L&&this.tempoLocations[L]&&(B=this.tempoLocations[L],o=i*this.getBeatLength()*B/60,E=L);var R=N[T].elem,O=this.addElementToEvents(m,R,A,N[T].top,N[T].height,N[T].line,N[T].measureNumber,o,x,C);x=O.isTiedState,C=O.nextIsBar,y+=O.duration;var w;if(R.duration>0&&m["event"+A]&&(w="event"+A),A=Math.round(y*1e3),R.type==="bar"){var _=R.abcelem.type,k=_==="bar_right_repeat"||_==="bar_dbl_repeat",q=R.abcelem.startEnding==="1",z=_==="bar_left_repeat"||_==="bar_dbl_repeat"||_==="bar_right_repeat";if(k){T>0&&(m[w].endX=R.x),M===-1&&(M=T);var U=0;E=-1;for(var Y=P;Y<M;Y++){L=N[Y].measureNumber,E!==L&&this.tempoLocations[L]&&(B=this.tempoLocations[L],o=i*this.getBeatLength()*B/60,E=L);var ee=N[Y].elem;O=this.addElementToEvents(m,ee,A,N[Y].top,N[Y].height,N[Y].line,N[Y].measureNumber,o,x,C),x=O.isTiedState,C=O.nextIsBar,y+=O.duration,U=A,A=Math.round(y*1e3)}m["event"+U]&&(m["event"+U].endX=N[M].elem.x),C=!0,M=-1}q&&(M=T),z&&(P=T)}}I=Math.max(I,A)}return g=p(m),f(g),d(this.lines,g),g.push({type:"end",milliseconds:I}),this.addUsefulCallbackInfo(g,B*i),g},this.addUsefulCallbackInfo=function(u,o){for(var h=this.millisecondsPerMeasure(o),i=0;i<u.length;i++){var g=u[i];g.millisecondsPerMeasure=h}};function v(u,o){for(;o<u.length&&u[o].left===null;)o++;return u[o]}function d(u,o){if(!(o.length<1)){for(var h=0;h<o.length-1;h++){var i=o[h],g=v(o,h+1);if(i.left!==null){var m=g&&i.top===g.top?g.left:u[i.line].staffGroup.w;i.endX!==void 0?m>i.left&&(i.endX=Math.min(i.endX,m)):i.endX=m}}var b=o[o.length-1];b.endX=u[b.line].staffGroup.w}}this.getBpm=function(u){var o;if(u||(u=this.metaText?this.metaText.tempo:null),u){o=u.bpm;var h=this.getBeatLength(),i=u.duration&&u.duration.length>0?u.duration[0]:h;o=o*i/h}if(!o){o=180;var g=this.getMeterFraction();g&&g.num!==3&&g.num%3===0&&(o=120)}return o},this.setTiming=function(u,o){if(o=o||0,!this.engraver||!this.engraver.staffgroups)return console.log("setTiming cannot be called before the tune is drawn."),this.noteTimings=[],this.noteTimings;var h=this.metaText?this.metaText.tempo:null,i=this.getBpm(h),g=1;u?h&&(g=u/i):u=i;var m=this.getBeatLength(),b=u/60,x=this.getBarLength(),C=x/m*o/b;C&&(C-=this.getPickupLength()/m/b);var S=m*b;return this.noteTimings=this.setupEvents(C,S,u,g),this.noteTimings.length>0?(this.totalTime=this.noteTimings[this.noteTimings.length-1].milliseconds/1e3,this.totalBeats=this.totalTime*b):(this.totalTime=void 0,this.totalBeats=void 0),this.noteTimings},this.setUpAudio=function(u){u||(u={});var o=a(this,u);return n(o,u,this.formatting.percmap,this.formatting.midi)},this.deline=function(u){return r(this.lines,u)},this.findSelectableElement=function(u){return this.engraver&&this.engraver.selectables?this.engraver.findSelectableElement(u):null},this.getSelectableArray=function(){return this.engraver&&this.engraver.selectables?this.engraver.selectables:[]}};return Nr=s,Nr}var Lr,Hs;function Jh(){if(Hs)return Lr;Hs=1;var e=Ba(),t=function(y){var A=this,P={},M="";y.reset(),this.setVisualTranspose=function(N){N!==void 0&&(y.visualTranspose=N)},this.cleanUp=function(N,B,E){o(y),delete y.runningFonts,n(y),y.metaText.tempo&&y.metaText.tempo.bpm&&!y.metaText.tempo.duration&&(y.metaText.tempo.duration=[y.getBeatLength()]);var T=!1,L,R,O;for(L=0;L<y.lines.length;L++)if(y.lines[L].staff!==void 0){var w=!1;for(R=0;R<y.lines[L].staff.length;R++)if(y.lines[L].staff[R]===void 0)T=!0,y.lines[L].staff[R]=null;else for(O=0;O<y.lines[L].staff[R].voices.length;O++)y.lines[L].staff[R].voices[O]===void 0?y.lines[L].staff[R].voices[O]=[]:h(y.lines[L].staff[R].voices[O])&&(w=!0);w||(y.lines[L]=null,T=!0)}if(T&&(y.lines=y.lines.filter(function(Y){return!!Y}),y.lines.forEach(function(Y){Y.staff&&(Y.staff=Y.staff.filter(function(ee){return!!ee}))})),N)for(;f(y.lines,N););if(B){for(T=!1,L=0;L<y.lines.length;L++)if(y.lines[L].staff!==void 0)for(R=0;R<y.lines[L].staff.length;R++){var _=!1;for(O=0;O<y.lines[L].staff[R].voices.length;O++)i(y.lines[L].staff[R].voices[O])&&(_=!0);_||(T=!0,y.lines[L].staff[R]=null)}T&&y.lines.forEach(function(Y){Y.staff&&(Y.staff=Y.staff.filter(function(ee){return!!ee}))})}for(l(y.lines),L=0;L<y.lines.length;L++)if(y.lines[L].staff)for(R=0;R<y.lines[L].staff.length;R++)delete y.lines[L].staff[R].workingClef;for(;r(y););for(var L=0;L<y.lines.length;L++){var k=y.lines[L].staff;if(k)for(y.staffNum=0;y.staffNum<k.length;y.staffNum++)for(k[y.staffNum].clef&&e.fixClef(k[y.staffNum].clef),y.voiceNum=0;y.voiceNum<k[y.staffNum].voices.length;y.voiceNum++){var q=k[y.staffNum].voices[y.voiceNum];c(q,y.staffNum,y.voiceNum,E);for(var z=0;z<q.length;z++)q[z].el_type==="clef"&&e.fixClef(q[z]);if(q.length>0&&q[q.length-1].barNumber){var U=v(y.lines,L);U&&(U.staff[0].barNumber=q[q.length-1].barNumber),delete q[q.length-1].barNumber}}}return delete y.staffNum,delete y.voiceNum,delete y.lineNum,delete y.potentialStartBeam,delete y.potentialEndBeam,delete y.vskipPending,E},this.addTieToLastNote=function(N){var B=d(y);return B&&B.pitches&&B.pitches.length>0?(B.pitches[0].startTie={},N&&(B.pitches[0].startTie.style="dotted"),!0):!1},this.appendElement=function(N,B,E,T){if(T.el_type=N,B!==null&&(T.startChar=B),E!==null&&(T.endChar=E),N==="note"){var L=u(T);L>=.25||T.force_end_beam_last&&y.potentialStartBeam!==void 0?x(y):T.end_beam&&y.potentialStartBeam!==void 0?T.rest===void 0?b(T,y):x(y):T.rest===void 0&&(y.potentialStartBeam===void 0?T.end_beam||(y.potentialStartBeam=T,delete y.potentialEndBeam):y.potentialEndBeam=T)}else x(y);return delete T.end_beam,delete T.force_end_beam_last,T.rest&&T.rest.type==="invisible"&&delete T.decoration,y.lines.length<=y.lineNum||y.lines[y.lineNum].staff.length<=y.staffNum?!1:(m(A,y,T,P,M),!0)},this.appendStartingElement=function(N,B,E,T){o(y);var L;N==="key"&&(L=T.impliedNaturals,delete T.impliedNaturals,delete T.explicitAccidentals);var R=Object.assign({},T);if(y.lines[y.lineNum]){var O=y.lines[y.lineNum].staff;if(O){O.length<=y.staffNum&&(O[y.staffNum]={},O[y.staffNum].clef=Object.assign({},O[0].clef),O[y.staffNum].key=Object.assign({},O[0].key),O[0].meter&&(O[y.staffNum].meter=Object.assign({},O[0].meter)),O[y.staffNum].workingClef=Object.assign({},O[0].workingClef),O[y.staffNum].voices=[[]]),N==="clef"&&(O[y.staffNum].workingClef=R);for(var w=O[y.staffNum].voices[y.voiceNum],_=0;_<w.length;_++){if(w[_].el_type==="note"||w[_].el_type==="bar"){R.el_type=N,R.startChar=B,R.endChar=E,L&&(R.accidentals=L.concat(R.accidentals)),w.push(R);return}if(w[_].el_type===N){R.el_type=N,R.startChar=B,R.endChar=E,L&&(R.accidentals=L.concat(R.accidentals)),w[_]=R;return}}O[y.staffNum][N]=T}}},this.addSubtitle=function(N,B){g(y,{subtitle:{text:N,startChar:B.startChar,endChar:B.endChar}})},this.addSpacing=function(N){y.vskipPending=N},this.addNewPage=function(N){g(y,{newpage:N})},this.addSeparator=function(N,B,E,T){g(y,{separator:{spaceAbove:Math.round(N),spaceBelow:Math.round(B),lineLength:Math.round(E),startChar:T.startChar,endChar:T.endChar}})},this.addText=function(N,B){g(y,{text:{text:N,startChar:B.startChar,endChar:B.endChar}})},this.addCentered=function(N){g(y,{text:[{text:N,center:!0}]})},this.changeVoiceScale=function(N){A.appendElement("scale",null,null,{size:N})},this.changeVoiceColor=function(N){A.appendElement("color",null,null,{color:N})},this.startNewLine=function(N){o(y),N.currentVoiceName&&(M=N.currentVoiceName,P[N.currentVoiceName]=N),y.lines[y.lineNum]===void 0?F(A,y,N):y.lines[y.lineNum].staff===void 0?(y.lineNum++,this.startNewLine(N)):y.lines[y.lineNum].staff[y.staffNum]===void 0?I(A,y,N):y.lines[y.lineNum].staff[y.staffNum].voices[y.voiceNum]===void 0?S(A,y,N):h(y.lines[y.lineNum].staff[y.staffNum].voices[y.voiceNum])?(y.lineNum++,this.startNewLine(N)):N.part&&A.appendElement("part",N.part.startChar,N.part.endChar,{title:N.part.title})},this.setRunningFont=function(N,B){y.runningFonts[N]=B},this.setBarNumberImmediate=function(N){var B=this.getCurrentVoice();if(B&&B.length>0){var E=B[B.length-1];if(E.el_type==="bar")E.barNumber!==void 0&&(E.barNumber=N);else return N-1}return N},this.hasBeginMusic=function(){for(var N=0;N<y.lines.length;N++)if(y.lines[N].staff)return!0;return!1},this.isFirstLine=function(N){for(var B=N-1;B>=0;B--)if(y.lines[B].staff!==void 0)return!1;return!0},this.getCurrentVoice=function(){var N=p(y.lines,y.lineNum);if(!N)return null;var B=N.staff[y.staffNum];return B&&B.voices[y.voiceNum]!==void 0?B.voices[y.voiceNum]:null},this.setCurrentVoice=function(N,B,E){y.staffNum=N,y.voiceNum=B,M=E;for(var T=0;T<y.lines.length;T++)if(y.lines[T].staff&&(y.lines[T].staff[N]===void 0||y.lines[T].staff[N].voices[B]===void 0||!h(y.lines[T].staff[N].voices[B])))return y.lineNum=T,!!(!y.lines[T].staff[N]||y.lines[T].staff[N].voices[B]);return y.lineNum=T,!1},this.addMetaText=function(N,B,E){y.metaText[N]===void 0?(y.metaText[N]=B,y.metaTextInfo[N]=E):(typeof y.metaText[N]=="string"&&typeof B=="string"?y.metaText[N]+=`
`+B:(y.metaText[N]==="string"&&(y.metaText[N]=[{text:y.metaText[N]}]),typeof B=="string"&&(B=[{text:B}]),y.metaText[N]=y.metaText[N].concat(B)),y.metaTextInfo[N].endChar=E.endChar)},this.addMetaTextArray=function(N,B,E){y.metaText[N]===void 0?(y.metaText[N]=[B],y.metaTextInfo[N]=E):(y.metaText[N].push(B),y.metaTextInfo[N].endChar=E.endChar)},this.addMetaTextObj=function(N,B,E){y.metaText[N]=B,y.metaTextInfo[N]=E}};function a(y){if(!y||typeof y=="string")return!1;for(var A=0;A<y.length;A++)if(typeof y[A]!="string")return!1;return!0}function n(y){a(y.metaText.notes)&&(y.metaText.notes=y.metaText.notes.join(`
`)),a(y.metaText.history)&&(y.metaText.history=y.metaText.history.join(`
`))}function r(y){for(var A=!1,P=[],M=0;M<y.lines.length;M++){var N=y.lines[M];if(N.staff)for(var B=0;B<N.staff.length;B++){for(var E=N.staff[B],T=[],L=0;L<E.voices.length;L++){var R=E.voices[L];T.push({hasOverlay:!1,voice:[],snip:[]}),P[M]=0;for(var O=0,w=!1,_=-1,k=0;k<R.length;k++){var q=R[k];if(q.el_type==="overlay"&&!w){A=!0,w=!0,_=k,T[L].hasOverlay=!0;for(var z=0;z<M;z++)P[z]&&y.lines[z].staff&&E.voices.length>=y.lines[z].staff[0].voices.length&&y.lines[z].staff[0].voices.push([{el_type:"note",duration:P[z],rest:{type:"invisible"},startChar:q.startChar,endChar:q.endChar}])}else q.el_type==="bar"?(w?(w=!1,T[L].snip.push({start:_,len:k-_}),T[L].voice.push(q)):(O>0&&T[L].voice.push({el_type:"note",duration:O,rest:{type:"invisible"},startChar:q.startChar,endChar:q.endChar}),T[L].voice.push(q)),O=0):q.el_type==="note"?w?T[L].voice.push(q):(O+=q.duration,P[M]+=q.duration):(q.el_type==="scale"||q.el_type==="stem"||q.el_type==="overlay"||q.el_type==="style"||q.el_type==="transpose"||q.el_type==="color")&&T[L].voice.push(q)}T[L].hasOverlay&&T[L].snip.length===0&&T[L].snip.push({start:_,len:R.length-_})}for(L=0;L<T.length;L++){var U=T[L];if(U.hasOverlay){U.voice.splice(0,0,{el_type:"stem",direction:"down"}),E.voices.push(U.voice);for(var Y=U.snip.length-1;Y>=0;Y--){var ee=U.snip[Y];E.voices[L].splice(ee.start,ee.len),E.voices[L].splice(ee.start+1,0,{el_type:"stem",direction:"auto"});var oe=s(E.voices[L],ee.start);E.voices[L].splice(oe,0,{el_type:"stem",direction:"up"})}for(Y=0;Y<E.voices[E.voices.length-1].length;Y++){E.voices[E.voices.length-1][Y]=Object.assign({},E.voices[E.voices.length-1][Y]);var J=E.voices[E.voices.length-1][Y];J.el_type==="bar"&&J.startEnding&&delete J.startEnding,J.el_type==="bar"&&J.endEnding&&delete J.endEnding}}}}}return A}function s(y,A){for(var P=A-1;P>0&&y[P].el_type!=="bar";P--);return P}function l(y){for(var A=!0,P=0;P<y.length;P++){var M=y[P];if(M.staff){for(var N=0;N<M.staff.length;N++){var B=M.staff[N];if(B.title){for(var E=!1,T=0;T<B.title.length;T++)B.title[T]?(B.title[T]=A?B.title[T].name:B.title[T].subname,B.title[T]?E=!0:B.title[T]=""):B.title[T]="";E||delete B.title}}A=!1}}}function c(y,A,P,M){M[A]||(M[A]=[]),M[A][P]||(M[A][P]=[]);for(var N,B=function(Y,ee,oe){if(M[A][P][oe]===void 0){for(N=0;N<M[A][P].length;N++)if(M[A][P][N]!==void 0){oe=N;break}if(M[A][P][oe]===void 0){var J=oe*100+1;Y.endSlur.forEach(function(de){J===de&&--J}),M[A][P][oe]=[J]}}for(var fe,ue=0;ue<ee;ue++)fe=M[A][P][oe].pop(),Y.endSlur.push(fe);return M[A][P][oe].length===0&&delete M[A][P][oe],fe},E=function(Y,ee,oe,J){Y.startSlur=[],M[A][P][oe]===void 0&&(M[A][P][oe]=[]);for(var fe=oe*100+1,ue=0;ue<ee;ue++)J&&(J.forEach(function(de){fe===de&&++fe}),J.forEach(function(de){fe===de&&++fe}),J.forEach(function(de){fe===de&&++fe})),M[A][P][oe].forEach(function(de){fe===de&&++fe}),M[A][P][oe].forEach(function(de){fe===de&&++fe}),M[A][P][oe].push(fe),Y.startSlur.push({label:fe}),Y.dottedSlur&&(Y.startSlur[Y.startSlur.length-1].style="dotted",delete Y.dottedSlur),fe++},T=0;T<y.length;T++){var L=y[T];if(L.el_type==="note"){if(L.gracenotes)for(var R=0;R<L.gracenotes.length;R++){if(L.gracenotes[R].endSlur){var O=L.gracenotes[R].endSlur;L.gracenotes[R].endSlur=[];for(var w=0;w<O;w++)B(L.gracenotes[R],1,20)}L.gracenotes[R].startSlur&&(N=L.gracenotes[R].startSlur,E(L.gracenotes[R],N,20))}if(L.endSlur&&(N=L.endSlur,L.endSlur=[],B(L,N,0)),L.startSlur&&(N=L.startSlur,E(L,N,0)),L.pitches){for(var _=[],k=0;k<L.pitches.length;k++)if(L.pitches[k].endSlur){var q=L.pitches[k].endSlur;L.pitches[k].endSlur=[];for(var z=0;z<q;z++){var U=B(L.pitches[k],1,k+1);_.push(U)}}for(k=0;k<L.pitches.length;k++)L.pitches[k].startSlur&&(N=L.pitches[k].startSlur,E(L.pitches[k],N,k+1,_));L.gracenotes&&L.pitches[0].endSlur&&L.pitches[0].endSlur[0]===100&&L.pitches[0].startSlur&&(L.gracenotes[0].endSlur?L.gracenotes[0].endSlur.push(L.pitches[0].startSlur[0].label):L.gracenotes[0].endSlur=[L.pitches[0].startSlur[0].label],L.pitches[0].endSlur.length===1?delete L.pitches[0].endSlur:L.pitches[0].endSlur[0]===100?L.pitches[0].endSlur.shift():L.pitches[0].endSlur[L.pitches[0].endSlur.length-1]===100&&L.pitches[0].endSlur.pop(),M[A][P][1].length===1?delete M[A][P][1]:M[A][P][1].pop())}}}}function f(y,A){for(var P=0;P<y.length;P++)if(y[P].staff!==void 0)for(var M=0;M<y[P].staff.length;M++)for(var N=[],B=0;B<y[P].staff[M].voices.length;B++)for(var E=y[P].staff[M].voices[B],T=0,L=0;L<E.length;L++)if(E[L].el_type==="bar"){if(T++,T>=A&&L<E.length-1){var R=v(y,P);if(!R){var O=JSON.parse(JSON.stringify(y[P]));y.push(Object.assign({},O)),R=y[y.length-1];for(var w=0;w<R.staff.length;w++)for(var _=0;_<R.staff[w].voices.length;_++)R.staff[w].voices[_]=[]}var k=L+1,q=y[P].staff[M].voices[B].slice(k);return y[P].staff[M].voices[B]=y[P].staff[M].voices[B].slice(0,k),R.staff[M].voices[B]=N.concat(q.concat(R.staff[M].voices[B])),!0}}else E[L].duration||N.push(E[L]);return!1}function p(y,A){if(y.length<=A)return null;for(;A>=0;){if(y[A].staff)return y[A];A--}return null}function v(y,A){for(A++;y.length>A;){if(y[A].staff)return y[A];A++}return null}function d(y){if(!y.lines[y.lineNum]||!y.lines[y.lineNum].staff||!y.lines[y.lineNum].staff[y.staffNum])return null;var A=y.lines[y.lineNum].staff[y.staffNum].voices[y.voiceNum];if(!A)return null;for(var P=A.length-1;P>=0;P--){var M=A[P];if(M.el_type==="note")return M}return null}function u(y){return y.duration?y.duration:0}function o(y){y.potentialStartBeam&&y.potentialEndBeam&&(y.potentialStartBeam.startBeam=!0,y.potentialEndBeam.endBeam=!0),delete y.potentialStartBeam,delete y.potentialEndBeam}function h(y){for(var A=0;A<y.length;A++)if(y[A].el_type==="note"||y[A].el_type==="bar")return!0;return!1}function i(y){for(var A=0;A<y.length;A++)if(y[A].el_type==="note"&&(y[A].rest===void 0||y[A].chord!==void 0))return!0;return!1}function g(y,A){y.vskipPending&&(A.vskip=y.vskipPending,delete y.vskipPending),y.lines.push(A)}function m(y,A,P,M,N){var B=A.lines[A.lineNum].staff[A.staffNum];if(P.pitches!==void 0){var E=B.workingClef.verticalPos;P.pitches.forEach(function(L){L.verticalPos=L.pitch-E})}if(P.gracenotes!==void 0){var T=B.workingClef.verticalPos;P.gracenotes.forEach(function(L){L.verticalPos=L.pitch-T})}B.voices.length<=A.voiceNum&&(M[N]||(M[N]={}),S(y,A,M[N])),B.voices[A.voiceNum].push(P)}function b(y,A){A.potentialStartBeam.startBeam=!0,y.endBeam=!0,delete A.potentialStartBeam,delete A.potentialEndBeam}function x(y){y.potentialStartBeam!==void 0&&y.potentialEndBeam!==void 0&&(y.potentialStartBeam.startBeam=!0,y.potentialEndBeam.endBeam=!0),delete y.potentialStartBeam,delete y.potentialEndBeam}function C(y,A,P){if(y.runningFonts[A]){for(var M=!1,N=Object.keys(P),B=0;B<N.length;B++)y.runningFonts[A][N[B]]!==P[N[B]]&&(M=!0);M&&(y.lines[y.lineNum].staff[y.staffNum][A]=P)}y.runningFonts[A]=P}function S(y,A,P){var M=A.lines[A.lineNum].staff[A.staffNum];if(M.voices[A.voiceNum]=[],M.title||(M.title=[]),M.title[A.voiceNum]={name:P.name,subname:P.subname},P.style&&y.appendElement("style",null,null,{head:P.style}),P.stem)y.appendElement("stem",null,null,{direction:P.stem});else if(A.voiceNum>0){if(M.voices[0]!==void 0){for(var N=!1,B=0;B<M.voices[0].length;B++)M.voices[0].el_type==="stem"&&(N=!0);if(!N){var E={el_type:"stem",direction:"up"};M.voices[0].splice(0,0,E)}}y.appendElement("stem",null,null,{direction:"down"})}P.scale&&y.appendElement("scale",null,null,{size:P.scale}),P.color&&y.appendElement("color",null,null,{color:P.color})}function I(y,A,P){P.key&&P.key.impliedNaturals&&(P.key.accidentals=P.key.accidentals.concat(P.key.impliedNaturals),delete P.key.impliedNaturals),A.lines[A.lineNum].staff[A.staffNum]={voices:[],clef:P.clef,key:P.key,workingClef:P.clef};var M=A.lines[A.lineNum].staff[A.staffNum];P.stafflines!==void 0&&(M.clef.stafflines=P.stafflines,M.workingClef.stafflines=P.stafflines),P.staffscale&&(M.staffscale=P.staffscale),P.annotationfont&&C(A,"annotationfont",P.annotationfont),P.gchordfont&&C(A,"gchordfont",P.gchordfont),P.tripletfont&&C(A,"tripletfont",P.tripletfont),P.vocalfont&&C(A,"vocalfont",P.vocalfont),P.bracket&&(M.bracket=P.bracket),P.brace&&(M.brace=P.brace),P.connectBarLines&&(M.connectBarLines=P.connectBarLines),P.barNumber&&(M.barNumber=P.barNumber),S(y,A,P),P.part&&y.appendElement("part",P.part.startChar,P.part.endChar,{title:P.part.title}),P.meter!==void 0&&(M.meter=P.meter),A.vskipPending&&(A.lines[A.lineNum].vskip=A.vskipPending,delete A.vskipPending)}function F(y,A,P){A.lines[A.lineNum]={staff:[]},I(y,A,P)}return Lr=t,Lr}var qr,zs;function xf(){if(zs)return qr;zs=1;var e=yt(),t=Ma(),a=$h(),n=Uh(),r=Vh(),s=bf(),l=wf(),c=Jh(),f=function(){var p=new l,v=new c(p),d,u="",o="";this.getTune=function(){var B={formatting:p.formatting,lines:p.lines,media:p.media,metaText:p.metaText,metaTextInfo:p.metaTextInfo,version:p.version,addElementToEvents:p.addElementToEvents,addUsefulCallbackInfo:p.addUsefulCallbackInfo,getTotalTime:p.getTotalTime,getTotalBeats:p.getTotalBeats,getBarLength:p.getBarLength,getBeatLength:p.getBeatLength,getBeatsPerMeasure:p.getBeatsPerMeasure,getBpm:p.getBpm,getMeter:p.getMeter,getMeterFraction:p.getMeterFraction,getPickupLength:p.getPickupLength,getKeySignature:p.getKeySignature,getElementFromChar:p.getElementFromChar,makeVoicesArray:p.makeVoicesArray,millisecondsPerMeasure:p.millisecondsPerMeasure,setupEvents:p.setupEvents,setTiming:p.setTiming,setUpAudio:p.setUpAudio,deline:p.deline,findSelectableElement:p.findSelectableElement,getSelectableArray:p.getSelectableArray};return p.lineBreaks&&(B.lineBreaks=p.lineBreaks),p.visualTranspose&&(B.visualTranspose=p.visualTranspose),B};function h(B,E,T){B.positioning||(B.positioning={}),B.positioning[E]=T}function i(B,E,T){B.fonts||(B.fonts={}),B.fonts[E]=T}var g={reset:function(){for(var B in this)this.hasOwnProperty(B)&&typeof this[B]!="function"&&delete this[B];this.iChar=0,this.key={accidentals:[],root:"none",acc:"",mode:""},this.meter=null,this.origMeter=null,this.hasMainTitle=!1,this.default_length=.125,this.clef={type:"treble",verticalPos:0},this.octave=0,this.next_note_duration=0,this.start_new_line=!0,this.is_in_header=!0,this.partForNextLine={},this.tempoForNextLine=[],this.havent_set_length=!0,this.voices={},this.staves=[],this.macros={},this.currBarNumber=1,this.barCounter={},this.ignoredDecorations=[],this.score_is_present=!1,this.inEnding=!1,this.inTie=[],this.inTieChord={},this.vocalPosition="auto",this.dynamicPosition="auto",this.chordPosition="auto",this.ornamentPosition="auto",this.volumePosition="auto",this.openSlurs=[],this.freegchord=!1,this.endingHoldOver={}},differentFont:function(B,E){return this[B].decoration!==E[B].decoration||this[B].face!==E[B].face||this[B].size!==E[B].size||this[B].style!==E[B].style||this[B].weight!==E[B].weight},addFormattingOptions:function(B,E,T){T==="note"?(this.vocalPosition!=="auto"&&h(B,"vocalPosition",this.vocalPosition),this.dynamicPosition!=="auto"&&h(B,"dynamicPosition",this.dynamicPosition),this.chordPosition!=="auto"&&h(B,"chordPosition",this.chordPosition),this.ornamentPosition!=="auto"&&h(B,"ornamentPosition",this.ornamentPosition),this.volumePosition!=="auto"&&h(B,"volumePosition",this.volumePosition),this.differentFont("annotationfont",E)&&i(B,"annotationfont",this.annotationfont),this.differentFont("gchordfont",E)&&i(B,"gchordfont",this.gchordfont),this.differentFont("vocalfont",E)&&i(B,"vocalfont",this.vocalfont),this.differentFont("tripletfont",E)&&i(B,"tripletfont",this.tripletfont)):T==="bar"&&(this.dynamicPosition!=="auto"&&h(B,"dynamicPosition",this.dynamicPosition),this.chordPosition!=="auto"&&h(B,"chordPosition",this.chordPosition),this.ornamentPosition!=="auto"&&h(B,"ornamentPosition",this.ornamentPosition),this.volumePosition!=="auto"&&h(B,"volumePosition",this.volumePosition),this.differentFont("measurefont",E)&&i(B,"measurefont",this.measurefont),this.differentFont("repeatfont",E)&&i(B,"repeatfont",this.repeatfont))},duplicateStartEndingHoldOvers:function(){this.endingHoldOver={inTie:[],inTieChord:{}};for(var B=0;B<this.inTie.length;B++)if(this.endingHoldOver.inTie.push([]),this.inTie[B])for(var E=0;E<this.inTie[B].length;E++)this.endingHoldOver.inTie[B].push(this.inTie[B][E]);for(var T in this.inTieChord)this.inTieChord.hasOwnProperty(T)&&(this.endingHoldOver.inTieChord[T]=this.inTieChord[T])},restoreStartEndingHoldOvers:function(){if(this.endingHoldOver.inTie){this.inTie=[],this.inTieChord={};for(var B=0;B<this.endingHoldOver.inTie.length;B++){this.inTie.push([]);for(var E=0;E<this.endingHoldOver.inTie[B].length;E++)this.inTie[B].push(this.endingHoldOver.inTie[B][E])}for(var T in this.endingHoldOver.inTieChord)this.endingHoldOver.inTieChord.hasOwnProperty(T)&&(this.inTieChord[T]=this.endingHoldOver.inTieChord[T])}}},m=function(B){g.warnings||(g.warnings=[]),g.warnings.push(B)},b=function(B){g.warningObjects||(g.warningObjects=[]),g.warningObjects.push(B)},x=function(B){var E=B.replace(/\x12/g," ");return E=E.replace(/&/g,"&amp;"),E=E.replace(/</g,"&lt;"),E.replace(/>/g,"&gt;")},C=function(B,E,T){E||(E=" ");var L=E[T];(L===" "||!L)&&(L="SPACE");var R=x(E.substring(T-64,T))+'<span style="text-decoration:underline;font-size:1.3em;font-weight:bold;">'+L+"</span>"+x(E.substring(T+1).substring(0,64));m("Music Line:"+d.lineIndex+":"+(T+1)+": "+B+":  "+R),b({message:B,line:E,startChar:g.iChar+T,column:T})},S,I;this.getWarnings=function(){return g.warnings},this.getWarningObjects=function(){return g.warningObjects};var F=function(B,E){if(E.indexOf("")>=0){u+=E;return}if(E=u+E,u="",!B){C("Can't add words before the first line of music",B,0);return}E=e.strip(E),E[E.length-1]!=="-"&&(E=E+" ");for(var T=[],L=0,R=!1,O=function(k){var q=e.strip(E.substring(L,k));if(q=q.replace(/\\([-_*|~])/g,"$1"),L=k+1,q.length>0){R&&(q=q.replace(/~/g," "));var z=E[k];return z!=="_"&&z!=="-"&&(z=" "),T.push({syllable:d.translateString(q),divider:z}),R=!1,!0}return!1},w=!1,_=0;_<E.length;_++){switch(E[_]){case" ":case"":O(_);break;case"-":!w&&!O(_)&&T.length>0&&(e.last(T).divider="-",T.push({skip:!0,to:"next"}));break;case"_":w||(O(_),T.push({skip:!0,to:"slur"}));break;case"*":w||(O(_),T.push({skip:!0,to:"next"}));break;case"|":w||(O(_),T.push({skip:!0,to:"bar"}));break;case"~":w||(R=!0);break}w=E[_]==="\\"}B.forEach(function(k){if(T.length!==0){if(T[0].skip){switch(T[0].to){case"next":k.el_type==="note"&&k.pitches!==null&&T.shift();break;case"slur":k.el_type==="note"&&k.pitches!==null&&T.shift();break;case"bar":k.el_type==="bar"&&T.shift();break}k.el_type!=="bar"&&(k.lyric===void 0?k.lyric=[{syllable:"",divider:" "}]:k.lyric.push({syllable:"",divider:" "}))}else if(k.el_type==="note"&&k.rest===void 0){var q=T.shift();q.syllable&&(q.syllable=q.syllable.replace(/ +/g," ")),k.lyric===void 0?k.lyric=[q]:k.lyric.push(q)}}})},y=function(B,E){if(E.indexOf("")>=0){o+=E;return}if(E=o+E,o="",!B){C("Can't add symbols before the first line of music",B,0);return}E=e.strip(E),E[E.length-1]!=="-"&&(E=E+" ");for(var T=[],L=0,R=!1,O=function(_){var k=e.strip(E.substring(L,_));if(L=_+1,k.length>0){R&&(k=k.replace(/~/g," "));var q=E[_];return q!=="_"&&q!=="-"&&(q=" "),T.push({syllable:d.translateString(k),divider:q}),R=!1,!0}return!1},w=0;w<E.length;w++)switch(E[w]){case" ":case"":O(w);break;case"-":!O(w)&&T.length>0&&(e.last(T).divider="-",T.push({skip:!0,to:"next"}));break;case"_":O(w),T.push({skip:!0,to:"slur"});break;case"*":O(w),T.push({skip:!0,to:"next"});break;case"|":O(w),T.push({skip:!0,to:"bar"});break;case"~":R=!0;break}B.forEach(function(_){if(T.length!==0){if(T[0].skip)switch(T[0].to){case"next":_.el_type==="note"&&_.pitches!==null&&T.shift();break;case"slur":_.el_type==="note"&&_.pitches!==null&&T.shift();break;case"bar":_.el_type==="bar"&&T.shift();break}else if(_.el_type==="note"&&_.rest===void 0){var k=T.shift();_.lyric===void 0?_.lyric=[k]:_.lyric.push(k)}}})},A=function(B){if(e.startsWith(B,"%%")){var E=t.addDirective(B.substring(2));E&&C(E,B,2);return}var T=B.indexOf("%");if(T>=0&&(B=B.substring(0,T)),B=B.replace(/\s+$/,""),B.length!==0){if(u){F(v.getCurrentVoice(),B.substring(2));return}if(o){y(v.getCurrentVoice(),B.substring(2));return}if(B.length<2||B[1]!==":"||I.lineContinuation){I.parseMusic(B);return}var L=S.parseHeader(B);L.regular&&I.parseMusic(B),L.newline&&I.startNewLine(),L.words&&F(v.getCurrentVoice(),B.substring(2)),L.symbols&&y(v.getCurrentVoice(),B.substring(2))}};function P(B,E){B.push({el_type:"hint"});for(var T=0;T<E.length;T++){var L=E[T],R=Object.assign({},L);if(B.push(R),L.el_type==="bar")return}}function M(B,E){for(var T=0;T<B.length;T++){var L=B[T],R=E[T];if(R)for(var O=0;O<R.voices.length;O++){var w=R.voices[O],_=L.voices[O];_&&P(_,w)}}}function N(){for(var B=0;B<p.lines.length;B++){var E=p.lines[B].staff;if(E){for(var T=B+1;T<p.lines.length&&p.lines[T].staff===void 0;)T++;if(T<p.lines.length){var L=p.lines[T].staff;M(E,L)}}}}this.parse=function(B,E,T){E||(E={}),T||(T=0),p.reset(),B=B.replace(/\r\n?/g,`
`)+`
`;var L=B.split(`
\\`);if(L.length>1){for(var R=1;R<L.length;R++)for(;L[R].length>0&&L[R][0]!==`
`;)L[R]=L[R].substr(1),L[R-1]+=" ";B=L.join("  ")}B=B.replace(/\\([ \t]*)(%.*)*\n/g,function(U,Y,ee){var oe=ee?Array(ee.length+1).join(" "):"";return Y+""+oe+`
`});var O=B.split(`
`);e.last(O).length===0&&O.pop(),d=new r(O,g),S=new a(d,C,g,p,v),I=new n(d,C,g,p,v,S),E.print&&(p.media="print"),g.reset(),g.iChar=T,E.visualTranspose?(g.globalTranspose=parseInt(E.visualTranspose),g.globalTranspose===0?g.globalTranspose=void 0:v.setVisualTranspose(E.visualTranspose)):g.globalTranspose=void 0,E.lineBreaks&&(g.lineBreaks=E.lineBreaks),S.reset(d,C,g,p);try{E.format&&t.globalFormatting(E.format);for(var w=d.nextLine();w;){if(E.header_only&&g.is_in_header===!1||E.stop_on_warning&&g.warnings)throw"normal_abort";var _=g.is_in_header;A(w),_&&!g.is_in_header&&(v.setRunningFont("annotationfont",g.annotationfont),v.setRunningFont("gchordfont",g.gchordfont),v.setRunningFont("tripletfont",g.tripletfont),v.setRunningFont("vocalfont",g.vocalfont)),w=d.nextLine()}u&&F(v.getCurrentVoice(),""),o&&y(v.getCurrentVoice(),""),g.openSlurs=v.cleanUp(g.barsperstaff,g.staffnonote,g.openSlurs)}catch(U){if(U!=="normal_abort")throw U}var k=11*72,q=8.5*72;switch(g.papersize){case"legal":k=14*72,q=8.5*72;break;case"A4":k=11.7*72,q=8.3*72;break}if(g.landscape){var z=k;k=q,q=z}p.formatting.pagewidth||(p.formatting.pagewidth=q),p.formatting.pageheight||(p.formatting.pageheight=k),E.hint_measures&&N(),s.wrapLines(p,g.lineBreaks,g.barNumbers)}};return qr=f,qr}var Dr,Gs;function Qh(){if(Gs)return Dr;Gs=1;var e=yt(),t=function(a){var n="",r=a.match(/(\s*)/);a=e.strip(a);for(var s=a.split(`
X:`),l=1;l<s.length;l++)s[l]="X:"+s[l];var c=r?r[0].length:0,f=[];if(s.forEach(function(u){f.push({abc:u,startPos:c}),c+=u.length+1}),f.length>1&&!e.startsWith(f[0].abc,"X:")){var p=f.shift(),v=p.abc.split(`
`);v.forEach(function(u){e.startsWith(u,"%%")&&(n+=u+`
`)})}var d=n;return f.forEach(function(u){var o=u.abc.indexOf(`

`);o>0&&(u.abc=u.abc.substring(0,o)),u.pure=u.abc,u.abc=n+u.abc,u.title="";var h=u.pure.split("T:");h.length>1&&(h=h[1].split(`
`),u.title=e.strip(h[0]));var i=u.pure.substring(2,u.pure.indexOf(`
`));u.id=e.strip(i)}),{header:d,tunes:f}};return Dr=t,Dr}var Or,Ys;function Zh(){if(Ys)return Or;Ys=1;function e(t,a){this.numLines=t,this.lineSpace=a,this.verticalSize=this.numLines*this.lineSpace;var n=3;this.bar={pitch:n,pitch2:a*t,height:5}}return e.prototype.bypass=function(t){var a=t.staffGroup.voices;return!!(a.length>0&&a[0].isPercussion)},e.prototype.setRelative=function(t,a,n){switch(t.type){case"bar":a.pitch=this.bar.pitch,a.pitch2=this.bar.pitch2,a.height=this.height;break;case"symbol":var r=this.bar.pitch2/2;if(t.name=="dots.dot")return n?(a.pitch=r,!1):(a.pitch=r+this.lineSpace,!0);break}return n},Or=e,Or}var Ir,$s;function _f(){if($s)return Ir;$s=1;var e=function(a,n){this.children=[],this.beams=[],this.otherchildren=[],this.w=0,this.duplicate=!1,this.voicenumber=a,this.voicetotal=n,this.bottom=7,this.top=7,this.specialY={tempoHeightAbove:0,partHeightAbove:0,volumeHeightAbove:0,dynamicHeightAbove:0,endingHeightAbove:0,chordHeightAbove:0,lyricHeightAbove:0,lyricHeightBelow:0,chordHeightBelow:0,volumeHeightBelow:0,dynamicHeightBelow:0}};return e.prototype.addChild=function(t){if(t.type==="bar"){for(var a=!0,n=0;a&&n<this.children.length;n++)this.children[n].type.indexOf("staff-extra")<0&&this.children[n].type!=="tempo"&&(a=!1);a||(this.beams.push("bar"),this.otherchildren.push("bar"))}this.children[this.children.length]=t,this.setRange(t)},e.prototype.setLimit=function(t,a){var n=a.specialY;n||(n=a),n[t]&&(this.specialY[t]?this.specialY[t]=Math.max(this.specialY[t],n[t]):this.specialY[t]=n[t])},e.prototype.adjustRange=function(t){t.bottom!==void 0&&(this.bottom=Math.min(this.bottom,t.bottom)),t.top!==void 0&&(this.top=Math.max(this.top,t.top))},e.prototype.setRange=function(t){this.adjustRange(t),this.setLimit("tempoHeightAbove",t),this.setLimit("partHeightAbove",t),this.setLimit("volumeHeightAbove",t),this.setLimit("dynamicHeightAbove",t),this.setLimit("endingHeightAbove",t),this.setLimit("chordHeightAbove",t),this.setLimit("lyricHeightAbove",t),this.setLimit("lyricHeightBelow",t),this.setLimit("chordHeightBelow",t),this.setLimit("volumeHeightBelow",t),this.setLimit("dynamicHeightBelow",t)},e.prototype.addOther=function(t){this.otherchildren.push(t),this.setRange(t)},e.prototype.addBeam=function(t){this.beams.push(t)},e.prototype.setWidth=function(t){this.w=t},Ir=e,Ir}var Fr,Ws;function Pa(){if(Ws)return Fr;Ws=1;var e=function(t,a,n,r){if(t)for(var s=0;s<t.length;s++){var l=t[s],c=l.getAttribute("highlight");c||(c="fill"),l.setAttribute(c,r);var f=l.getAttribute("class");f||(f=""),f=f.replace(n,""),f=f.replace(a,""),a.length>0&&(f.length>0&&f[f.length-1]!==" "&&(f+=" "),f+=a),l.setAttribute("class",f)}};return Fr=e,Fr}var Rr,Us;function Cf(){if(Us)return Rr;Us=1;var e=Pa(),t=function(a,n){a===void 0&&(a="abcjs-note_selected"),n===void 0&&(n="#ff0000"),e(this.elemset,a,"",n)};return Rr=t,Rr}var Hr,Vs;function kf(){if(Vs)return Hr;Vs=1;var e=Pa(),t=function(a,n){a===void 0&&(a="abcjs-note_selected"),n===void 0&&(n="#000000"),e(this.elemset,"",a,n)};return Hr=t,Hr}var zr,js;function r0(){if(js)return zr;js=1;var e=Cf(),t=kf(),a=function(r,s,l,c,f,p){p||(p={}),this.tuneNumber=f,this.abcelem=r,this.duration=s,this.durationClass=p.durationClassOveride?p.durationClassOveride:this.duration,this.minspacing=l||0,this.x=0,this.children=[],this.heads=[],this.extra=[],this.extraw=0,this.w=0,this.right=[],this.invisible=!1,this.bottom=void 0,this.top=void 0,this.type=c,this.fixed={w:0,t:void 0,b:void 0},this.specialY={tempoHeightAbove:0,partHeightAbove:0,volumeHeightAbove:0,dynamicHeightAbove:0,endingHeightAbove:0,chordHeightAbove:0,lyricHeightAbove:0,lyricHeightBelow:0,chordHeightBelow:0,volumeHeightBelow:0,dynamicHeightBelow:0}};return a.prototype.getFixedCoords=function(){return{x:this.x,w:this.fixed.w,t:this.fixed.t,b:this.fixed.b}},a.prototype.addExtra=function(n){this.fixed.w=Math.max(this.fixed.w,n.dx+n.w),this.fixed.t===void 0?this.fixed.t=n.top:this.fixed.t=Math.max(this.fixed.t,n.top),this.fixed.b===void 0?this.fixed.b=n.bottom:this.fixed.b=Math.min(this.fixed.b,n.bottom),n.dx<this.extraw&&(this.extraw=n.dx),this.extra[this.extra.length]=n,this._addChild(n)},a.prototype.addHead=function(n){n.dx<this.extraw&&(this.extraw=n.dx),this.heads[this.heads.length]=n,this.addRight(n)},a.prototype.addRight=function(n){this.fixed.w=Math.max(this.fixed.w,n.dx+n.w),n.top!==void 0&&(this.fixed.t===void 0?this.fixed.t=n.top:this.fixed.t=Math.max(this.fixed.t,n.top)),n.bottom!==void 0&&(this.fixed.b===void 0?this.fixed.b=n.bottom:this.fixed.b=Math.min(this.fixed.b,n.bottom)),n.dx+n.w>this.w&&(this.w=n.dx+n.w),this.right[this.right.length]=n,this._addChild(n)},a.prototype.addFixed=function(n){this._addChild(n)},a.prototype.addFixedX=function(n){this._addChild(n)},a.prototype.addCentered=function(n){var r=n.w/2;-r<this.extraw&&(this.extraw=-r),this.extra[this.extra.length]=n,n.dx+r>this.w&&(this.w=n.dx+r),this.right[this.right.length]=n,this._addChild(n)},a.prototype.setLimit=function(n,r){r[n]&&(this.specialY[n]?this.specialY[n]=Math.max(this.specialY[n],r[n]):this.specialY[n]=r[n])},a.prototype._addChild=function(n){var r=!0;this.abcelem.el_type=="clef"&&n.type=="barNumber"&&(r=!1),n.parent=this,this.children[this.children.length]=n,r&&this.pushTop(n.top),this.pushBottom(n.bottom),this.setLimit("tempoHeightAbove",n),this.setLimit("partHeightAbove",n),this.setLimit("volumeHeightAbove",n),this.setLimit("dynamicHeightAbove",n),this.setLimit("endingHeightAbove",n),this.setLimit("chordHeightAbove",n),this.setLimit("lyricHeightAbove",n),this.setLimit("lyricHeightBelow",n),this.setLimit("chordHeightBelow",n),this.setLimit("volumeHeightBelow",n),this.setLimit("dynamicHeightBelow",n)},a.prototype.pushTop=function(n){n!==void 0&&(this.top===void 0?this.top=n:this.top=Math.max(n,this.top))},a.prototype.pushBottom=function(n){n!==void 0&&(this.bottom===void 0?this.bottom=n:this.bottom=Math.min(n,this.bottom))},a.prototype.setX=function(n){this.x=n;for(var r=0;r<this.children.length;r++)this.children[r].setX(n)},a.prototype.center=function(n,r){var s=(r.x-n.x)/2+n.x;this.x=s-this.w/2;for(var l=0;l<this.children.length;l++)this.children[l].setX(this.x)},a.prototype.setHint=function(){this.hint=!0},a.prototype.highlight=function(n,r){e.bind(this)(n,r)},a.prototype.unhighlight=function(n,r){t.bind(this)(n,r)},zr=a,zr}var Gr,Ks;function lt(){if(Ks)return Gr;Ks=1;var e=function(a,n,r,s,l){switch(l=l||{},this.x=0,this.c=a,this.dx=n,this.w=r,this.pitch=s,this.scalex=l.scalex||1,this.scaley=l.scaley||1,this.type=l.type||"symbol",this.pitch2=l.pitch2,this.linewidth=l.linewidth,this.klass=l.klass,this.anchor=l.anchor?l.anchor:"middle",this.top=s,this.pitch2!==void 0&&this.pitch2>this.top&&(this.top=this.pitch2),this.bottom=s,this.pitch2!==void 0&&this.pitch2<this.bottom&&(this.bottom=this.pitch2),l.thickness&&(this.top+=l.thickness/2,this.bottom-=l.thickness/2),l.stemHeight&&(l.stemHeight>0?this.top+=l.stemHeight:this.bottom+=l.stemHeight),l.dim&&(this.dim=l.dim),l.position&&(this.position=l.position),this.height=l.height?l.height:4,l.top&&(this.top=l.top),l.bottom&&(this.bottom=l.bottom),l.name?this.name=l.name:this.c?this.name=this.c:this.name=this.type,l.realWidth?this.realWidth=l.realWidth:this.realWidth=this.w,this.centerVertically=!1,this.type){case"debug":this.chordHeightAbove=this.height;break;case"lyric":l.position&&l.position==="below"?this.lyricHeightBelow=this.height:this.lyricHeightAbove=this.height;break;case"chord":l.position&&l.position==="below"?this.chordHeightBelow=this.height:this.chordHeightAbove=this.height;break;case"text":this.pitch===void 0?l.position&&l.position==="below"?this.chordHeightBelow=this.height:this.chordHeightAbove=this.height:this.centerVertically=!0;break;case"part":this.partHeightAbove=this.height;break}};return e.prototype.getChordDim=function(){if(this.type==="debug"||!this.chordHeightAbove&&!this.chordHeightBelow)return null;var t=0,a=this.type==="chord"?this.realWidth/2:0,n=this.x-a-t,r=n+this.realWidth+t;return{left:n,right:r}},e.prototype.invertLane=function(t){this.lane===void 0&&(this.lane=0),this.lane=t-this.lane-1},e.prototype.putChordInLane=function(t){this.lane=t,this.chordHeightAbove?this.chordHeightAbove=this.height*1.25*this.lane:this.chordHeightBelow=this.height*1.25*this.lane},e.prototype.getLane=function(){return this.lane===void 0?0:this.lane},e.prototype.setX=function(t){this.x=t+this.dx},Gr=e,Gr}var Yr,Xs;function ed(){if(Xs)return Yr;Xs=1;var e=r0(),t=lt();function a(i){return i!=null&&i.constructor===Object}function n(i,g){for(var m in g)g.hasOwnProperty(m)&&(Array.isArray(g[m])||a(g[m])||(i[m]=g[m]))}function r(i){var g=new e("",0,0,"",0);return n(g,i),g.top=0,g.bottom=-1,i.abcelem&&(g.abcelem={},n(g.abcelem,i.abcelem),g.abcelem.el_type==="note"&&(g.abcelem.el_type="tabNumber")),i.cloned=g,g}function s(i,g){var m=r(i);if(g)for(var b=i.children,x=!0,C=0;C<b.length;C++){var S=b[C],I=new t("",0,0,0,"");n(I,S),x=g.tablature.setRelative(S,I,x),m.children.push(I)}return m}function l(i,g,m){var b="tab.tiny",x=7.5;i.isTabBig&&(b="tab.big",x=10);var C={el_type:"tab",icon:b,Ypos:x};if(x+=i.tabSymbolOffset,!i.hideTabSymbol){var S=new e(C,0,0,"symbol",0);S.x=g;var I=new t(b,0,0,7.5,"tab");I.x=m,S.children.push(I),S.abcelem.el_type=="tab"&&(I.pitch=x)}return S}function c(i){if(i.extra)for(var g=0;g<i.extra.length;g++){var m=i.extra[g];if(m.type=="lyric")return{bottom:m.bottom,height:m.height}}return null}function f(){this.accidentals=null}function p(i){for(var g=0,m=0;m<i.length;m++)i[m].tabNameInfos||g++;return g}function v(i,g,m,b,x){var C=b.num;b.note.quarter!=null&&(C=C.toString(),C+=b.note.quarter);var S=i.semantics.stringToPitch(b.str);m.notes.push({num:C,str:b.str,pitch:b.note.emit()});var I={type:"tabNumber"},F=new t(C,0,0,S+.3,I);return F.x=g,F.isGrace=x,F.isAltered=b.note.isAltered,F}function d(i,g){var m=0;if(i.extra){for(var b=0;b<i.extra.length;b++)if(i.extra[b].c.indexOf("noteheads")>=0){if(m===g)return i.extra[b].x+i.extra[b].w/2;m++}}return-1}function u(i){if(i.abcelem){var g=i.abcelem;if(g.rest)return g.gracenotes}return null}function o(i,g,m){var b=i.semantics.notesToNumber(g,m);if(b.error)return i.setError(b.error),b;if(b.graces&&b.notes){var x=b.notes.length-1;b.notes[x].graces=b.graces}return b}function h(i,g,m,b,x){for(var C=0;C<b.length;C++){var S={el_type:"note",startChar:m.abcelem.startChar,endChar:m.abcelem.endChar,notes:[],grace:!0},I=d(m,C),F=b[C],y=v(i,I,S,F,!0);g.children.push(y),x.push(S)}}return f.prototype.build=function(i,g,m,b,x,C,S){p(g);var I=g[x+b],F=g[S],y=null,A=null;I.children[0].abcelem.el_type!="clef"&&C!="none"&&I.children.splice(0,0,C);for(var P=0;P<I.children.length;P++){var M=I.children[P],N=M.x,B=N;switch(M.isClef&&(F.children.push(l(i,N,B)),M.abcelem.type.indexOf("-8")>=0&&(i.semantics.clefTranspose=-12),M.abcelem.type.indexOf("+8")>=0&&(i.semantics.clefTranspose=12)),M.type){case"staff-extra key-signature":this.accidentals=M.abcelem.accidentals,i.semantics.accidentals=this.accidentals;break;case"bar":i.semantics.measureAccidentals={};var E=!1;P===I.children.length-1&&(E=!0);var T=s(M,i);if(T.abcelem.barNumber){delete T.abcelem.barNumber;for(var L=0;L<T.children.length;L++)if(T.children[L].type==="barNumber"){T.children.splice(L,1);break}}T.abcelem.lastBar=E,F.children.push(T),m.push({el_type:M.abcelem.el_type,type:M.abcelem.type,endChar:M.abcelem.endChar,startChar:M.abcelem.startChar,abselem:T});break;case"rest":var R=u(M);if(R){if(y=o(i,null,R),y.error)return;Y={el_type:"note",startChar:M.abcelem.startChar,endChar:M.abcelem.endChar,notes:[],grace:!0},h(i,O,M,y.graces,m)}break;case"note":var O=r(M);O.x=M.heads[0].x+M.heads[0].w/2,O.lyricDim=c(M);var w=M.abcelem.pitches,_=M.abcelem.gracenotes;if(O.type="tabNumber",y=o(i,w,_),y.error)return;if(y.graces){var k=y.notes.length-1;y.notes[k].graces=y.graces}A={el_type:"note",startChar:M.abcelem.startChar,endChar:M.abcelem.endChar,notes:[]};for(var q=0;q<y.notes.length;q++){var z=y.notes[q];if(z.graces)for(var U=0;U<z.graces.length;U++){var Y={el_type:"note",startChar:M.abcelem.startChar,endChar:M.abcelem.endChar,notes:[],grace:!0},ee=d(M,U),oe=z.graces[U],J=v(i,ee,Y,oe,!0);O.children.push(J),m.push(Y)}var fe=v(i,O.x+M.heads[q].dx,A,z,!1);O.children.push(fe)}A.notes.length>0&&(A.abselem=O,m.push(A),F.children.push(O));break}}},Yr=f,Yr}var $r,Js;function td(){if(Js)return $r;Js=1;var e=_f(),t=ed(),a=We();function n(){return{tempoHeightAbove:0,partHeightAbove:0,volumeHeightAbove:0,dynamicHeightAbove:0,endingHeightAbove:0,chordHeightAbove:0,lyricHeightAbove:0,lyricHeightBelow:0,chordHeightBelow:0,volumeHeightBelow:0,dynamicHeightBelow:0}}function r(i){for(var g=0,m=0;m<i.children.length;m++){var b=i.children[m];b.specialY&&b.specialY.lyricHeightBelow>g&&(g=b.specialY.lyricHeightBelow)}return g}function s(i,g,m){var b=i.semantics,x=g.controller.getTextSize,C=b.tabInfos(i),S=b.suppress(i),I=!0;if(S&&(I=!1),I){var F=x.calc(C,"tablabelfont","text instrumentname");return m.tabNameInfos={textSize:{height:F.height,width:F.width},name:C},F.height}return 0}function l(i,g){return g[i].isTabStaff?i===g.length-1?!0:!g[i+1].isTabStaff:!1}function c(i){for(var g=0,m=0;m<i.length;m++)i[m].isTabStaff||g++;return g}function f(i,g){for(var m=g;m>=0;m--)if(!i[m].isTabStaff)return m;return-1}function p(i){for(var g=0;g<i.length;g++)if(i[g].isTabStaff){var m=f(i,g);i[g].hasStaff=i[m],i[m].hasTab||(i[m].hasTab=[]),i[m].hasTab.push(i[g])}}function v(i,g){return c(i)===1&&g.voices.length>1}function d(i,g){for(var m=0,b=0,x=!0,C=0;x;){if(!g[m])return-1;if(g[m].isTabStaff||(C=g[m].voices.length),g[m].isTabStaff){if(b++,l(m,g)&&b<C)return m+1}else if(b=0,m>=i&&(m+1==g.length||!g[m+1].isTabStaff))return m+1;if(m++,m>g.length)return-1}}function u(i,g){for(var m=g;m>=0;m--)if(!i[m].isTabStaff)return i[m];return null}function o(i,g){var m=i[g],b=m.children[0].abcelem;return b.el_type==="clef"?null:g==0?"none":i[g-1].children[0]}function h(i,g,m,b){var x=new t,C={clef:{type:"TAB"}},S=i.linePitch*i.nbLines,I=m.staff;if(I){var F=I[0];if(F&&F.clef&&F.clef.stafflines==0){i.setError("No tablatures when stafflines=0");return}I.splice(I.length,0,C)}var y=m.staffGroup,A=y.voices,P=A[0],M=r(P),N=3,B=b,E=y.staffs[B],T=S+N-E.bottom-M;E.isTabStaff&&(T=E.top);var L={bottom:-1,isTabStaff:!0,specialY:n(),lines:i.nbLines,linePitch:i.linePitch,dy:.15,top:T},R=d(b,y.staffs);if(R!==-1){L.parentIndex=R-1,y.staffs.splice(R,0,L),y.height+=S+N;var O=u(y.staffs,R),w=1;v(y.staffs,O)&&(w=O.voices.length),C.voices=[];for(var _=0;_<w;_++){var k=new e(0,0);_>0&&(k.duplicate=!0);var q=s(i,g,k)/a.STEP;q=Math.max(q,1),y.staffs[b].top+=1,y.height+=q,k.staff=L;var z=A.length;A.splice(A.length,0,k);var U=o(A,_+b);C.voices[_]=[],x.build(i,A,C.voices[_],_,b,U,z)}p(y.staffs)}}return $r=h,$r}var Wr,Qs;function Tf(){if(Qs)return Wr;Qs=1;var e={__:-2,_:-1,"_/":-.5,"=":0,"":0,"^/":.5,"^":1,"^^":2},t=["C","-","D","-","E","F","-","G","-","A","-","B","c","-","d","-","e","f","-","g","-","a","-","b"];function a(r){var s=r.match(/([_^\/]*)([ABCDEFGabcdefg])(,*)('*)/);if(s&&s.length===5){var l=e[s[1]],c=t.indexOf(s[2]),f=s[4].length-s[3].length;return 48+c+l+f*12}return 0}function n(r){r=parseInt(r,10);var s=Math.floor(r/12),l=r%12,c=t[l];if(c==="-"&&(c="^"+t[l-1]),s>4)for(c=c.toLowerCase(),s-=5;s>0;)c+="'",s--;else for(;s<4;)c+=",",s++;return c}return Wr={noteToMidi:a,midiToNote:n},Wr}var Ur,Zs;function Sf(){if(Zs)return Ur;Zs=1;var{noteToMidi:e,midiToNote:t}=Tf();function a(r,s){var l=e(r);s&&(l+=s);var c=t(l),f=!1,p=!1,v=!1,d=null,u=null,o=!1,h=0;r.startsWith("_")?(f=!0,h=-1,r[1]=="/"?(f=!1,u="v",h=0):r[1]=="_"&&(o=!0,h-=1)):r.startsWith("^")?(p=!0,h=1,r[1]=="/"?(p=!1,u="^",h=0):r[1]=="^"&&(o=!0,h+=1)):r.startsWith("=")&&(d=!0,h=0),v=f||p||u!=null,(v||d)&&(u!=null||o?c=r.slice(2):c=r.slice(1));var i=(c.match(/,/g)||[]).length,g=(c.match(/'/g)||[]).length;this.pitch=l,this.pitchAltered=0,this.name=c,this.acc=h,this.isSharp=p,this.isKeySharp=!1,this.isDouble=o,this.isAltered=v,this.isFlat=f,this.isKeyFlat=!1,this.natural=d,this.quarter=u,this.isLower=this.name==this.name.toLowerCase(),this.name=this.name[0].toUpperCase(),this.hasComma=i,this.isQuoted=g}function n(r){var s=r.name,l=new a(s);return l.pitch=r.pitch,l.hasComma=r.hasComma,l.isLower=r.isLower,l.isQuoted=r.isQuoted,l.isSharp=r.isSharp,l.isKeySharp=r.isKeySharp,l.isFlat=r.isFlat,l.isKeyFlat=r.isKeyFlat,l}return a.prototype.sameNoteAs=function(r){return r.pitch===this.pitch},a.prototype.isLowerThan=function(r){return r.pitch>this.pitch},a.prototype.checkKeyAccidentals=function(r,s){if(!(this.isAltered||this.natural)){if(s[this.name.toUpperCase()])switch(s[this.name.toUpperCase()]){case"__":this.acc=-2,this.pitchAltered=-2;return;case"_":this.acc=-1,this.pitchAltered=-1;return;case"=":this.acc=0,this.pitchAltered=0;return;case"^":this.acc=1,this.pitchAltered=1;return;case"^^":this.acc=2,this.pitchAltered=2;return}else if(r)for(var l=this.name,c=0;c<r.length;c++){var f=r[c];l==f.note.toUpperCase()&&(f.acc=="flat"&&(this.acc=-1,this.isKeyFlat=!0,this.pitchAltered=-1),f.acc=="sharp"&&(this.acc=1,this.isKeySharp=!0,this.pitchAltered=1))}}},a.prototype.getAccidentalEquiv=function(){var r=n(this);return r.isSharp||r.isKeySharp?(r=r.nextNote(),r.isFlat=!0,r.isSharp=!1,r.isKeySharp=!1):(r.isFlat||r.isKeyFlat)&&(r=r.prevNote(),r.isSharp=!0,r.isFlat=!1,r.isKeyFlat=!1),r},a.prototype.nextNote=function(){var r=t(this.pitch+1+this.pitchAltered);return new a(r)},a.prototype.prevNote=function(){var r=t(this.pitch-1+this.pitchAltered);return new a(r)},a.prototype.emitNoAccidentals=function(){var r=this.name;this.isLower&&(r=r.toLowerCase());for(var s=0;s<this.isQuoted;s++)r+="'";for(var l=0;l<this.hasComma;l++)r+=",";return r},a.prototype.emit=function(){var r=this.name;(this.isSharp||this.isKeySharp)&&(r="^"+r,this.isDouble&&(r="^"+r)),(this.isFlat||this.isKeyFlat)&&(r="_"+r,this.isDouble&&(r="_"+r)),this.quarter&&(this.quarter=="^"?r="^/"+r:r="_/"+r),this.natural&&(r="="+r);for(var s=1;s<=this.hasComma;s++)r+=",";if(this.isLower){r=r.toLowerCase();for(var l=1;l<=this.isQuoted;l++)r+="'"}return r},Ur=a,Ur}var Vr,eo;function rd(){if(eo)return Vr;eo=1;var e=Sf(),t=["A","B","C","D","E","F","G"];function a(n,r){var s=new e(n),l=new e(r);if(l.isLowerThan(s)){var c=s.emit(),f=l.emit();return{error:"Invalid string Instrument tuning : "+f+" string lower than "+c+" string"}}var p=[],v=t.indexOf(s.name),d=t.indexOf(l.name);if(v==-1||d==-1)return p;for(var u=!1;!u;)p.push(s.emit()),s=s.nextNote(),s.sameNoteAs(l)&&(u=!0);return p}return Vr=a,Vr}var jr,to;function nd(){if(to)return jr;to=1;const{noteToMidi:e}=Tf();var t=Sf(),a=rd();function n(u){var o=null,h=u.tuning;if(u.capo>0){o=[];for(var i=0;i<h.length;i++){for(var g=new t(h[i]),m=0;m<u.capo;m++)g=g.nextNote();o[i]=g.emit()}}return o}function r(u){var o=[],h=u.tuning;u.capo>0&&(h=u.capoTuning);for(var i=h.length-1,g=0;g<h.length;g++){var m=u.highestNote;g!=h.length-1&&(m=h[g+1]);var b=a(h[g],m);if(b.error)return b;o[i--]=b}return o}function s(u){var o=[];o[0]=[];for(var h=u.strings,i=1;i<h.length;i++)o[i]=h[i-1];return o}function l(u,o){for(var h=0;h<o.length-1;h++){var i=o[h],g=o[h+1];if(i.str==g.str){if(i.str==u.strings.length-1){i.num="?",g.num="?";return}g.num<i.num?(g.str++,g=f(u,g.note,g.str,u.secondPos,u.strings[g.str].length)):(i.str++,i=f(u,i.note,i.str,u.secondPos,u.strings[i.str].length)),o[h]=i,o[h+1]=g}}return null}function c(u,o){for(var h=[],i=0;i<o.length;i++)if(!o[i].endTie){var g=new t(o[i].name,u.clefTranspose);g.checkKeyAccidentals(u.accidentals,u.measureAccidentals);var m=p(u,g);h.push(m)}return l(u,h),h}function f(u,o,h,i,g){var m=u.strings;o.checkKeyAccidentals(u.accidentals,u.measureAccidentals),i&&(m=i);var b=o.emitNoAccidentals(),x=m[h].indexOf(b),C=o.acc;if(x!=-1){if(i&&(x+=g),(o.isFlat||o.acc==-1)&&x==0){var S=o.getAccidentalEquiv();h++,x=m[h].indexOf(S.emit()),C=0}return{num:x+C,str:h,note:o}}return null}function p(u,o){if(o.isAltered||o.natural){var h;o.isFlat?o.isDouble?h="__":h="_":o.isSharp?o.isDouble?h="^^":h="^":o.natural&&(h="="),u.measureAccidentals[o.name.toUpperCase()]=h}for(var i=u.stringPitches.length-1;i>=0;i--)if(o.pitch+o.pitchAltered>=u.stringPitches[i]){var g=o.pitch+o.pitchAltered-u.stringPitches[i];return o.quarter==="^"?g-=.5:o.quarter==="v"&&(g+=.5),{num:Math.round(g),str:u.stringPitches.length-1-i,note:o}}return{num:"?",str:u.stringPitches.length-1,note:o}}d.prototype.stringToPitch=function(u){var o=5.3,h=this.strings.length-1;return o+(h-u)*this.linePitch};function v(u,o){var h={num:"?",str:0,note:o};u.push(h),u.error=o.emit()+": unexpected note for instrument"}d.prototype.notesToNumber=function(u,o){var h,i,g=null,m=null;if(u&&(m=[],u.length>1?(m=c(this,u),m.error&&(g=m.error)):u[0].endTie||(h=new t(u[0].name,this.clefTranspose),h.checkKeyAccidentals(this.accidentals,this.measureAccidentals),i=p(this,h),i?m.push(i):(v(m,h),g=m.error))),g)return m;var b=null;if(o){b=[];for(var x=0;x<o.length;x++)h=new t(o[x].name,this.clefTranspose),h.checkKeyAccidentals(this.accidentals,this.measureAccidentals),i=p(this,h),i?b.push(i):(v(b,h),g=m.error)}return{notes:m,graces:b,error:g}},d.prototype.toString=function(){for(var u=[],o=0;o<this.tuning.length;o++){var h=this.tuning[o].replaceAll(",","").replaceAll("'","").toUpperCase();h[0]==="_"?h=h[1]+"b ":h[0]==="^"&&(h=h[1]+"# "),u.push(h)}return u.join("")},d.prototype.tabInfos=function(u){var o=u.params.label;if(o){var h=o.indexOf("%T"),i="";return h!=-1&&(i=this.toString(),u.capo>0&&(i+=" capo:"+u.capo),o=o.replace("%T",i)),o}return""},d.prototype.suppress=function(u){var o=u.params.suppress;return!!o};function d(u){var o=u.tuning,h=u.capo,i=u.params.highestNote;this.linePitch=u.linePitch,this.highestNote="a'",i&&(this.highestNote=i),this.measureAccidentals={},this.capo=0,h&&(this.capo=parseInt(h,10)),this.transpose=u.transpose?u.transpose:0,this.tuning=o,this.stringPitches=[];for(var g=0;g<this.tuning.length;g++){var m=e(this.tuning[g])+this.capo;this.stringPitches.push(m)}if(this.capo>0&&(this.capoTuning=n(this)),this.strings=r(this),this.strings.error){u.setError(this.strings.error),u.inError=!0;return}this.secondPos=s(this)}return jr=d,jr}var Kr,ro;function id(){if(ro)return Kr;ro=1;var e=Zh(),t=td(),a=nd();n.prototype.init=function(s,l,c,f){this.tune=s,this.params=c,this.tuneNumber=l,this.inError=!1,this.abcTune=s,this.linePitch=3,this.nbLines=f.defaultTuning.length,this.isTabBig=f.isTabBig,this.tabSymbolOffset=f.tabSymbolOffset,this.capo=c.capo,this.transpose=c.visualTranspose,this.hideTabSymbol=c.hideTabSymbol,this.tablature=new e(this.nbLines,this.linePitch);var p=c.tuning;p||(p=f.defaultTuning),this.tuning=p,this.semantics=new a(this)},n.prototype.setError=function(s){s&&(this.error=s,this.inError=!0,this.tune.warnings?this.tune.warnings.push(s):this.tune.warnings=[s])},n.prototype.render=function(s,l,c){this.inError||this.tablature.bypass(l)||t(this,s,l,c)};function n(){}var r=function(){return{name:"StringTab",tablature:n}};return Kr=r,Kr}var Xr,no;function Ef(){if(no)return Xr;no=1;var e=id(),t={violin:{name:"StringTab",defaultTuning:["G,","D","A","e"],isTabBig:!1,tabSymbolOffset:0},fiddle:{name:"StringTab",defaultTuning:["G,","D","A","e"],isTabBig:!1,tabSymbolOffset:0},mandolin:{name:"StringTab",defaultTuning:["G,","D","A","e"],isTabBig:!1,tabSymbolOffset:0},guitar:{name:"StringTab",defaultTuning:["E,","A,","D","G","B","e"],isTabBig:!0,tabSymbolOffset:0},fiveString:{name:"StringTab",defaultTuning:["C,","G,","D","A","e"],isTabBig:!1,tabSymbolOffset:-.95}},a={inited:!1,plugins:{},register:function(n){var r=n.name,s=n.tablature;this.plugins[r]=s},setError:function(n,r){n.warnings?n.warning.push(r):n.warnings=[r]},preparePlugins:function(n,r,s){this.inited||(this.register(new e),this.inited=!0);var l=null;if(s.tablature){var c=s.tablature;l=[];for(var f=0;f<c.length;f++){var p=c[f],v=p.instrument;if(v==null)return this.setError(n,"tablature 'instrument' is missing"),l;var d=t[v],u=null;if(d&&(u=this.plugins[d.name]),u){s.visualTranspose!=0&&(p.visualTranspose=s.visualTranspose),p.abcSrc=s.tablature.abcSrc;var o={classz:u,tuneNumber:r,params:p,instance:null,tabType:d};l.push(o)}else if(v==="")l.push(null);else return this.setError(n,"Undefined tablature plugin: "+v),l}}return l},layoutTablatures:function(r,s){var l=s.tablatures,c=0;if(l&&l.length>0)for(var f=l.length,p=0;p<f;++p)l[p]&&l[p].params.firstStaffOnly&&(l[p].params.suppress=!1);for(var v=0;v<s.lines.length;v++){var d=s.lines[v];if(d.staff&&c++,c>1&&l&&l.length>0)for(var f=l.length,p=0;p<f;++p)l[p].params.firstStaffOnly&&(l[p].params.suppress=!0);var u=d.staff;if(u){for(var o=u.length,h=0;h<u.length;h++)if(l[h]&&h<o){var i=l[h];i.instance==null&&(i.instance=new i.classz,i.instance.init(s,i.tuneNumber,i.params,i.tabType)),i.instance.render(r,d,h)}}}}};return Xr=a,Xr}var Jr,io;function J0(){if(io)return Jr;io=1;var e=xf(),t=Qh(),a=Ef(),n={};return function(){n.numberOfTunes=function(s){var l=s.split(`
X:`),c=l.length;return c===0&&(c=1),c};var r=n.TuneBook=function(s){var l=t(s);this.header=l.header,this.tunes=l.tunes};r.prototype.getTuneById=function(s){for(var l=0;l<this.tunes.length;l++)if(this.tunes[l].id===""+s)return this.tunes[l];return null},r.prototype.getTuneByTitle=function(s){for(var l=0;l<this.tunes.length;l++)if(this.tunes[l].title===s)return this.tunes[l];return null},n.parseOnly=function(s,l){for(var c=n.numberOfTunes(s),f=[],p=0;p<c;p++)f.push(1);function v(){}return n.renderEngine(v,f,s,l)},n.renderEngine=function(s,l,c,f){var p=[],v=function(x){return x&&!x.propertyIsEnumerable("length")&&typeof x=="object"&&typeof x.length=="number"};if(!(l===void 0||c===void 0)){v(l)||(l=[l]),f===void 0&&(f={});for(var d=f.startingTune?parseInt(f.startingTune,10):0,u=new r(c),o=new e,h=0;h<l.length;h++){var i=l[h];if(i==="*"||typeof i=="string"&&(i=document.getElementById(i)),i)if(d>=0&&d<u.tunes.length){o.parse(u.tunes[d].abc,f,u.tunes[d].startPos-u.header.length);var g=o.getTune();f.tablature&&(g.tablatures=a.preparePlugins(g,d,f));var m=o.getWarnings();m&&(g.warnings=m);var b=s(i,g,h,u.tunes[d].abc);p.push(b||g)}else i.innerHTML&&(i.innerHTML="");d++}return p}},n.extractMeasures=function(s){for(var l=[],c=new r(s),f=0;f<c.tunes.length;f++){for(var p=c.tunes[f],v=p.abc.split("K:"),d=v[1].split(`
`),u=v[0]+"K:"+d[0]+`
`,o=null,h=null,i=null,g=[],m=!1,b=n.parseOnly(p.abc)[0],x=b.getPickupLength()>0,C=0;C<b.lines.length;C++){var S=b.lines[C];if(S.staff)for(var I=0;I<1;I++)for(var F=S.staff[I],y=0;y<1;y++)for(var A=F.voices[y],P=0;P<A.length;P++){var M=A[P];if(i===null&&M.startChar>=0&&(i=M.startChar,M.chord===void 0?h=o:h=null),M.chord&&(o=M),M.el_type==="bar"){if(m){var N=p.abc.substring(i,M.endChar),B={abc:N};o=h&&h.chord&&h.chord.length>0?h.chord[0].name:null,o&&(B.lastChord=o),M.startEnding&&(B.startEnding=M.startEnding),M.endEnding&&(B.endEnding=M.endEnding),g.push(B),i=null,m=!1}}else M.el_type==="note"&&(m=!0)}}l.push({header:u,measures:g,hasPickup:x})}return l}}(),Jr=n,Jr}var Qr,ao;function ad(){if(ao)return Qr;ao=1;var e=vf(),{relativeMajor:t,transposeKey:a,relativeMode:n}=pf(),r=df(),s;return function(){s=function(A,P,M){if(P==="TEST")return{keyAccidentals:e,relativeMajor:t,transposeKey:a,relativeMode:n,transposeChordName:r};M=parseInt(M,10);var N=[],B;for(B=0;B<P.length;B++)N=N.concat(l(A,P[B],M));N=N.sort(function(L,R){return R.start-L.start});var E=A.split("");for(B=0;B<N.length;B++){var T=N[B];E.splice(T.start,T.end-T.start,T.note)}return E.join("")};function l(A,P,M){var N=[],B=P.getKeySignature();if(B.root==="Hp"||B.root==="HP")return N;N=N.concat(c(A,M));for(var E=0;E<P.lines.length;E++){var T=P.lines[E].staff;if(T)for(var L=0;L<T.length;L++){var R=T[L];R.clef.type!=="perc"&&(N=N.concat(f(A,R.voices,R.key,M)))}}return N}function c(A,P){for(var M=[],N=A.split("K:"),B=N[0].length,E=1;E<N.length;E++){var T=N[E],L=T.match(/^( *)([A-G])([#b]?)( ?)(\w*)/);if(L){var R=B+2+L[1].length,O=L[2]+L[3]+L[4]+L[5],w=h({root:L[2],acc:L[3],mode:L[5]},P),_=w.root+w.acc+L[4]+w.mode;M.push({start:R,end:R+O.length,note:_})}B+=T.length+2}return M}function f(A,P,M,N){for(var B=[],E=h(M,N),T=0;T<P.length;T++)B=B.concat(d(A,P[T],M.root,p(M),E,N));return B}function p(A){for(var P={},M=0;M<A.accidentals.length;M++){var N=A.accidentals[M];N.acc==="flat"?P[N.note.toUpperCase()]="_":N.acc==="sharp"&&(P[N.note.toUpperCase()]="^")}return P}function v(A,P,M){var N=u.indexOf(A.root)-u.indexOf(P);return P==="none"&&(N=u.indexOf(A.root)),N===0?M>2?N+=7:M===-12&&(N-=7):M>0&&N<0?N+=7:M<0&&N>0&&(N-=7),M>12?N+=7:M<-12&&(N-=7),N}function d(A,P,M,N,B,E){for(var T=[],L=v(B,M,E),R={},O={},w=0;w<P.length;w++){var _=P[w];if(_.chord)for(var k=0;k<_.chord.length;k++){var q=_.chord[k];if(q.position==="default"){var z=B.accidentals.length&&B.accidentals[0].acc==="flat",U=r(q.name,E,z,!0);U=U.replace(/♭/g,"b").replace(/♯/g,"#"),U!==q.name&&T.push(F(A,_.startChar,_.endChar,U))}}if(_.el_type==="note"&&_.pitches){for(var Y=0;Y<_.pitches.length;Y++){var ee=C(_.pitches[Y].name,M,N,R);ee.acc&&(R[ee.name.toUpperCase()]=ee.acc);var oe=i(ee,B,L,O);oe.acc&&(O[oe.upper]=oe.acc),T.push(S(A,_.startChar,_.endChar,oe.acc+oe.name,Y))}if(_.gracenotes)for(var J=0;J<_.gracenotes.length;J++){var fe=C(_.gracenotes[J].name,M,N,R);fe.acc&&(R[fe.name.toUpperCase()]=fe.acc);var ue=i(fe,B,L,R);ue.acc&&(O[ue.upper]=ue.acc),T.push(I(A,_.startChar,_.endChar,ue.acc+ue.name,J))}}else _.el_type==="bar"?(R={},O={}):_.el_type==="keySignature"&&(M=_.root,N=p(_),B=h(_,E),L=v(B,M,E))}return T}var u="CDEFGAB",o=[",,,,",",,,",",,",",","","'","''","'''","''''"];function h(A,P){if(A.root==="none")return{root:a("C",P),mode:"",acc:"",accidentals:[]};var M=t(A.root+A.acc+A.mode),N=a(M,P),B=n(N,A.mode),E=e(N);return{root:B[0],mode:A.mode,acc:B.length>1?B[1]:"",accidentals:E}}function i(A,P,M,N){for(var B=A.pitch,E=u.indexOf(A.name),T=u.indexOf(P.root),L=(T+B)%7,R=E+M,O=A.oct;R>6;)O++,R-=7;for(;R<0;)O--,R+=7;for(var w=u[L],_="",k=A.adj,q="=",z=0;z<P.accidentals.length;z++)if(P.accidentals[z].note.toLowerCase()===w.toLowerCase()){k=k+(P.accidentals[z].acc==="flat"?-1:1),q=P.accidentals[z].acc==="flat"?"_":"^";break}switch(k){case-2:_="__";break;case-1:_="_";break;case 0:_="=";break;case 1:_="^";break;case 2:_="^^";break;case-3:var U={};return U.pitch=A.pitch-1,U.oct=A.oct,U.name=u[u.indexOf(A.name)-1],U.name||(U.name="B",U.oct--),U.name==="B"||U.name==="E"?U.adj=A.adj+1:U.adj=A.adj+2,i(U,P,M+1,N);case 3:var U={};return U.pitch=A.pitch+1,U.oct=A.oct,U.name=u[u.indexOf(A.name)+1],U.name||(U.name="C",U.oct++),U.name==="C"||U.name==="F"?U.adj=A.adj-1:U.adj=A.adj-2,i(U,P,M+1,N)}switch((N[w]===_||!N[w]&&_===q)&&!A.courtesy&&(_=""),O){case 0:w=w+",,,";break;case 1:w=w+",,";break;case 2:w=w+",";break;case 4:w=w.toLowerCase();break;case 5:w=w.toLowerCase()+"'";break;case 6:w=w.toLowerCase()+"''";break;case 7:w=w.toLowerCase()+"'''";break;case 8:w=w.toLowerCase()+"''''";break}return O>4&&(w=w.toLowerCase()),{acc:_,name:w,upper:w.toUpperCase()}}var g=/([_^=]*)([A-Ga-g])([,']*)/,m=/([_^=]*[A-Ga-g][,']*)(\d*\/*\d*)([\>\<\-\)\.\s\\]*)/,b=/([_^=]*[A-Ga-g][,']*)?(\d*\/*\d*)?([\>\<\-\)]*)?/,x=/(\s*)$/;function C(A,P,M,N){var B=P==="none"?0:u.indexOf(P),E=A.match(g),T=E[2].toUpperCase(),L=u.indexOf(T)-B;L<0&&(L+=7);var R=o.indexOf(E[3]);T===E[2]&&R--;var O=N[T]||M[T]||"=";return{acc:E[1],name:T,pitch:L,oct:R,adj:y(E[1],M[T],N[T]),courtesy:E[1]===O}}function S(A,P,M,N,B){var E=A.substring(P,M),T=E.match(new RegExp(m.source+x.source));if(T){var L=T[1].length,R=T[2].length+T[3].length+T[4].length,O=M-P-L-R;P+=O,M-=R}else{var w=/([^\[]*)/,_=/\[/,k=/\-?](\d*\/*\d*)?([\>\<\-\)]*)/,q=new RegExp(w.source+_.source+"(?:"+b.source+"\\s*){1,8}"+k.source+x.source);if(T=E.match(q),T){var z=T[1].length+1,U=E.slice(T[1].length+1,E.lastIndexOf("]")),Y=[],ee=new RegExp(b.source+"\\s*","g");for(const de of U.matchAll(ee)){let D=de[0].trim();D!==""&&Y.push({text:D,index:de.index})}if(B>=Y.length)throw new Error("Chord index out of range for chord: "+E);var oe=Y[B];let J=oe.text.match(/^(.+?)(\d+\/?\d*)?(-)?$/);J?J[1]:oe.text;let fe=J&&J[2]?J[2]:"",ue=J&&J[3]?J[3]:"";N=N+fe+ue,P+=z+oe.index,M=P+oe.text.length}}return{start:P,end:M,note:N}}function I(A,P,M,N,B){var E=A.substring(P,M),T=/\{/,L=/\}/,R=/([^\{]*)/,O=/(\/*)/,w=E.match(new RegExp(R.source+T.source+O.source+b.source+O.source+b.source+O.source+b.source+O.source+b.source+O.source+b.source+O.source+b.source+O.source+b.source+O.source+b.source+L.source));if(w){for(var _=1+w[1].length,k=0;k<B;k++)w[k*3+2]&&(_+=w[k*3+2].length),w[k*3+3]&&(_+=w[k*3+3].length),w[k*3+4]&&(_+=w[k*3+4].length),w[k*3+5]&&(_+=w[k*3+5].length);w[B*3+2]&&(_+=w[k*3+2].length),P+=_;var q=w[B*3+3]?w[B*3+3].length:0;q+=w[B*3+4]?w[B*3+4].length:0,q+=w[B*3+5]?w[B*3+5].length:0,M=P+q}return{start:P,end:M,note:N}}function F(A,P,M,N){var B=A.substring(P,M).match(/([^"]+)?(".+")+/);return B[1]&&(P+=B[1].length),M=P+B[2].length,{start:P+1,end:M-1,note:N}}function y(A,P,M){if(!A&&M&&(A=M),!A)return 0;switch(P){case void 0:switch(A){case"__":return-2;case"_":return-1;case"=":return 0;case"^":return 1;case"^^":return 2;default:return 0}case"_":switch(A){case"__":return-1;case"_":return 0;case"=":return 1;case"^":return 2;case"^^":return 3;default:return 0}case"^":switch(A){case"__":return-3;case"_":return-2;case"=":return-1;case"^":return 0;case"^^":return 1;default:return 0}}return 0}}(),Qr=s,Qr}var Zr,so;function sd(){if(so)return Zr;so=1;var e=function(n,r,s,l){this.type="BeamElem",this.isflat=!!s,this.isgrace=!!(r&&r==="grace"),this.forceup=!!(this.isgrace||r&&r==="up"),this.forcedown=!!(r&&r==="down"),this.elems=[],this.total=0,this.average=6,this.allrests=!0,this.stemHeight=n,this.beams=[],l&&l.duration?(this.duration=l.duration,l.startTriplet&&(this.duration*=l.tripletMultiplier),this.duration=Math.round(this.duration*1e3)/1e3):this.duration=0};e.prototype.setHint=function(){this.hint=!0},e.prototype.runningDirection=function(a){var n=a.averagepitch;n!==void 0&&(this.total=Math.round(this.total+n),this.count||(this.count=0),this.count++)},e.prototype.add=function(a){var n=a.abcelem.averagepitch;n!==void 0&&(a.abcelem.rest||(this.allrests=!1),a.beam=this,this.elems.push(a),this.total=Math.round(this.total+n),(this.min===void 0||a.abcelem.minpitch<this.min)&&(this.min=a.abcelem.minpitch),(this.max===void 0||a.abcelem.maxpitch>this.max)&&(this.max=a.abcelem.maxpitch))},e.prototype.addBeam=function(a){this.beams.push(a)},e.prototype.setStemDirection=function(){if(this.average=t(this.total,this.count),this.forceup)this.stemsUp=!0;else if(this.forcedown)this.stemsUp=!1;else{var a=6;this.stemsUp=this.average<a}delete this.count,this.total=0},e.prototype.calcDir=function(){if(this.average=t(this.total,this.elems.length),this.forceup)this.stemsUp=!0;else if(this.forcedown)this.stemsUp=!1;else{var a=6;this.stemsUp=this.average<a}for(var n=this.stemsUp?"up":"down",r=0;r<this.elems.length;r++)for(var s=0;s<this.elems[r].heads.length;s++)this.elems[r].heads[s].stemDir=n};function t(a,n){return n?a/n:0}return Zr=e,Zr}var en,oo;function od(){if(oo)return en;oo=1;var e=function(a,n){this.startVoice=a,this.type=n};return e.prototype.setBottomStaff=function(t){this.endVoice=t,this.startVoice.header&&!this.endVoice.header&&(this.header=this.startVoice.header,delete this.startVoice.header)},e.prototype.continuing=function(t){this.lastContinuedVoice=t},e.prototype.getWidth=function(){return 10},e.prototype.isStartVoice=function(t){return!!(this.startVoice&&this.startVoice.staff&&this.startVoice.staff.voices.length>0&&this.startVoice.staff.voices[0]===t)},en=e,en}var tn,co;function Bt(){if(co)return tn;co=1;var e=We(),t={0:{d:[["M",4.83,-14.97],["c",.33,-.03,1.11,0,1.47,.06],["c",1.68,.36,2.97,1.59,3.78,3.6],["c",1.2,2.97,.81,6.96,-.9,9.27],["c",-.78,1.08,-1.71,1.71,-2.91,1.95],["c",-.45,.09,-1.32,.09,-1.77,0],["c",-.81,-.18,-1.47,-.51,-2.07,-1.02],["c",-2.34,-2.07,-3.15,-6.72,-1.74,-10.2],["c",.87,-2.16,2.28,-3.42,4.14,-3.66],["z"],["m",1.11,.87],["c",-.21,-.06,-.69,-.09,-.87,-.06],["c",-.54,.12,-.87,.42,-1.17,.99],["c",-.36,.66,-.51,1.56,-.6,3],["c",-.03,.75,-.03,4.59,0,5.31],["c",.09,1.5,.27,2.4,.6,3.06],["c",.24,.48,.57,.78,.96,.9],["c",.27,.09,.78,.09,1.05,0],["c",.39,-.12,.72,-.42,.96,-.9],["c",.33,-.66,.51,-1.56,.6,-3.06],["c",.03,-.72,.03,-4.56,0,-5.31],["c",-.09,-1.47,-.27,-2.37,-.6,-3.03],["c",-.24,-.48,-.54,-.78,-.93,-.9],["z"]],w:10.78,h:14.959},1:{d:[["M",3.3,-15.06],["c",.06,-.06,.21,-.03,.66,.15],["c",.81,.39,1.08,.39,1.83,.03],["c",.21,-.09,.39,-.15,.42,-.15],["c",.12,0,.21,.09,.27,.21],["c",.06,.12,.06,.33,.06,5.94],["c",0,3.93,0,5.85,.03,6.03],["c",.06,.36,.15,.69,.27,.96],["c",.36,.75,.93,1.17,1.68,1.26],["c",.3,.03,.39,.09,.39,.3],["c",0,.15,-.03,.18,-.09,.24],["c",-.06,.06,-.09,.06,-.48,.06],["c",-.42,0,-.69,-.03,-2.1,-.24],["c",-.9,-.15,-1.77,-.15,-2.67,0],["c",-1.41,.21,-1.68,.24,-2.1,.24],["c",-.39,0,-.42,0,-.48,-.06],["c",-.06,-.06,-.06,-.09,-.06,-.24],["c",0,-.21,.06,-.27,.36,-.3],["c",.75,-.09,1.32,-.51,1.68,-1.26],["c",.12,-.27,.21,-.6,.27,-.96],["c",.03,-.18,.03,-1.59,.03,-4.29],["c",0,-3.87,0,-4.05,-.06,-4.14],["c",-.09,-.15,-.18,-.24,-.39,-.24],["c",-.12,0,-.15,.03,-.21,.06],["c",-.03,.06,-.45,.99,-.96,2.13],["c",-.48,1.14,-.9,2.1,-.93,2.16],["c",-.06,.15,-.21,.24,-.33,.24],["c",-.24,0,-.42,-.18,-.42,-.39],["c",0,-.06,3.27,-7.62,3.33,-7.74],["z"]],w:8.94,h:15.058},2:{d:[["M",4.23,-14.97],["c",.57,-.06,1.68,0,2.34,.18],["c",.69,.18,1.5,.54,2.01,.9],["c",1.35,.96,1.95,2.25,1.77,3.81],["c",-.15,1.35,-.66,2.34,-1.68,3.15],["c",-.6,.48,-1.44,.93,-3.12,1.65],["c",-1.32,.57,-1.8,.81,-2.37,1.14],["c",-.57,.33,-.57,.33,-.24,.27],["c",.39,-.09,1.26,-.09,1.68,0],["c",.72,.15,1.41,.45,2.1,.9],["c",.99,.63,1.86,.87,2.55,.75],["c",.24,-.06,.42,-.15,.57,-.3],["c",.12,-.09,.3,-.42,.3,-.51],["c",0,-.09,.12,-.21,.24,-.24],["c",.18,-.03,.39,.12,.39,.3],["c",0,.12,-.15,.57,-.3,.87],["c",-.54,1.02,-1.56,1.74,-2.79,2.01],["c",-.42,.09,-1.23,.09,-1.62,.03],["c",-.81,-.18,-1.32,-.45,-2.01,-1.11],["c",-.45,-.45,-.63,-.57,-.96,-.69],["c",-.84,-.27,-1.89,.12,-2.25,.9],["c",-.12,.21,-.21,.54,-.21,.72],["c",0,.12,-.12,.21,-.27,.24],["c",-.15,0,-.27,-.03,-.33,-.15],["c",-.09,-.21,.09,-1.08,.33,-1.71],["c",.24,-.66,.66,-1.26,1.29,-1.89],["c",.45,-.45,.9,-.81,1.92,-1.56],["c",1.29,-.93,1.89,-1.44,2.34,-1.98],["c",.87,-1.05,1.26,-2.19,1.2,-3.63],["c",-.06,-1.29,-.39,-2.31,-.96,-2.91],["c",-.36,-.33,-.72,-.51,-1.17,-.54],["c",-.84,-.03,-1.53,.42,-1.59,1.05],["c",-.03,.33,.12,.6,.57,1.14],["c",.45,.54,.54,.87,.42,1.41],["c",-.15,.63,-.54,1.11,-1.08,1.38],["c",-.63,.33,-1.2,.33,-1.83,0],["c",-.24,-.12,-.33,-.18,-.54,-.39],["c",-.18,-.18,-.27,-.3,-.36,-.51],["c",-.24,-.45,-.27,-.84,-.21,-1.38],["c",.12,-.75,.45,-1.41,1.02,-1.98],["c",.72,-.72,1.74,-1.17,2.85,-1.32],["z"]],w:10.764,h:14.97},3:{d:[["M",3.78,-14.97],["c",.3,-.03,1.41,0,1.83,.06],["c",2.22,.3,3.51,1.32,3.72,2.91],["c",.03,.33,.03,1.26,-.03,1.65],["c",-.12,.84,-.48,1.47,-1.05,1.77],["c",-.27,.15,-.36,.24,-.45,.39],["c",-.09,.21,-.09,.36,0,.57],["c",.09,.15,.18,.24,.51,.39],["c",.75,.42,1.23,1.14,1.41,2.13],["c",.06,.42,.06,1.35,0,1.71],["c",-.18,.81,-.48,1.38,-1.02,1.95],["c",-.75,.72,-1.8,1.2,-3.18,1.38],["c",-.42,.06,-1.56,.06,-1.95,0],["c",-1.89,-.33,-3.18,-1.29,-3.51,-2.64],["c",-.03,-.12,-.03,-.33,-.03,-.6],["c",0,-.36,0,-.42,.06,-.63],["c",.12,-.3,.27,-.51,.51,-.75],["c",.24,-.24,.45,-.39,.75,-.51],["c",.21,-.06,.27,-.06,.6,-.06],["c",.33,0,.39,0,.6,.06],["c",.3,.12,.51,.27,.75,.51],["c",.36,.33,.57,.75,.6,1.2],["c",0,.21,0,.27,-.06,.42],["c",-.09,.18,-.12,.24,-.54,.54],["c",-.51,.36,-.63,.54,-.6,.87],["c",.06,.54,.54,.9,1.38,.99],["c",.36,.06,.72,.03,.96,-.06],["c",.81,-.27,1.29,-1.23,1.44,-2.79],["c",.03,-.45,.03,-1.95,-.03,-2.37],["c",-.09,-.75,-.33,-1.23,-.75,-1.44],["c",-.33,-.18,-.45,-.18,-1.98,-.18],["c",-1.35,0,-1.41,0,-1.5,-.06],["c",-.18,-.12,-.24,-.39,-.12,-.6],["c",.12,-.15,.15,-.15,1.68,-.15],["c",1.5,0,1.62,0,1.89,-.15],["c",.18,-.09,.42,-.36,.54,-.57],["c",.18,-.42,.27,-.9,.3,-1.95],["c",.03,-1.2,-.06,-1.8,-.36,-2.37],["c",-.24,-.48,-.63,-.81,-1.14,-.96],["c",-.3,-.06,-1.08,-.06,-1.38,.03],["c",-.6,.15,-.9,.42,-.96,.84],["c",-.03,.3,.06,.45,.63,.84],["c",.33,.24,.42,.39,.45,.63],["c",.03,.72,-.57,1.5,-1.32,1.65],["c",-1.05,.27,-2.1,-.57,-2.1,-1.65],["c",0,-.45,.15,-.96,.39,-1.38],["c",.12,-.21,.54,-.63,.81,-.81],["c",.57,-.42,1.38,-.69,2.25,-.81],["z"]],w:9.735,h:14.967},4:{d:[["M",8.64,-14.94],["c",.27,-.09,.42,-.12,.54,-.03],["c",.09,.06,.15,.21,.15,.3],["c",-.03,.06,-1.92,2.31,-4.23,5.04],["c",-2.31,2.73,-4.23,4.98,-4.26,5.01],["c",-.03,.06,.12,.06,2.55,.06],["l",2.61,0],["l",0,-2.37],["c",0,-2.19,.03,-2.37,.06,-2.46],["c",.03,-.06,.21,-.18,.57,-.42],["c",1.08,-.72,1.38,-1.08,1.86,-2.16],["c",.12,-.3,.24,-.54,.27,-.57],["c",.12,-.12,.39,-.06,.45,.12],["c",.06,.09,.06,.57,.06,3.96],["l",0,3.9],["l",1.08,0],["c",1.05,0,1.11,0,1.2,.06],["c",.24,.15,.24,.54,0,.69],["c",-.09,.06,-.15,.06,-1.2,.06],["l",-1.08,0],["l",0,.33],["c",0,.57,.09,1.11,.3,1.53],["c",.36,.75,.93,1.17,1.68,1.26],["c",.3,.03,.39,.09,.39,.3],["c",0,.15,-.03,.18,-.09,.24],["c",-.06,.06,-.09,.06,-.48,.06],["c",-.42,0,-.69,-.03,-2.1,-.24],["c",-.9,-.15,-1.77,-.15,-2.67,0],["c",-1.41,.21,-1.68,.24,-2.1,.24],["c",-.39,0,-.42,0,-.48,-.06],["c",-.06,-.06,-.06,-.09,-.06,-.24],["c",0,-.21,.06,-.27,.36,-.3],["c",.75,-.09,1.32,-.51,1.68,-1.26],["c",.21,-.42,.3,-.96,.3,-1.53],["l",0,-.33],["l",-2.7,0],["c",-2.91,0,-2.85,0,-3.09,-.15],["c",-.18,-.12,-.3,-.39,-.27,-.54],["c",.03,-.06,.18,-.24,.33,-.45],["c",.75,-.9,1.59,-2.07,2.13,-3.03],["c",.33,-.54,.84,-1.62,1.05,-2.16],["c",.57,-1.41,.84,-2.64,.9,-4.05],["c",.03,-.63,.06,-.72,.24,-.81],["l",.12,-.06],["l",.45,.12],["c",.66,.18,1.02,.24,1.47,.27],["c",.6,.03,1.23,-.09,2.01,-.33],["z"]],w:11.795,h:14.994},5:{d:[["M",1.02,-14.94],["c",.12,-.09,.03,-.09,1.08,.06],["c",2.49,.36,4.35,.36,6.96,-.06],["c",.57,-.09,.66,-.06,.81,.06],["c",.15,.18,.12,.24,-.15,.51],["c",-1.29,1.26,-3.24,2.04,-5.58,2.31],["c",-.6,.09,-1.2,.12,-1.71,.12],["c",-.39,0,-.45,0,-.57,.06],["c",-.09,.06,-.15,.12,-.21,.21],["l",-.06,.12],["l",0,1.65],["l",0,1.65],["l",.21,-.21],["c",.66,-.57,1.41,-.96,2.19,-1.14],["c",.33,-.06,1.41,-.06,1.95,0],["c",2.61,.36,4.02,1.74,4.26,4.14],["c",.03,.45,.03,1.08,-.03,1.44],["c",-.18,1.02,-.78,2.01,-1.59,2.7],["c",-.72,.57,-1.62,1.02,-2.49,1.2],["c",-1.38,.27,-3.03,.06,-4.2,-.54],["c",-1.08,-.54,-1.71,-1.32,-1.86,-2.28],["c",-.09,-.69,.09,-1.29,.57,-1.74],["c",.24,-.24,.45,-.39,.75,-.51],["c",.21,-.06,.27,-.06,.6,-.06],["c",.33,0,.39,0,.6,.06],["c",.3,.12,.51,.27,.75,.51],["c",.36,.33,.57,.75,.6,1.2],["c",0,.21,0,.27,-.06,.42],["c",-.09,.18,-.12,.24,-.54,.54],["c",-.18,.12,-.36,.3,-.42,.33],["c",-.36,.42,-.18,.99,.36,1.26],["c",.51,.27,1.47,.36,2.01,.27],["c",.93,-.21,1.47,-1.17,1.65,-2.91],["c",.06,-.45,.06,-1.89,0,-2.31],["c",-.15,-1.2,-.51,-2.1,-1.05,-2.55],["c",-.21,-.18,-.54,-.36,-.81,-.39],["c",-.3,-.06,-.84,-.03,-1.26,.06],["c",-.93,.18,-1.65,.6,-2.16,1.2],["c",-.15,.21,-.27,.3,-.39,.3],["c",-.15,0,-.3,-.09,-.36,-.18],["c",-.06,-.09,-.06,-.15,-.06,-3.66],["c",0,-3.39,0,-3.57,.06,-3.66],["c",.03,-.06,.09,-.15,.15,-.18],["z"]],w:10.212,h:14.997},6:{d:[["M",4.98,-14.97],["c",.36,-.03,1.2,0,1.59,.06],["c",.9,.15,1.68,.51,2.25,1.05],["c",.57,.51,.87,1.23,.84,1.98],["c",-.03,.51,-.21,.9,-.6,1.26],["c",-.24,.24,-.45,.39,-.75,.51],["c",-.21,.06,-.27,.06,-.6,.06],["c",-.33,0,-.39,0,-.6,-.06],["c",-.3,-.12,-.51,-.27,-.75,-.51],["c",-.39,-.36,-.57,-.78,-.57,-1.26],["c",0,-.27,0,-.3,.09,-.42],["c",.03,-.09,.18,-.21,.3,-.3],["c",.12,-.09,.3,-.21,.39,-.27],["c",.09,-.06,.21,-.18,.27,-.24],["c",.06,-.12,.09,-.15,.09,-.33],["c",0,-.18,-.03,-.24,-.09,-.36],["c",-.24,-.39,-.75,-.6,-1.38,-.57],["c",-.54,.03,-.9,.18,-1.23,.48],["c",-.81,.72,-1.08,2.16,-.96,5.37],["l",0,.63],["l",.3,-.12],["c",.78,-.27,1.29,-.33,2.1,-.27],["c",1.47,.12,2.49,.54,3.27,1.29],["c",.48,.51,.81,1.11,.96,1.89],["c",.06,.27,.06,.42,.06,.93],["c",0,.54,0,.69,-.06,.96],["c",-.15,.78,-.48,1.38,-.96,1.89],["c",-.54,.51,-1.17,.87,-1.98,1.08],["c",-1.14,.3,-2.4,.33,-3.24,.03],["c",-1.5,-.48,-2.64,-1.89,-3.27,-4.02],["c",-.36,-1.23,-.51,-2.82,-.42,-4.08],["c",.3,-3.66,2.28,-6.3,4.95,-6.66],["z"],["m",.66,7.41],["c",-.27,-.09,-.81,-.12,-1.08,-.06],["c",-.72,.18,-1.08,.69,-1.23,1.71],["c",-.06,.54,-.06,3,0,3.54],["c",.18,1.26,.72,1.77,1.8,1.74],["c",.39,-.03,.63,-.09,.9,-.27],["c",.66,-.42,.9,-1.32,.9,-3.24],["c",0,-2.22,-.36,-3.12,-1.29,-3.42],["z"]],w:9.956,h:14.982},7:{d:[["M",.21,-14.97],["c",.21,-.06,.45,0,.54,.15],["c",.06,.09,.06,.15,.06,.39],["c",0,.24,0,.33,.06,.42],["c",.06,.12,.21,.24,.27,.24],["c",.03,0,.12,-.12,.24,-.21],["c",.96,-1.2,2.58,-1.35,3.99,-.42],["c",.15,.12,.42,.3,.54,.45],["c",.48,.39,.81,.57,1.29,.6],["c",.69,.03,1.5,-.3,2.13,-.87],["c",.09,-.09,.27,-.3,.39,-.45],["c",.12,-.15,.24,-.27,.3,-.3],["c",.18,-.06,.39,.03,.51,.21],["c",.06,.18,.06,.24,-.27,.72],["c",-.18,.24,-.54,.78,-.78,1.17],["c",-2.37,3.54,-3.54,6.27,-3.87,9],["c",-.03,.33,-.03,.66,-.03,1.26],["c",0,.9,0,1.08,.15,1.89],["c",.06,.45,.06,.48,.03,.6],["c",-.06,.09,-.21,.21,-.3,.21],["c",-.03,0,-.27,-.06,-.54,-.15],["c",-.84,-.27,-1.11,-.3,-1.65,-.3],["c",-.57,0,-.84,.03,-1.56,.27],["c",-.6,.18,-.69,.21,-.81,.15],["c",-.12,-.06,-.21,-.18,-.21,-.3],["c",0,-.15,.6,-1.44,1.2,-2.61],["c",1.14,-2.22,2.73,-4.68,5.1,-8.01],["c",.21,-.27,.36,-.48,.33,-.48],["c",0,0,-.12,.06,-.27,.12],["c",-.54,.3,-.99,.39,-1.56,.39],["c",-.75,.03,-1.2,-.18,-1.83,-.75],["c",-.99,-.9,-1.83,-1.17,-2.31,-.72],["c",-.18,.15,-.36,.51,-.45,.84],["c",-.06,.24,-.06,.33,-.09,1.98],["c",0,1.62,-.03,1.74,-.06,1.8],["c",-.15,.24,-.54,.24,-.69,0],["c",-.06,-.09,-.06,-.15,-.06,-3.57],["c",0,-3.42,0,-3.48,.06,-3.57],["c",.03,-.06,.09,-.12,.15,-.15],["z"]],w:10.561,h:15.093},8:{d:[["M",4.98,-14.97],["c",.33,-.03,1.02,-.03,1.32,0],["c",1.32,.12,2.49,.6,3.21,1.32],["c",.39,.39,.66,.81,.78,1.29],["c",.09,.36,.09,1.08,0,1.44],["c",-.21,.84,-.66,1.59,-1.59,2.55],["l",-.3,.3],["l",.27,.18],["c",1.47,.93,2.31,2.31,2.25,3.75],["c",-.03,.75,-.24,1.35,-.63,1.95],["c",-.45,.66,-1.02,1.14,-1.83,1.53],["c",-1.8,.87,-4.2,.87,-6,.03],["c",-1.62,-.78,-2.52,-2.16,-2.46,-3.66],["c",.06,-.99,.54,-1.77,1.8,-2.97],["c",.54,-.51,.54,-.54,.48,-.57],["c",-.39,-.27,-.96,-.78,-1.2,-1.14],["c",-.75,-1.11,-.87,-2.4,-.3,-3.6],["c",.69,-1.35,2.25,-2.25,4.2,-2.4],["z"],["m",1.53,.69],["c",-.42,-.09,-1.11,-.12,-1.38,-.06],["c",-.3,.06,-.6,.18,-.81,.3],["c",-.21,.12,-.6,.51,-.72,.72],["c",-.51,.87,-.42,1.89,.21,2.52],["c",.21,.21,.36,.3,1.95,1.23],["c",.96,.54,1.74,.99,1.77,1.02],["c",.09,0,.63,-.6,.99,-1.11],["c",.21,-.36,.48,-.87,.57,-1.23],["c",.06,-.24,.06,-.36,.06,-.72],["c",0,-.45,-.03,-.66,-.15,-.99],["c",-.39,-.81,-1.29,-1.44,-2.49,-1.68],["z"],["m",-1.44,8.07],["l",-1.89,-1.08],["c",-.03,0,-.18,.15,-.39,.33],["c",-1.2,1.08,-1.65,1.95,-1.59,3],["c",.09,1.59,1.35,2.85,3.21,3.24],["c",.33,.06,.45,.06,.93,.06],["c",.63,0,.81,-.03,1.29,-.27],["c",.9,-.42,1.47,-1.41,1.41,-2.4],["c",-.06,-.66,-.39,-1.29,-.9,-1.65],["c",-.12,-.09,-1.05,-.63,-2.07,-1.23],["z"]],w:10.926,h:14.989},9:{d:[["M",4.23,-14.97],["c",.42,-.03,1.29,0,1.62,.06],["c",.51,.12,.93,.3,1.38,.57],["c",1.53,1.02,2.52,3.24,2.73,5.94],["c",.18,2.55,-.48,4.98,-1.83,6.57],["c",-1.05,1.26,-2.4,1.89,-3.93,1.83],["c",-1.23,-.06,-2.31,-.45,-3.03,-1.14],["c",-.57,-.51,-.87,-1.23,-.84,-1.98],["c",.03,-.51,.21,-.9,.6,-1.26],["c",.24,-.24,.45,-.39,.75,-.51],["c",.21,-.06,.27,-.06,.6,-.06],["c",.33,0,.39,0,.6,.06],["c",.3,.12,.51,.27,.75,.51],["c",.39,.36,.57,.78,.57,1.26],["c",0,.27,0,.3,-.09,.42],["c",-.03,.09,-.18,.21,-.3,.3],["c",-.12,.09,-.3,.21,-.39,.27],["c",-.09,.06,-.21,.18,-.27,.24],["c",-.06,.12,-.06,.15,-.06,.33],["c",0,.18,0,.24,.06,.36],["c",.24,.39,.75,.6,1.38,.57],["c",.54,-.03,.9,-.18,1.23,-.48],["c",.81,-.72,1.08,-2.16,.96,-5.37],["l",0,-.63],["l",-.3,.12],["c",-.78,.27,-1.29,.33,-2.1,.27],["c",-1.47,-.12,-2.49,-.54,-3.27,-1.29],["c",-.48,-.51,-.81,-1.11,-.96,-1.89],["c",-.06,-.27,-.06,-.42,-.06,-.96],["c",0,-.51,0,-.66,.06,-.93],["c",.15,-.78,.48,-1.38,.96,-1.89],["c",.15,-.12,.33,-.27,.42,-.36],["c",.69,-.51,1.62,-.81,2.76,-.93],["z"],["m",1.17,.66],["c",-.21,-.06,-.57,-.06,-.81,-.03],["c",-.78,.12,-1.26,.69,-1.41,1.74],["c",-.12,.63,-.15,1.95,-.09,2.79],["c",.12,1.71,.63,2.4,1.77,2.46],["c",1.08,.03,1.62,-.48,1.8,-1.74],["c",.06,-.54,.06,-3,0,-3.54],["c",-.15,-1.05,-.51,-1.53,-1.26,-1.68],["z"]],w:9.959,h:14.986},"rests.multimeasure":{d:[["M",0,-4],["l",0,16],["l",1,0],["l",0,-5],["l",40,0],["l",0,5],["l",1,0],["l",0,-16],["l",-1,0],["l",0,5],["l",-40,0],["l",0,-5],["z"]],w:42,h:18},"rests.whole":{d:[["M",.06,.03],["l",.09,-.06],["l",5.46,0],["l",5.49,0],["l",.09,.06],["l",.06,.09],["l",0,2.19],["l",0,2.19],["l",-.06,.09],["l",-.09,.06],["l",-5.49,0],["l",-5.46,0],["l",-.09,-.06],["l",-.06,-.09],["l",0,-2.19],["l",0,-2.19],["z"]],w:11.25,h:4.68},"rests.half":{d:[["M",.06,-4.62],["l",.09,-.06],["l",5.46,0],["l",5.49,0],["l",.09,.06],["l",.06,.09],["l",0,2.19],["l",0,2.19],["l",-.06,.09],["l",-.09,.06],["l",-5.49,0],["l",-5.46,0],["l",-.09,-.06],["l",-.06,-.09],["l",0,-2.19],["l",0,-2.19],["z"]],w:11.25,h:4.68},"rests.quarter":{d:[["M",1.89,-11.82],["c",.12,-.06,.24,-.06,.36,-.03],["c",.09,.06,4.74,5.58,4.86,5.82],["c",.21,.39,.15,.78,-.15,1.26],["c",-.24,.33,-.72,.81,-1.62,1.56],["c",-.45,.36,-.87,.75,-.96,.84],["c",-.93,.99,-1.14,2.49,-.6,3.63],["c",.18,.39,.27,.48,1.32,1.68],["c",1.92,2.25,1.83,2.16,1.83,2.34],["c",0,.18,-.18,.36,-.36,.39],["c",-.15,0,-.27,-.06,-.48,-.27],["c",-.75,-.75,-2.46,-1.29,-3.39,-1.08],["c",-.45,.09,-.69,.27,-.9,.69],["c",-.12,.3,-.21,.66,-.24,1.14],["c",-.03,.66,.09,1.35,.3,2.01],["c",.15,.42,.24,.66,.45,.96],["c",.18,.24,.18,.33,.03,.42],["c",-.12,.06,-.18,.03,-.45,-.3],["c",-1.08,-1.38,-2.07,-3.36,-2.4,-4.83],["c",-.27,-1.05,-.15,-1.77,.27,-2.07],["c",.21,-.12,.42,-.15,.87,-.15],["c",.87,.06,2.1,.39,3.3,.9],["l",.39,.18],["l",-1.65,-1.95],["c",-2.52,-2.97,-2.61,-3.09,-2.7,-3.27],["c",-.09,-.24,-.12,-.48,-.03,-.75],["c",.15,-.48,.57,-.96,1.83,-2.01],["c",.45,-.36,.84,-.72,.93,-.78],["c",.69,-.75,1.02,-1.8,.9,-2.79],["c",-.06,-.33,-.21,-.84,-.39,-1.11],["c",-.09,-.15,-.45,-.6,-.81,-1.05],["c",-.36,-.42,-.69,-.81,-.72,-.87],["c",-.09,-.18,0,-.42,.21,-.51],["z"]],w:7.888,h:21.435},"rests.8th":{d:[["M",1.68,-6.12],["c",.66,-.09,1.23,.09,1.68,.51],["c",.27,.3,.39,.54,.57,1.26],["c",.09,.33,.18,.66,.21,.72],["c",.12,.27,.33,.45,.6,.48],["c",.12,0,.18,0,.33,-.09],["c",.39,-.18,1.32,-1.29,1.68,-1.98],["c",.09,-.21,.24,-.3,.39,-.3],["c",.12,0,.27,.09,.33,.18],["c",.03,.06,-.27,1.11,-1.86,6.42],["c",-1.02,3.48,-1.89,6.39,-1.92,6.42],["c",0,.03,-.12,.12,-.24,.15],["c",-.18,.09,-.21,.09,-.45,.09],["c",-.24,0,-.3,0,-.48,-.06],["c",-.09,-.06,-.21,-.12,-.21,-.15],["c",-.06,-.03,.15,-.57,1.68,-4.92],["c",.96,-2.67,1.74,-4.89,1.71,-4.89],["l",-.51,.15],["c",-1.08,.36,-1.74,.48,-2.55,.48],["c",-.66,0,-.84,-.03,-1.32,-.27],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.33,-.45,.84,-.81,1.38,-.9],["z"]],w:7.534,h:13.883},"rests.16th":{d:[["M",3.33,-6.12],["c",.66,-.09,1.23,.09,1.68,.51],["c",.27,.3,.39,.54,.57,1.26],["c",.09,.33,.18,.66,.21,.72],["c",.15,.39,.57,.57,.87,.42],["c",.39,-.18,1.2,-1.23,1.62,-2.07],["c",.06,-.15,.24,-.24,.36,-.24],["c",.12,0,.27,.09,.33,.18],["c",.03,.06,-.45,1.86,-2.67,10.17],["c",-1.5,5.55,-2.73,10.14,-2.76,10.17],["c",-.03,.03,-.12,.12,-.24,.15],["c",-.18,.09,-.21,.09,-.45,.09],["c",-.24,0,-.3,0,-.48,-.06],["c",-.09,-.06,-.21,-.12,-.21,-.15],["c",-.06,-.03,.12,-.57,1.44,-4.92],["c",.81,-2.67,1.47,-4.86,1.47,-4.89],["c",-.03,0,-.27,.06,-.54,.15],["c",-1.08,.36,-1.77,.48,-2.58,.48],["c",-.66,0,-.84,-.03,-1.32,-.27],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.72,-1.05,2.22,-1.23,3.06,-.42],["c",.3,.33,.42,.6,.6,1.38],["c",.09,.45,.21,.78,.33,.9],["c",.09,.09,.27,.18,.45,.21],["c",.12,0,.18,0,.33,-.09],["c",.33,-.15,1.02,-.93,1.41,-1.59],["c",.12,-.21,.18,-.39,.39,-1.08],["c",.66,-2.1,1.17,-3.84,1.17,-3.87],["c",0,0,-.21,.06,-.42,.15],["c",-.51,.15,-1.2,.33,-1.68,.42],["c",-.33,.06,-.51,.06,-.96,.06],["c",-.66,0,-.84,-.03,-1.32,-.27],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.33,-.45,.84,-.81,1.38,-.9],["z"]],w:9.724,h:21.383},"rests.32nd":{d:[["M",4.23,-13.62],["c",.66,-.09,1.23,.09,1.68,.51],["c",.27,.3,.39,.54,.57,1.26],["c",.09,.33,.18,.66,.21,.72],["c",.12,.27,.33,.45,.6,.48],["c",.12,0,.18,0,.27,-.06],["c",.33,-.21,.99,-1.11,1.44,-1.98],["c",.09,-.24,.21,-.33,.39,-.33],["c",.12,0,.27,.09,.33,.18],["c",.03,.06,-.57,2.67,-3.21,13.89],["c",-1.8,7.62,-3.3,13.89,-3.3,13.92],["c",-.03,.06,-.12,.12,-.24,.18],["c",-.21,.09,-.24,.09,-.48,.09],["c",-.24,0,-.3,0,-.48,-.06],["c",-.09,-.06,-.21,-.12,-.21,-.15],["c",-.06,-.03,.09,-.57,1.23,-4.92],["c",.69,-2.67,1.26,-4.86,1.29,-4.89],["c",0,-.03,-.12,-.03,-.48,.12],["c",-1.17,.39,-2.22,.57,-3,.54],["c",-.42,-.03,-.75,-.12,-1.11,-.3],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.72,-1.05,2.22,-1.23,3.06,-.42],["c",.3,.33,.42,.6,.6,1.38],["c",.09,.45,.21,.78,.33,.9],["c",.12,.09,.3,.18,.48,.21],["c",.12,0,.18,0,.3,-.09],["c",.42,-.21,1.29,-1.29,1.56,-1.89],["c",.03,-.12,1.23,-4.59,1.23,-4.65],["c",0,-.03,-.18,.03,-.39,.12],["c",-.63,.18,-1.2,.36,-1.74,.45],["c",-.39,.06,-.54,.06,-1.02,.06],["c",-.66,0,-.84,-.03,-1.32,-.27],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.72,-1.05,2.22,-1.23,3.06,-.42],["c",.3,.33,.42,.6,.6,1.38],["c",.09,.45,.21,.78,.33,.9],["c",.18,.18,.51,.27,.72,.15],["c",.3,-.12,.69,-.57,1.08,-1.17],["c",.42,-.6,.39,-.51,1.05,-3.03],["c",.33,-1.26,.6,-2.31,.6,-2.34],["c",0,0,-.21,.03,-.45,.12],["c",-.57,.18,-1.14,.33,-1.62,.42],["c",-.33,.06,-.51,.06,-.96,.06],["c",-.66,0,-.84,-.03,-1.32,-.27],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.33,-.45,.84,-.81,1.38,-.9],["z"]],w:11.373,h:28.883},"rests.64th":{d:[["M",5.13,-13.62],["c",.66,-.09,1.23,.09,1.68,.51],["c",.27,.3,.39,.54,.57,1.26],["c",.15,.63,.21,.81,.33,.96],["c",.18,.21,.54,.3,.75,.18],["c",.24,-.12,.63,-.66,1.08,-1.56],["c",.33,-.66,.39,-.72,.6,-.72],["c",.12,0,.27,.09,.33,.18],["c",.03,.06,-.69,3.66,-3.54,17.64],["c",-1.95,9.66,-3.57,17.61,-3.57,17.64],["c",-.03,.06,-.12,.12,-.24,.18],["c",-.21,.09,-.24,.09,-.48,.09],["c",-.24,0,-.3,0,-.48,-.06],["c",-.09,-.06,-.21,-.12,-.21,-.15],["c",-.06,-.03,.06,-.57,1.05,-4.95],["c",.6,-2.7,1.08,-4.89,1.08,-4.92],["c",0,0,-.24,.06,-.51,.15],["c",-.66,.24,-1.2,.36,-1.77,.48],["c",-.42,.06,-.57,.06,-1.05,.06],["c",-.69,0,-.87,-.03,-1.35,-.27],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.72,-1.05,2.22,-1.23,3.06,-.42],["c",.3,.33,.42,.6,.6,1.38],["c",.09,.45,.21,.78,.33,.9],["c",.09,.09,.27,.18,.45,.21],["c",.21,.03,.39,-.09,.72,-.42],["c",.45,-.45,1.02,-1.26,1.17,-1.65],["c",.03,-.09,.27,-1.14,.54,-2.34],["c",.27,-1.2,.48,-2.19,.51,-2.22],["c",0,-.03,-.09,-.03,-.48,.12],["c",-1.17,.39,-2.22,.57,-3,.54],["c",-.42,-.03,-.75,-.12,-1.11,-.3],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.36,-.54,.96,-.87,1.65,-.93],["c",.54,-.03,1.02,.15,1.41,.54],["c",.27,.3,.39,.54,.57,1.26],["c",.09,.33,.18,.66,.21,.72],["c",.15,.39,.57,.57,.9,.42],["c",.36,-.18,1.2,-1.26,1.47,-1.89],["c",.03,-.09,.3,-1.2,.57,-2.43],["l",.51,-2.28],["l",-.54,.18],["c",-1.11,.36,-1.8,.48,-2.61,.48],["c",-.66,0,-.84,-.03,-1.32,-.27],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.36,-.54,.96,-.87,1.65,-.93],["c",.54,-.03,1.02,.15,1.41,.54],["c",.27,.3,.39,.54,.57,1.26],["c",.15,.63,.21,.81,.33,.96],["c",.21,.21,.54,.3,.75,.18],["c",.36,-.18,.93,-.93,1.29,-1.68],["c",.12,-.24,.18,-.48,.63,-2.55],["l",.51,-2.31],["c",0,-.03,-.18,.03,-.39,.12],["c",-1.14,.36,-2.1,.54,-2.82,.51],["c",-.42,-.03,-.75,-.12,-1.11,-.3],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.33,-.45,.84,-.81,1.38,-.9],["z"]],w:12.453,h:36.383},"rests.128th":{d:[["M",6.03,-21.12],["c",.66,-.09,1.23,.09,1.68,.51],["c",.27,.3,.39,.54,.57,1.26],["c",.09,.33,.18,.66,.21,.72],["c",.12,.27,.33,.45,.6,.48],["c",.21,0,.33,-.06,.54,-.36],["c",.15,-.21,.54,-.93,.78,-1.47],["c",.15,-.33,.18,-.39,.3,-.48],["c",.18,-.09,.45,0,.51,.15],["c",.03,.09,-7.11,42.75,-7.17,42.84],["c",-.03,.03,-.15,.09,-.24,.15],["c",-.18,.06,-.24,.06,-.45,.06],["c",-.24,0,-.3,0,-.48,-.06],["c",-.09,-.06,-.21,-.12,-.21,-.15],["c",-.06,-.03,.03,-.57,.84,-4.98],["c",.51,-2.7,.93,-4.92,.9,-4.92],["c",0,0,-.15,.06,-.36,.12],["c",-.78,.27,-1.62,.48,-2.31,.57],["c",-.15,.03,-.54,.03,-.81,.03],["c",-.66,0,-.84,-.03,-1.32,-.27],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.36,-.54,.96,-.87,1.65,-.93],["c",.54,-.03,1.02,.15,1.41,.54],["c",.27,.3,.39,.54,.57,1.26],["c",.09,.33,.18,.66,.21,.72],["c",.12,.27,.33,.45,.63,.48],["c",.12,0,.18,0,.3,-.09],["c",.42,-.21,1.14,-1.11,1.5,-1.83],["c",.12,-.27,.12,-.27,.54,-2.52],["c",.24,-1.23,.42,-2.25,.39,-2.25],["c",0,0,-.24,.06,-.51,.18],["c",-1.26,.39,-2.25,.57,-3.06,.54],["c",-.42,-.03,-.75,-.12,-1.11,-.3],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.36,-.54,.96,-.87,1.65,-.93],["c",.54,-.03,1.02,.15,1.41,.54],["c",.27,.3,.39,.54,.57,1.26],["c",.15,.63,.21,.81,.33,.96],["c",.18,.21,.51,.3,.75,.18],["c",.36,-.15,1.05,-.99,1.41,-1.77],["l",.15,-.3],["l",.42,-2.25],["c",.21,-1.26,.42,-2.28,.39,-2.28],["l",-.51,.15],["c",-1.11,.39,-1.89,.51,-2.7,.51],["c",-.66,0,-.84,-.03,-1.32,-.27],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.36,-.54,.96,-.87,1.65,-.93],["c",.54,-.03,1.02,.15,1.41,.54],["c",.27,.3,.39,.54,.57,1.26],["c",.15,.63,.21,.81,.33,.96],["c",.18,.18,.48,.27,.72,.21],["c",.33,-.12,1.14,-1.26,1.41,-1.95],["c",0,-.09,.21,-1.11,.45,-2.34],["c",.21,-1.2,.39,-2.22,.39,-2.28],["c",.03,-.03,0,-.03,-.45,.12],["c",-.57,.18,-1.2,.33,-1.71,.42],["c",-.3,.06,-.51,.06,-.93,.06],["c",-.66,0,-.84,-.03,-1.32,-.27],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.36,-.54,.96,-.87,1.65,-.93],["c",.54,-.03,1.02,.15,1.41,.54],["c",.27,.3,.39,.54,.57,1.26],["c",.09,.33,.18,.66,.21,.72],["c",.12,.27,.33,.45,.6,.48],["c",.18,0,.36,-.09,.57,-.33],["c",.33,-.36,.78,-1.14,.93,-1.56],["c",.03,-.12,.24,-1.2,.45,-2.4],["c",.24,-1.2,.42,-2.22,.42,-2.28],["c",.03,-.03,0,-.03,-.39,.09],["c",-1.05,.36,-1.8,.48,-2.58,.48],["c",-.63,0,-.84,-.03,-1.29,-.27],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.33,-.45,.84,-.81,1.38,-.9],["z"]],w:12.992,h:43.883},"accidentals.sharp":{d:[["M",5.73,-11.19],["c",.21,-.12,.54,-.03,.66,.24],["c",.06,.12,.06,.21,.06,2.31],["c",0,1.23,0,2.22,.03,2.22],["c",0,0,.27,-.12,.6,-.24],["c",.69,-.27,.78,-.3,.96,-.15],["c",.21,.15,.21,.18,.21,1.38],["c",0,1.02,0,1.11,-.06,1.2],["c",-.03,.06,-.09,.12,-.12,.15],["c",-.06,.03,-.42,.21,-.84,.36],["l",-.75,.33],["l",-.03,2.43],["c",0,1.32,0,2.43,.03,2.43],["c",0,0,.27,-.12,.6,-.24],["c",.69,-.27,.78,-.3,.96,-.15],["c",.21,.15,.21,.18,.21,1.38],["c",0,1.02,0,1.11,-.06,1.2],["c",-.03,.06,-.09,.12,-.12,.15],["c",-.06,.03,-.42,.21,-.84,.36],["l",-.75,.33],["l",-.03,2.52],["c",0,2.28,-.03,2.55,-.06,2.64],["c",-.21,.36,-.72,.36,-.93,0],["c",-.03,-.09,-.06,-.33,-.06,-2.43],["l",0,-2.31],["l",-1.29,.51],["l",-1.26,.51],["l",0,2.43],["c",0,2.58,0,2.52,-.15,2.67],["c",-.06,.09,-.27,.18,-.36,.18],["c",-.12,0,-.33,-.09,-.39,-.18],["c",-.15,-.15,-.15,-.09,-.15,-2.43],["c",0,-1.23,0,-2.22,-.03,-2.22],["c",0,0,-.27,.12,-.6,.24],["c",-.69,.27,-.78,.3,-.96,.15],["c",-.21,-.15,-.21,-.18,-.21,-1.38],["c",0,-1.02,0,-1.11,.06,-1.2],["c",.03,-.06,.09,-.12,.12,-.15],["c",.06,-.03,.42,-.21,.84,-.36],["l",.78,-.33],["l",0,-2.43],["c",0,-1.32,0,-2.43,-.03,-2.43],["c",0,0,-.27,.12,-.6,.24],["c",-.69,.27,-.78,.3,-.96,.15],["c",-.21,-.15,-.21,-.18,-.21,-1.38],["c",0,-1.02,0,-1.11,.06,-1.2],["c",.03,-.06,.09,-.12,.12,-.15],["c",.06,-.03,.42,-.21,.84,-.36],["l",.78,-.33],["l",0,-2.52],["c",0,-2.28,.03,-2.55,.06,-2.64],["c",.21,-.36,.72,-.36,.93,0],["c",.03,.09,.06,.33,.06,2.43],["l",.03,2.31],["l",1.26,-.51],["l",1.26,-.51],["l",0,-2.43],["c",0,-2.28,0,-2.43,.06,-2.55],["c",.06,-.12,.12,-.18,.27,-.24],["z"],["m",-.33,10.65],["l",0,-2.43],["l",-1.29,.51],["l",-1.26,.51],["l",0,2.46],["l",0,2.43],["l",.09,-.03],["c",.06,-.03,.63,-.27,1.29,-.51],["l",1.17,-.48],["l",0,-2.46],["z"]],w:8.25,h:22.462},"accidentals.halfsharp":{d:[["M",2.43,-10.05],["c",.21,-.12,.54,-.03,.66,.24],["c",.06,.12,.06,.21,.06,2.01],["c",0,1.05,0,1.89,.03,1.89],["l",.72,-.48],["c",.69,-.48,.69,-.51,.87,-.51],["c",.15,0,.18,.03,.27,.09],["c",.21,.15,.21,.18,.21,1.41],["c",0,1.11,-.03,1.14,-.09,1.23],["c",-.03,.03,-.48,.39,-1.02,.75],["l",-.99,.66],["l",0,2.37],["c",0,1.32,0,2.37,.03,2.37],["l",.72,-.48],["c",.69,-.48,.69,-.51,.87,-.51],["c",.15,0,.18,.03,.27,.09],["c",.21,.15,.21,.18,.21,1.41],["c",0,1.11,-.03,1.14,-.09,1.23],["c",-.03,.03,-.48,.39,-1.02,.75],["l",-.99,.66],["l",0,2.25],["c",0,1.95,0,2.28,-.06,2.37],["c",-.06,.12,-.12,.21,-.24,.27],["c",-.27,.12,-.54,.03,-.69,-.24],["c",-.06,-.12,-.06,-.21,-.06,-2.01],["c",0,-1.05,0,-1.89,-.03,-1.89],["l",-.72,.48],["c",-.69,.48,-.69,.48,-.87,.48],["c",-.15,0,-.18,0,-.27,-.06],["c",-.21,-.15,-.21,-.18,-.21,-1.41],["c",0,-1.11,.03,-1.14,.09,-1.23],["c",.03,-.03,.48,-.39,1.02,-.75],["l",.99,-.66],["l",0,-2.37],["c",0,-1.32,0,-2.37,-.03,-2.37],["l",-.72,.48],["c",-.69,.48,-.69,.48,-.87,.48],["c",-.15,0,-.18,0,-.27,-.06],["c",-.21,-.15,-.21,-.18,-.21,-1.41],["c",0,-1.11,.03,-1.14,.09,-1.23],["c",.03,-.03,.48,-.39,1.02,-.75],["l",.99,-.66],["l",0,-2.25],["c",0,-2.13,0,-2.28,.06,-2.4],["c",.06,-.12,.12,-.18,.27,-.24],["z"]],w:5.25,h:20.174},"accidentals.nat":{d:[["M",.21,-11.4],["c",.24,-.06,.78,0,.99,.15],["c",.03,.03,.03,.48,0,2.61],["c",-.03,1.44,-.03,2.61,-.03,2.61],["c",0,.03,.75,-.09,1.68,-.24],["c",.96,-.18,1.71,-.27,1.74,-.27],["c",.15,.03,.27,.15,.36,.3],["l",.06,.12],["l",.09,8.67],["c",.09,6.96,.12,8.67,.09,8.67],["c",-.03,.03,-.12,.06,-.21,.09],["c",-.24,.09,-.72,.09,-.96,0],["c",-.09,-.03,-.18,-.06,-.21,-.09],["c",-.03,-.03,-.03,-.48,0,-2.61],["c",.03,-1.44,.03,-2.61,.03,-2.61],["c",0,-.03,-.75,.09,-1.68,.24],["c",-.96,.18,-1.71,.27,-1.74,.27],["c",-.15,-.03,-.27,-.15,-.36,-.3],["l",-.06,-.15],["l",-.09,-7.53],["c",-.06,-4.14,-.09,-8.04,-.12,-8.67],["l",0,-1.11],["l",.15,-.06],["c",.09,-.03,.21,-.06,.27,-.09],["z"],["m",3.75,8.4],["c",0,-.33,0,-.42,-.03,-.42],["c",-.12,0,-2.79,.45,-2.79,.48],["c",-.03,0,-.09,6.3,-.09,6.33],["c",.03,0,2.79,-.45,2.82,-.48],["c",0,0,.09,-4.53,.09,-5.91],["z"]],w:5.4,h:22.8},"accidentals.flat":{d:[["M",-.36,-14.07],["c",.33,-.06,.87,0,1.08,.15],["c",.06,.03,.06,.36,-.03,5.25],["c",-.06,2.85,-.09,5.19,-.09,5.19],["c",0,.03,.12,-.03,.24,-.12],["c",.63,-.42,1.41,-.66,2.19,-.72],["c",.81,-.03,1.47,.21,2.04,.78],["c",.57,.54,.87,1.26,.93,2.04],["c",.03,.57,-.09,1.08,-.36,1.62],["c",-.42,.81,-1.02,1.38,-2.82,2.61],["c",-1.14,.78,-1.44,1.02,-1.8,1.44],["c",-.18,.18,-.39,.39,-.45,.42],["c",-.27,.18,-.57,.15,-.81,-.06],["c",-.06,-.09,-.12,-.18,-.15,-.27],["c",-.03,-.06,-.09,-3.27,-.18,-8.34],["c",-.09,-4.53,-.15,-8.58,-.18,-9.03],["l",0,-.78],["l",.12,-.06],["c",.06,-.03,.18,-.09,.27,-.12],["z"],["m",3.18,11.01],["c",-.21,-.12,-.54,-.15,-.81,-.06],["c",-.54,.15,-.99,.63,-1.17,1.26],["c",-.06,.3,-.12,2.88,-.06,3.87],["c",.03,.42,.03,.81,.06,.9],["l",.03,.12],["l",.45,-.39],["c",.63,-.54,1.26,-1.17,1.56,-1.59],["c",.3,-.42,.6,-.99,.72,-1.41],["c",.18,-.69,.09,-1.47,-.18,-2.07],["c",-.15,-.3,-.33,-.51,-.6,-.63],["z"]],w:6.75,h:18.801},"accidentals.halfflat":{d:[["M",4.83,-14.07],["c",.33,-.06,.87,0,1.08,.15],["c",.06,.03,.06,.6,-.12,9.06],["c",-.09,5.55,-.15,9.06,-.18,9.12],["c",-.03,.09,-.09,.18,-.15,.27],["c",-.24,.21,-.54,.24,-.81,.06],["c",-.06,-.03,-.27,-.24,-.45,-.42],["c",-.36,-.42,-.66,-.66,-1.8,-1.44],["c",-1.23,-.84,-1.83,-1.32,-2.25,-1.77],["c",-.66,-.78,-.96,-1.56,-.93,-2.46],["c",.09,-1.41,1.11,-2.58,2.4,-2.79],["c",.3,-.06,.84,-.03,1.23,.06],["c",.54,.12,1.08,.33,1.53,.63],["c",.12,.09,.24,.15,.24,.12],["c",0,0,-.12,-8.37,-.18,-9.75],["l",0,-.66],["l",.12,-.06],["c",.06,-.03,.18,-.09,.27,-.12],["z"],["m",-1.65,10.95],["c",-.6,-.18,-1.08,.09,-1.38,.69],["c",-.27,.6,-.36,1.38,-.18,2.07],["c",.12,.42,.42,.99,.72,1.41],["c",.3,.42,.93,1.05,1.56,1.59],["l",.48,.39],["l",0,-.12],["c",.03,-.09,.03,-.48,.06,-.9],["c",.03,-.57,.03,-1.08,0,-2.22],["c",-.03,-1.62,-.03,-1.62,-.24,-2.07],["c",-.21,-.42,-.6,-.75,-1.02,-.84],["z"]],w:6.728,h:18.801},"accidentals.dblflat":{d:[["M",-.36,-14.07],["c",.33,-.06,.87,0,1.08,.15],["c",.06,.03,.06,.36,-.03,5.25],["c",-.06,2.85,-.09,5.19,-.09,5.19],["c",0,.03,.12,-.03,.24,-.12],["c",.63,-.42,1.41,-.66,2.19,-.72],["c",.81,-.03,1.47,.21,2.04,.78],["c",.57,.54,.87,1.26,.93,2.04],["c",.03,.57,-.09,1.08,-.36,1.62],["c",-.42,.81,-1.02,1.38,-2.82,2.61],["c",-1.14,.78,-1.44,1.02,-1.8,1.44],["c",-.18,.18,-.39,.39,-.45,.42],["c",-.27,.18,-.57,.15,-.81,-.06],["c",-.06,-.09,-.12,-.18,-.15,-.27],["c",-.03,-.06,-.09,-3.27,-.18,-8.34],["c",-.09,-4.53,-.15,-8.58,-.18,-9.03],["l",0,-.78],["l",.12,-.06],["c",.06,-.03,.18,-.09,.27,-.12],["z"],["m",3.18,11.01],["c",-.21,-.12,-.54,-.15,-.81,-.06],["c",-.54,.15,-.99,.63,-1.17,1.26],["c",-.06,.3,-.12,2.88,-.06,3.87],["c",.03,.42,.03,.81,.06,.9],["l",.03,.12],["l",.45,-.39],["c",.63,-.54,1.26,-1.17,1.56,-1.59],["c",.3,-.42,.6,-.99,.72,-1.41],["c",.18,-.69,.09,-1.47,-.18,-2.07],["c",-.15,-.3,-.33,-.51,-.6,-.63],["z"],["m",3,-11],["c",.33,-.06,.87,0,1.08,.15],["c",.06,.03,.06,.36,-.03,5.25],["c",-.06,2.85,-.09,5.19,-.09,5.19],["c",0,.03,.12,-.03,.24,-.12],["c",.63,-.42,1.41,-.66,2.19,-.72],["c",.81,-.03,1.47,.21,2.04,.78],["c",.57,.54,.87,1.26,.93,2.04],["c",.03,.57,-.09,1.08,-.36,1.62],["c",-.42,.81,-1.02,1.38,-2.82,2.61],["c",-1.14,.78,-1.44,1.02,-1.8,1.44],["c",-.18,.18,-.39,.39,-.45,.42],["c",-.27,.18,-.57,.15,-.81,-.06],["c",-.06,-.09,-.12,-.18,-.15,-.27],["c",-.03,-.06,-.09,-3.27,-.18,-8.34],["c",-.09,-4.53,-.15,-8.58,-.18,-9.03],["l",0,-.78],["l",.12,-.06],["c",.06,-.03,.18,-.09,.27,-.12],["z"],["m",3.18,11.01],["c",-.21,-.12,-.54,-.15,-.81,-.06],["c",-.54,.15,-.99,.63,-1.17,1.26],["c",-.06,.3,-.12,2.88,-.06,3.87],["c",.03,.42,.03,.81,.06,.9],["l",.03,.12],["l",.45,-.39],["c",.63,-.54,1.26,-1.17,1.56,-1.59],["c",.3,-.42,.6,-.99,.72,-1.41],["c",.18,-.69,.09,-1.47,-.18,-2.07],["c",-.15,-.3,-.33,-.51,-.6,-.63],["z"]],w:12.1,h:18.804},"accidentals.dblsharp":{d:[["M",-.18,-3.96],["c",.06,-.03,.12,-.06,.15,-.06],["c",.09,0,2.76,.27,2.79,.3],["c",.12,.03,.15,.12,.15,.51],["c",.06,.96,.24,1.59,.57,2.1],["c",.06,.09,.15,.21,.18,.24],["l",.09,.06],["l",.09,-.06],["c",.03,-.03,.12,-.15,.18,-.24],["c",.33,-.51,.51,-1.14,.57,-2.1],["c",0,-.39,.03,-.45,.12,-.51],["c",.03,0,.66,-.09,1.44,-.15],["c",1.47,-.15,1.5,-.15,1.56,-.03],["c",.03,.06,0,.42,-.09,1.44],["c",-.09,.72,-.15,1.35,-.15,1.38],["c",0,.03,-.03,.09,-.06,.12],["c",-.06,.06,-.12,.09,-.51,.09],["c",-1.08,.06,-1.8,.3,-2.28,.75],["l",-.12,.09],["l",.09,.09],["c",.12,.15,.39,.33,.63,.45],["c",.42,.18,.96,.27,1.68,.33],["c",.39,0,.45,.03,.51,.09],["c",.03,.03,.06,.09,.06,.12],["c",0,.03,.06,.66,.15,1.38],["c",.09,1.02,.12,1.38,.09,1.44],["c",-.06,.12,-.09,.12,-1.56,-.03],["c",-.78,-.06,-1.41,-.15,-1.44,-.15],["c",-.09,-.06,-.12,-.12,-.12,-.54],["c",-.06,-.93,-.24,-1.56,-.57,-2.07],["c",-.06,-.09,-.15,-.21,-.18,-.24],["l",-.09,-.06],["l",-.09,.06],["c",-.03,.03,-.12,.15,-.18,.24],["c",-.33,.51,-.51,1.14,-.57,2.07],["c",0,.42,-.03,.48,-.12,.54],["c",-.03,0,-.66,.09,-1.44,.15],["c",-1.47,.15,-1.5,.15,-1.56,.03],["c",-.03,-.06,0,-.42,.09,-1.44],["c",.09,-.72,.15,-1.35,.15,-1.38],["c",0,-.03,.03,-.09,.06,-.12],["c",.06,-.06,.12,-.09,.51,-.09],["c",.72,-.06,1.26,-.15,1.68,-.33],["c",.24,-.12,.51,-.3,.63,-.45],["l",.09,-.09],["l",-.12,-.09],["c",-.48,-.45,-1.2,-.69,-2.28,-.75],["c",-.39,0,-.45,-.03,-.51,-.09],["c",-.03,-.03,-.06,-.09,-.06,-.12],["c",0,-.03,-.06,-.63,-.12,-1.38],["c",-.09,-.72,-.15,-1.35,-.15,-1.38],["z"]],w:7.95,h:7.977},"dots.dot":{d:[["M",1.32,-1.68],["c",.09,-.03,.27,-.06,.39,-.06],["c",.96,0,1.74,.78,1.74,1.71],["c",0,.96,-.78,1.74,-1.71,1.74],["c",-.96,0,-1.74,-.78,-1.74,-1.71],["c",0,-.78,.54,-1.5,1.32,-1.68],["z"]],w:3.45,h:3.45},"noteheads.dbl":{d:[["M",-.69,-4.02],["c",.18,-.09,.36,-.09,.54,0],["c",.18,.09,.24,.15,.33,.3],["c",.06,.15,.06,.18,.06,1.41],["l",0,1.23],["l",.12,-.18],["c",.72,-1.26,2.64,-2.31,4.86,-2.64],["c",.81,-.15,1.11,-.15,2.13,-.15],["c",.99,0,1.29,0,2.1,.15],["c",.75,.12,1.38,.27,2.04,.54],["c",1.35,.51,2.34,1.26,2.82,2.1],["l",.12,.18],["l",0,-1.23],["c",0,-1.2,0,-1.26,.06,-1.38],["c",.09,-.18,.15,-.24,.33,-.33],["c",.18,-.09,.36,-.09,.54,0],["c",.18,.09,.24,.15,.33,.3],["l",.06,.15],["l",0,3.54],["l",0,3.54],["l",-.06,.15],["c",-.09,.18,-.15,.24,-.33,.33],["c",-.18,.09,-.36,.09,-.54,0],["c",-.18,-.09,-.24,-.15,-.33,-.33],["c",-.06,-.12,-.06,-.18,-.06,-1.38],["l",0,-1.23],["l",-.12,.18],["c",-.48,.84,-1.47,1.59,-2.82,2.1],["c",-.84,.33,-1.71,.54,-2.85,.66],["c",-.45,.06,-2.16,.06,-2.61,0],["c",-1.14,-.12,-2.01,-.33,-2.85,-.66],["c",-1.35,-.51,-2.34,-1.26,-2.82,-2.1],["l",-.12,-.18],["l",0,1.23],["c",0,1.23,0,1.26,-.06,1.38],["c",-.09,.18,-.15,.24,-.33,.33],["c",-.18,.09,-.36,.09,-.54,0],["c",-.18,-.09,-.24,-.15,-.33,-.33],["l",-.06,-.15],["l",0,-3.54],["c",0,-3.48,0,-3.54,.06,-3.66],["c",.09,-.18,.15,-.24,.33,-.33],["z"],["m",7.71,.63],["c",-.36,-.06,-.9,-.06,-1.14,0],["c",-.3,.03,-.66,.24,-.87,.42],["c",-.6,.54,-.9,1.62,-.75,2.82],["c",.12,.93,.51,1.68,1.11,2.31],["c",.75,.72,1.83,1.2,2.85,1.26],["c",1.05,.06,1.83,-.54,2.1,-1.65],["c",.21,-.9,.12,-1.95,-.24,-2.82],["c",-.36,-.81,-1.08,-1.53,-1.95,-1.95],["c",-.3,-.15,-.78,-.3,-1.11,-.39],["z"]],w:16.83,h:8.145},"noteheads.whole":{d:[["M",6.51,-4.05],["c",.51,-.03,2.01,0,2.52,.03],["c",1.41,.18,2.64,.51,3.72,1.08],["c",1.2,.63,1.95,1.41,2.19,2.31],["c",.09,.33,.09,.9,0,1.23],["c",-.24,.9,-.99,1.68,-2.19,2.31],["c",-1.08,.57,-2.28,.9,-3.75,1.08],["c",-.66,.06,-2.31,.06,-2.97,0],["c",-1.47,-.18,-2.67,-.51,-3.75,-1.08],["c",-1.2,-.63,-1.95,-1.41,-2.19,-2.31],["c",-.09,-.33,-.09,-.9,0,-1.23],["c",.24,-.9,.99,-1.68,2.19,-2.31],["c",1.2,-.63,2.61,-.99,4.23,-1.11],["z"],["m",.57,.66],["c",-.87,-.15,-1.53,0,-2.04,.51],["c",-.15,.15,-.24,.27,-.33,.48],["c",-.24,.51,-.36,1.08,-.33,1.77],["c",.03,.69,.18,1.26,.42,1.77],["c",.6,1.17,1.74,1.98,3.18,2.22],["c",1.11,.21,1.95,-.15,2.34,-.99],["c",.24,-.51,.36,-1.08,.33,-1.8],["c",-.06,-1.11,-.45,-2.04,-1.17,-2.76],["c",-.63,-.63,-1.47,-1.05,-2.4,-1.2],["z"]],w:14.985,h:8.097},"noteheads.half":{d:[["M",7.44,-4.05],["c",.06,-.03,.27,-.03,.48,-.03],["c",1.05,0,1.71,.24,2.1,.81],["c",.42,.6,.45,1.35,.18,2.4],["c",-.42,1.59,-1.14,2.73,-2.16,3.39],["c",-1.41,.93,-3.18,1.44,-5.4,1.53],["c",-1.17,.03,-1.89,-.21,-2.28,-.81],["c",-.42,-.6,-.45,-1.35,-.18,-2.4],["c",.42,-1.59,1.14,-2.73,2.16,-3.39],["c",.63,-.42,1.23,-.72,1.98,-.96],["c",.9,-.3,1.65,-.42,3.12,-.54],["z"],["m",1.29,.87],["c",-.27,-.09,-.63,-.12,-.9,-.03],["c",-.72,.24,-1.53,.69,-3.27,1.8],["c",-2.34,1.5,-3.3,2.25,-3.57,2.79],["c",-.36,.72,-.06,1.5,.66,1.77],["c",.24,.12,.69,.09,.99,0],["c",.84,-.3,1.92,-.93,4.14,-2.37],["c",1.62,-1.08,2.37,-1.71,2.61,-2.19],["c",.36,-.72,.06,-1.5,-.66,-1.77],["z"]],w:10.37,h:8.132},"noteheads.quarter":{d:[["M",6.09,-4.05],["c",.36,-.03,1.2,0,1.53,.06],["c",1.17,.24,1.89,.84,2.16,1.83],["c",.06,.18,.06,.3,.06,.66],["c",0,.45,0,.63,-.15,1.08],["c",-.66,2.04,-3.06,3.93,-5.52,4.38],["c",-.54,.09,-1.44,.09,-1.83,.03],["c",-1.23,-.27,-1.98,-.87,-2.25,-1.86],["c",-.06,-.18,-.06,-.3,-.06,-.66],["c",0,-.45,0,-.63,.15,-1.08],["c",.24,-.78,.75,-1.53,1.44,-2.22],["c",1.2,-1.2,2.85,-2.01,4.47,-2.22],["z"]],w:9.81,h:8.094},"noteheads.slash.nostem":{d:[["M",9.3,-7.77],["c",.06,-.06,.18,-.06,1.71,-.06],["l",1.65,0],["l",.09,.09],["c",.06,.06,.06,.09,.06,.15],["c",-.03,.12,-9.21,15.24,-9.3,15.33],["c",-.06,.06,-.18,.06,-1.71,.06],["l",-1.65,0],["l",-.09,-.09],["c",-.06,-.06,-.06,-.09,-.06,-.15],["c",.03,-.12,9.21,-15.24,9.3,-15.33],["z"]],w:12.81,h:15.63},"noteheads.indeterminate":{d:[["M",.78,-4.05],["c",.12,-.03,.24,-.03,.36,.03],["c",.03,.03,.93,.72,1.95,1.56],["l",1.86,1.5],["l",1.86,-1.5],["c",1.02,-.84,1.92,-1.53,1.95,-1.56],["c",.21,-.12,.33,-.09,.75,.24],["c",.3,.27,.36,.36,.36,.54],["c",0,.03,-.03,.12,-.06,.18],["c",-.03,.06,-.9,.75,-1.89,1.56],["l",-1.8,1.47],["c",0,.03,.81,.69,1.8,1.5],["c",.99,.81,1.86,1.5,1.89,1.56],["c",.03,.06,.06,.15,.06,.18],["c",0,.18,-.06,.27,-.36,.54],["c",-.42,.33,-.54,.36,-.75,.24],["c",-.03,-.03,-.93,-.72,-1.95,-1.56],["l",-1.86,-1.5],["l",-1.86,1.5],["c",-1.02,.84,-1.92,1.53,-1.95,1.56],["c",-.21,.12,-.33,.09,-.75,-.24],["c",-.3,-.27,-.36,-.36,-.36,-.54],["c",0,-.03,.03,-.12,.06,-.18],["c",.03,-.06,.9,-.75,1.89,-1.56],["l",1.8,-1.47],["c",0,-.03,-.81,-.69,-1.8,-1.5],["c",-.99,-.81,-1.86,-1.5,-1.89,-1.56],["c",-.06,-.12,-.09,-.21,-.03,-.36],["c",.03,-.09,.57,-.57,.72,-.63],["z"]],w:9.843,h:8.139},"scripts.ufermata":{d:[["M",-.75,-10.77],["c",.12,0,.45,-.03,.69,-.03],["c",2.91,-.03,5.55,1.53,7.41,4.35],["c",1.17,1.71,1.95,3.72,2.43,6.03],["c",.12,.51,.12,.57,.03,.69],["c",-.12,.21,-.48,.27,-.69,.12],["c",-.12,-.09,-.18,-.24,-.27,-.69],["c",-.78,-3.63,-3.42,-6.54,-6.78,-7.38],["c",-.78,-.21,-1.2,-.24,-2.07,-.24],["c",-.63,0,-.84,0,-1.2,.06],["c",-1.83,.27,-3.42,1.08,-4.8,2.37],["c",-1.41,1.35,-2.4,3.21,-2.85,5.19],["c",-.09,.45,-.15,.6,-.27,.69],["c",-.21,.15,-.57,.09,-.69,-.12],["c",-.09,-.12,-.09,-.18,.03,-.69],["c",.33,-1.62,.78,-3,1.47,-4.38],["c",1.77,-3.54,4.44,-5.67,7.56,-5.97],["z"],["m",.33,7.47],["c",1.38,-.3,2.58,.9,2.31,2.25],["c",-.15,.72,-.78,1.35,-1.47,1.5],["c",-1.38,.27,-2.58,-.93,-2.31,-2.31],["c",.15,-.69,.78,-1.29,1.47,-1.44],["z"]],w:19.748,h:11.289},"scripts.dfermata":{d:[["M",-9.63,-.42],["c",.15,-.09,.36,-.06,.51,.03],["c",.12,.09,.18,.24,.27,.66],["c",.78,3.66,3.42,6.57,6.78,7.41],["c",.78,.21,1.2,.24,2.07,.24],["c",.63,0,.84,0,1.2,-.06],["c",1.83,-.27,3.42,-1.08,4.8,-2.37],["c",1.41,-1.35,2.4,-3.21,2.85,-5.22],["c",.09,-.42,.15,-.57,.27,-.66],["c",.21,-.15,.57,-.09,.69,.12],["c",.09,.12,.09,.18,-.03,.69],["c",-.33,1.62,-.78,3,-1.47,4.38],["c",-1.92,3.84,-4.89,6,-8.31,6],["c",-3.42,0,-6.39,-2.16,-8.31,-6],["c",-.48,-.96,-.84,-1.92,-1.14,-2.97],["c",-.18,-.69,-.42,-1.74,-.42,-1.92],["c",0,-.12,.09,-.27,.24,-.33],["z"],["m",9.21,0],["c",1.2,-.27,2.34,.63,2.34,1.86],["c",0,.9,-.66,1.68,-1.5,1.89],["c",-1.38,.27,-2.58,-.93,-2.31,-2.31],["c",.15,-.69,.78,-1.29,1.47,-1.44],["z"]],w:19.744,h:11.274},"scripts.sforzato":{d:[["M",-6.45,-3.69],["c",.06,-.03,.15,-.06,.18,-.06],["c",.06,0,2.85,.72,6.24,1.59],["l",6.33,1.65],["c",.33,.06,.45,.21,.45,.51],["c",0,.3,-.12,.45,-.45,.51],["l",-6.33,1.65],["c",-3.39,.87,-6.18,1.59,-6.21,1.59],["c",-.21,0,-.48,-.24,-.51,-.45],["c",0,-.15,.06,-.36,.18,-.45],["c",.09,-.06,.87,-.27,3.84,-1.05],["c",2.04,-.54,3.84,-.99,4.02,-1.02],["c",.15,-.06,1.14,-.24,2.22,-.42],["c",1.05,-.18,1.92,-.36,1.92,-.36],["c",0,0,-.87,-.18,-1.92,-.36],["c",-1.08,-.18,-2.07,-.36,-2.22,-.42],["c",-.18,-.03,-1.98,-.48,-4.02,-1.02],["c",-2.97,-.78,-3.75,-.99,-3.84,-1.05],["c",-.12,-.09,-.18,-.3,-.18,-.45],["c",.03,-.15,.15,-.3,.3,-.39],["z"]],w:13.5,h:7.5},"scripts.staccato":{d:[["M",-.36,-1.47],["c",.93,-.21,1.86,.51,1.86,1.47],["c",0,.93,-.87,1.65,-1.8,1.47],["c",-.54,-.12,-1.02,-.57,-1.14,-1.08],["c",-.21,-.81,.27,-1.65,1.08,-1.86],["z"]],w:2.989,h:3.004},"scripts.tenuto":{d:[["M",-4.2,-.48],["l",.12,-.06],["l",4.08,0],["l",4.08,0],["l",.12,.06],["c",.39,.21,.39,.75,0,.96],["l",-.12,.06],["l",-4.08,0],["l",-4.08,0],["l",-.12,-.06],["c",-.39,-.21,-.39,-.75,0,-.96],["z"]],w:8.985,h:1.08},"scripts.umarcato":{d:[["M",-.15,-8.19],["c",.15,-.12,.36,-.03,.45,.15],["c",.21,.42,3.45,7.65,3.45,7.71],["c",0,.12,-.12,.27,-.21,.3],["c",-.03,.03,-.51,.03,-1.14,.03],["c",-1.05,0,-1.08,0,-1.17,-.06],["c",-.09,-.06,-.24,-.36,-1.17,-2.4],["c",-.57,-1.29,-1.05,-2.34,-1.08,-2.34],["c",0,-.03,-.51,1.02,-1.08,2.34],["c",-.93,2.07,-1.08,2.34,-1.14,2.4],["c",-.06,.03,-.15,.06,-.18,.06],["c",-.15,0,-.33,-.18,-.33,-.33],["c",0,-.06,3.24,-7.32,3.45,-7.71],["c",.03,-.06,.09,-.15,.15,-.15],["z"]],w:7.5,h:8.245},"scripts.dmarcato":{d:[["M",-3.57,.03],["c",.03,0,.57,-.03,1.17,-.03],["c",1.05,0,1.08,0,1.17,.06],["c",.09,.06,.24,.36,1.17,2.4],["c",.57,1.29,1.05,2.34,1.08,2.34],["c",0,.03,.51,-1.02,1.08,-2.34],["c",.93,-2.07,1.08,-2.34,1.14,-2.4],["c",.06,-.03,.15,-.06,.18,-.06],["c",.15,0,.33,.18,.33,.33],["c",0,.09,-3.45,7.74,-3.54,7.83],["c",-.12,.12,-.3,.12,-.42,0],["c",-.09,-.09,-3.54,-7.74,-3.54,-7.83],["c",0,-.09,.12,-.27,.18,-.3],["z"]],w:7.5,h:8.25},"scripts.stopped":{d:[["M",-.27,-4.08],["c",.18,-.09,.36,-.09,.54,0],["c",.18,.09,.24,.15,.33,.3],["l",.06,.15],["l",0,1.5],["l",0,1.47],["l",1.47,0],["l",1.5,0],["l",.15,.06],["c",.15,.09,.21,.15,.3,.33],["c",.09,.18,.09,.36,0,.54],["c",-.09,.18,-.15,.24,-.33,.33],["c",-.12,.06,-.18,.06,-1.62,.06],["l",-1.47,0],["l",0,1.47],["l",0,1.47],["l",-.06,.15],["c",-.09,.18,-.15,.24,-.33,.33],["c",-.18,.09,-.36,.09,-.54,0],["c",-.18,-.09,-.24,-.15,-.33,-.33],["l",-.06,-.15],["l",0,-1.47],["l",0,-1.47],["l",-1.47,0],["c",-1.44,0,-1.5,0,-1.62,-.06],["c",-.18,-.09,-.24,-.15,-.33,-.33],["c",-.09,-.18,-.09,-.36,0,-.54],["c",.09,-.18,.15,-.24,.33,-.33],["l",.15,-.06],["l",1.47,0],["l",1.47,0],["l",0,-1.47],["c",0,-1.44,0,-1.5,.06,-1.62],["c",.09,-.18,.15,-.24,.33,-.33],["z"]],w:8.295,h:8.295},"scripts.upbow":{d:[["M",-4.65,-15.54],["c",.12,-.09,.36,-.06,.48,.03],["c",.03,.03,.09,.09,.12,.15],["c",.03,.06,.66,2.13,1.41,4.62],["c",1.35,4.41,1.38,4.56,2.01,6.96],["l",.63,2.46],["l",.63,-2.46],["c",.63,-2.4,.66,-2.55,2.01,-6.96],["c",.75,-2.49,1.38,-4.56,1.41,-4.62],["c",.06,-.15,.18,-.21,.36,-.24],["c",.15,0,.3,.06,.39,.18],["c",.15,.21,.24,-.18,-2.1,7.56],["c",-1.2,3.96,-2.22,7.32,-2.25,7.41],["c",0,.12,-.06,.27,-.09,.3],["c",-.12,.21,-.6,.21,-.72,0],["c",-.03,-.03,-.09,-.18,-.09,-.3],["c",-.03,-.09,-1.05,-3.45,-2.25,-7.41],["c",-2.34,-7.74,-2.25,-7.35,-2.1,-7.56],["c",.03,-.03,.09,-.09,.15,-.12],["z"]],w:9.73,h:15.608},"scripts.downbow":{d:[["M",-5.55,-9.93],["l",.09,-.06],["l",5.46,0],["l",5.46,0],["l",.09,.06],["l",.06,.09],["l",0,4.77],["c",0,5.28,0,4.89,-.18,5.01],["c",-.18,.12,-.42,.06,-.54,-.12],["c",-.06,-.09,-.06,-.18,-.06,-2.97],["l",0,-2.85],["l",-4.83,0],["l",-4.83,0],["l",0,2.85],["c",0,2.79,0,2.88,-.06,2.97],["c",-.15,.24,-.51,.24,-.66,0],["c",-.06,-.09,-.06,-.21,-.06,-4.89],["l",0,-4.77],["z"]],w:11.22,h:9.992},"scripts.turn":{d:[["M",-4.77,-3.9],["c",.36,-.06,1.05,-.06,1.44,.03],["c",.78,.15,1.5,.51,2.34,1.14],["c",.6,.45,1.05,.87,2.22,2.01],["c",1.11,1.08,1.62,1.5,2.22,1.86],["c",.6,.36,1.32,.57,1.92,.57],["c",.9,0,1.71,-.57,1.89,-1.35],["c",.24,-.93,-.39,-1.89,-1.35,-2.1],["l",-.15,-.06],["l",-.09,.15],["c",-.03,.09,-.15,.24,-.24,.33],["c",-.72,.72,-2.04,.54,-2.49,-.36],["c",-.48,-.93,.03,-1.86,1.17,-2.19],["c",.3,-.09,1.02,-.09,1.35,0],["c",.99,.27,1.74,.87,2.25,1.83],["c",.69,1.41,.63,3,-.21,4.26],["c",-.21,.3,-.69,.81,-.99,1.02],["c",-.3,.21,-.84,.45,-1.17,.54],["c",-1.23,.36,-2.49,.15,-3.72,-.6],["c",-.75,-.48,-1.41,-1.02,-2.85,-2.46],["c",-1.11,-1.08,-1.62,-1.5,-2.22,-1.86],["c",-.6,-.36,-1.32,-.57,-1.92,-.57],["c",-.9,0,-1.71,.57,-1.89,1.35],["c",-.24,.93,.39,1.89,1.35,2.1],["l",.15,.06],["l",.09,-.15],["c",.03,-.09,.15,-.24,.24,-.33],["c",.72,-.72,2.04,-.54,2.49,.36],["c",.48,.93,-.03,1.86,-1.17,2.19],["c",-.3,.09,-1.02,.09,-1.35,0],["c",-.99,-.27,-1.74,-.87,-2.25,-1.83],["c",-.69,-1.41,-.63,-3,.21,-4.26],["c",.21,-.3,.69,-.81,.99,-1.02],["c",.48,-.33,1.11,-.57,1.74,-.66],["z"]],w:16.366,h:7.893},"scripts.trill":{d:[["M",-.51,-16.02],["c",.12,-.09,.21,-.18,.21,-.18],["l",-.81,4.02],["l",-.81,4.02],["c",.03,0,.51,-.27,1.08,-.6],["c",.6,-.3,1.14,-.63,1.26,-.66],["c",1.14,-.54,2.31,-.6,3.09,-.18],["c",.27,.15,.54,.36,.6,.51],["l",.06,.12],["l",.21,-.21],["c",.9,-.81,2.22,-.99,3.12,-.42],["c",.6,.42,.9,1.14,.78,2.07],["c",-.15,1.29,-1.05,2.31,-1.95,2.25],["c",-.48,-.03,-.78,-.3,-.96,-.81],["c",-.09,-.27,-.09,-.9,-.03,-1.2],["c",.21,-.75,.81,-1.23,1.59,-1.32],["l",.24,-.03],["l",-.09,-.12],["c",-.51,-.66,-1.62,-.63,-2.31,.03],["c",-.39,.42,-.3,.09,-1.23,4.77],["l",-.81,4.14],["c",-.03,0,-.12,-.03,-.21,-.09],["c",-.33,-.15,-.54,-.18,-.99,-.18],["c",-.42,0,-.66,.03,-1.05,.18],["c",-.12,.06,-.21,.09,-.21,.09],["c",0,-.03,.36,-1.86,.81,-4.11],["c",.9,-4.47,.87,-4.26,.69,-4.53],["c",-.21,-.36,-.66,-.51,-1.17,-.36],["c",-.15,.06,-2.22,1.14,-2.58,1.38],["c",-.12,.09,-.12,.09,-.21,.6],["l",-.09,.51],["l",.21,.24],["c",.63,.75,1.02,1.47,1.2,2.19],["c",.06,.27,.06,.36,.06,.81],["c",0,.42,0,.54,-.06,.78],["c",-.15,.54,-.33,.93,-.63,1.35],["c",-.18,.24,-.57,.63,-.81,.78],["c",-.24,.15,-.63,.36,-.84,.42],["c",-.27,.06,-.66,.06,-.87,.03],["c",-.81,-.18,-1.32,-1.05,-1.38,-2.46],["c",-.03,-.6,.03,-.99,.33,-2.46],["c",.21,-1.08,.24,-1.32,.21,-1.29],["c",-1.2,.48,-2.4,.75,-3.21,.72],["c",-.69,-.06,-1.17,-.3,-1.41,-.72],["c",-.39,-.75,-.12,-1.8,.66,-2.46],["c",.24,-.18,.69,-.42,1.02,-.51],["c",.69,-.18,1.53,-.15,2.31,.09],["c",.3,.09,.75,.3,.99,.45],["c",.12,.09,.15,.09,.15,.03],["c",.03,-.03,.33,-1.59,.72,-3.45],["c",.36,-1.86,.66,-3.42,.69,-3.45],["c",0,-.03,.03,-.03,.21,.03],["c",.21,.06,.27,.06,.48,.06],["c",.42,-.03,.78,-.18,1.26,-.48],["c",.15,-.12,.36,-.27,.48,-.39],["z"],["m",-5.73,7.68],["c",-.27,-.03,-.96,-.06,-1.2,-.03],["c",-.81,.12,-1.35,.57,-1.5,1.2],["c",-.18,.66,.12,1.14,.75,1.29],["c",.66,.12,1.92,-.12,3.18,-.66],["l",.33,-.15],["l",.09,-.39],["c",.06,-.21,.09,-.42,.09,-.45],["c",0,-.03,-.45,-.3,-.75,-.45],["c",-.27,-.15,-.66,-.27,-.99,-.36],["z"],["m",4.29,3.63],["c",-.24,-.39,-.51,-.75,-.51,-.69],["c",-.06,.12,-.39,1.92,-.45,2.28],["c",-.09,.54,-.12,1.14,-.06,1.38],["c",.06,.42,.21,.6,.51,.57],["c",.39,-.06,.75,-.48,.93,-1.14],["c",.09,-.33,.09,-1.05,0,-1.38],["c",-.09,-.39,-.24,-.69,-.42,-1.02],["z"]],w:17.963,h:16.49},"scripts.segno":{d:[["M",-3.72,-11.22],["c",.78,-.09,1.59,.03,2.31,.42],["c",1.2,.6,2.01,1.71,2.31,3.09],["c",.09,.42,.09,1.2,.03,1.5],["c",-.15,.45,-.39,.81,-.66,.93],["c",-.33,.18,-.84,.21,-1.23,.15],["c",-.81,-.18,-1.32,-.93,-1.26,-1.89],["c",.03,-.36,.09,-.57,.24,-.9],["c",.15,-.33,.45,-.6,.72,-.75],["c",.12,-.06,.18,-.09,.18,-.12],["c",0,-.03,-.03,-.15,-.09,-.24],["c",-.18,-.45,-.54,-.87,-.96,-1.08],["c",-1.11,-.57,-2.34,-.18,-2.88,.9],["c",-.24,.51,-.33,1.11,-.24,1.83],["c",.27,1.92,1.5,3.54,3.93,5.13],["c",.48,.33,1.26,.78,1.29,.78],["c",.03,0,1.35,-2.19,2.94,-4.89],["l",2.88,-4.89],["l",.84,0],["l",.87,0],["l",-.03,.06],["c",-.15,.21,-6.15,10.41,-6.15,10.44],["c",0,0,.21,.15,.48,.27],["c",2.61,1.47,4.35,3.03,5.13,4.65],["c",1.14,2.34,.51,5.07,-1.44,6.39],["c",-.66,.42,-1.32,.63,-2.13,.69],["c",-2.01,.09,-3.81,-1.41,-4.26,-3.54],["c",-.09,-.42,-.09,-1.2,-.03,-1.5],["c",.15,-.45,.39,-.81,.66,-.93],["c",.33,-.18,.84,-.21,1.23,-.15],["c",.81,.18,1.32,.93,1.26,1.89],["c",-.03,.36,-.09,.57,-.24,.9],["c",-.15,.33,-.45,.6,-.72,.75],["c",-.12,.06,-.18,.09,-.18,.12],["c",0,.03,.03,.15,.09,.24],["c",.18,.45,.54,.87,.96,1.08],["c",1.11,.57,2.34,.18,2.88,-.9],["c",.24,-.51,.33,-1.11,.24,-1.83],["c",-.27,-1.92,-1.5,-3.54,-3.93,-5.13],["c",-.48,-.33,-1.26,-.78,-1.29,-.78],["c",-.03,0,-1.35,2.19,-2.91,4.89],["l",-2.88,4.89],["l",-.87,0],["l",-.87,0],["l",.03,-.06],["c",.15,-.21,6.15,-10.41,6.15,-10.44],["c",0,0,-.21,-.15,-.48,-.3],["c",-2.61,-1.44,-4.35,-3,-5.13,-4.62],["c",-.9,-1.89,-.72,-4.02,.48,-5.52],["c",.69,-.84,1.68,-1.41,2.73,-1.53],["z"],["m",8.76,9.09],["c",.03,-.03,.15,-.03,.27,-.03],["c",.33,.03,.57,.18,.72,.48],["c",.09,.18,.09,.57,0,.75],["c",-.09,.18,-.21,.3,-.36,.39],["c",-.15,.06,-.21,.06,-.39,.06],["c",-.21,0,-.27,0,-.39,-.06],["c",-.3,-.15,-.48,-.45,-.48,-.75],["c",0,-.39,.24,-.72,.63,-.84],["z"],["m",-10.53,2.61],["c",.03,-.03,.15,-.03,.27,-.03],["c",.33,.03,.57,.18,.72,.48],["c",.09,.18,.09,.57,0,.75],["c",-.09,.18,-.21,.3,-.36,.39],["c",-.15,.06,-.21,.06,-.39,.06],["c",-.21,0,-.27,0,-.39,-.06],["c",-.3,-.15,-.48,-.45,-.48,-.75],["c",0,-.39,.24,-.72,.63,-.84],["z"]],w:15,h:22.504},"scripts.coda":{d:[["M",-.21,-10.47],["c",.18,-.12,.42,-.06,.54,.12],["c",.06,.09,.06,.18,.06,1.5],["l",0,1.38],["l",.18,0],["c",.39,.06,.96,.24,1.38,.48],["c",1.68,.93,2.82,3.24,3.03,6.12],["c",.03,.24,.03,.45,.03,.45],["c",0,.03,.6,.03,1.35,.03],["c",1.5,0,1.47,0,1.59,.18],["c",.09,.12,.09,.3,0,.42],["c",-.12,.18,-.09,.18,-1.59,.18],["c",-.75,0,-1.35,0,-1.35,.03],["c",0,0,0,.21,-.03,.42],["c",-.24,3.15,-1.53,5.58,-3.45,6.36],["c",-.27,.12,-.72,.24,-.96,.27],["l",-.18,0],["l",0,1.38],["c",0,1.32,0,1.41,-.06,1.5],["c",-.15,.24,-.51,.24,-.66,0],["c",-.06,-.09,-.06,-.18,-.06,-1.5],["l",0,-1.38],["l",-.18,0],["c",-.39,-.06,-.96,-.24,-1.38,-.48],["c",-1.68,-.93,-2.82,-3.24,-3.03,-6.15],["c",-.03,-.21,-.03,-.42,-.03,-.42],["c",0,-.03,-.6,-.03,-1.35,-.03],["c",-1.5,0,-1.47,0,-1.59,-.18],["c",-.09,-.12,-.09,-.3,0,-.42],["c",.12,-.18,.09,-.18,1.59,-.18],["c",.75,0,1.35,0,1.35,-.03],["c",0,0,0,-.21,.03,-.45],["c",.24,-3.12,1.53,-5.55,3.45,-6.33],["c",.27,-.12,.72,-.24,.96,-.27],["l",.18,0],["l",0,-1.38],["c",0,-1.53,0,-1.5,.18,-1.62],["z"],["m",-.18,6.93],["c",0,-2.97,0,-3.15,-.06,-3.15],["c",-.09,0,-.51,.15,-.66,.21],["c",-.87,.51,-1.38,1.62,-1.56,3.51],["c",-.06,.54,-.12,1.59,-.12,2.16],["l",0,.42],["l",1.2,0],["l",1.2,0],["l",0,-3.15],["z"],["m",1.17,-3.06],["c",-.09,-.03,-.21,-.06,-.27,-.09],["l",-.12,0],["l",0,3.15],["l",0,3.15],["l",1.2,0],["l",1.2,0],["l",0,-.81],["c",-.06,-2.4,-.33,-3.69,-.93,-4.59],["c",-.27,-.39,-.66,-.69,-1.08,-.81],["z"],["m",-1.17,10.14],["l",0,-3.15],["l",-1.2,0],["l",-1.2,0],["l",0,.81],["c",.03,.96,.06,1.47,.15,2.13],["c",.24,2.04,.96,3.12,2.13,3.36],["l",.12,0],["l",0,-3.15],["z"],["m",3.18,-2.34],["l",0,-.81],["l",-1.2,0],["l",-1.2,0],["l",0,3.15],["l",0,3.15],["l",.12,0],["c",1.17,-.24,1.89,-1.32,2.13,-3.36],["c",.09,-.66,.12,-1.17,.15,-2.13],["z"]],w:16.035,h:21.062},"scripts.comma":{d:[["M",1.14,-4.62],["c",.3,-.12,.69,-.03,.93,.15],["c",.12,.12,.36,.45,.51,.78],["c",.9,1.77,.54,4.05,-1.08,6.75],["c",-.36,.63,-.87,1.38,-.96,1.44],["c",-.18,.12,-.42,.06,-.54,-.12],["c",-.09,-.18,-.09,-.3,.12,-.6],["c",.96,-1.44,1.44,-2.97,1.38,-4.35],["c",-.06,-.93,-.3,-1.68,-.78,-2.46],["c",-.27,-.39,-.33,-.63,-.24,-.96],["c",.09,-.27,.36,-.54,.66,-.63],["z"]],w:3.042,h:9.237},"scripts.roll":{d:[["M",1.95,-6],["c",.21,-.09,.36,-.09,.57,0],["c",.39,.15,.63,.39,1.47,1.35],["c",.66,.75,.78,.87,1.08,1.05],["c",.75,.45,1.65,.42,2.4,-.06],["c",.12,-.09,.27,-.27,.54,-.6],["c",.42,-.54,.51,-.63,.69,-.63],["c",.09,0,.3,.12,.36,.21],["c",.09,.12,.12,.3,.03,.42],["c",-.06,.12,-3.15,3.9,-3.3,4.08],["c",-.06,.06,-.18,.12,-.27,.18],["c",-.27,.12,-.6,.06,-.99,-.27],["c",-.27,-.21,-.42,-.39,-1.08,-1.14],["c",-.63,-.72,-.81,-.9,-1.17,-1.08],["c",-.36,-.18,-.57,-.21,-.99,-.21],["c",-.39,0,-.63,.03,-.93,.18],["c",-.36,.15,-.51,.27,-.9,.81],["c",-.24,.27,-.45,.51,-.48,.54],["c",-.12,.09,-.27,.06,-.39,0],["c",-.24,-.15,-.33,-.39,-.21,-.6],["c",.09,-.12,3.18,-3.87,3.33,-4.02],["c",.06,-.06,.18,-.15,.24,-.21],["z"]],w:10.817,h:6.125},"scripts.prall":{d:[["M",-4.38,-3.69],["c",.06,-.03,.18,-.06,.24,-.06],["c",.3,0,.27,-.03,1.89,1.95],["l",1.53,1.83],["c",.03,0,.57,-.84,1.23,-1.83],["c",1.14,-1.68,1.23,-1.83,1.35,-1.89],["c",.06,-.03,.18,-.06,.24,-.06],["c",.3,0,.27,-.03,1.89,1.95],["l",1.53,1.83],["l",.48,-.69],["c",.51,-.78,.54,-.84,.69,-.9],["c",.42,-.18,.87,.15,.81,.6],["c",-.03,.12,-.3,.51,-1.5,2.37],["c",-1.38,2.07,-1.5,2.22,-1.62,2.28],["c",-.06,.03,-.18,.06,-.24,.06],["c",-.3,0,-.27,.03,-1.89,-1.95],["l",-1.53,-1.83],["c",-.03,0,-.57,.84,-1.23,1.83],["c",-1.14,1.68,-1.23,1.83,-1.35,1.89],["c",-.06,.03,-.18,.06,-.24,.06],["c",-.3,0,-.27,.03,-1.89,-1.95],["l",-1.53,-1.83],["l",-.48,.69],["c",-.51,.78,-.54,.84,-.69,.9],["c",-.42,.18,-.87,-.15,-.81,-.6],["c",.03,-.12,.3,-.51,1.5,-2.37],["c",1.38,-2.07,1.5,-2.22,1.62,-2.28],["z"]],w:15.011,h:7.5},"scripts.arpeggio":{d:[["M",1.5,0],["c",1.5,2,1.5,3,1.5,3],["s",0,1,-2,1.5],["s",-.5,3,1,5.5],["l",1.5,0],["s",-1.75,-2,-1.9,-3.25],["s",2.15,-.6,2.95,-1.6],["s",.45,-1,.5,-1.25],["s",0,-1,-2,-3.9],["l",-1.5,0],["z"]],w:5,h:10},"scripts.mordent":{d:[["M",-.21,-4.95],["c",.27,-.15,.63,0,.75,.27],["c",.06,.12,.06,.24,.06,1.44],["l",0,1.29],["l",.57,-.84],["c",.51,-.75,.57,-.84,.69,-.9],["c",.06,-.03,.18,-.06,.24,-.06],["c",.3,0,.27,-.03,1.89,1.95],["l",1.53,1.83],["l",.48,-.69],["c",.51,-.78,.54,-.84,.69,-.9],["c",.42,-.18,.87,.15,.81,.6],["c",-.03,.12,-.3,.51,-1.5,2.37],["c",-1.38,2.07,-1.5,2.22,-1.62,2.28],["c",-.06,.03,-.18,.06,-.24,.06],["c",-.3,0,-.27,.03,-1.83,-1.89],["c",-.81,-.99,-1.5,-1.8,-1.53,-1.86],["c",-.06,-.03,-.06,-.03,-.12,.03],["c",-.06,.06,-.06,.15,-.06,2.28],["c",0,1.95,0,2.25,-.06,2.34],["c",-.18,.45,-.81,.48,-1.05,.03],["c",-.03,-.06,-.06,-.24,-.06,-1.41],["l",0,-1.35],["l",-.57,.84],["c",-.54,.78,-.6,.87,-.72,.93],["c",-.06,.03,-.18,.06,-.24,.06],["c",-.3,0,-.27,.03,-1.89,-1.95],["l",-1.53,-1.83],["l",-.48,.69],["c",-.51,.78,-.54,.84,-.69,.9],["c",-.42,.18,-.87,-.15,-.81,-.6],["c",.03,-.12,.3,-.51,1.5,-2.37],["c",1.38,-2.07,1.5,-2.22,1.62,-2.28],["c",.06,-.03,.18,-.06,.24,-.06],["c",.3,0,.27,-.03,1.89,1.95],["l",1.53,1.83],["c",.03,0,.06,-.06,.09,-.09],["c",.06,-.12,.06,-.15,.06,-2.28],["c",0,-1.92,0,-2.22,.06,-2.31],["c",.06,-.15,.15,-.24,.3,-.3],["z"]],w:15.011,h:10.012},"flags.u8th":{d:[["M",-.42,3.75],["l",0,-3.75],["l",.21,0],["l",.21,0],["l",0,.18],["c",0,.3,.06,.84,.12,1.23],["c",.24,1.53,.9,3.12,2.13,5.16],["l",.99,1.59],["c",.87,1.44,1.38,2.34,1.77,3.09],["c",.81,1.68,1.2,3.06,1.26,4.53],["c",.03,1.53,-.21,3.27,-.75,5.01],["c",-.21,.69,-.51,1.5,-.6,1.59],["c",-.09,.12,-.27,.21,-.42,.21],["c",-.15,0,-.42,-.12,-.51,-.21],["c",-.15,-.18,-.18,-.42,-.09,-.66],["c",.15,-.33,.45,-1.2,.57,-1.62],["c",.42,-1.38,.6,-2.58,.6,-3.9],["c",0,-.66,0,-.81,-.06,-1.11],["c",-.39,-2.07,-1.8,-4.26,-4.59,-7.14],["l",-.42,-.45],["l",-.21,0],["l",-.21,0],["l",0,-3.75],["z"]],w:6.692,h:22.59},"flags.u16th":{d:[["M",-.42,7.5],["l",0,-7.5],["l",.21,0],["l",.21,0],["l",0,.39],["c",.06,1.08,.39,2.19,.99,3.39],["c",.45,.9,.87,1.59,1.95,3.12],["c",1.29,1.86,1.77,2.64,2.22,3.57],["c",.45,.93,.72,1.8,.87,2.64],["c",.06,.51,.06,1.5,0,1.92],["c",-.12,.6,-.3,1.2,-.54,1.71],["l",-.09,.24],["l",.18,.45],["c",.51,1.2,.72,2.22,.69,3.42],["c",-.06,1.53,-.39,3.03,-.99,4.53],["c",-.3,.75,-.36,.81,-.57,.9],["c",-.15,.09,-.33,.06,-.48,0],["c",-.18,-.09,-.27,-.18,-.33,-.33],["c",-.09,-.18,-.06,-.3,.12,-.75],["c",.66,-1.41,1.02,-2.88,1.08,-4.32],["c",0,-.6,-.03,-1.05,-.18,-1.59],["c",-.3,-1.2,-.99,-2.4,-2.25,-3.87],["c",-.42,-.48,-1.53,-1.62,-2.19,-2.22],["l",-.45,-.42],["l",-.03,1.11],["l",0,1.11],["l",-.21,0],["l",-.21,0],["l",0,-7.5],["z"],["m",1.65,.09],["c",-.3,-.3,-.69,-.72,-.9,-.87],["l",-.33,-.33],["l",0,.15],["c",0,.3,.06,.81,.15,1.26],["c",.27,1.29,.87,2.61,2.04,4.29],["c",.15,.24,.6,.87,.96,1.38],["l",1.08,1.53],["l",.42,.63],["c",.03,0,.12,-.36,.21,-.72],["c",.06,-.33,.06,-1.2,0,-1.62],["c",-.33,-1.71,-1.44,-3.48,-3.63,-5.7],["z"]],w:6.693,h:26.337},"flags.u32nd":{d:[["M",-.42,11.25],["l",0,-11.25],["l",.21,0],["l",.21,0],["l",0,.36],["c",.09,1.68,.69,3.27,2.07,5.46],["l",.87,1.35],["c",1.02,1.62,1.47,2.37,1.86,3.18],["c",.48,1.02,.78,1.92,.93,2.88],["c",.06,.48,.06,1.5,0,1.89],["c",-.09,.42,-.21,.87,-.36,1.26],["l",-.12,.3],["l",.15,.39],["c",.69,1.56,.84,2.88,.54,4.38],["c",-.09,.45,-.27,1.08,-.45,1.47],["l",-.12,.24],["l",.18,.36],["c",.33,.72,.57,1.56,.69,2.34],["c",.12,1.02,-.06,2.52,-.42,3.84],["c",-.27,.93,-.75,2.13,-.93,2.31],["c",-.18,.15,-.45,.18,-.66,.09],["c",-.18,-.09,-.27,-.18,-.33,-.33],["c",-.09,-.18,-.06,-.3,.06,-.6],["c",.21,-.36,.42,-.9,.57,-1.38],["c",.51,-1.41,.69,-3.06,.48,-4.08],["c",-.15,-.81,-.57,-1.68,-1.2,-2.55],["c",-.72,-.99,-1.83,-2.13,-3.3,-3.33],["l",-.48,-.42],["l",-.03,1.53],["l",0,1.56],["l",-.21,0],["l",-.21,0],["l",0,-11.25],["z"],["m",1.26,-3.96],["c",-.27,-.3,-.54,-.6,-.66,-.72],["l",-.18,-.21],["l",0,.42],["c",.06,.87,.24,1.74,.66,2.67],["c",.36,.87,.96,1.86,1.92,3.18],["c",.21,.33,.63,.87,.87,1.23],["c",.27,.39,.6,.84,.75,1.08],["l",.27,.39],["l",.03,-.12],["c",.12,-.45,.15,-1.05,.09,-1.59],["c",-.27,-1.86,-1.38,-3.78,-3.75,-6.33],["z"],["m",-.27,6.09],["c",-.27,-.21,-.48,-.42,-.51,-.45],["c",-.06,-.03,-.06,-.03,-.06,.21],["c",0,.9,.3,2.04,.81,3.09],["c",.48,1.02,.96,1.77,2.37,3.63],["c",.6,.78,1.05,1.44,1.29,1.77],["c",.06,.12,.15,.21,.15,.18],["c",.03,-.03,.18,-.57,.24,-.87],["c",.06,-.45,.06,-1.32,-.03,-1.74],["c",-.09,-.48,-.24,-.9,-.51,-1.44],["c",-.66,-1.35,-1.83,-2.7,-3.75,-4.38],["z"]],w:6.697,h:32.145},"flags.u64th":{d:[["M",-.42,15],["l",0,-15],["l",.21,0],["l",.21,0],["l",0,.36],["c",.06,1.2,.39,2.37,1.02,3.66],["c",.39,.81,.84,1.56,1.8,3.09],["c",.81,1.26,1.05,1.68,1.35,2.22],["c",.87,1.5,1.35,2.79,1.56,4.08],["c",.06,.54,.06,1.56,-.03,2.04],["c",-.09,.48,-.21,.99,-.36,1.35],["l",-.12,.27],["l",.12,.27],["c",.09,.15,.21,.45,.27,.66],["c",.69,1.89,.63,3.66,-.18,5.46],["l",-.18,.39],["l",.15,.33],["c",.3,.66,.51,1.44,.63,2.1],["c",.06,.48,.06,1.35,0,1.71],["c",-.15,.57,-.42,1.2,-.78,1.68],["l",-.21,.27],["l",.18,.33],["c",.57,1.05,.93,2.13,1.02,3.18],["c",.06,.72,0,1.83,-.21,2.79],["c",-.18,1.02,-.63,2.34,-1.02,3.09],["c",-.15,.33,-.48,.45,-.78,.3],["c",-.18,-.09,-.27,-.18,-.33,-.33],["c",-.09,-.18,-.06,-.3,.03,-.54],["c",.75,-1.5,1.23,-3.45,1.17,-4.89],["c",-.06,-1.02,-.42,-2.01,-1.17,-3.15],["c",-.48,-.72,-1.02,-1.35,-1.89,-2.22],["c",-.57,-.57,-1.56,-1.5,-1.92,-1.77],["l",-.12,-.09],["l",0,1.68],["l",0,1.68],["l",-.21,0],["l",-.21,0],["l",0,-15],["z"],["m",.93,-8.07],["c",-.27,-.3,-.48,-.54,-.51,-.54],["c",0,0,0,.69,.03,1.02],["c",.15,1.47,.75,2.94,2.04,4.83],["l",1.08,1.53],["c",.39,.57,.84,1.2,.99,1.44],["c",.15,.24,.3,.45,.3,.45],["c",0,0,.03,-.09,.06,-.21],["c",.36,-1.59,-.15,-3.33,-1.47,-5.4],["c",-.63,-.93,-1.35,-1.83,-2.52,-3.12],["z"],["m",.06,6.72],["c",-.24,-.21,-.48,-.42,-.51,-.45],["l",-.06,-.06],["l",0,.33],["c",0,1.2,.3,2.34,.93,3.6],["c",.45,.9,.96,1.68,2.25,3.51],["c",.39,.54,.84,1.17,1.02,1.44],["c",.21,.33,.33,.51,.33,.48],["c",.06,-.09,.21,-.63,.3,-.99],["c",.06,-.33,.06,-.45,.06,-.96],["c",0,-.6,-.03,-.84,-.18,-1.35],["c",-.3,-1.08,-1.02,-2.28,-2.13,-3.57],["c",-.39,-.45,-1.44,-1.47,-2.01,-1.98],["z"],["m",0,6.72],["c",-.24,-.21,-.48,-.39,-.51,-.42],["l",-.06,-.06],["l",0,.33],["c",0,1.41,.45,2.82,1.38,4.35],["c",.42,.72,.72,1.14,1.86,2.73],["c",.36,.45,.75,.99,.87,1.2],["c",.15,.21,.3,.36,.3,.36],["c",.06,0,.3,-.48,.39,-.75],["c",.09,-.36,.12,-.63,.12,-1.05],["c",-.06,-1.05,-.45,-2.04,-1.2,-3.18],["c",-.57,-.87,-1.11,-1.53,-2.07,-2.49],["c",-.36,-.33,-.84,-.78,-1.08,-1.02],["z"]],w:6.682,h:39.694},"flags.d8th":{d:[["M",5.67,-21.63],["c",.24,-.12,.54,-.06,.69,.15],["c",.06,.06,.21,.36,.39,.66],["c",.84,1.77,1.26,3.36,1.32,5.1],["c",.03,1.29,-.21,2.37,-.81,3.63],["c",-.6,1.23,-1.26,2.13,-3.21,4.38],["c",-1.35,1.53,-1.86,2.19,-2.4,2.97],["c",-.63,.93,-1.11,1.92,-1.38,2.79],["c",-.15,.54,-.27,1.35,-.27,1.8],["l",0,.15],["l",-.21,0],["l",-.21,0],["l",0,-3.75],["l",0,-3.75],["l",.21,0],["l",.21,0],["l",.48,-.3],["c",1.83,-1.11,3.12,-2.1,4.17,-3.12],["c",.78,-.81,1.32,-1.53,1.71,-2.31],["c",.45,-.93,.6,-1.74,.51,-2.88],["c",-.12,-1.56,-.63,-3.18,-1.47,-4.68],["c",-.12,-.21,-.15,-.33,-.06,-.51],["c",.06,-.15,.15,-.24,.33,-.33],["z"]],w:8.492,h:21.691},"flags.ugrace":{d:[["M",6.03,6.93],["c",.15,-.09,.33,-.06,.51,0],["c",.15,.09,.21,.15,.3,.33],["c",.09,.18,.06,.39,-.03,.54],["c",-.06,.15,-10.89,8.88,-11.07,8.97],["c",-.15,.09,-.33,.06,-.48,0],["c",-.18,-.09,-.24,-.15,-.33,-.33],["c",-.09,-.18,-.06,-.39,.03,-.54],["c",.06,-.15,10.89,-8.88,11.07,-8.97],["z"]],w:12.019,h:9.954},"flags.dgrace":{d:[["M",-6.06,-15.93],["c",.18,-.09,.33,-.12,.48,-.06],["c",.18,.09,14.01,8.04,14.1,8.1],["c",.12,.12,.18,.33,.18,.51],["c",-.03,.21,-.15,.39,-.36,.48],["c",-.18,.09,-.33,.12,-.48,.06],["c",-.18,-.09,-14.01,-8.04,-14.1,-8.1],["c",-.12,-.12,-.18,-.33,-.18,-.51],["c",.03,-.21,.15,-.39,.36,-.48],["z"]],w:15.12,h:9.212},"flags.d16th":{d:[["M",6.84,-22.53],["c",.27,-.12,.57,-.06,.72,.15],["c",.15,.15,.33,.87,.45,1.56],["c",.06,.33,.06,1.35,0,1.65],["c",-.06,.33,-.15,.78,-.27,1.11],["c",-.12,.33,-.45,.96,-.66,1.32],["l",-.18,.27],["l",.09,.18],["c",.48,1.02,.72,2.25,.69,3.3],["c",-.06,1.23,-.42,2.28,-1.26,3.45],["c",-.57,.87,-.99,1.32,-3,3.39],["c",-1.56,1.56,-2.22,2.4,-2.76,3.45],["c",-.42,.84,-.66,1.8,-.66,2.55],["l",0,.15],["l",-.21,0],["l",-.21,0],["l",0,-7.5],["l",0,-7.5],["l",.21,0],["l",.21,0],["l",0,1.14],["l",0,1.11],["l",.27,-.15],["c",1.11,-.57,1.77,-.99,2.52,-1.47],["c",2.37,-1.56,3.69,-3.15,4.05,-4.83],["c",.03,-.18,.03,-.39,.03,-.78],["c",0,-.6,-.03,-.93,-.24,-1.5],["c",-.06,-.18,-.12,-.39,-.15,-.45],["c",-.03,-.24,.12,-.48,.36,-.6],["z"],["m",-.63,7.5],["c",-.06,-.18,-.15,-.36,-.15,-.36],["c",-.03,0,-.03,.03,-.06,.06],["c",-.06,.12,-.96,1.02,-1.95,1.98],["c",-.63,.57,-1.26,1.17,-1.44,1.35],["c",-1.53,1.62,-2.28,2.85,-2.55,4.32],["c",-.03,.18,-.03,.54,-.06,.99],["l",0,.69],["l",.18,-.09],["c",.93,-.54,2.1,-1.29,2.82,-1.83],["c",.69,-.51,1.02,-.81,1.53,-1.29],["c",1.86,-1.89,2.37,-3.66,1.68,-5.82],["z"]],w:8.475,h:22.591},"flags.d32nd":{d:[["M",6.84,-29.13],["c",.27,-.12,.57,-.06,.72,.15],["c",.12,.12,.27,.63,.36,1.11],["c",.33,1.59,.06,3.06,-.81,4.47],["l",-.18,.27],["l",.09,.15],["c",.12,.24,.33,.69,.45,1.05],["c",.63,1.83,.45,3.57,-.57,5.22],["l",-.18,.3],["l",.15,.27],["c",.42,.87,.6,1.71,.57,2.61],["c",-.06,1.29,-.48,2.46,-1.35,3.78],["c",-.54,.81,-.93,1.29,-2.46,3],["c",-.51,.54,-1.05,1.17,-1.26,1.41],["c",-1.56,1.86,-2.25,3.36,-2.37,5.01],["l",0,.33],["l",-.21,0],["l",-.21,0],["l",0,-11.25],["l",0,-11.25],["l",.21,0],["l",.21,0],["l",0,1.35],["l",.03,1.35],["l",.78,-.39],["c",1.38,-.69,2.34,-1.26,3.24,-1.92],["c",1.38,-1.02,2.28,-2.13,2.64,-3.21],["c",.15,-.48,.18,-.72,.18,-1.29],["c",0,-.57,-.06,-.9,-.24,-1.47],["c",-.06,-.18,-.12,-.39,-.15,-.45],["c",-.03,-.24,.12,-.48,.36,-.6],["z"],["m",-.63,7.2],["c",-.09,-.18,-.12,-.21,-.12,-.15],["c",-.03,.09,-1.02,1.08,-2.04,2.04],["c",-1.17,1.08,-1.65,1.56,-2.07,2.04],["c",-.84,.96,-1.38,1.86,-1.68,2.76],["c",-.21,.57,-.27,.99,-.3,1.65],["l",0,.54],["l",.66,-.33],["c",3.57,-1.86,5.49,-3.69,5.94,-5.7],["c",.06,-.39,.06,-1.2,-.03,-1.65],["c",-.06,-.39,-.24,-.9,-.36,-1.2],["z"],["m",-.06,7.2],["c",-.06,-.15,-.12,-.33,-.15,-.45],["l",-.06,-.18],["l",-.18,.21],["l",-1.83,1.83],["c",-.87,.9,-1.77,1.8,-1.95,2.01],["c",-1.08,1.29,-1.62,2.31,-1.89,3.51],["c",-.06,.3,-.06,.51,-.09,.93],["l",0,.57],["l",.09,-.06],["c",.75,-.45,1.89,-1.26,2.52,-1.74],["c",.81,-.66,1.74,-1.53,2.22,-2.16],["c",1.26,-1.53,1.68,-3.06,1.32,-4.47],["z"]],w:8.385,h:29.191},"flags.d64th":{d:[["M",7.08,-32.88],["c",.3,-.12,.66,-.03,.78,.24],["c",.18,.33,.27,2.1,.15,2.64],["c",-.09,.39,-.21,.78,-.39,1.08],["l",-.15,.3],["l",.09,.27],["c",.03,.12,.09,.45,.12,.69],["c",.27,1.44,.18,2.55,-.3,3.6],["l",-.12,.33],["l",.06,.42],["c",.27,1.35,.33,2.82,.21,3.63],["c",-.12,.6,-.3,1.23,-.57,1.8],["l",-.15,.27],["l",.03,.42],["c",.06,1.02,.06,2.7,.03,3.06],["c",-.15,1.47,-.66,2.76,-1.74,4.41],["c",-.45,.69,-.75,1.11,-1.74,2.37],["c",-1.05,1.38,-1.5,1.98,-1.95,2.73],["c",-.93,1.5,-1.38,2.82,-1.44,4.2],["l",0,.42],["l",-.21,0],["l",-.21,0],["l",0,-15],["l",0,-15],["l",.21,0],["l",.21,0],["l",0,1.86],["l",0,1.89],["c",0,0,.21,-.03,.45,-.09],["c",2.22,-.39,4.08,-1.11,5.19,-2.01],["c",.63,-.54,1.02,-1.14,1.2,-1.8],["c",.06,-.3,.06,-1.14,-.03,-1.65],["c",-.03,-.18,-.06,-.39,-.09,-.48],["c",-.03,-.24,.12,-.48,.36,-.6],["z"],["m",-.45,6.15],["c",-.03,-.18,-.06,-.42,-.06,-.54],["l",-.03,-.18],["l",-.33,.3],["c",-.42,.36,-.87,.72,-1.68,1.29],["c",-1.98,1.38,-2.25,1.59,-2.85,2.16],["c",-.75,.69,-1.23,1.44,-1.47,2.19],["c",-.15,.45,-.18,.63,-.21,1.35],["l",0,.66],["l",.39,-.18],["c",1.83,-.9,3.45,-1.95,4.47,-2.91],["c",.93,-.9,1.53,-1.83,1.74,-2.82],["c",.06,-.33,.06,-.87,.03,-1.32],["z"],["m",-.27,4.86],["c",-.03,-.21,-.06,-.36,-.06,-.36],["c",0,-.03,-.12,.09,-.24,.24],["c",-.39,.48,-.99,1.08,-2.16,2.19],["c",-1.47,1.38,-1.92,1.83,-2.46,2.49],["c",-.66,.87,-1.08,1.74,-1.29,2.58],["c",-.09,.42,-.15,.87,-.15,1.44],["l",0,.54],["l",.48,-.33],["c",1.5,-1.02,2.58,-1.89,3.51,-2.82],["c",1.47,-1.47,2.25,-2.85,2.4,-4.26],["c",.03,-.39,.03,-1.17,-.03,-1.71],["z"],["m",-.66,7.68],["c",.03,-.15,.03,-.6,.03,-.99],["l",0,-.72],["l",-.27,.33],["l",-1.74,1.98],["c",-1.77,1.92,-2.43,2.76,-2.97,3.9],["c",-.51,1.02,-.72,1.77,-.75,2.91],["c",0,.63,0,.63,.06,.6],["c",.03,-.03,.3,-.27,.63,-.54],["c",.66,-.6,1.86,-1.8,2.31,-2.31],["c",1.65,-1.89,2.52,-3.54,2.7,-5.16],["z"]],w:8.485,h:32.932},"clefs.C":{d:[["M",.06,-14.94],["l",.09,-.06],["l",1.92,0],["l",1.92,0],["l",.09,.06],["l",.06,.09],["l",0,14.85],["l",0,14.82],["l",-.06,.09],["l",-.09,.06],["l",-1.92,0],["l",-1.92,0],["l",-.09,-.06],["l",-.06,-.09],["l",0,-14.82],["l",0,-14.85],["z"],["m",5.37,0],["c",.09,-.06,.09,-.06,.57,-.06],["c",.45,0,.45,0,.54,.06],["l",.06,.09],["l",0,7.14],["l",0,7.11],["l",.09,-.06],["c",.18,-.18,.72,-.84,.96,-1.2],["c",.3,-.45,.66,-1.17,.84,-1.65],["c",.36,-.9,.57,-1.83,.6,-2.79],["c",.03,-.48,.03,-.54,.09,-.63],["c",.12,-.18,.36,-.21,.54,-.12],["c",.18,.09,.21,.15,.24,.66],["c",.06,.87,.21,1.56,.57,2.22],["c",.51,1.02,1.26,1.68,2.22,1.92],["c",.21,.06,.33,.06,.78,.06],["c",.45,0,.57,0,.84,-.06],["c",.45,-.12,.81,-.33,1.08,-.6],["c",.57,-.57,.87,-1.41,.99,-2.88],["c",.06,-.54,.06,-3,0,-3.57],["c",-.21,-2.58,-.84,-3.87,-2.16,-4.5],["c",-.48,-.21,-1.17,-.36,-1.77,-.36],["c",-.69,0,-1.29,.27,-1.5,.72],["c",-.06,.15,-.06,.21,-.06,.42],["c",0,.24,0,.3,.06,.45],["c",.12,.24,.24,.39,.63,.66],["c",.42,.3,.57,.48,.69,.72],["c",.06,.15,.06,.21,.06,.48],["c",0,.39,-.03,.63,-.21,.96],["c",-.3,.6,-.87,1.08,-1.5,1.26],["c",-.27,.06,-.87,.06,-1.14,0],["c",-.78,-.24,-1.44,-.87,-1.65,-1.68],["c",-.12,-.42,-.09,-1.17,.09,-1.71],["c",.51,-1.65,1.98,-2.82,3.81,-3.09],["c",.84,-.09,2.46,.03,3.51,.27],["c",2.22,.57,3.69,1.8,4.44,3.75],["c",.36,.93,.57,2.13,.57,3.36],["c",0,1.44,-.48,2.73,-1.38,3.81],["c",-1.26,1.5,-3.27,2.43,-5.28,2.43],["c",-.48,0,-.51,0,-.75,-.09],["c",-.15,-.03,-.48,-.21,-.78,-.36],["c",-.69,-.36,-.87,-.42,-1.26,-.42],["c",-.27,0,-.3,0,-.51,.09],["c",-.57,.3,-.81,.9,-.81,2.1],["c",0,1.23,.24,1.83,.81,2.13],["c",.21,.09,.24,.09,.51,.09],["c",.39,0,.57,-.06,1.26,-.42],["c",.3,-.15,.63,-.33,.78,-.36],["c",.24,-.09,.27,-.09,.75,-.09],["c",2.01,0,4.02,.93,5.28,2.4],["c",.9,1.11,1.38,2.4,1.38,3.84],["c",0,1.5,-.3,2.88,-.84,3.96],["c",-.78,1.59,-2.19,2.64,-4.17,3.15],["c",-1.05,.24,-2.67,.36,-3.51,.27],["c",-1.83,-.27,-3.3,-1.44,-3.81,-3.09],["c",-.18,-.54,-.21,-1.29,-.09,-1.74],["c",.15,-.6,.63,-1.2,1.23,-1.47],["c",.36,-.18,.57,-.21,.99,-.21],["c",.42,0,.63,.03,1.02,.21],["c",.42,.21,.84,.63,1.05,1.05],["c",.18,.36,.21,.6,.21,.96],["c",0,.3,0,.36,-.06,.51],["c",-.12,.24,-.27,.42,-.69,.72],["c",-.57,.42,-.69,.63,-.69,1.08],["c",0,.24,0,.3,.06,.45],["c",.12,.21,.3,.39,.57,.54],["c",.42,.18,.87,.21,1.53,.15],["c",1.08,-.15,1.8,-.57,2.34,-1.32],["c",.54,-.75,.84,-1.83,.99,-3.51],["c",.06,-.57,.06,-3.03,0,-3.57],["c",-.12,-1.47,-.42,-2.31,-.99,-2.88],["c",-.27,-.27,-.63,-.48,-1.08,-.6],["c",-.27,-.06,-.39,-.06,-.84,-.06],["c",-.45,0,-.57,0,-.78,.06],["c",-1.14,.27,-2.01,1.17,-2.46,2.49],["c",-.21,.57,-.3,.99,-.33,1.65],["c",-.03,.51,-.06,.57,-.24,.66],["c",-.12,.06,-.27,.06,-.39,0],["c",-.21,-.09,-.21,-.15,-.24,-.75],["c",-.09,-1.92,-.78,-3.72,-2.01,-5.19],["c",-.18,-.21,-.36,-.42,-.39,-.45],["l",-.09,-.06],["l",0,7.11],["l",0,7.14],["l",-.06,.09],["c",-.09,.06,-.09,.06,-.54,.06],["c",-.48,0,-.48,0,-.57,-.06],["l",-.06,-.09],["l",0,-14.82],["l",0,-14.85],["z"]],w:20.31,h:29.97},"clefs.F":{d:[["M",6.3,-7.8],["c",.36,-.03,1.65,0,2.13,.03],["c",3.6,.42,6.03,2.1,6.93,4.86],["c",.27,.84,.36,1.5,.36,2.58],["c",0,.9,-.03,1.35,-.18,2.16],["c",-.78,3.78,-3.54,7.08,-8.37,9.96],["c",-1.74,1.05,-3.87,2.13,-6.18,3.12],["c",-.39,.18,-.75,.33,-.81,.36],["c",-.06,.03,-.15,.06,-.18,.06],["c",-.15,0,-.33,-.18,-.33,-.33],["c",0,-.15,.06,-.21,.51,-.48],["c",3,-1.77,5.13,-3.21,6.84,-4.74],["c",.51,-.45,1.59,-1.5,1.95,-1.95],["c",1.89,-2.19,2.88,-4.32,3.15,-6.78],["c",.06,-.42,.06,-1.77,0,-2.19],["c",-.24,-2.01,-.93,-3.63,-2.04,-4.71],["c",-.63,-.63,-1.29,-1.02,-2.07,-1.2],["c",-1.62,-.39,-3.36,.15,-4.56,1.44],["c",-.54,.6,-1.05,1.47,-1.32,2.22],["l",-.09,.21],["l",.24,-.12],["c",.39,-.21,.63,-.24,1.11,-.24],["c",.3,0,.45,0,.66,.06],["c",1.92,.48,2.85,2.55,1.95,4.38],["c",-.45,.99,-1.41,1.62,-2.46,1.71],["c",-1.47,.09,-2.91,-.87,-3.39,-2.25],["c",-.18,-.57,-.21,-1.32,-.03,-2.28],["c",.39,-2.25,1.83,-4.2,3.81,-5.19],["c",.69,-.36,1.59,-.6,2.37,-.69],["z"],["m",11.58,2.52],["c",.84,-.21,1.71,.3,1.89,1.14],["c",.3,1.17,-.72,2.19,-1.89,1.89],["c",-.99,-.21,-1.5,-1.32,-1.02,-2.25],["c",.18,-.39,.6,-.69,1.02,-.78],["z"],["m",0,7.5],["c",.84,-.21,1.71,.3,1.89,1.14],["c",.21,.87,-.3,1.71,-1.14,1.89],["c",-.87,.21,-1.71,-.3,-1.89,-1.14],["c",-.21,-.84,.3,-1.71,1.14,-1.89],["z"]],w:20.153,h:23.142},"clefs.G":{d:[["M",9.69,-37.41],["c",.09,-.09,.24,-.06,.36,0],["c",.12,.09,.57,.6,.96,1.11],["c",1.77,2.34,3.21,5.85,3.57,8.73],["c",.21,1.56,.03,3.27,-.45,4.86],["c",-.69,2.31,-1.92,4.47,-4.23,7.44],["c",-.3,.39,-.57,.72,-.6,.75],["c",-.03,.06,0,.15,.18,.78],["c",.54,1.68,1.38,4.44,1.68,5.49],["l",.09,.42],["l",.39,0],["c",1.47,.09,2.76,.51,3.96,1.29],["c",1.83,1.23,3.06,3.21,3.39,5.52],["c",.09,.45,.12,1.29,.06,1.74],["c",-.09,1.02,-.33,1.83,-.75,2.73],["c",-.84,1.71,-2.28,3.06,-4.02,3.72],["l",-.33,.12],["l",.03,1.26],["c",0,1.74,-.06,3.63,-.21,4.62],["c",-.45,3.06,-2.19,5.49,-4.47,6.21],["c",-.57,.18,-.9,.21,-1.59,.21],["c",-.69,0,-1.02,-.03,-1.65,-.21],["c",-1.14,-.27,-2.13,-.84,-2.94,-1.65],["c",-.99,-.99,-1.56,-2.16,-1.71,-3.54],["c",-.09,-.81,.06,-1.53,.45,-2.13],["c",.63,-.99,1.83,-1.56,3,-1.53],["c",1.5,.09,2.64,1.32,2.73,2.94],["c",.06,1.47,-.93,2.7,-2.37,2.97],["c",-.45,.06,-.84,.03,-1.29,-.09],["l",-.21,-.09],["l",.09,.12],["c",.39,.54,.78,.93,1.32,1.26],["c",1.35,.87,3.06,1.02,4.35,.36],["c",1.44,-.72,2.52,-2.28,2.97,-4.35],["c",.15,-.66,.24,-1.5,.3,-3.03],["c",.03,-.84,.03,-2.94,0,-3],["c",-.03,0,-.18,0,-.36,.03],["c",-.66,.12,-.99,.12,-1.83,.12],["c",-1.05,0,-1.71,-.06,-2.61,-.3],["c",-4.02,-.99,-7.11,-4.35,-7.8,-8.46],["c",-.12,-.66,-.12,-.99,-.12,-1.83],["c",0,-.84,0,-1.14,.15,-1.92],["c",.36,-2.28,1.41,-4.62,3.3,-7.29],["l",2.79,-3.6],["c",.54,-.66,.96,-1.2,.96,-1.23],["c",0,-.03,-.09,-.33,-.18,-.69],["c",-.96,-3.21,-1.41,-5.28,-1.59,-7.68],["c",-.12,-1.38,-.15,-3.09,-.06,-3.96],["c",.33,-2.67,1.38,-5.07,3.12,-7.08],["c",.36,-.42,.99,-1.05,1.17,-1.14],["z"],["m",2.01,4.71],["c",-.15,-.3,-.3,-.54,-.3,-.54],["c",-.03,0,-.18,.09,-.3,.21],["c",-2.4,1.74,-3.87,4.2,-4.26,7.11],["c",-.06,.54,-.06,1.41,-.03,1.89],["c",.09,1.29,.48,3.12,1.08,5.22],["c",.15,.42,.24,.78,.24,.81],["c",0,.03,.84,-1.11,1.23,-1.68],["c",1.89,-2.73,2.88,-5.07,3.15,-7.53],["c",.09,-.57,.12,-1.74,.06,-2.37],["c",-.09,-1.23,-.27,-1.92,-.87,-3.12],["z"],["m",-2.94,20.7],["c",-.21,-.72,-.39,-1.32,-.42,-1.32],["c",0,0,-1.2,1.47,-1.86,2.37],["c",-2.79,3.63,-4.02,6.3,-4.35,9.3],["c",-.03,.21,-.03,.69,-.03,1.08],["c",0,.69,0,.75,.06,1.11],["c",.12,.54,.27,.99,.51,1.47],["c",.69,1.38,1.83,2.55,3.42,3.42],["c",.96,.54,2.07,.9,3.21,1.08],["c",.78,.12,2.04,.12,2.94,-.03],["c",.51,-.06,.45,-.03,.42,-.3],["c",-.24,-3.33,-.72,-6.33,-1.62,-10.08],["c",-.09,-.39,-.18,-.75,-.18,-.78],["c",-.03,-.03,-.42,0,-.81,.09],["c",-.9,.18,-1.65,.57,-2.22,1.14],["c",-.72,.72,-1.08,1.65,-1.05,2.64],["c",.06,.96,.48,1.83,1.23,2.58],["c",.36,.36,.72,.63,1.17,.9],["c",.33,.18,.36,.21,.42,.33],["c",.18,.42,-.18,.9,-.6,.87],["c",-.18,-.03,-.84,-.36,-1.26,-.63],["c",-.78,-.51,-1.38,-1.11,-1.86,-1.83],["c",-1.77,-2.7,-.99,-6.42,1.71,-8.19],["c",.3,-.21,.81,-.48,1.17,-.63],["c",.3,-.09,1.02,-.3,1.14,-.3],["c",.06,0,.09,0,.09,-.03],["c",.03,-.03,-.51,-1.92,-1.23,-4.26],["z"],["m",3.78,7.41],["c",-.18,-.03,-.36,-.06,-.39,-.06],["c",-.03,0,0,.21,.18,1.02],["c",.75,3.18,1.26,6.3,1.5,9.09],["c",.06,.72,0,.69,.51,.42],["c",.78,-.36,1.44,-.96,1.98,-1.77],["c",1.08,-1.62,1.2,-3.69,.3,-5.55],["c",-.81,-1.62,-2.31,-2.79,-4.08,-3.15],["z"]],w:19.051,h:57.057},"clefs.perc":{d:[["M",5.07,-7.44],["l",.09,-.06],["l",1.53,0],["l",1.53,0],["l",.09,.06],["l",.06,.09],["l",0,7.35],["l",0,7.32],["l",-.06,.09],["l",-.09,.06],["l",-1.53,0],["l",-1.53,0],["l",-.09,-.06],["l",-.06,-.09],["l",0,-7.32],["l",0,-7.35],["z"],["m",6.63,0],["l",.09,-.06],["l",1.53,0],["l",1.53,0],["l",.09,.06],["l",.06,.09],["l",0,7.35],["l",0,7.32],["l",-.06,.09],["l",-.09,.06],["l",-1.53,0],["l",-1.53,0],["l",-.09,-.06],["l",-.06,-.09],["l",0,-7.32],["l",0,-7.35],["z"]],w:21,h:14.97},"tab.big":{d:[["M",20.16,-21.66],["c",.24,-.09,.66,.09,.78,.36],["c",.09,.21,.09,.24,-.18,.54],["c",-.78,.81,-1.86,1.44,-2.94,1.71],["c",-.87,.24,-1.71,.24,-2.55,.03],["l",-.06,-.03],["l",-.18,.99],["c",-.33,1.98,-.75,4.26,-.96,5.04],["c",-.42,1.65,-1.26,3.18,-2.28,4.14],["c",-.57,.57,-1.17,.9,-1.86,1.08],["c",-.18,.06,-.33,.06,-.66,.06],["c",-.54,0,-.78,-.03,-1.23,-.27],["c",-.39,-.18,-.66,-.39,-1.38,-.99],["c",-.3,-.24,-.66,-.51,-.75,-.57],["c",-.21,-.15,-.27,-.24,-.24,-.45],["c",.06,-.27,.36,-.6,.6,-.66],["c",.18,-.03,.33,.06,.9,.57],["c",.48,.42,.72,.57,.93,.69],["c",.66,.33,1.38,.21,1.95,-.36],["c",.63,-.6,1.05,-1.62,1.23,-3],["c",.03,-.18,.09,-.66,.09,-1.11],["c",.09,-1.56,.33,-3.81,.57,-5.49],["c",.06,-.33,.09,-.63,.09,-.63],["c",-.03,-.03,-.81,-.12,-1.02,-.12],["c",-.57,0,-1.32,.12,-1.8,.33],["c",-.87,.3,-1.35,.78,-1.5,1.41],["c",-.18,.63,.09,1.26,.66,1.65],["c",.12,.06,.15,.12,.18,.24],["c",.09,.27,.06,.57,-.09,.75],["c",-.03,.06,-.12,.09,-.27,.15],["c",-.72,.21,-1.44,.15,-2.1,-.18],["c",-.54,-.27,-.96,-.66,-1.2,-1.14],["c",-.39,-.75,-.33,-1.74,.15,-2.52],["c",.27,-.42,.84,-.93,1.41,-1.23],["c",1.17,-.57,2.88,-.9,4.8,-.9],["c",.69,0,.78,0,1.08,.06],["c",.45,.09,1.11,.3,2.07,.6],["c",1.47,.48,1.83,.57,2.55,.54],["c",1.02,-.06,2.04,-.45,2.94,-1.11],["c",.12,-.09,.24,-.18,.27,-.18],["z"],["m",-5.88,13.05],["c",.21,-.03,.81,0,1.08,.06],["c",.48,.12,.9,.42,.99,.69],["c",.03,.09,.03,.15,0,.27],["c",0,.09,-.03,.57,-.06,1.08],["c",-.09,2.19,-.24,5.76,-.39,8.28],["c",-.06,1.53,-.06,1.77,.03,2.01],["c",.09,.18,.15,.24,.3,.3],["c",.24,.12,.54,.06,1.23,-.27],["c",.57,-.27,.66,-.3,.75,-.24],["c",.09,.06,.18,.3,.18,.45],["c",0,.33,-.15,.51,-.45,.63],["c",-.12,.03,-.39,.15,-.6,.27],["c",-1.17,.6,-1.38,.69,-1.8,.72],["c",-.45,.03,-.78,-.09,-1.08,-.39],["c",-.39,-.42,-.66,-1.2,-1.02,-3.12],["c",-.24,-1.23,-.36,-2.07,-.54,-3.75],["l",0,-.18],["l",-.36,.45],["c",-.6,.75,-1.32,1.59,-1.95,2.25],["c",-.15,.18,-.27,.3,-.27,.33],["c",0,0,.06,.09,.15,.18],["c",.24,.33,.6,.57,1.05,.69],["c",.18,.06,.3,.06,.69,.06],["l",.48,.03],["l",.06,.12],["c",.15,.27,.03,.72,-.21,.9],["c",-.18,.12,-.93,.27,-1.41,.27],["c",-.84,0,-1.59,-.3,-1.98,-.84],["l",-.12,-.15],["l",-.45,.42],["c",-.99,.87,-1.53,1.32,-2.16,1.74],["c",-.78,.51,-1.5,.84,-2.1,.93],["c",-.69,.12,-1.2,.03,-1.95,-.42],["c",-.21,-.12,-.51,-.27,-.66,-.36],["c",-.24,-.12,-.3,-.18,-.33,-.24],["c",-.12,-.27,.15,-.78,.45,-.93],["c",.24,-.12,.33,-.09,.9,.18],["c",.6,.3,.84,.39,1.2,.36],["c",.87,-.09,1.77,-.69,3.24,-2.31],["c",2.67,-2.85,4.59,-5.94,5.7,-9.15],["c",.15,-.45,.24,-.63,.42,-.81],["c",.21,-.24,.6,-.45,.99,-.51],["z"],["m",-3.99,16.05],["c",.18,0,.69,-.03,1.17,0],["c",3.27,.03,5.37,.75,6,2.07],["c",.45,.99,.12,2.4,-.81,3.42],["c",-.24,.27,-.57,.57,-.84,.75],["c",-.09,.06,-.18,.09,-.18,.12],["c",0,0,.18,.03,.42,.09],["c",1.23,.3,2.01,.81,2.37,1.59],["c",.27,.54,.3,1.32,.09,2.1],["c",-.12,.36,-.45,1.05,-.69,1.35],["c",-.87,1.17,-2.1,1.92,-3.54,2.25],["c",-.36,.06,-.48,.06,-.96,.06],["c",-.45,0,-.66,0,-.84,-.03],["c",-.84,-.18,-1.47,-.51,-2.07,-1.11],["c",-.33,-.33,-.45,-.51,-.45,-.63],["c",0,-.06,.03,-.15,.06,-.24],["c",.18,-.33,.69,-.6,.93,-.48],["c",.03,.03,.15,.12,.27,.24],["c",.39,.42,.99,.57,1.62,.45],["c",1.05,-.21,1.98,-1.02,2.31,-2.01],["c",.48,-1.53,-.48,-2.55,-2.58,-2.67],["c",-.21,0,-.36,-.03,-.42,-.06],["c",-.15,-.09,-.21,-.51,-.06,-.78],["c",.12,-.27,.24,-.33,.6,-.36],["c",.57,-.06,1.11,-.42,1.5,-.99],["c",.48,-.72,.54,-1.59,.18,-2.31],["c",-.12,-.21,-.45,-.54,-.69,-.69],["c",-.33,-.21,-.93,-.45,-1.35,-.51],["l",-.12,-.03],["l",-.06,.48],["c",-.54,2.94,-1.14,6.24,-1.29,6.75],["c",-.33,1.35,-.93,2.61,-1.65,3.6],["c",-.3,.36,-.81,.9,-1.14,1.14],["c",-.3,.24,-.84,.48,-1.14,.57],["c",-.33,.09,-.96,.09,-1.26,.03],["c",-.45,-.12,-.87,-.39,-1.53,-.96],["c",-.24,-.15,-.51,-.39,-.63,-.48],["c",-.3,-.21,-.33,-.33,-.21,-.63],["c",.12,-.18,.27,-.36,.42,-.45],["c",.27,-.12,.36,-.09,.87,.33],["c",.78,.6,1.08,.75,1.65,.72],["c",.45,-.03,.81,-.21,1.17,-.54],["c",.87,-.9,1.38,-2.85,1.38,-5.37],["c",0,-.6,.03,-1.11,.12,-2.04],["c",.06,-.69,.24,-2.01,.33,-2.58],["c",.06,-.24,.06,-.42,.06,-.42],["c",0,0,-.12,.03,-.21,.09],["c",-1.44,.57,-2.16,1.65,-1.74,2.55],["c",.09,.15,.18,.24,.27,.33],["c",.24,.21,.3,.27,.33,.39],["c",.06,.24,0,.63,-.15,.78],["c",-.09,.12,-.54,.21,-.96,.24],["c",-1.02,.03,-2.01,-.48,-2.43,-1.32],["c",-.21,-.45,-.27,-.9,-.15,-1.44],["c",.06,-.27,.21,-.66,.39,-.93],["c",.87,-1.29,3,-2.22,5.64,-2.43],["z"]],w:19.643,h:43.325},"tab.tiny":{d:[["M",16.02,-17.25],["c",.12,-.09,.15,-.09,.27,-.09],["c",.21,.03,.51,.3,.51,.45],["c",0,.06,-.12,.18,-.3,.36],["c",-1.11,1.08,-2.55,1.59,-3.84,1.41],["c",-.15,-.03,-.33,-.06,-.39,-.09],["c",-.06,-.03,-.09,-.03,-.12,-.03],["c",0,0,-.06,.42,-.15,.93],["c",-.33,2.01,-.66,3.69,-.84,4.26],["c",-.42,1.41,-1.23,2.67,-2.16,3.33],["c",-.27,.18,-.75,.42,-.99,.48],["c",-.3,.09,-.72,.09,-1.02,.06],["c",-.45,-.09,-.84,-.33,-1.53,-.9],["c",-.21,-.18,-.51,-.39,-.63,-.48],["c",-.27,-.21,-.3,-.24,-.3,-.36],["c",0,-.12,.09,-.36,.18,-.45],["c",.09,-.09,.27,-.18,.36,-.18],["c",.12,0,.3,.12,.66,.45],["c",.57,.51,.87,.69,1.23,.72],["c",.93,.06,1.68,-.78,1.98,-2.37],["c",.09,-.39,.15,-.75,.18,-1.53],["c",.06,-.99,.24,-2.79,.42,-4.05],["c",.03,-.3,.06,-.57,.06,-.6],["c",0,-.06,-.03,-.09,-.15,-.12],["c",-.9,-.18,-2.13,.06,-2.76,.57],["c",-.36,.3,-.51,.6,-.51,1.02],["c",0,.45,.15,.75,.48,.99],["c",.06,.06,.15,.18,.18,.24],["c",.12,.24,.03,.63,-.15,.69],["c",-.24,.12,-.6,.15,-.9,.15],["c",-.36,-.03,-.57,-.09,-.87,-.24],["c",-.78,-.36,-1.23,-1.11,-1.2,-1.92],["c",.12,-1.53,1.74,-2.49,4.62,-2.7],["c",1.2,-.09,1.47,-.03,3.33,.57],["c",.9,.3,1.14,.36,1.56,.39],["c",.45,0,.93,-.06,1.38,-.21],["c",.51,-.18,.81,-.33,1.41,-.75],["z"],["m",-4.68,10.38],["c",.39,-.06,.84,0,1.2,.15],["c",.24,.12,.36,.21,.45,.36],["l",.09,.09],["l",-.06,1.41],["c",-.09,2.19,-.18,3.96,-.27,5.49],["c",-.03,.78,-.06,1.59,-.06,1.86],["c",0,.42,0,.48,.06,.57],["c",.06,.18,.18,.24,.36,.27],["c",.18,0,.39,-.06,.84,-.27],["c",.45,-.21,.54,-.24,.63,-.18],["c",.12,.12,.15,.54,.03,.69],["c",-.03,.03,-.15,.12,-.27,.18],["c",-.15,.03,-.3,.12,-.36,.15],["c",-.87,.45,-1.02,.51,-1.26,.57],["c",-.33,.09,-.6,.06,-.84,-.06],["c",-.42,-.18,-.63,-.6,-.87,-1.44],["c",-.3,-1.23,-.57,-2.97,-.66,-4.08],["c",0,-.18,-.03,-.3,-.03,-.33],["l",-.06,.06],["c",-.18,.27,-1.11,1.38,-1.68,2.01],["l",-.33,.33],["l",.06,.09],["c",.06,.15,.27,.33,.48,.42],["c",.27,.18,.51,.24,.96,.27],["l",.39,0],["l",.03,.12],["c",.12,.21,.03,.57,-.15,.69],["c",-.03,.03,-.21,.09,-.36,.15],["c",-.27,.06,-.39,.06,-.75,.06],["c",-.48,0,-.75,-.03,-1.08,-.21],["c",-.21,-.12,-.51,-.36,-.57,-.48],["l",-.03,-.09],["l",-.39,.36],["c",-1.47,1.35,-2.49,1.98,-3.42,2.13],["c",-.54,.09,-.96,-.03,-1.62,-.39],["c",-.21,-.15,-.45,-.27,-.54,-.3],["c",-.18,-.09,-.21,-.21,-.12,-.45],["c",.06,-.27,.33,-.48,.54,-.48],["c",.03,0,.27,.09,.48,.21],["c",.48,.24,.69,.27,.99,.27],["c",.6,-.06,1.17,-.42,2.1,-1.35],["c",2.22,-2.22,4.02,-4.98,4.95,-7.59],["c",.21,-.57,.3,-.78,.48,-.93],["c",.15,-.15,.42,-.27,.66,-.33],["z"],["m",-3.06,12.84],["c",.27,-.03,1.68,0,2.01,.03],["c",1.92,.18,3.15,.69,3.63,1.5],["c",.18,.33,.24,.51,.21,.93],["c",0,.45,-.06,.72,-.24,1.11],["c",-.24,.51,-.69,1.02,-1.17,1.35],["c",-.21,.15,-.21,.15,-.12,.18],["c",.72,.15,1.11,.3,1.5,.57],["c",.39,.24,.63,.57,.75,.96],["c",.09,.3,.09,.96,0,1.29],["c",-.15,.57,-.39,1.05,-.78,1.5],["c",-.66,.75,-1.62,1.32,-2.61,1.53],["c",-.27,.06,-.42,.06,-.84,.06],["c",-.48,0,-.57,0,-.81,-.06],["c",-.6,-.18,-1.05,-.42,-1.47,-.81],["c",-.36,-.39,-.42,-.51,-.3,-.75],["c",.12,-.21,.39,-.39,.6,-.39],["c",.09,0,.15,.03,.33,.18],["c",.12,.12,.27,.24,.36,.27],["c",.96,.48,2.46,-.33,2.82,-1.5],["c",.24,-.81,-.03,-1.44,-.69,-1.77],["c",-.39,-.21,-1.02,-.33,-1.53,-.33],["c",-.18,0,-.21,0,-.27,-.09],["c",-.06,-.09,-.06,-.3,-.03,-.48],["c",.06,-.18,.18,-.36,.33,-.36],["c",.39,-.06,.51,-.09,.72,-.18],["c",.69,-.36,1.11,-1.23,.99,-2.01],["c",-.09,-.51,-.42,-.9,-.93,-1.17],["c",-.24,-.12,-.6,-.27,-.87,-.3],["c",-.09,-.03,-.09,-.03,-.12,.12],["c",0,.09,-.21,1.11,-.42,2.25],["c",-.66,3.75,-.72,3.99,-1.26,5.07],["c",-.9,1.89,-2.25,2.85,-3.48,2.61],["c",-.39,-.09,-.69,-.27,-1.38,-.84],["c",-.63,-.51,-.63,-.48,-.63,-.6],["c",0,-.18,.18,-.48,.39,-.57],["c",.21,-.12,.3,-.09,.81,.33],["c",.15,.15,.39,.3,.54,.36],["c",.18,.12,.27,.12,.48,.15],["c",.99,.06,1.71,-.78,2.04,-2.46],["c",.12,-.66,.18,-1.14,.21,-2.22],["c",.03,-1.23,.12,-2.25,.36,-3.63],["c",.03,-.24,.06,-.45,.06,-.48],["c",-.06,-.03,-.66,.27,-.9,.42],["c",-.06,.06,-.21,.18,-.33,.3],["c",-.57,.57,-.6,1.35,-.06,1.74],["c",.18,.12,.24,.24,.21,.51],["c",-.03,.3,-.15,.42,-.57,.48],["c",-1.11,.24,-2.22,-.42,-2.43,-1.38],["c",-.09,-.45,.03,-1.02,.3,-1.47],["c",.18,-.24,.6,-.63,.9,-.84],["c",.9,-.6,2.28,-1.02,3.69,-1.11],["z"]],w:15.709,h:34.656},"timesig.common":{d:[["M",6.66,-7.83],["c",.72,-.06,1.41,-.03,1.98,.09],["c",1.2,.27,2.34,.96,3.09,1.92],["c",.63,.81,1.08,1.86,1.14,2.73],["c",.06,1.02,-.51,1.92,-1.44,2.22],["c",-.24,.09,-.3,.09,-.63,.09],["c",-.33,0,-.42,0,-.63,-.06],["c",-.66,-.24,-1.14,-.63,-1.41,-1.2],["c",-.15,-.3,-.21,-.51,-.24,-.9],["c",-.06,-1.08,.57,-2.04,1.56,-2.37],["c",.18,-.06,.27,-.06,.63,-.06],["l",.45,0],["c",.06,.03,.09,.03,.09,0],["c",0,0,-.09,-.12,-.24,-.27],["c",-1.02,-1.11,-2.55,-1.68,-4.08,-1.5],["c",-1.29,.15,-2.04,.69,-2.4,1.74],["c",-.36,.93,-.42,1.89,-.42,5.37],["c",0,2.97,.06,3.96,.24,4.77],["c",.24,1.08,.63,1.68,1.41,2.07],["c",.81,.39,2.16,.45,3.18,.09],["c",1.29,-.45,2.37,-1.53,3.03,-2.97],["c",.15,-.33,.33,-.87,.39,-1.17],["c",.09,-.24,.15,-.36,.3,-.39],["c",.21,-.03,.42,.15,.39,.36],["c",-.06,.39,-.42,1.38,-.69,1.89],["c",-.96,1.8,-2.49,2.94,-4.23,3.18],["c",-.99,.12,-2.58,-.06,-3.63,-.45],["c",-.96,-.36,-1.71,-.84,-2.4,-1.5],["c",-1.11,-1.11,-1.8,-2.61,-2.04,-4.56],["c",-.06,-.6,-.06,-2.01,0,-2.61],["c",.24,-1.95,.9,-3.45,2.01,-4.56],["c",.69,-.66,1.44,-1.11,2.37,-1.47],["c",.63,-.24,1.47,-.42,2.22,-.48],["z"]],w:13.038,h:15.689},"timesig.cut":{d:[["M",6.24,-10.44],["c",.09,-.06,.09,-.06,.48,-.06],["c",.36,0,.36,0,.45,.06],["l",.06,.09],["l",0,1.23],["l",0,1.26],["l",.27,0],["c",1.26,0,2.49,.45,3.48,1.29],["c",1.05,.87,1.8,2.28,1.89,3.48],["c",.06,1.02,-.51,1.92,-1.44,2.22],["c",-.24,.09,-.3,.09,-.63,.09],["c",-.33,0,-.42,0,-.63,-.06],["c",-.66,-.24,-1.14,-.63,-1.41,-1.2],["c",-.15,-.3,-.21,-.51,-.24,-.9],["c",-.06,-1.08,.57,-2.04,1.56,-2.37],["c",.18,-.06,.27,-.06,.63,-.06],["l",.45,0],["c",.06,.03,.09,.03,.09,0],["c",0,-.03,-.45,-.51,-.66,-.69],["c",-.87,-.69,-1.83,-1.05,-2.94,-1.11],["l",-.42,0],["l",0,7.17],["l",0,7.14],["l",.42,0],["c",.69,-.03,1.23,-.18,1.86,-.51],["c",1.05,-.51,1.89,-1.47,2.46,-2.7],["c",.15,-.33,.33,-.87,.39,-1.17],["c",.09,-.24,.15,-.36,.3,-.39],["c",.21,-.03,.42,.15,.39,.36],["c",-.03,.24,-.21,.78,-.39,1.2],["c",-.96,2.37,-2.94,3.9,-5.13,3.9],["l",-.3,0],["l",0,1.26],["l",0,1.23],["l",-.06,.09],["c",-.09,.06,-.09,.06,-.45,.06],["c",-.39,0,-.39,0,-.48,-.06],["l",-.06,-.09],["l",0,-1.29],["l",0,-1.29],["l",-.21,-.03],["c",-1.23,-.21,-2.31,-.63,-3.21,-1.29],["c",-.15,-.09,-.45,-.36,-.66,-.57],["c",-1.11,-1.11,-1.8,-2.61,-2.04,-4.56],["c",-.06,-.6,-.06,-2.01,0,-2.61],["c",.24,-1.95,.93,-3.45,2.04,-4.59],["c",.42,-.39,.78,-.66,1.26,-.93],["c",.75,-.45,1.65,-.75,2.61,-.9],["l",.21,-.03],["l",0,-1.29],["l",0,-1.29],["z"],["m",-.06,10.44],["c",0,-5.58,0,-6.99,-.03,-6.99],["c",-.15,0,-.63,.27,-.87,.45],["c",-.45,.36,-.75,.93,-.93,1.77],["c",-.18,.81,-.24,1.8,-.24,4.74],["c",0,2.97,.06,3.96,.24,4.77],["c",.24,1.08,.66,1.68,1.41,2.07],["c",.12,.06,.3,.12,.33,.15],["l",.09,0],["l",0,-6.96],["z"]],w:13.038,h:20.97},"timesig.imperfectum":{d:[["M",13,-5],["a",8,8,0,1,0,0,10]],w:13.038,h:20.97},"timesig.imperfectum2":{d:[["M",13,-5],["a",8,8,0,1,0,0,10]],w:13.038,h:20.97},"timesig.perfectum":{d:[["M",13,-5],["a",8,8,0,1,0,0,10]],w:13.038,h:20.97},"timesig.perfectum2":{d:[["M",13,-5],["a",8,8,0,1,0,0,10]],w:13.038,h:20.97},f:{d:[["M",9.93,-14.28],["c",1.53,-.18,2.88,.45,3.12,1.5],["c",.12,.51,0,1.32,-.27,1.86],["c",-.15,.3,-.42,.57,-.63,.69],["c",-.69,.36,-1.56,.03,-1.83,-.69],["c",-.09,-.24,-.09,-.69,0,-.87],["c",.06,-.12,.21,-.24,.45,-.42],["c",.42,-.24,.57,-.45,.6,-.72],["c",.03,-.33,-.09,-.39,-.63,-.42],["c",-.3,0,-.45,0,-.6,.03],["c",-.81,.21,-1.35,.93,-1.74,2.46],["c",-.06,.27,-.48,2.25,-.48,2.31],["c",0,.03,.39,.03,.9,.03],["c",.72,0,.9,0,.99,.06],["c",.42,.15,.45,.72,.03,.9],["c",-.12,.06,-.24,.06,-1.17,.06],["l",-1.05,0],["l",-.78,2.55],["c",-.45,1.41,-.87,2.79,-.96,3.06],["c",-.87,2.37,-2.37,4.74,-3.78,5.91],["c",-1.05,.9,-2.04,1.23,-3.09,1.08],["c",-1.11,-.18,-1.89,-.78,-2.04,-1.59],["c",-.12,-.66,.15,-1.71,.54,-2.19],["c",.69,-.75,1.86,-.54,2.22,.39],["c",.06,.15,.09,.27,.09,.48],["c",0,.24,-.03,.27,-.12,.42],["c",-.03,.09,-.15,.18,-.27,.27],["c",-.09,.06,-.27,.21,-.36,.27],["c",-.24,.18,-.36,.36,-.39,.6],["c",-.03,.33,.09,.39,.63,.42],["c",.42,0,.63,-.03,.9,-.15],["c",.6,-.3,.96,-.96,1.38,-2.64],["c",.09,-.42,.63,-2.55,1.17,-4.77],["l",1.02,-4.08],["c",0,-.03,-.36,-.03,-.81,-.03],["c",-.72,0,-.81,0,-.93,-.06],["c",-.42,-.18,-.39,-.75,.03,-.9],["c",.09,-.06,.27,-.06,1.05,-.06],["l",.96,0],["l",0,-.09],["c",.06,-.18,.3,-.72,.51,-1.17],["c",1.2,-2.46,3.3,-4.23,5.34,-4.5],["z"]],w:16.155,h:19.445},m:{d:[["M",2.79,-8.91],["c",.09,0,.3,-.03,.45,-.03],["c",.24,.03,.3,.03,.45,.12],["c",.36,.15,.63,.54,.75,1.02],["l",.03,.21],["l",.33,-.3],["c",.69,-.69,1.38,-1.02,2.07,-1.02],["c",.27,0,.33,0,.48,.06],["c",.21,.09,.48,.36,.63,.6],["c",.03,.09,.12,.27,.18,.42],["c",.03,.15,.09,.27,.12,.27],["c",0,0,.09,-.09,.18,-.21],["c",.33,-.39,.87,-.81,1.29,-.99],["c",.78,-.33,1.47,-.21,2.01,.33],["c",.3,.33,.48,.69,.6,1.14],["c",.09,.42,.06,.54,-.54,3.06],["c",-.33,1.29,-.57,2.4,-.57,2.43],["c",0,.12,.09,.21,.21,.21],["c",.24,0,.75,-.3,1.2,-.72],["c",.45,-.39,.6,-.45,.78,-.27],["c",.18,.18,.09,.36,-.45,.87],["c",-1.05,.96,-1.83,1.47,-2.58,1.71],["c",-.93,.33,-1.53,.21,-1.8,-.33],["c",-.06,-.15,-.06,-.21,-.06,-.45],["c",0,-.24,.03,-.48,.6,-2.82],["c",.42,-1.71,.6,-2.64,.63,-2.79],["c",.03,-.57,-.3,-.75,-.84,-.48],["c",-.24,.12,-.54,.39,-.66,.63],["c",-.03,.09,-.42,1.38,-.9,3],["c",-.9,3.15,-.84,3,-1.14,3.15],["l",-.15,.09],["l",-.78,0],["c",-.6,0,-.78,0,-.84,-.06],["c",-.09,-.03,-.18,-.18,-.18,-.27],["c",0,-.03,.36,-1.38,.84,-2.97],["c",.57,-2.04,.81,-2.97,.84,-3.12],["c",.03,-.54,-.3,-.72,-.84,-.45],["c",-.24,.12,-.57,.42,-.66,.63],["c",-.06,.09,-.51,1.44,-1.05,2.97],["c",-.51,1.56,-.99,2.85,-.99,2.91],["c",-.06,.12,-.21,.24,-.36,.3],["c",-.12,.06,-.21,.06,-.9,.06],["c",-.6,0,-.78,0,-.84,-.06],["c",-.09,-.03,-.18,-.18,-.18,-.27],["c",0,-.03,.45,-1.38,.99,-2.97],["c",1.05,-3.18,1.05,-3.18,.93,-3.45],["c",-.12,-.27,-.39,-.3,-.72,-.15],["c",-.54,.27,-1.14,1.17,-1.56,2.4],["c",-.06,.15,-.15,.3,-.18,.36],["c",-.21,.21,-.57,.27,-.72,.09],["c",-.09,-.09,-.06,-.21,.06,-.63],["c",.48,-1.26,1.26,-2.46,2.01,-3.21],["c",.57,-.54,1.2,-.87,1.83,-1.02],["z"]],w:14.687,h:9.126},p:{d:[["M",1.92,-8.7],["c",.27,-.09,.81,-.06,1.11,.03],["c",.54,.18,.93,.51,1.17,.99],["c",.09,.15,.15,.33,.18,.36],["l",0,.12],["l",.3,-.27],["c",.66,-.6,1.35,-1.02,2.13,-1.2],["c",.21,-.06,.33,-.06,.78,-.06],["c",.45,0,.51,0,.84,.09],["c",1.29,.33,2.07,1.32,2.25,2.79],["c",.09,.81,-.09,2.01,-.45,2.79],["c",-.54,1.26,-1.86,2.55,-3.18,3.03],["c",-.45,.18,-.81,.24,-1.29,.24],["c",-.69,-.03,-1.35,-.18,-1.86,-.45],["c",-.3,-.15,-.51,-.18,-.69,-.09],["c",-.09,.03,-.18,.09,-.18,.12],["c",-.09,.12,-1.05,2.94,-1.05,3.06],["c",0,.24,.18,.48,.51,.63],["c",.18,.06,.54,.15,.75,.15],["c",.21,0,.36,.06,.42,.18],["c",.12,.18,.06,.42,-.12,.54],["c",-.09,.03,-.15,.03,-.78,0],["c",-1.98,-.15,-3.81,-.15,-5.79,0],["c",-.63,.03,-.69,.03,-.78,0],["c",-.24,-.15,-.24,-.57,.03,-.66],["c",.06,-.03,.48,-.09,.99,-.12],["c",.87,-.06,1.11,-.09,1.35,-.21],["c",.18,-.06,.33,-.18,.39,-.3],["c",.06,-.12,3.24,-9.42,3.27,-9.6],["c",.06,-.33,.03,-.57,-.15,-.69],["c",-.09,-.06,-.12,-.06,-.3,-.06],["c",-.69,.06,-1.53,1.02,-2.28,2.61],["c",-.09,.21,-.21,.45,-.27,.51],["c",-.09,.12,-.33,.24,-.48,.24],["c",-.18,0,-.36,-.15,-.36,-.3],["c",0,-.24,.78,-1.83,1.26,-2.55],["c",.72,-1.11,1.47,-1.74,2.28,-1.92],["z"],["m",5.37,1.47],["c",-.27,-.12,-.75,-.03,-1.14,.21],["c",-.75,.48,-1.47,1.68,-1.89,3.15],["c",-.45,1.47,-.42,2.34,0,2.7],["c",.45,.39,1.26,.21,1.83,-.36],["c",.51,-.51,.99,-1.68,1.38,-3.27],["c",.3,-1.17,.33,-1.74,.15,-2.13],["c",-.09,-.15,-.15,-.21,-.33,-.3],["z"]],w:14.689,h:13.127},r:{d:[["M",6.33,-9.12],["c",.27,-.03,.93,0,1.2,.06],["c",.84,.21,1.23,.81,1.02,1.53],["c",-.24,.75,-.9,1.17,-1.56,.96],["c",-.33,-.09,-.51,-.3,-.66,-.75],["c",-.03,-.12,-.09,-.24,-.12,-.3],["c",-.09,-.15,-.3,-.24,-.48,-.24],["c",-.57,0,-1.38,.54,-1.65,1.08],["c",-.06,.15,-.33,1.17,-.9,3.27],["c",-.57,2.31,-.81,3.12,-.87,3.21],["c",-.03,.06,-.12,.15,-.18,.21],["l",-.12,.06],["l",-.81,.03],["c",-.69,0,-.81,0,-.9,-.03],["c",-.09,-.06,-.18,-.21,-.18,-.3],["c",0,-.06,.39,-1.62,.9,-3.51],["c",.84,-3.24,.87,-3.45,.87,-3.72],["c",0,-.21,0,-.27,-.03,-.36],["c",-.12,-.15,-.21,-.24,-.42,-.24],["c",-.24,0,-.45,.15,-.78,.42],["c",-.33,.36,-.45,.54,-.72,1.14],["c",-.03,.12,-.21,.24,-.36,.27],["c",-.12,0,-.15,0,-.24,-.06],["c",-.18,-.12,-.18,-.21,-.06,-.54],["c",.21,-.57,.42,-.93,.78,-1.32],["c",.54,-.51,1.2,-.81,1.95,-.87],["c",.81,-.03,1.53,.3,1.92,.87],["l",.12,.18],["l",.09,-.09],["c",.57,-.45,1.41,-.84,2.19,-.96],["z"]],w:9.41,h:9.132},s:{d:[["M",4.47,-8.73],["c",.09,0,.36,-.03,.57,-.03],["c",.75,.03,1.29,.24,1.71,.63],["c",.51,.54,.66,1.26,.36,1.83],["c",-.24,.42,-.63,.57,-1.11,.42],["c",-.33,-.09,-.6,-.36,-.6,-.57],["c",0,-.03,.06,-.21,.15,-.39],["c",.12,-.21,.15,-.33,.18,-.48],["c",0,-.24,-.06,-.48,-.15,-.6],["c",-.15,-.21,-.42,-.24,-.75,-.15],["c",-.27,.06,-.48,.18,-.69,.36],["c",-.39,.39,-.51,.96,-.33,1.38],["c",.09,.21,.42,.51,.78,.72],["c",1.11,.69,1.59,1.11,1.89,1.68],["c",.21,.39,.24,.78,.15,1.29],["c",-.18,1.2,-1.17,2.16,-2.52,2.52],["c",-1.02,.24,-1.95,.12,-2.7,-.42],["c",-.72,-.51,-.99,-1.47,-.6,-2.19],["c",.24,-.48,.72,-.63,1.17,-.42],["c",.33,.18,.54,.45,.57,.81],["c",0,.21,-.03,.3,-.33,.51],["c",-.33,.24,-.39,.42,-.27,.69],["c",.06,.15,.21,.27,.45,.33],["c",.3,.09,.87,.09,1.2,0],["c",.75,-.21,1.23,-.72,1.29,-1.35],["c",.03,-.42,-.15,-.81,-.54,-1.2],["c",-.24,-.24,-.48,-.42,-1.41,-1.02],["c",-.69,-.42,-1.05,-.93,-1.05,-1.47],["c",0,-.39,.12,-.87,.3,-1.23],["c",.27,-.57,.78,-1.05,1.38,-1.35],["c",.24,-.12,.63,-.27,.9,-.3],["z"]],w:6.632,h:8.758},z:{d:[["M",2.64,-7.95],["c",.36,-.09,.81,-.03,1.71,.27],["c",.78,.21,.96,.27,1.74,.3],["c",.87,.06,1.02,.03,1.38,-.21],["c",.21,-.15,.33,-.15,.48,-.06],["c",.15,.09,.21,.3,.15,.45],["c",-.03,.06,-1.26,1.26,-2.76,2.67],["l",-2.73,2.55],["l",.54,.03],["c",.54,.03,.72,.03,2.01,.15],["c",.36,.03,.9,.06,1.2,.09],["c",.66,0,.81,-.03,1.02,-.24],["c",.3,-.3,.39,-.72,.27,-1.23],["c",-.06,-.27,-.06,-.27,-.03,-.39],["c",.15,-.3,.54,-.27,.69,.03],["c",.15,.33,.27,1.02,.27,1.5],["c",0,1.47,-1.11,2.7,-2.52,2.79],["c",-.57,.03,-1.02,-.09,-2.01,-.51],["c",-1.02,-.42,-1.23,-.48,-2.13,-.54],["c",-.81,-.06,-.96,-.03,-1.26,.18],["c",-.12,.06,-.24,.12,-.27,.12],["c",-.27,0,-.45,-.3,-.36,-.51],["c",.03,-.06,1.32,-1.32,2.91,-2.79],["l",2.88,-2.73],["c",-.03,0,-.21,.03,-.42,.06],["c",-.21,.03,-.78,.09,-1.23,.12],["c",-1.11,.12,-1.23,.15,-1.95,.27],["c",-.72,.15,-1.17,.18,-1.29,.09],["c",-.27,-.18,-.21,-.75,.12,-1.26],["c",.39,-.6,.93,-1.02,1.59,-1.2],["z"]],w:8.573,h:8.743},"+":{d:[["M",3.48,-9.3],["c",.18,-.09,.36,-.09,.54,0],["c",.18,.09,.24,.15,.33,.3],["l",.06,.15],["l",0,1.29],["l",0,1.29],["l",1.29,0],["c",1.23,0,1.29,0,1.41,.06],["c",.06,.03,.15,.09,.18,.12],["c",.12,.09,.21,.33,.21,.48],["c",0,.15,-.09,.39,-.21,.48],["c",-.03,.03,-.12,.09,-.18,.12],["c",-.12,.06,-.18,.06,-1.41,.06],["l",-1.29,0],["l",0,1.29],["c",0,1.23,0,1.29,-.06,1.41],["c",-.09,.18,-.15,.24,-.3,.33],["c",-.21,.09,-.39,.09,-.57,0],["c",-.18,-.09,-.24,-.15,-.33,-.33],["c",-.06,-.12,-.06,-.18,-.06,-1.41],["l",0,-1.29],["l",-1.29,0],["c",-1.23,0,-1.29,0,-1.41,-.06],["c",-.18,-.09,-.24,-.15,-.33,-.33],["c",-.09,-.18,-.09,-.36,0,-.54],["c",.09,-.18,.15,-.24,.33,-.33],["l",.15,-.06],["l",1.26,0],["l",1.29,0],["l",0,-1.29],["c",0,-1.23,0,-1.29,.06,-1.41],["c",.09,-.18,.15,-.24,.33,-.33],["z"]],w:7.507,h:7.515},",":{d:[["M",1.85,-3.36],["c",.57,-.15,1.17,.03,1.59,.45],["c",.45,.45,.6,.96,.51,1.89],["c",-.09,1.23,-.42,2.46,-.99,3.93],["c",-.3,.72,-.72,1.62,-.78,1.68],["c",-.18,.21,-.51,.18,-.66,-.06],["c",-.03,-.06,-.06,-.15,-.06,-.18],["c",0,-.06,.12,-.33,.24,-.63],["c",.84,-1.8,1.02,-2.61,.69,-3.24],["c",-.12,-.24,-.27,-.36,-.75,-.6],["c",-.36,-.15,-.42,-.21,-.6,-.39],["c",-.69,-.69,-.69,-1.71,0,-2.4],["c",.21,-.21,.51,-.39,.81,-.45],["z"]],w:3.452,h:8.143},"-":{d:[["M",.18,-5.34],["c",.09,-.06,.15,-.06,2.31,-.06],["c",2.46,0,2.37,0,2.46,.21],["c",.12,.21,.03,.42,-.15,.54],["c",-.09,.06,-.15,.06,-2.28,.06],["c",-2.16,0,-2.22,0,-2.31,-.06],["c",-.27,-.15,-.27,-.54,-.03,-.69],["z"]],w:5.001,h:.81},".":{d:[["M",1.32,-3.36],["c",1.05,-.27,2.1,.57,2.1,1.65],["c",0,1.08,-1.05,1.92,-2.1,1.65],["c",-.9,-.21,-1.5,-1.14,-1.26,-2.04],["c",.12,-.63,.63,-1.11,1.26,-1.26],["z"]],w:3.413,h:3.402},"scripts.wedge":{d:[["M",-3.66,-7.44],["c",.06,-.09,0,-.09,.81,.03],["c",1.86,.3,3.84,.3,5.73,0],["c",.78,-.12,.72,-.12,.78,-.03],["c",.15,.15,.12,.24,-.24,.6],["c",-.93,.93,-1.98,2.76,-2.67,4.62],["c",-.3,.78,-.51,1.71,-.51,2.13],["c",0,.15,0,.18,-.06,.27],["c",-.12,.09,-.24,.09,-.36,0],["c",-.06,-.09,-.06,-.12,-.06,-.27],["c",0,-.42,-.21,-1.35,-.51,-2.13],["c",-.69,-1.86,-1.74,-3.69,-2.67,-4.62],["c",-.36,-.36,-.39,-.45,-.24,-.6],["z"]],w:7.49,h:7.752},"scripts.thumb":{d:[["M",-.54,-3.69],["c",.15,-.03,.36,-.06,.51,-.06],["c",1.44,0,2.58,1.11,2.94,2.85],["c",.09,.48,.09,1.32,0,1.8],["c",-.27,1.41,-1.08,2.43,-2.16,2.73],["l",-.18,.06],["l",0,.12],["c",.03,.06,.06,.45,.09,.87],["c",.03,.57,.03,.78,0,.84],["c",-.09,.27,-.39,.48,-.66,.48],["c",-.27,0,-.57,-.21,-.66,-.48],["c",-.03,-.06,-.03,-.27,0,-.84],["c",.03,-.42,.06,-.81,.09,-.87],["l",0,-.12],["l",-.18,-.06],["c",-1.08,-.3,-1.89,-1.32,-2.16,-2.73],["c",-.09,-.48,-.09,-1.32,0,-1.8],["c",.15,-.84,.51,-1.53,1.02,-2.04],["c",.39,-.39,.84,-.63,1.35,-.75],["z"],["m",1.05,.9],["c",-.15,-.09,-.21,-.09,-.45,-.12],["c",-.15,0,-.3,.03,-.39,.03],["c",-.57,.18,-.9,.72,-1.08,1.74],["c",-.06,.48,-.06,1.8,0,2.28],["c",.15,.9,.42,1.44,.9,1.65],["c",.18,.09,.21,.09,.51,.09],["c",.3,0,.33,0,.51,-.09],["c",.48,-.21,.75,-.75,.9,-1.65],["c",.03,-.27,.03,-.54,.03,-1.14],["c",0,-.6,0,-.87,-.03,-1.14],["c",-.15,-.9,-.45,-1.44,-.9,-1.65],["z"]],w:5.955,h:9.75},"scripts.open":{d:[["M",-.54,-3.69],["c",.15,-.03,.36,-.06,.51,-.06],["c",1.44,0,2.58,1.11,2.94,2.85],["c",.09,.48,.09,1.32,0,1.8],["c",-.33,1.74,-1.47,2.85,-2.91,2.85],["c",-1.44,0,-2.58,-1.11,-2.91,-2.85],["c",-.09,-.48,-.09,-1.32,0,-1.8],["c",.15,-.84,.51,-1.53,1.02,-2.04],["c",.39,-.39,.84,-.63,1.35,-.75],["z"],["m",1.11,.9],["c",-.21,-.09,-.27,-.09,-.51,-.12],["c",-.3,0,-.42,.03,-.66,.15],["c",-.24,.12,-.51,.39,-.66,.63],["c",-.54,.93,-.63,2.64,-.21,3.81],["c",.21,.54,.51,.9,.93,1.11],["c",.21,.09,.24,.09,.54,.09],["c",.3,0,.33,0,.54,-.09],["c",.42,-.21,.72,-.57,.93,-1.11],["c",.36,-.99,.36,-2.37,0,-3.36],["c",-.21,-.54,-.51,-.9,-.9,-1.11],["z"]],w:5.955,h:7.5},"scripts.longphrase":{d:[["M",1.47,-15.09],["c",.36,-.09,.66,-.18,.69,-.18],["c",.06,0,.06,.54,.06,11.25],["l",0,11.25],["l",-.63,.15],["c",-.66,.18,-1.44,.39,-1.5,.39],["c",-.03,0,-.03,-3.39,-.03,-11.25],["l",0,-11.25],["l",.36,-.09],["c",.21,-.06,.66,-.18,1.05,-.27],["z"]],w:2.16,h:23.04},"scripts.mediumphrase":{d:[["M",1.47,-7.59],["c",.36,-.09,.66,-.18,.69,-.18],["c",.06,0,.06,.39,.06,7.5],["l",0,7.5],["l",-.63,.15],["c",-.66,.18,-1.44,.39,-1.5,.39],["c",-.03,0,-.03,-2.28,-.03,-7.5],["l",0,-7.5],["l",.36,-.09],["c",.21,-.06,.66,-.18,1.05,-.27],["z"]],w:2.16,h:15.54},"scripts.shortphrase":{d:[["M",1.47,-7.59],["c",.36,-.09,.66,-.18,.69,-.18],["c",.06,0,.06,.21,.06,3.75],["l",0,3.75],["l",-.42,.09],["c",-.57,.18,-1.65,.45,-1.71,.45],["c",-.03,0,-.03,-.72,-.03,-3.75],["l",0,-3.75],["l",.36,-.09],["c",.21,-.06,.66,-.18,1.05,-.27],["z"]],w:2.16,h:8.04},"scripts.snap":{d:[["M",4.5,-3.39],["c",.36,-.03,.96,-.03,1.35,0],["c",1.56,.15,3.15,.9,4.2,2.01],["c",.24,.27,.33,.42,.33,.6],["c",0,.27,.03,.24,-2.46,2.22],["c",-1.29,1.02,-2.4,1.86,-2.49,1.92],["c",-.18,.09,-.3,.09,-.48,0],["c",-.09,-.06,-1.2,-.9,-2.49,-1.92],["c",-2.49,-1.98,-2.46,-1.95,-2.46,-2.22],["c",0,-.18,.09,-.33,.33,-.6],["c",1.05,-1.08,2.64,-1.86,4.17,-2.01],["z"],["m",1.29,1.17],["c",-1.47,-.15,-2.97,.3,-4.14,1.2],["l",-.18,.15],["l",.06,.09],["c",.15,.12,3.63,2.85,3.66,2.85],["c",.03,0,3.51,-2.73,3.66,-2.85],["l",.06,-.09],["l",-.18,-.15],["c",-.84,-.66,-1.89,-1.08,-2.94,-1.2],["z"]],w:10.38,h:6.84}};t["noteheads.slash.whole"]={d:[["M",5,-5],["l",1,1],["l",-5,5],["l",-1,-1],["z"],["m",4,6],["l",-5,-5],["l",2,-2],["l",5,5],["z"],["m",0,-2],["l",1,1],["l",-5,5],["l",-1,-1],["z"],["m",-4,6],["l",-5,-5],["l",2,-2],["l",5,5],["z"]],w:10.81,h:15.63},t["noteheads.slash.quarter"]={d:[["M",9,-6],["l",0,4],["l",-9,9],["l",0,-4],["z"]],w:9,h:9},t["noteheads.harmonic.quarter"]={d:[["M",3.63,-4.02],["c",.09,-.06,.18,-.09,.24,-.03],["c",.03,.03,.87,.93,1.83,2.01],["c",1.5,1.65,1.8,1.98,1.8,2.04],["c",0,.06,-.3,.39,-1.8,2.04],["c",-.96,1.08,-1.8,1.98,-1.83,2.01],["c",-.06,.06,-.15,.03,-.24,-.03],["c",-.12,-.09,-3.54,-3.84,-3.6,-3.93],["c",-.03,-.03,-.03,-.09,-.03,-.15],["c",.03,-.06,3.45,-3.84,3.63,-3.96],["z"]],w:7.5,h:8.165},t["noteheads.triangle.quarter"]={d:[["M",0,4],["l",9,0],["l",-4.5,-9],["z"]],w:9,h:9};var a=function(s){for(var l=[],c=0,f=s.length;c<f;c++){l[c]=[];for(var p=0,v=s[c].length;p<v;p++)l[c][p]=s[c][p]}return l},n=function(s,l,c){for(var f=0,p=s.length;f<p;f++){var v=s[f],d,u;for(d=1,u=v.length;d<u;d++)v[d]*=d%2?l:c}},r={printSymbol:function(s,l,c,f,p){if(!t[c])return null;var v=a(t[c].d);v[0][1]+=s,v[0][2]+=l;for(var d="",u=0;u<v.length;u++)d+=v[u].join(" ");return p.path=d,f.path(p)},getPathForSymbol:function(s,l,c,f,p){if(f=f||1,p=p||1,!t[c])return null;var v=a(t[c].d);return(f!==1||p!==1)&&n(v,f,p),v[0][1]+=s,v[0][2]+=l,v},getSymbolWidth:function(s){return t[s]?t[s].w:0},symbolHeightInPitches:function(s){var l=t[s]?t[s].h:0;return l/e.STEP},getSymbolAlign:function(s){return s.substring(0,7)==="scripts"&&s!=="scripts.roll"?"center":"left"},getYCorr:function(s){switch(s){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":return-2;case"timesig.common":case"timesig.cut":return 0;case"flags.d32nd":return-1;case"flags.d64th":return-2;case"flags.u32nd":return 1;case"flags.u64th":return 3;case"rests.whole":return 1;case"rests.half":return-1;case"rests.8th":return-1;case"rests.quarter":return-1;case"rests.16th":return-1;case"rests.32nd":return-1;case"rests.64th":return-1;case"f":case"m":case"p":case"s":case"z":return-4;case"scripts.trill":case"scripts.upbow":case"scripts.downbow":return-2;case"scripts.ufermata":case"scripts.wedge":case"scripts.roll":case"scripts.shortphrase":case"scripts.longphrase":return-1;case"scripts.dfermata":return 1;default:return 0}},setSymbol:function(s,l){t[s]=l}};return tn=r,tn}var rn,lo;function cd(){if(lo)return rn;lo=1;var e=r0(),t=Bt(),a=lt(),n=function(s,l){var c,f=0;s.el_type="clef";var p=new e(s,0,10,"staff-extra clef",l);switch(p.isClef=!0,s.type){case"treble":c="clefs.G";break;case"tenor":c="clefs.C";break;case"alto":c="clefs.C";break;case"bass":c="clefs.F";break;case"treble+8":c="clefs.G",f=1;break;case"tenor+8":c="clefs.C",f=1;break;case"bass+8":c="clefs.F",f=1;break;case"alto+8":c="clefs.C",f=1;break;case"treble-8":c="clefs.G",f=-1;break;case"tenor-8":c="clefs.C",f=-1;break;case"bass-8":c="clefs.F",f=-1;break;case"alto-8":c="clefs.C",f=-1;break;case"none":return null;case"perc":c="clefs.perc";break;default:p.addFixed(new a("clef="+s.type,0,0,void 0,{type:"debug"}))}var v=5;if(c){var d=t.symbolHeightInPitches(c),u=r(c);if(p.addRight(new a(c,v,t.getSymbolWidth(c),s.clefPos,{top:d+s.clefPos+u,bottom:s.clefPos+u})),f!==0){var o=.6666666666666666,h=(t.getSymbolWidth(c)-t.getSymbolWidth("8")*o)/2,i=f>0?p.top+3:p.bottom-1,g=f>0?p.top+3:p.bottom-3,m=g-2;s.type==="bass-8"&&(i=3,h=0),p.addRight(new a("8",v+h,t.getSymbolWidth("8")*o,i,{scalex:o,scaley:o,top:g,bottom:m}))}}return p};function r(s){switch(s){case"clefs.G":return-5;case"clefs.C":return-4;case"clefs.F":return-4;case"clefs.perc":return-2;default:return 0}}return rn=n,rn}var nn,fo;function ld(){if(fo)return nn;fo=1;var e=r0(),t=Bt(),a=lt(),n=function(r,s){if(r.el_type="keySignature",!r.accidentals||r.accidentals.length===0)return null;var l=new e(r,0,10,"staff-extra key-signature",s);l.isKeySig=!0;var c=0;return r.accidentals.forEach(function(f){var p,v=0;switch(f.acc){case"sharp":p="accidentals.sharp",v=-3;break;case"natural":p="accidentals.nat";break;case"flat":p="accidentals.flat",v=-1.2;break;case"quartersharp":p="accidentals.halfsharp",v=-2.5;break;case"quarterflat":p="accidentals.halfflat",v=-1.2;break;default:p="accidentals.flat"}l.addRight(new a(p,c,t.getSymbolWidth(p),f.verticalPos,{thickness:t.symbolHeightInPitches(p),top:f.verticalPos+t.symbolHeightInPitches(p)+v,bottom:f.verticalPos+v})),c+=t.getSymbolWidth(p)+2},this),l};return nn=n,nn}var an,uo;function fd(){if(uo)return an;uo=1;var e=Bt(),t=lt(),a=function(n,r,s,l){l||(l={});var c=l.dir!==void 0?l.dir:null,f=l.headx!==void 0?l.headx:0,p=l.extrax!==void 0?l.extrax:0,v=l.flag!==void 0?l.flag:null,d=l.dot!==void 0?l.dot:0,u=l.dotshiftx!==void 0?l.dotshiftx:0,o=l.scale!==void 0?l.scale:1,h=l.accidentalSlot!==void 0?l.accidentalSlot:[],i=l.shouldExtendStem!==void 0?l.shouldExtendStem:!1,g=l.printAccidentals!==void 0?l.printAccidentals:!0,m=s.verticalPos,b,x=0,C=0,S=0;if(r===void 0)n.addFixed(new t("pitch is undefined",0,0,0,{type:"debug"}));else if(r==="")b=new t(null,0,0,m);else{var I=f;if(s.printer_shift){var F=s.printer_shift==="same"?1:0;I=c==="down"?-e.getSymbolWidth(r)*o+F:e.getSymbolWidth(r)*o-F}var y={scalex:o,scaley:o,thickness:e.symbolHeightInPitches(r)*o,name:s.name};if(b=new t(r,I,e.getSymbolWidth(r)*o,m,y),b.stemDir=c,v){var A=m+(c==="down"?-7:7)*o;i&&(c==="down"&&A>6&&(A=6),c==="up"&&A<6&&(A=6));var P=c==="down"?f:f+b.w-.6;n.addRight(new t(v,P,e.getSymbolWidth(v)*o,A,{scalex:o,scaley:o}))}for(C=b.w+u-2+5*d;d>0;d--){var M=1-Math.abs(m)%2;n.addRight(new t("dots.dot",b.w+u-2+5*d,e.getSymbolWidth("dots.dot"),m+M))}}if(b&&(b.highestVert=s.highestVert),g&&s.accidental){var N;switch(s.accidental){case"quartersharp":N="accidentals.halfsharp";break;case"dblsharp":N="accidentals.dblsharp";break;case"sharp":N="accidentals.sharp";break;case"quarterflat":N="accidentals.halfflat";break;case"flat":N="accidentals.flat";break;case"dblflat":N="accidentals.dblflat";break;case"natural":N="accidentals.nat"}for(var B=!1,E=p,T=0;T<h.length;T++)if(m-h[T][0]>=6){h[T][0]=m,E=h[T][1],B=!0;break}B===!1&&(E-=e.getSymbolWidth(N)*o+2,h.push([m,E]),x=e.getSymbolWidth(N)*o+2);var L=e.symbolHeightInPitches(N);n.addExtra(new t(N,E,e.getSymbolWidth(N),m,{scalex:o,scaley:o,top:m+L/2,bottom:m-L/2})),S=e.getSymbolWidth(N)/2}return{notehead:b,accidentalshiftx:x,dotshiftx:C,extraLeft:S}};return an=a,an}var sn,ho;function ud(){if(ho)return sn;ho=1;var e=r0(),t=Bt(),a=lt(),n=function(r,s){r.el_type="timeSignature";var l=new e(r,0,10,"staff-extra time-signature",s);if(r.type==="specified")for(var c=0,f=0;f<r.value.length;f++)if(f!==0&&(l.addRight(new a("+",c+1,t.getSymbolWidth("+"),6,{thickness:t.symbolHeightInPitches("+")})),c+=t.getSymbolWidth("+")+2),r.value[f].den){for(var p=0,v=0;v<r.value[f].num.length;v++)p+=t.getSymbolWidth(r.value[f].num[v]);var d=0;for(v=0;v<r.value[f].num.length;v++)d+=t.getSymbolWidth(r.value[f].den[v]);var u=Math.max(p,d);l.addRight(new a(r.value[f].num,c+(u-p)/2,p,8,{thickness:t.symbolHeightInPitches(r.value[f].num[0])})),l.addRight(new a(r.value[f].den,c+(u-d)/2,d,4,{thickness:t.symbolHeightInPitches(r.value[f].den[0])})),c+=u}else{for(var o=0,h=0;h<r.value[f].num.length;h++)o+=t.getSymbolWidth(r.value[f].num[h]);l.addRight(new a(r.value[f].num,c,o,6,{thickness:t.symbolHeightInPitches(r.value[f].num[0])})),c+=o}else r.type==="common_time"?l.addRight(new a("timesig.common",0,t.getSymbolWidth("timesig.common"),6,{thickness:t.symbolHeightInPitches("timesig.common")})):r.type==="cut_time"?l.addRight(new a("timesig.cut",0,t.getSymbolWidth("timesig.cut"),6,{thickness:t.symbolHeightInPitches("timesig.cut")})):r.type==="tempus_imperfectum"?l.addRight(new a("timesig.imperfectum",0,t.getSymbolWidth("timesig.imperfectum"),6,{thickness:t.symbolHeightInPitches("timesig.imperfectum")})):r.type==="tempus_imperfectum_prolatio"?l.addRight(new a("timesig.imperfectum2",0,t.getSymbolWidth("timesig.imperfectum2"),6,{thickness:t.symbolHeightInPitches("timesig.imperfectum2")})):r.type==="tempus_perfectum"?l.addRight(new a("timesig.perfectum",0,t.getSymbolWidth("timesig.perfectum"),6,{thickness:t.symbolHeightInPitches("timesig.perfectum")})):r.type==="tempus_perfectum_prolatio"?l.addRight(new a("timesig.perfectum2",0,t.getSymbolWidth("timesig.perfectum2"),6,{thickness:t.symbolHeightInPitches("timesig.perfectum2")})):console.log("time signature:",r);return l};return sn=n,sn}var on,po;function hd(){if(po)return on;po=1;var e=function(a,n,r){this.type="DynamicDecoration",this.anchor=a,this.dec=n,r==="below"?this.volumeHeightBelow=6:this.volumeHeightAbove=6,this.pitch=void 0};return on=e,on}var cn,vo;function dd(){if(vo)return cn;vo=1;var e=function(a,n,r,s){this.type="CrescendoElem",this.anchor1=a,this.anchor2=n,this.dir=r,s==="above"?this.dynamicHeightAbove=6:this.dynamicHeightBelow=6,this.pitch=void 0};return cn=e,cn}var ln,go;function pd(){if(go)return ln;go=1;var e=function(a,n){this.type="GlissandoElem",this.anchor1=a,this.anchor2=n};return ln=e,ln}var fn,bo;function Af(){if(bo)return fn;bo=1;var e=function(a){this.type="TieElem",this.anchor1=a.anchor1,this.anchor2=a.anchor2,a.isGrace&&(this.isGrace=!0),a.fixedY&&(this.fixedY=!0),a.stemDir&&(this.stemDir=a.stemDir),a.voiceNumber!==void 0&&(this.voiceNumber=a.voiceNumber),a.style!==void 0&&(this.dotted=!0),this.internalNotes=[]};return e.prototype.addInternalNote=function(t){this.internalNotes.push(t)},e.prototype.setEndAnchor=function(t){this.anchor2=t,this.anchor1?(this.top=Math.max(this.anchor1.pitch,this.anchor2.pitch)+4,this.bottom=Math.min(this.anchor1.pitch,this.anchor2.pitch)-4):(this.top=this.anchor2.pitch+4,this.bottom=this.anchor2.pitch-4)},e.prototype.setStartX=function(t){this.startLimitX=t},e.prototype.setEndX=function(t){this.endLimitX=t},e.prototype.setHint=function(){this.hint=!0},e.prototype.calcTieDirection=function(){if(this.isGrace)this.above=!1;else if(this.voiceNumber===0)this.above=!0;else if(this.voiceNumber>0)this.above=!1;else{var t;this.anchor1?t=this.anchor1.pitch:this.anchor2?t=this.anchor2.pitch:t=14,this.anchor1&&this.anchor1.stemDir==="down"&&this.anchor2&&this.anchor2.stemDir==="down"?this.above=!0:this.anchor1&&this.anchor1.stemDir==="up"&&this.anchor2&&this.anchor2.stemDir==="up"?this.above=!1:this.anchor1&&this.anchor2?this.above=t>=6:this.anchor1?this.above=this.anchor1.stemDir==="down":this.anchor2?this.above=this.anchor2.stemDir==="down":this.above=t>=6}},e.prototype.calcSlurDirection=function(){if(this.isGrace)this.above=!1;else if(this.voiceNumber===0)this.above=!0;else if(this.voiceNumber>0)this.above=!1;else{var t=!1;this.anchor1&&this.anchor1.stemDir==="down"&&(t=!0),this.anchor2&&this.anchor2.stemDir==="down"&&(t=!0);for(var a=0;a<this.internalNotes.length;a++){var n=this.internalNotes[a];n.stemDir==="down"&&(t=!0)}this.above=t}},e.prototype.calcX=function(t,a){this.anchor1?(this.startX=this.anchor1.x,this.anchor1.scalex<1&&(this.startX-=3)):this.startLimitX?this.startX=this.startLimitX.x+this.startLimitX.w:this.anchor2?this.startX=this.anchor2.x-20:this.startX=t,!this.anchor1&&this.dotted&&(this.startX-=3),this.anchor2?this.endX=this.anchor2.x:this.endLimitX?this.endX=this.endLimitX.x:this.endX=a},e.prototype.calcTieY=function(){this.anchor1?this.startY=this.anchor1.pitch:this.anchor2?this.startY=this.anchor2.pitch:this.startY=this.above?14:0,this.anchor2?this.endY=this.anchor2.pitch:this.anchor1?this.endY=this.anchor1.pitch:this.endY=this.above?14:0},e.prototype.calcSlurY=function(){if(this.anchor1&&this.anchor2){this.above&&this.anchor1.stemDir==="up"&&!this.fixedY?(this.startY=(this.anchor1.highestVert+this.anchor1.pitch)/2,this.startX+=this.anchor1.w/2):this.startY=this.anchor1.pitch;var t=this.anchor2.parent.beam&&this.anchor2.parent.beam.stemsUp&&this.anchor2.parent.beam.elems[0]!==this.anchor2.parent,a=(this.anchor2.highestVert+this.anchor2.pitch)/2;if(this.above&&this.anchor2.stemDir==="up"&&!this.fixedY&&!t&&a<this.startY?(this.endY=a,this.endX+=Math.round(this.anchor2.w/2)):this.endY=this.above&&t?this.anchor2.highestVert:this.anchor2.pitch,this.anchor1.scalex===1){var n=!!this.anchor1.parent.beam,r=!!this.anchor2.parent.beam;if(n){var s=this.anchor1.parent===this.anchor1.parent.beam.elems[this.anchor1.parent.beam.elems.length-1];s||(this.above?this.startY=this.anchor1.parent.fixed.t:this.startY=this.anchor1.parent.fixed.b)}if(r){var l=this.anchor2.parent===this.anchor2.parent.beam.elems[0];l||(this.above?this.endY=this.anchor2.parent.fixed.t:this.endY=this.anchor2.parent.fixed.b)}}}else this.anchor1?this.startY=this.endY=this.anchor1.pitch:this.anchor2?this.startY=this.endY=this.anchor2.pitch:(this.startY=this.above?14:0,this.endY=this.above?14:0)},e.prototype.avoidCollisionAbove=function(){if(this.above){for(var t=-50,a=0;a<this.internalNotes.length;a++)this.internalNotes[a].highestVert>t&&(t=this.internalNotes[a].highestVert);t>this.startY&&t>this.endY&&(this.startY=this.endY=t-1)}},e.prototype.getYBounds=function(){var t=10,a=1e3;this.isTie?(this.calcTieDirection(),this.calcX(t,a),this.calcTieY()):(this.calcSlurDirection(),this.calcX(t,a),this.calcSlurY());var n,r;return this.above?(r=Math.min(this.startY,this.endY),n=r+3):(n=Math.min(this.startY,this.endY),r=n-3),[n,r]},fn=e,fn}var un,mo;function vd(){if(mo)return un;mo=1;var e=hd(),t=dd(),a=pd(),n=Bt(),r=lt(),s=Af(),l=function(){this.startDiminuendoX=void 0,this.startCrescendoX=void 0,this.minTop=12,this.minBottom=0},c=function(u,o,h,i,g,m,b,x,C){for(var S,I=0;I<o.length;I++){if(o[I]==="staccato"||o[I]==="tenuto"||o[I]==="accent"&&!C){var F="scripts."+o[I];if(o[I]==="accent"&&(F="scripts.sforzato"),S===void 0?S=b==="down"?h+2:x-2:S=b==="down"?S+2:S-2,o[I]==="accent")b==="up"?S--:S++;else switch(S){case 2:case 4:case 6:case 8:case 10:b==="up"?S--:S++;break}h>9&&S++;var y=i/2;n.getSymbolAlign(F)!=="center"&&(y-=n.getSymbolWidth(F)/2),g.addFixedX(new r(F,y,n.getSymbolWidth(F),S))}if(o[I]==="slide"&&g.heads[0]){var A=g.heads[0].pitch;A-=2;var P=new r("",-m-15,0,A-1),M=new r("",-m-5,0,A+1);g.addFixedX(P),g.addFixedX(M),u.addOther(new s({anchor1:P,anchor2:M,fixedY:!0}))}}return S===void 0&&(S=h),{above:S,below:g.bottom}},f=function(u,o,h,i){for(var g=0;g<o.length;g++)switch(o[g]){case"p":case"mp":case"pp":case"ppp":case"pppp":case"f":case"ff":case"fff":case"ffff":case"sfz":case"mf":var m=new e(h,o[g],i);u.addOther(m)}},p=function(u,o,h,i,g){function m(){if(i.heads.length===0)return 10;for(var S=i.heads[0].pitch,I=1;I<i.heads.length;I++)S=Math.max(S,i.heads[I].pitch);return S}function b(){if(i.heads.length===0)return 2;for(var S=i.heads[0].pitch,I=1;I<i.heads.length;I++)S=Math.min(S,i.heads[I].pitch);return S}function x(S,I){var F=g==="down"?b()+1:m()+9;g!=="down"&&I===1&&F--;var y=h/2;y+=g==="down"?-5:3;for(var A=0;A<I;A++)F-=1,i.addFixedX(new r(S,y,n.getSymbolWidth(S),F))}for(var C=0;C<u.length;C++)switch(u[C]){case"/":x("flags.ugrace",1);break;case"//":x("flags.ugrace",2);break;case"///":x("flags.ugrace",3);break;case"////":x("flags.ugrace",4);break}},v=function(u,o,h,i,g,m,b,x){function C(M,N){M==="above"?i.above+=N:i.below-=N}function S(M){var N;return M==="above"?(N=i.above,N<m&&(N=m)):(N=i.below,N>b&&(N=b)),N}function I(M,N,B){var E=S(N),T=2,L=5;h.addFixedX(new r(M,o/2,0,E+T,{type:"decoration",klass:"ornament",thickness:3,anchor:B})),C(N,L)}function F(M,N){var B=o/2;n.getSymbolAlign(M)!=="center"&&(B-=n.getSymbolWidth(M)/2);var E=n.symbolHeightInPitches(M)+1,T=S(N);T=N==="above"?T+E/2:T-E/2,h.addFixedX(new r(M,B,n.getSymbolWidth(M),T,{klass:"ornament",thickness:n.symbolHeightInPitches(M),position:N})),C(N,E)}for(var y={"+":"scripts.stopped",open:"scripts.open",snap:"scripts.snap",wedge:"scripts.wedge",thumb:"scripts.thumb",shortphrase:"scripts.shortphrase",mediumphrase:"scripts.mediumphrase",longphrase:"scripts.longphrase",trill:"scripts.trill",trillh:"scripts.trill",roll:"scripts.roll",irishroll:"scripts.roll",marcato:"scripts.umarcato",dmarcato:"scripts.dmarcato",umarcato:"scripts.umarcato",turn:"scripts.turn",uppermordent:"scripts.prall",pralltriller:"scripts.prall",mordent:"scripts.mordent",lowermordent:"scripts.mordent",downbow:"scripts.downbow",upbow:"scripts.upbow",fermata:"scripts.ufermata",invertedfermata:"scripts.dfermata",breath:",",coda:"scripts.coda",segno:"scripts.segno"},A=!1,P=0;P<u.length;P++)switch(u[P]){case"0":case"1":case"2":case"3":case"4":case"5":case"D.C.":case"D.S.":I(u[P],g,"middle"),A=!0;break;case"D.C.alcoda":I("D.C. al coda",g,"end"),A=!0;break;case"D.C.alfine":I("D.C. al fine",g,"end"),A=!0;break;case"D.S.alcoda":I("D.S. al coda",g,"end"),A=!0;break;case"D.S.alfine":I("D.S. al fine",g,"end"),A=!0;break;case"fine":I("FINE",g,"middle"),A=!0;break;case"+":case"open":case"snap":case"wedge":case"thumb":case"shortphrase":case"mediumphrase":case"longphrase":case"trill":case"trillh":case"roll":case"irishroll":case"marcato":case"dmarcato":case"turn":case"uppermordent":case"pralltriller":case"mordent":case"lowermordent":case"downbow":case"upbow":case"fermata":case"breath":case"umarcato":case"coda":case"segno":F(y[u[P]],g),A=!0;break;case"invertedfermata":F(y[u[P]],"below"),A=!0;break;case"mark":h.klass="mark";break;case"accent":x&&(F("scripts.sforzato",g),A=!0);break}return A};function d(u,o,h){for(var i=0;i<u.length;i++)switch(u[i]){case"arpeggio":for(var g=o.abcelem.minpitch-1;g<=o.abcelem.maxpitch;g+=2)o.addExtra(new r("scripts.arpeggio",-n.getSymbolWidth("scripts.arpeggio")*2-h,0,g+2,{klass:"ornament",thickness:n.symbolHeightInPitches("scripts.arpeggio")}));break}}return l.prototype.dynamicDecoration=function(u,o,h,i){for(var g,m,b,x=0;x<o.length;x++)switch(o[x]){case"diminuendo(":this.startDiminuendoX=h,g=void 0;break;case"diminuendo)":g={start:this.startDiminuendoX,stop:h},this.startDiminuendoX=void 0;break;case"crescendo(":this.startCrescendoX=h,m=void 0;break;case"crescendo)":m={start:this.startCrescendoX,stop:h},this.startCrescendoX=void 0;break;case"~(":case"glissando(":this.startGlissandoX=h,b=void 0;break;case"~)":case"glissando)":b={start:this.startGlissandoX,stop:h},this.startGlissandoX=void 0;break}g&&u.addOther(new t(g.start,g.stop,">",i)),m&&u.addOther(new t(m.start,m.stop,"<",i)),b&&u.addOther(new a(b.start,b.stop))},l.prototype.createDecoration=function(u,o,h,i,g,m,b,x,C,S,I){C||(C={ornamentPosition:"above",volumePosition:S?"above":"below",dynamicPosition:S?"above":"below"}),f(u,o,g,C.volumePosition),this.dynamicDecoration(u,o,g,C.dynamicPosition),p(o,h,i,g,b);var F=c(u,o,h,i,g,m,b,x,I);F.above=Math.max(F.above,this.minTop),F.below=Math.min(F.below,x),v(o,i,g,F,C.ornamentPosition,this.minTop,x,I),d(o,g,m)},un=l,un}var hn,yo;function gd(){if(yo)return hn;yo=1;var e=function(a,n,r){this.type="EndingElem",this.text=a,this.anchor1=n,this.anchor2=r,this.endingHeightAbove=5,this.pitch=void 0};return hn=e,hn}var dn,wo;function bd(){if(wo)return dn;wo=1;var e=function(t){for(var a=0,n=0;n<t.voices.length;n++){var r=t.voices[n].staff;t.voices[n].duplicate||(a+=r.top,a+=-r.bottom)}return a};return dn=e,dn}var pn,xo;function md(){if(xo)return pn;xo=1;var e=bd(),t=function(a){this.getTextSize=a,this.voices=[],this.staffs=[],this.brace=void 0,this.bracket=void 0};return t.prototype.setLimit=function(a,n){n.specialY[a]&&(n.staff.specialY[a]?n.staff.specialY[a]=Math.max(n.staff.specialY[a],n.specialY[a]):n.staff.specialY[a]=n.specialY[a])},t.prototype.addVoice=function(a,n,r){var s=this.voices.length;this.voices[s]=a,this.staffs[n]?this.staffs[n].voices.push(s):this.staffs[this.staffs.length]={top:10,bottom:2,lines:r,voices:[s],specialY:{tempoHeightAbove:0,partHeightAbove:0,volumeHeightAbove:0,dynamicHeightAbove:0,endingHeightAbove:0,chordHeightAbove:0,lyricHeightAbove:0,lyricHeightBelow:0,chordHeightBelow:0,volumeHeightBelow:0,dynamicHeightBelow:0}},a.staff=this.staffs[n]},t.prototype.setHeight=function(){this.height=e(this)},t.prototype.setWidth=function(a){this.w=a;for(var n=0;n<this.voices.length;n++)this.voices[n].setWidth(a)},t.prototype.setStaffLimits=function(a){a.staff.top=Math.max(a.staff.top,a.top),a.staff.bottom=Math.min(a.staff.bottom,a.bottom),this.setLimit("tempoHeightAbove",a),this.setLimit("partHeightAbove",a),this.setLimit("volumeHeightAbove",a),this.setLimit("dynamicHeightAbove",a),this.setLimit("endingHeightAbove",a),this.setLimit("chordHeightAbove",a),this.setLimit("lyricHeightAbove",a),this.setLimit("lyricHeightBelow",a),this.setLimit("chordHeightBelow",a),this.setLimit("volumeHeightBelow",a),this.setLimit("dynamicHeightBelow",a)},pn=t,pn}var vn,_o;function yd(){if(_o)return vn;_o=1;var e=r0(),t=lt(),a=function(r,s,l){this.type="TempoElement",this.tempo=r,this.tempo.type="tempo",this.tuneNumber=s,this.totalHeightInPitches=6,this.tempoHeightAbove=this.totalHeightInPitches,this.pitch=void 0,this.tempo.duration&&!this.tempo.suppressBpm&&(this.note=this.createNote(l,r,s))};return a.prototype.setX=function(n){this.x=n},a.prototype.createNote=function(n,r,s){var l=.75,c=r.duration[0],f=new e(r,c,1,"tempo",s),p,v,d;c<=1/32?(d="noteheads.quarter",v="flags.u32nd",p=0):c<=1/16?(d="noteheads.quarter",v="flags.u16th",p=0):c<=3/32?(d="noteheads.quarter",v="flags.u16nd",p=1):c<=1/8?(d="noteheads.quarter",v="flags.u8th",p=0):c<=3/16?(d="noteheads.quarter",v="flags.u8th",p=1):c<=1/4?(d="noteheads.quarter",p=0):c<=3/8?(d="noteheads.quarter",p=1):c<=1/2?(d="noteheads.half",p=0):c<=3/4?(d="noteheads.half",p=1):c<=1?(d="noteheads.whole",p=0):c<=1.5?(d="noteheads.whole",p=1):c<=2?(d="noteheads.dbl",p=0):(d="noteheads.dbl",p=1);var u=n(f,d,{verticalPos:0},{dir:"up",flag:v,dot:p,scale:l}),o=u.notehead;f.addHead(o);var h;if(d!=="noteheads.whole"&&d!=="noteheads.dbl"){var i=.3333333333333333*l,g=5*l,m=o.dx+o.w,b=-.6;h=new t(null,m,0,i,{type:"stem",pitch2:g,linewidth:b}),f.addRight(h)}return f},vn=a,vn}var gn,Co;function wd(){if(Co)return gn;Co=1;var e=function(a,n,r){this.type="TripletElem",this.anchor1=n,this.number=a,this.durationClass=("d"+Math.round(n.parent.durationClass*1e3)/1e3).replace(/\./,"-"),this.middleElems=[],this.flatBeams=r.flatBeams};return e.prototype.isClosed=function(){return!!this.anchor2},e.prototype.middleNote=function(t){this.middleElems.push(t)},e.prototype.setCloseAnchor=function(t){this.anchor2=t,(!this.anchor1.parent.beam||this.anchor1.stemDir==="up")&&(this.endingHeightAbove=4)},gn=e,gn}var bn,ko;function xd(){if(ko)return bn;ko=1;function e(a){switch(a){case"B#":return"H#";case"B♯":return"H♯";case"B":return"H";case"Bb":return"B";case"B♭":return"B"}return a}function t(a,n,r){var s=a.split(`
`);for(let l=0;l<s.length;l++){let f=s[l].match(/^([ABCDEFG][♯♭]?)?([^\/]+)?(\/([ABCDEFG][#b♯♭]?))?/);if(!f)continue;let p=f[1]||"",v=f[2]||"",d=f[4]||"";r&&(p=e(p),d=e(d));const u=n?"":"",o=d?"/"+d:"";s[l]=[p,v,o].join(u)}return s.join(`
`)}return bn=t,bn}var mn,To;function _d(){if(To)return mn;To=1;var e=lt(),t=We();const a=xd();var n=function(s,l,c,f,p,v,d,u){for(var o=0;o<c.chord.length;o++){var h=c.chord[o].position,i=c.chord[o].rel_position,g=h==="left"||h==="right"||h==="below"||h==="above"||!!i,m,b;g?(m="annotationfont",b="abcjs-annotation"):(m="gchordfont",b="abcjs-chord");var x=s.attr(m,b),C=c.chord[o].name,S;if(typeof C=="string")S=r(C,h,i,g,m,b,x,s,l,c,f,p,v,d,u),f=S.roomTaken,p=S.roomTakenRight;else for(var I=0;I<C.length;I++)S=r(C[I].text,h,i,g,m,b,x,s,l,c,f,p,v,d,u),f=S.roomTaken,p=S.roomTakenRight}return{roomTaken:f,roomTakenRight:p}};function r(s,l,c,f,p,v,d,u,o,h,i,g,m,b,x){for(var C=s.split(`
`),S=C.length-1;S>=0;S--){var I=C[S],F=0,y;f||(I=a(I,b,x));var A=u.calc(I,p,v),P=A.width,M=A.height/t.STEP;switch(l){case"left":i+=P+7,F=-i,y=h.averagepitch,o.addExtra(new e(I,F,P+4,y,{type:"text",height:M,dim:d,position:"left"}));break;case"right":g+=4,F=g,y=h.averagepitch,o.addRight(new e(I,F,P+4,y,{type:"text",height:M,dim:d,position:"right"}));break;case"below":o.addRight(new e(I,0,0,void 0,{type:"text",position:"below",height:M,dim:d,realWidth:P}));break;case"above":o.addRight(new e(I,0,0,void 0,{type:"text",position:"above",height:M,dim:d,realWidth:P}));break;default:if(c){var N=c.y+3*t.STEP;o.addRight(new e(I,F+c.x,0,h.minpitch+N/t.STEP,{position:"relative",type:"text",height:M,dim:d}))}else{var B="above";h.positioning&&h.positioning.chordPosition&&(B=h.positioning.chordPosition),B!=="hidden"&&o.addCentered(new e(I,m/2,P,void 0,{type:"chord",position:B,height:M,dim:d,realWidth:P}))}}}return{roomTaken:i,roomTakenRight:g}}return mn=n,mn}var yn,So;function Cd(){if(So)return yn;So=1;var e=r0(),t=sd(),a=od(),n=cd(),r=ld(),s=fd(),l=ud(),c=vd(),f=gd(),p=Bt(),v=lt(),d=We(),u=md(),o=yd(),h=Af(),i=wd(),g=_f(),m=_d(),b=yf(),x=yt(),C=function(E){var T=0;return E.duration&&(T=E.duration),T},S=!1,I={rest:{0:"rests.whole",1:"rests.half",2:"rests.quarter",3:"rests.8th",4:"rests.16th",5:"rests.32nd",6:"rests.64th",7:"rests.128th",multi:"rests.multimeasure"},note:{"-1":"noteheads.dbl",0:"noteheads.whole",1:"noteheads.half",2:"noteheads.quarter",3:"noteheads.quarter",4:"noteheads.quarter",5:"noteheads.quarter",6:"noteheads.quarter",7:"noteheads.quarter",nostem:"noteheads.quarter"},rhythm:{"-1":"noteheads.slash.whole",0:"noteheads.slash.whole",1:"noteheads.slash.whole",2:"noteheads.slash.quarter",3:"noteheads.slash.quarter",4:"noteheads.slash.quarter",5:"noteheads.slash.quarter",6:"noteheads.slash.quarter",7:"noteheads.slash.quarter",nostem:"noteheads.slash.nostem"},x:{"-1":"noteheads.indeterminate",0:"noteheads.indeterminate",1:"noteheads.indeterminate",2:"noteheads.indeterminate",3:"noteheads.indeterminate",4:"noteheads.indeterminate",5:"noteheads.indeterminate",6:"noteheads.indeterminate",7:"noteheads.indeterminate",nostem:"noteheads.indeterminate"},harmonic:{"-1":"noteheads.harmonic.quarter",0:"noteheads.harmonic.quarter",1:"noteheads.harmonic.quarter",2:"noteheads.harmonic.quarter",3:"noteheads.harmonic.quarter",4:"noteheads.harmonic.quarter",5:"noteheads.harmonic.quarter",6:"noteheads.harmonic.quarter",7:"noteheads.harmonic.quarter",nostem:"noteheads.harmonic.quarter"},triangle:{"-1":"noteheads.triangle.quarter",0:"noteheads.triangle.quarter",1:"noteheads.triangle.quarter",2:"noteheads.triangle.quarter",3:"noteheads.triangle.quarter",4:"noteheads.triangle.quarter",5:"noteheads.triangle.quarter",6:"noteheads.triangle.quarter",7:"noteheads.triangle.quarter",nostem:"noteheads.triangle.quarter"},uflags:{3:"flags.u8th",4:"flags.u16th",5:"flags.u32nd",6:"flags.u64th"},dflags:{3:"flags.d8th",4:"flags.d16th",5:"flags.d32nd",6:"flags.d64th"}},F=function(E,T,L){this.decoration=new c,this.getTextSize=E,this.tuneNumber=T,this.isBagpipes=L.bagpipes,this.flatBeams=L.flatbeams,this.graceSlurs=L.graceSlurs,this.percmap=L.percmap,this.initialClef=L.initialClef,this.jazzchords=!!L.jazzchords,this.accentAbove=!!L.accentAbove,this.germanAlphabet=!!L.germanAlphabet,this.reset()};F.prototype.reset=function(){this.slurs={},this.ties=[],this.voiceScale=1,this.voiceColor=void 0,this.slursbyvoice={},this.tiesbyvoice={},this.endingsbyvoice={},this.scaleByVoice={},this.colorByVoice={},this.tripletmultiplier=1,this.abcline=void 0,this.accidentalSlot=void 0,this.accidentalshiftx=void 0,this.dotshiftx=void 0,this.hasVocals=!1,this.minY=void 0,this.partstartelem=void 0,this.startlimitelem=void 0,this.stemdir=void 0},F.prototype.setStemHeight=function(E){this.stemHeight=Math.round(E*10/d.STEP)/10},F.prototype.getCurrentVoiceId=function(E,T){return"s"+E+"v"+T},F.prototype.pushCrossLineElems=function(E,T){this.slursbyvoice[this.getCurrentVoiceId(E,T)]=this.slurs,this.tiesbyvoice[this.getCurrentVoiceId(E,T)]=this.ties,this.endingsbyvoice[this.getCurrentVoiceId(E,T)]=this.partstartelem,this.scaleByVoice[this.getCurrentVoiceId(E,T)]=this.voiceScale,this.voiceColor&&(this.colorByVoice[this.getCurrentVoiceId(E,T)]=this.voiceColor)},F.prototype.popCrossLineElems=function(E,T){this.slurs=this.slursbyvoice[this.getCurrentVoiceId(E,T)]||{},this.ties=this.tiesbyvoice[this.getCurrentVoiceId(E,T)]||[],this.partstartelem=this.endingsbyvoice[this.getCurrentVoiceId(E,T)],this.voiceScale=this.scaleByVoice[this.getCurrentVoiceId(E,T)],this.voiceScale===void 0&&(this.voiceScale=1),this.voiceColor=this.colorByVoice[this.getCurrentVoiceId(E,T)]},F.prototype.containsLyrics=function(E){for(var T=0;T<E.length;T++)for(var L=0;L<E[T].voices.length;L++)for(var R=0;R<E[T].voices[L].length;R++){var O=E[T].voices[L][R];if(O.lyric){(!O.positioning||O.positioning.vocalPosition==="below")&&(this.hasVocals=!0);return}}},F.prototype.createABCLine=function(E,T,L){this.minY=2,this.containsLyrics(E);var R=new u(this.getTextSize);this.tempoSet=!1;for(var O=0;O<E.length;O++)S&&this.restoreState(),S=!1,this.createABCStaff(R,E[O],T,O,L);return R},F.prototype.createABCStaff=function(E,T,L,R,O){E.getTextSize.updateFonts(T);for(var w=0;w<T.voices.length;w++){var _=new g(w,T.voices.length);w===0?(_.barfrom=T.connectBarLines==="start"||T.connectBarLines==="continue",_.barto=T.connectBarLines==="continue"||T.connectBarLines==="end"):_.duplicate=!0,T.title&&T.title[w]&&(_.header=T.title[w].replace(/\\n/g,`
`),_.headerPosition=6+E.getTextSize.baselineToCenter(_.header,"voicefont","staff-extra voice-name",w,T.voices.length)/d.STEP),T.clef&&T.clef.type==="perc"&&(_.isPercussion=!0);var k=(!this.initialClef||O===0)&&n(T.clef,this.tuneNumber);k&&(w===0&&T.barNumber&&this.addMeasureNumber(T.barNumber,k),_.addChild(k),this.startlimitelem=k);var q=r(T.key,this.tuneNumber);if(q&&(_.addChild(q),this.startlimitelem=q),T.meter){T.meter.type==="specified"?this.measureLength=T.meter.value[0].num/T.meter.value[0].den:this.measureLength=1;var z=l(T.meter,this.tuneNumber);_.addChild(z),this.startlimitelem=z}_.duplicate&&(_.children=[]);var U=T.clef.stafflines||T.clef.stafflines===0?T.clef.stafflines:5;E.addVoice(_,R,U);var Y=U===1;this.createABCVoice(T.voices[w],L,R,w,Y,_),E.setStaffLimits(_),w===0&&(T.brace==="start"||!E.brace&&T.brace?(E.brace||(E.brace=[]),E.brace.push(new a(_,"brace"))):T.brace==="end"&&E.brace?E.brace[E.brace.length-1].setBottomStaff(_):T.brace==="continue"&&E.brace&&E.brace[E.brace.length-1].continuing(_),T.bracket==="start"||!E.bracket&&T.bracket?(E.bracket||(E.bracket=[]),E.bracket.push(new a(_,"bracket"))):T.bracket==="end"&&E.bracket?E.bracket[E.bracket.length-1].setBottomStaff(_):T.bracket==="continue"&&E.bracket&&E.bracket[E.bracket.length-1].continuing(_))}};function y(E,T){var L=E[T];if(L.el_type!=="note"||!L.startBeam||L.endBeam)return{count:1,elem:L};for(var R=[];T<E.length&&E[T].el_type==="note"&&(R.push(E[T]),!E[T].endBeam);)T++;return{count:R.length,elem:R}}F.prototype.createABCVoice=function(E,T,L,R,O,w){this.popCrossLineElems(L,R),this.stemdir=this.isBagpipes?"down":null,this.abcline=E,this.partstartelem&&(this.partstartelem=new f("",null,null),w.addOther(this.partstartelem));var _=w.voicetotal<2?-1:w.voicenumber;for(var k in this.slurs)this.slurs.hasOwnProperty(k)&&(this.slurs[k]=new h({force:this.slurs[k].force,voiceNumber:_,stemDir:this.slurs[k].stemDir,style:this.slurs[k].dotted}),S&&this.slurs[k].setHint(),w.addOther(this.slurs[k]));for(var q=0;q<this.ties.length;q++)this.ties[q]=new h({force:this.ties[q].force,stemDir:this.ties[q].stemDir,voiceNumber:_,style:this.ties[q].dotted}),S&&this.ties[q].setHint(),w.addOther(this.ties[q]);for(var z=0;z<this.abcline.length;z++)A(this.abcline[z]),this.minY=Math.min(this.abcline[z].minpitch,this.minY);for(var U=L===0,Y=0;Y<this.abcline.length;){var ee=y(this.abcline,Y),oe=this.createABCElement(U,O,w,ee.elem);if(oe)for(q=0;q<oe.length;q++){if(!this.tempoSet&&T&&!T.suppress){this.tempoSet=!0;var J=new e(T,0,0,"tempo",this.tuneNumber,{});J.addFixedX(new o(T,this.tuneNumber,s)),w.addChild(J)}w.addChild(oe[q])}Y+=ee.count}this.pushCrossLineElems(L,R)},F.prototype.saveState=function(){this.tiesSave=x.cloneArray(this.ties),this.slursSave=x.cloneHashOfHash(this.slurs),this.slursbyvoiceSave=x.cloneHashOfHash(this.slursbyvoice),this.tiesbyvoiceSave=x.cloneHashOfArrayOfHash(this.tiesbyvoice)},F.prototype.restoreState=function(){this.ties=x.cloneArray(this.tiesSave),this.slurs=x.cloneHashOfHash(this.slursSave),this.slursbyvoice=x.cloneHashOfHash(this.slursbyvoiceSave),this.tiesbyvoice=x.cloneHashOfArrayOfHash(this.tiesbyvoiceSave)},F.prototype.createABCElement=function(E,T,L,R){var O=[];switch(R.el_type){case void 0:O=this.createBeam(T,L,R);break;case"note":O[0]=this.createNote(R,!1,T,L),this.triplet&&this.triplet.isClosed()&&(L.addOther(this.triplet),this.triplet=null,this.tripletmultiplier=1);break;case"bar":O[0]=this.createBarLine(L,R,E),L.duplicate&&O.length>0&&(O[0].invisible=!0);break;case"meter":O[0]=l(R,this.tuneNumber),this.startlimitelem=O[0],L.duplicate&&O.length>0&&(O[0].invisible=!0);break;case"clef":if(O[0]=n(R,this.tuneNumber),!O[0])return null;L.duplicate&&O.length>0&&(O[0].invisible=!0);break;case"key":var w=r(R,this.tuneNumber);w&&(O[0]=w,this.startlimitelem=O[0]),L.duplicate&&O.length>0&&(O[0].invisible=!0);break;case"stem":this.stemdir=R.direction==="auto"?void 0:R.direction;break;case"part":var _=new e(R,0,0,"part",this.tuneNumber),k=this.getTextSize.calc(R.title,"partsfont","part");_.addFixedX(new v(R.title,0,0,void 0,{type:"part",height:k.height/d.STEP})),O[0]=_;break;case"tempo":var q=new e(R,0,0,"tempo",this.tuneNumber);q.addFixedX(new o(R,this.tuneNumber,s)),O[0]=q;break;case"style":R.head==="normal"?delete this.style:this.style=R.head;break;case"hint":S=!0,this.saveState();break;case"midi":break;case"scale":this.voiceScale=R.size;break;case"color":this.voiceColor=R.color,L.color=this.voiceColor;break;default:var z=new e(R,0,0,"unsupported",this.tuneNumber);z.addFixed(new v("element type "+R.el_type,0,0,void 0,{type:"debug"})),O[0]=z}return O};function A(E){if(E.pitches){P(E);for(var T=0,L=0;L<E.pitches.length;L++)T+=E.pitches[L].verticalPos;E.averagepitch=T/E.pitches.length,E.minpitch=E.pitches[0].verticalPos,E.maxpitch=E.pitches[E.pitches.length-1].verticalPos}}F.prototype.createBeam=function(E,T,L){var R=[],O=new t(this.stemHeight*this.voiceScale,this.stemdir,this.flatBeams,L[0]);S&&O.setHint();for(var w=0;w<L.length;w++)O.runningDirection(L[w]);O.setStemDirection();var _=this.stemdir;for(this.stemdir=O.stemsUp?"up":"down",w=0;w<L.length;w++){var k=L[w],q=this.createNote(k,!0,E,T);R.push(q),O.add(q),this.triplet&&this.triplet.isClosed()&&(T.addOther(this.triplet),this.triplet=null,this.tripletmultiplier=1)}return O.calcDir(),T.addBeam(O),this.stemdir=_,R};var P=function(E){var T;do{T=!0;for(var L=0;L<E.pitches.length-1;L++)if(E.pitches[L].pitch>E.pitches[L+1].pitch){T=!1;var R=E.pitches[L];E.pitches[L]=E.pitches[L+1],E.pitches[L+1]=R}}while(!T)},M=function(E,T,L,R,O,w,_,k,q){for(var z=L;z>11;z--)z%2===0&&!R&&E.addFixed(new v(null,k,(O+4)*q,z,{type:"ledger"}));for(z=T;z<1;z++)z%2===0&&!R&&E.addFixed(new v(null,k,(O+4)*q,z,{type:"ledger"}));for(z=0;z<w.length;z++){var U=O;_==="down"&&(U=-U),E.addFixed(new v(null,U+k,(O+4)*q,w[z],{type:"ledger"}))}};F.prototype.addGraceNotes=function(E,T,L,R,O,w,_){var k=.6,q=3.5/5;O=Math.round(O*q);var z=null,U;E.gracenotes.length>1&&(z=new t(O,"grace",w),S&&z.setHint(),z.mainNote=L);var Y,ee=[];for(Y=E.gracenotes.length-1;Y>=0;Y--)_+=10,ee[Y]=_,E.gracenotes[Y].accidental&&(_+=7);for(Y=0;Y<E.gracenotes.length;Y++){var oe=E.gracenotes[Y].verticalPos;U=z?null:I.uflags[w?5:3];var J=[],fe=s(L,"noteheads.quarter",E.gracenotes[Y],{dir:"up",headx:-ee[Y],extrax:-ee[Y],flag:U,scale:k*this.voiceScale,accidentalSlot:J});fe.notehead.highestVert=fe.notehead.pitch+O;var ue=fe.notehead;if(this.addSlursAndTies(L,E.gracenotes[Y],ue,T,"up",!0),L.addExtra(ue),E.gracenotes[Y].acciaccatura){var de=E.gracenotes[Y].verticalPos+7*k,D=z?5:6;L.addRight(new v("flags.ugrace",-ee[Y]+D,0,de,{scalex:k,scaley:k}))}if(z){var G=E.gracenotes[Y].duration/2;w&&(G/=2);var $={heads:[ue],abcelem:{averagepitch:oe,minpitch:oe,maxpitch:oe,duration:G}};z.add($)}else{var Q=oe+.3333333333333333*k,K=oe+7*k,Z=ue.dx+ue.w,re=-.6;L.addExtra(new v(null,Z,0,Q,{type:"stem",pitch2:K,linewidth:re}))}M(L,oe,oe,!1,p.getSymbolWidth("noteheads.quarter"),[],!0,ue.dx-1,.6);var ie=E.rest&&(E.rest.type==="spacer"||E.rest.type==="invisible");Y===0&&!w&&this.graceSlurs&&!ie&&T.addOther(new h({anchor1:ue,anchor2:R,isGrace:!0}))}return z&&(z.calcDir(),T.addBeam(z)),_};function N(E,T,L,R,O,w,_,k,q){var z,U=7,Y,ee,oe;switch(O&&(w==="down"&&(U=3),w==="up"&&(U=11)),_&&(L<.5||L<1?U=7:U=5),T.rest.type){case"whole":z=I.rest[0],T.averagepitch=U,T.minpitch=U,T.maxpitch=U,R=0;break;case"rest":T.style==="rhythm"?z=I.rhythm[-k]:z=I.rest[-k],T.averagepitch=U,T.minpitch=U,T.maxpitch=U;break;case"invisible":case"invisible-multimeasure":case"spacer":z="",T.averagepitch=U,T.minpitch=U,T.maxpitch=U;break;case"multimeasure":z=I.rest.multi,T.averagepitch=U,T.minpitch=U,T.maxpitch=U,R=0;var J=p.getSymbolWidth(z);E.addHead(new v(z,J,J*2,7));var fe=new v(""+T.rest.text,J,J,16,{type:"multimeasure-text"});E.addExtra(fe)}if(T.rest.type.indexOf("multimeasure")<0&&T.rest.type!=="invisible"){var ue=s(E,z,{verticalPos:U},{dot:R,scale:q});Y=ue.notehead,Y&&(E.addHead(Y),ee=ue.accidentalshiftx,oe=ue.dotshiftx)}return{noteHead:Y,roomTaken:ee,roomTakenRight:oe}}function B(E,T){for(var L=0;L<E.length;L++)if(JSON.stringify(E[L])===JSON.stringify(T))return;E.push(T)}return F.prototype.addNoteToAbcElement=function(E,T,L,R,O,w,_,k,q){var z=0,U,Y=0,ee=0,oe,J,fe=[],ue=[],de=0,D=T.averagepitch>=6?"down":"up";R&&(D=R),O=T.style?T.style:O,(!O||O==="normal")&&(O="note");var G;w?G=I[O].nostem:G=I[O][-_],G||console.log("noteSymbol:",O,_,w);var $;for($=D==="down"?T.pitches.length-2:1;D==="down"?$>=0:$<T.pitches.length;$=D==="down"?$-1:$+1){var Q=T.pitches[D==="down"?$+1:$-1],K=T.pitches[$],Z=D==="down"?Q.pitch-K.pitch:K.pitch-Q.pitch;Z<=1&&!Q.printer_shift&&(K.printer_shift=Z?"different":"same",(K.verticalPos>11||K.verticalPos<1)&&fe.push(K.verticalPos-K.verticalPos%2),D==="down"?Y=p.getSymbolWidth(G)+2:z=p.getSymbolWidth(G)+2)}var re=T.pitches.length;for($=0;$<T.pitches.length;$++){if(!k){var ie;D==="down"&&$!==0||D==="up"&&$!==re-1?ie=null:ie=I[D==="down"?"dflags":"uflags"][-_]}var ne;if(T.pitches[$].style)ne=I[T.pitches[$].style][-_];else if(q.isPercussion&&this.percmap){ne=G;var te=this.percmap[b(T.pitches[$])];te&&te.noteHead&&I[te.noteHead]&&(ne=I[te.noteHead][-_])}else ne=G;T.pitches[$].highestVert=T.pitches[$].verticalPos;var W=(R==="up"||D==="up")&&$===0,V=(R==="down"||D==="down")&&$===re-1;if(W||V){if((T.startSlur||re===1)&&(T.pitches[$].highestVert=T.pitches[re-1].verticalPos,C(T)<1&&(R==="up"||D==="up")&&(T.pitches[$].highestVert+=6)),T.startSlur)for(T.pitches[$].startSlur||(T.pitches[$].startSlur=[]),J=0;J<T.startSlur.length;J++)B(T.pitches[$].startSlur,T.startSlur[J]);if(T.endSlur)for(T.pitches[$].highestVert=T.pitches[re-1].verticalPos,C(T)<1&&(R==="up"||D==="up")&&(T.pitches[$].highestVert+=6),T.pitches[$].endSlur||(T.pitches[$].endSlur=[]),J=0;J<T.endSlur.length;J++)B(T.pitches[$].endSlur,T.endSlur[J])}var H=!k&&_<=-1,j=s(E,ne,T.pitches[$],{dir:D,extrax:-Y,flag:ie,dot:L,dotshiftx:z,scale:this.voiceScale,accidentalSlot:ue,shouldExtendStem:!R,printAccidentals:!q.isPercussion});de=Math.max(p.getSymbolWidth(ne),de),E.extraw-=j.extraLeft,U=j.notehead,U&&(this.addSlursAndTies(E,T.pitches[$],U,q,H?D:null,!1),T.gracenotes&&T.gracenotes.length>0&&(U.bottom=U.bottom-1),E.addHead(U)),Y+=j.accidentalshiftx,ee=Math.max(ee,j.dotshiftx)}if(H){var X=Math.round(70*this.voiceScale)/10,ae=D==="down"?T.minpitch-X:T.minpitch+1/3;ae>6&&!R&&(ae=6);var se=D==="down"?T.maxpitch-1/3:T.maxpitch+X;se<6&&!R&&(se=6);var pe=D==="down"||E.heads.length===0?0:E.heads[0].w,ce=D==="down"?1:-1;U&&U.c==="noteheads.slash.quarter"&&(D==="down"?se-=1:ae+=1),U&&U.c==="noteheads.triangle.quarter"&&(D==="down"?se-=.7:ae-=1.2),E.addRight(new v(null,pe,0,ae,{type:"stem",pitch2:se,linewidth:ce,bottom:ae-1})),oe=Math.min(ae,se)}return{noteHead:U,roomTaken:Y,roomTakenRight:ee,min:oe,additionalLedgers:fe,dir:D,symbolWidth:de}},F.prototype.addLyric=function(E,T){var L="";T.lyric.forEach(function(w){var _=w.divider===" "?"":w.divider;L+=w.syllable+_+`
`});var R=this.getTextSize.calc(L,"vocalfont","lyric"),O=T.positioning?T.positioning.vocalPosition:"below";E.addCentered(new v(L,0,R.width,void 0,{type:"lyric",position:O,height:R.height/d.STEP,dim:this.getTextSize.attr("vocalfont","lyric")}))},F.prototype.createNote=function(E,T,L,R){var O=null,w=0,_=0,k=0,q=[],z,U=C(E),Y=!1;U===0&&(Y=!0,U=.25,T=!0);for(var ee=Math.floor(Math.log(U)/Math.log(2)),oe=0,J=Math.pow(2,ee),fe=J/2;J<U;oe++,J+=fe,fe/=2);E.startTriplet&&(this.tripletmultiplier=E.tripletMultiplier);var ue=U*this.tripletmultiplier;E.rest&&E.rest.type==="multimeasure"&&(ue=1),E.rest&&E.rest.type==="invisible-multimeasure"&&(ue=this.measureLength*E.rest.text);var de=E.rest?"rest":"note",D=new e(E,ue,1,de,this.tuneNumber,{durationClassOveride:E.duration*this.tripletmultiplier});if(S&&D.setHint(),E.rest){this.measureLength===U&&E.rest.type!=="invisible"&&E.rest.type!=="spacer"&&E.rest.type.indexOf("multimeasure")<0&&(E.rest.type="whole");var G=N(D,E,U,oe,R.voicetotal>1,this.stemdir,L,ee,this.voiceScale);O=G.noteHead,w=G.roomTaken,_=G.roomTakenRight}else{var $=this.addNoteToAbcElement(D,E,oe,this.stemdir,this.style,Y,ee,T,R);$.min!==void 0&&(this.minY=Math.min($.min,this.minY)),O=$.noteHead,w=$.roomTaken,_=$.roomTakenRight,q=$.additionalLedgers,z=$.dir,k=$.symbolWidth}if(E.lyric!==void 0&&this.addLyric(D,E),E.gracenotes!==void 0&&(w+=this.addGraceNotes(E,R,D,O,this.stemHeight*this.voiceScale,this.isBagpipes,w)),E.decoration){var Q=T&&z!=="up"?Math.min(-3,D.bottom-6):D.bottom;this.decoration.createDecoration(R,E.decoration,D.top,O?O.w:0,D,w,z,Q,E.positioning,this.hasVocals,this.accentAbove)}if(E.barNumber&&D.addFixed(new v(E.barNumber,-10,0,0,{type:"barNumber"})),M(D,E.minpitch,E.maxpitch,E.rest,k,q,z,-2,1),E.chord!==void 0){var K=m(this.getTextSize,D,E,w,_,k,this.jazzchords,this.germanAlphabet);w=K.roomTaken,_=K.roomTakenRight}return E.startTriplet&&(this.triplet=new i(E.startTriplet,O,{flatBeams:this.flatBeams})),E.endTriplet&&this.triplet&&this.triplet.setCloseAnchor(O),this.triplet&&!E.startTriplet&&!E.endTriplet&&!(E.rest&&E.rest.type==="spacer")&&this.triplet.middleNote(O),D},F.prototype.addSlursAndTies=function(E,T,L,R,O,w){if(T.endTie&&this.ties.length>0){for(var _=!1,k=0;k<this.ties.length;k++)if(this.ties[k].anchor1&&this.ties[k].anchor1.pitch===L.pitch){this.ties[k].setEndAnchor(L),R.setRange(this.ties[k]),this.ties.splice(k,1),_=!0;break}_||(this.ties[0].setEndAnchor(L),R.setRange(this.ties[0]),this.ties.splice(0,1))}var q=R.voicetotal<2?-1:R.voicenumber;if(T.startTie){var z=new h({anchor1:L,force:this.stemdir==="down"||this.stemdir==="up",stemDir:this.stemdir,isGrace:w,voiceNumber:q,style:T.startTie.style});S&&z.setHint(),this.ties[this.ties.length]=z,R.addOther(z),E.startTie=!0}var U,Y;if(T.endSlur)for(var ee=0;ee<T.endSlur.length;ee++)Y=T.endSlur[ee],this.slurs[Y]?(U=this.slurs[Y],U.setEndAnchor(L),R.setRange(U),delete this.slurs[Y]):(U=new h({anchor2:L,stemDir:this.stemdir,voiceNumber:q}),S&&U.setHint(),R.addOther(U)),this.startlimitelem&&U.setStartX(this.startlimitelem);else if(!w)for(var oe in this.slurs)this.slurs.hasOwnProperty(oe)&&this.slurs[oe].addInternalNote(L);if(T.startSlur)for(ee=0;ee<T.startSlur.length;ee++)Y=T.startSlur[ee].label,U=new h({anchor1:L,stemDir:this.stemdir,voiceNumber:q,style:T.startSlur[ee].style}),S&&U.setHint(),this.slurs[Y]=U,R.addOther(U)},F.prototype.addMeasureNumber=function(E,T){var L=this.getTextSize.calc(E,"measurefont","bar-number"),R=0;T.isClef&&(R+=L.width/2);var O=L.width>10&&T.abcelem.type==="treble"?13.5:11;T.addFixed(new v(E,R,L.width,O+L.height/d.STEP,{type:"barNumber",dim:this.getTextSize.attr("measurefont","bar-number")}))},F.prototype.createBarLine=function(E,T,L){var R=new e(T,0,10,"bar",this.tuneNumber),O=null,w=0;T.barNumber&&this.addMeasureNumber(T.barNumber,R);var _=T.type==="bar_right_repeat"||T.type==="bar_dbl_repeat",k=T.type!=="bar_left_repeat"&&T.type!=="bar_thick_thin"&&T.type!=="bar_invisible",q=T.type==="bar_right_repeat"||T.type==="bar_dbl_repeat"||T.type==="bar_left_repeat"||T.type==="bar_thin_thick"||T.type==="bar_thick_thin",z=T.type==="bar_left_repeat"||T.type==="bar_thick_thin"||T.type==="bar_thin_thin"||T.type==="bar_dbl_repeat",U=T.type==="bar_left_repeat"||T.type==="bar_dbl_repeat";if(_||U){for(var Y in this.slurs)this.slurs.hasOwnProperty(Y)&&this.slurs[Y].setEndX(R);this.startlimitelem=R}if(_&&(R.addRight(new v("dots.dot",w,1,7)),R.addRight(new v("dots.dot",w,1,5)),w+=6),k&&(O=new v(null,w,1,2,{type:"bar",pitch2:10,linewidth:.6}),R.addRight(O)),T.type==="bar_invisible"&&(O=new v(null,w,1,2,{type:"none",pitch2:10,linewidth:.6}),R.addRight(O)),T.decoration&&this.decoration.createDecoration(E,T.decoration,12,q?3:1,R,0,"down",2,T.positioning,this.hasVocals,this.accentAbove),q&&(w+=4,O=new v(null,w,4,2,{type:"bar",pitch2:10,linewidth:4}),R.addRight(O),w+=5),this.partstartelem&&T.endEnding&&(this.partstartelem.anchor2=O,this.partstartelem=null),z&&(w+=3,O=new v(null,w,1,2,{type:"bar",pitch2:10,linewidth:.6}),R.addRight(O)),U&&(w+=3,R.addRight(new v("dots.dot",w,1,7)),R.addRight(new v("dots.dot",w,1,5))),T.startEnding&&L&&E.voicenumber===0){var ee=this.getTextSize.calc(T.startEnding,"repeatfont","").width;R.minspacing+=ee+10,this.partstartelem=new f(T.startEnding,O,null),E.addOther(this.partstartelem)}return R.extraw-=5,T.chord!==void 0&&m(this.getTextSize,R,T,0,0,0,!1,this.germanAlphabet),R},yn=F,yn}var wn,Eo;function kd(){if(Eo)return wn;Eo=1;var e="http://www.w3.org/2000/svg";function t(l){this.svg=s(),this.currentGroup=[],l.appendChild(this.svg)}t.prototype.clear=function(){if(this.svg){var l=this.svg.parentNode;this.svg=s(),this.currentGroup=[],l&&(l.innerHTML="",l.appendChild(this.svg))}},t.prototype.setTitle=function(l){var c=document.createElement("title"),f=document.createTextNode(l);c.appendChild(f),this.svg.insertBefore(c,this.svg.firstChild)},t.prototype.setResponsiveWidth=function(l,c){if(this.svg.setAttribute("viewBox","0 0 "+l+" "+c),this.svg.setAttribute("preserveAspectRatio","xMinYMin meet"),this.svg.removeAttribute("height"),this.svg.removeAttribute("width"),this.svg.style.display="inline-block",this.svg.style.position="absolute",this.svg.style.top="0",this.svg.style.left="0",this.svg.parentNode){var f=this.svg.parentNode.getAttribute("class");f?f.indexOf("abcjs-container")<0&&this.svg.parentNode.setAttribute("class",f+" abcjs-container"):this.svg.parentNode.setAttribute("class","abcjs-container"),this.svg.parentNode.style.display="inline-block",this.svg.parentNode.style.position="relative",this.svg.parentNode.style.width="100%";var p=c/l*100;this.svg.parentNode.style["padding-bottom"]=p+"%",this.svg.parentNode.style["vertical-align"]="middle",this.svg.parentNode.style.overflow="hidden"}},t.prototype.setSize=function(l,c){this.svg.setAttribute("width",l),this.svg.setAttribute("height",c)},t.prototype.setAttribute=function(l,c){this.svg.setAttribute(l,c)},t.prototype.setScale=function(l){l!==1?(this.svg.style.transform="scale("+l+","+l+")",this.svg.style["-ms-transform"]="scale("+l+","+l+")",this.svg.style["-webkit-transform"]="scale("+l+","+l+")",this.svg.style["transform-origin"]="0 0",this.svg.style["-ms-transform-origin-x"]="0",this.svg.style["-ms-transform-origin-y"]="0",this.svg.style["-webkit-transform-origin-x"]="0",this.svg.style["-webkit-transform-origin-y"]="0"):(this.svg.style.transform="",this.svg.style["-ms-transform"]="",this.svg.style["-webkit-transform"]="")},t.prototype.insertStyles=function(l){var c=document.createElementNS(e,"style");c.textContent=l,this.svg.insertBefore(c,this.svg.firstChild)},t.prototype.setParentStyles=function(l){for(var c in l)l.hasOwnProperty(c)&&this.svg.parentNode&&(this.svg.parentNode.style[c]=l[c]);if(this.dummySvg){var f=document.querySelector("body");f.removeChild(this.dummySvg),this.dummySvg=null}};function a(l,c,f){var p=f-l;return"M "+l+" "+c+" l "+p+" 0 l 0 1  l "+-p+" 0  z "}function n(l,c,f){var p=f-c;return"M "+l+" "+c+" l 0 "+p+" l 1 0  l 0 "+-p+"  z "}t.prototype.rect=function(l){var c=[],f=l.x,p=l.y,v=l.x+l.width,d=l.y+l.height;return c.push(a(f,p,v)),c.push(a(f,d,v)),c.push(n(v,p,d)),c.push(n(f,d,p)),this.path({path:c.join(" "),stroke:"none","data-name":l["data-name"]})},t.prototype.dottedLine=function(l){var c=document.createElementNS(e,"line");c.setAttribute("x1",l.x1),c.setAttribute("x2",l.x2),c.setAttribute("y1",l.y1),c.setAttribute("y2",l.y2),c.setAttribute("stroke",l.stroke),c.setAttribute("stroke-dasharray","5,5"),this.svg.insertBefore(c,this.svg.firstChild)},t.prototype.rectBeneath=function(l){var c=document.createElementNS(e,"rect");c.setAttribute("x",l.x),c.setAttribute("width",l.width),c.setAttribute("y",l.y),c.setAttribute("height",l.height),l.stroke&&c.setAttribute("stroke",l.stroke),l["stroke-opacity"]&&c.setAttribute("stroke-opacity",l["stroke-opacity"]),l.fill&&c.setAttribute("fill",l.fill),l["fill-opacity"]&&c.setAttribute("fill-opacity",l["fill-opacity"]),this.svg.insertBefore(c,this.svg.firstChild)},t.prototype.text=function(l,c,f){var p=document.createElementNS(e,"text");p.setAttribute("stroke","none");for(var v in c)c.hasOwnProperty(v)&&p.setAttribute(v,c[v]);for(var d=c["data-name"]=="free-text",u=(""+l).split(`
`),o=0;o<u.length;o++)if(!(d&&u[o]=="")){var h=document.createElementNS(e,"tspan");if(h.setAttribute("x",c.x?c.x:0),o!==0&&h.setAttribute("dy","1.2em"),u[o].indexOf("")!==-1){var i=u[o].split("");if(h.textContent=i[0],i[1]){var g=document.createElementNS(e,"tspan");g.setAttribute("dy","-0.3em"),g.setAttribute("style","font-size:0.7em"),g.textContent=i[1],h.appendChild(g)}if(i[2]){var m=i[1]?"0.4em":"0.1em",b=document.createElementNS(e,"tspan");b.setAttribute("dy",m),b.setAttribute("style","font-size:0.7em"),b.textContent=i[2],h.appendChild(b)}}else d&&u[o].trim()==""?h.innerHTML="&nbsp;":h.textContent=u[o];p.appendChild(h)}return f?f.appendChild(p):this.append(p),p},t.prototype.richTextLine=function(l,c,f,p,v,d){var u=document.createElementNS(e,"text");u.setAttribute("stroke","none"),u.setAttribute("class",p),u.setAttribute("x",c),u.setAttribute("y",f),u.setAttribute("text-anchor",v),u.setAttribute("dominant-baseline","middle");for(var o=0;o<l.length;o++){for(var h=l[o],i=document.createElementNS(e,"tspan"),g=Object.keys(h.attrs),m=0;m<g.length;m++){var b=h.attrs[g[m]];b!==""&&i.setAttribute(g[m],b)}i.textContent=h.content,u.appendChild(i)}return d?d.appendChild(u):this.append(u),u},t.prototype.guessWidth=function(l,c){var f=this.createDummySvg(),p=this.text(l,c,f),v;try{v=p.getBBox(),isNaN(v.height)||!v.height?v={width:c["font-size"]/2,height:c["font-size"]+2}:v={width:v.width,height:v.height}}catch{v={width:c["font-size"]/2,height:c["font-size"]+2}}return f.removeChild(p),v},t.prototype.createDummySvg=function(){if(!this.dummySvg){this.dummySvg=s();var l=["display: block !important;","height: 1px;","width: 1px;","position: absolute;"];this.dummySvg.setAttribute("style",l.join(""));var c=document.querySelector("body");c.appendChild(this.dummySvg)}return this.dummySvg};var r={};t.prototype.getTextSize=function(l,c,f){if(typeof l=="number"&&(l=""+l),!l||l.match(/^\s+$/))return{width:0,height:0};var p;if(l.length<20&&(p=l+JSON.stringify(c),r[p]))return r[p];var v=!f;f||(f=this.text(l,c));var d;try{d=f.getBBox(),isNaN(d.height)||!d.height?d=this.guessWidth(l,c):d={width:d.width,height:d.height}}catch{d=this.guessWidth(l,c)}return v&&(this.currentGroup.length>0?this.currentGroup[0].removeChild(f):this.svg.removeChild(f)),p&&(r[p]=d),d},t.prototype.openGroup=function(l){l=l||{};var c=document.createElementNS(e,"g");return l.klass&&c.setAttribute("class",l.klass),l.fill&&c.setAttribute("fill",l.fill),l.stroke&&c.setAttribute("stroke",l.stroke),l["data-name"]&&c.setAttribute("data-name",l["data-name"]),l.prepend?this.prepend(c):this.append(c),this.currentGroup.unshift(c),c},t.prototype.closeGroup=function(){var l=this.currentGroup.shift();return l&&l.children.length===0?(l.parentElement.removeChild(l),null):l},t.prototype.path=function(l){var c=document.createElementNS(e,"path");for(var f in l)l.hasOwnProperty(f)&&(f==="path"?c.setAttributeNS(null,"d",l.path):f==="klass"?c.setAttributeNS(null,"class",l[f]):l[f]!==void 0&&c.setAttributeNS(null,f,l[f]));return this.append(c),c},t.prototype.pathToBack=function(l){var c=document.createElementNS(e,"path");for(var f in l)l.hasOwnProperty(f)&&(f==="path"?c.setAttributeNS(null,"d",l.path):f==="klass"?c.setAttributeNS(null,"class",l[f]):c.setAttributeNS(null,f,l[f]));return this.prepend(c),c},t.prototype.lineToBack=function(l){for(var c=document.createElementNS(e,"line"),f=Object.keys(l),p=0;p<f.length;p++)c.setAttribute(f[p],l[f[p]]);return this.prepend(c),c},t.prototype.append=function(l){this.currentGroup.length>0?this.currentGroup[0].appendChild(l):this.svg.appendChild(l)},t.prototype.prepend=function(l){this.currentGroup.length>0?this.currentGroup[0].appendChild(l):this.svg.insertBefore(l,this.svg.firstChild)},t.prototype.setAttributeOnElement=function(l,c){for(var f in c)c.hasOwnProperty(f)&&l.setAttributeNS(null,f,c[f])},t.prototype.moveElementToChild=function(l,c){l.appendChild(c)};function s(){var l=document.createElementNS(e,"svg");return l.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),l.setAttribute("role","img"),l.setAttribute("fill","currentColor"),l.setAttribute("stroke","currentColor"),l}return wn=t,wn}var xn,Ao;function Td(){if(Ao)return xn;Ao=1;var e=We(),t=kd(),a=function(n){this.paper=new t(n),this.controller=null,this.space=3*e.SPACE,this.padding={},this.reset(),this.firefox112=navigator.userAgent.indexOf("Firefox/112.0")>=0};return a.prototype.reset=function(){this.paper.clear(),this.y=0,this.abctune=null,this.path=null,this.isPrint=!1,this.lineThickness=0,this.initVerticalSpace()},a.prototype.newTune=function(n){this.abctune=n,this.setVerticalSpace(n.formatting),this.isPrint=n.media==="print",this.setPadding(n)},a.prototype.setLineThickness=function(n){this.lineThickness=n},a.prototype.setPaddingOverride=function(n){this.paddingOverride={top:n.paddingtop,bottom:n.paddingbottom,right:n.paddingright,left:n.paddingleft}},a.prototype.setPadding=function(n){function r(s,l,c,f,p){n.formatting[c]!==void 0?s.padding[l]=n.formatting[c]:s.paddingOverride[l]!==void 0?s.padding[l]=s.paddingOverride[l]:s.isPrint?s.padding[l]=f:s.padding[l]=p}r(this,"top","topmargin",38,15),r(this,"bottom","botmargin",38,15),r(this,"left","leftmargin",68,15),r(this,"right","rightmargin",68,15)},a.prototype.adjustNonScaledItems=function(n){this.padding.top/=n,this.padding.bottom/=n,this.padding.left/=n,this.padding.right/=n,this.abctune.formatting.headerfont.size/=n,this.abctune.formatting.footerfont.size/=n},a.prototype.initVerticalSpace=function(){this.spacing={composer:7.56,graceBefore:8.67,graceInside:10.67,graceAfter:16,info:0,lineSkipFactor:1.1,music:7.56,paragraphSkipFactor:.4,parts:11.33,slurHeight:1,staffSeparation:61.33,staffTopMargin:0,stemHeight:26.67+10,subtitle:3.78,systemStaffSeparation:48,text:18.9,title:7.56,top:30.24,vocal:0,words:0}},a.prototype.setVerticalSpace=function(n){n.staffsep!==void 0&&(this.spacing.staffSeparation=n.staffsep*4/3),n.composerspace!==void 0&&(this.spacing.composer=n.composerspace*4/3),n.partsspace!==void 0&&(this.spacing.parts=n.partsspace*4/3),n.textspace!==void 0&&(this.spacing.text=n.textspace*4/3),n.musicspace!==void 0&&(this.spacing.music=n.musicspace*4/3),n.titlespace!==void 0&&(this.spacing.title=n.titlespace*4/3),n.sysstaffsep!==void 0&&(this.spacing.systemStaffSeparation=n.sysstaffsep*4/3),n.stafftopmargin!==void 0&&(this.spacing.staffTopMargin=n.stafftopmargin*4/3),n.subtitlespace!==void 0&&(this.spacing.subtitle=n.subtitlespace*4/3),n.topspace!==void 0&&(this.spacing.top=n.topspace*4/3),n.vocalspace!==void 0&&(this.spacing.vocal=n.vocalspace*4/3),n.wordsspace!==void 0&&(this.spacing.words=n.wordsspace*4/3)},a.prototype.calcY=function(n){return this.y-n*e.STEP},a.prototype.moveY=function(n,r){r===void 0&&(r=1),this.y+=n*r},a.prototype.absolutemoveY=function(n){this.y=n},xn=a,xn}var _n,Mo;function Sd(){if(Mo)return _n;Mo=1;function e(t,a,n,r,s,l){var c=t.text;this.rows=[];var f;a&&this.rows.push({move:a});var p=n.calc("textfont","defined-text");if(c==="")this.rows.push({move:p.attr["font-size"]*2});else if(typeof c=="string"){let m=function(b){return b.replace(/^[ \t]*\n/gm,`X
`)};var g=m;this.rows.push({move:p.attr["font-size"]/2}),this.rows.push({left:r,text:c,font:"textfont",klass:"defined-text",anchor:"start",startChar:t.startChar,endChar:t.endChar,absElemType:"freeText",name:"free-text"});var v=m(c);f=l.calc(v,"textfont","defined-text"),this.rows.push({move:f.height})}else if(c){for(var d=0,u=r,o="textfont",h=0;h<c.length;h++)c[h].font?o=c[h].font:o="textfont",this.rows.push({left:u,text:c[h].text,font:o,klass:"defined-text",anchor:"start",startChar:t.startChar,endChar:t.endChar,absElemType:"freeText",name:"free-text"}),f=l.calc(c[h].text,n.calc(o,"defined-text").font,"defined-text"),u+=f.width+f.height/2,d=Math.max(d,f.height);this.rows.push({move:d})}else if(t.length===1){var i=s/2;this.rows.push({left:i,text:t[0].text,font:"textfont",klass:"defined-text",anchor:"middle",startChar:t.startChar,endChar:t.endChar,absElemType:"freeText",name:"free-text"}),f=l.calc(t[0].text,"textfont","defined-text"),this.rows.push({move:f.height})}}return _n=e,_n}var Cn,Bo;function Ed(){if(Bo)return Cn;Bo=1;function e(t,a,n){this.rows=[],t&&this.rows.push({move:t}),this.rows.push({separator:a,absElemType:"separator"}),n&&this.rows.push({move:n})}return Cn=e,Cn}var kn,Po;function Ad(){if(Po)return kn;Po=1;function e(t,a,n,r,s,l){this.rows=[],t&&this.rows.push({move:t});var c=a.titleleft?"start":"middle",f=a.titleleft?s:r;this.rows.push({left:f,text:n.text,font:"subtitlefont",klass:"text subtitle",anchor:c,startChar:n.startChar,endChar:n.endChar,absElemType:"subtitle",name:"subtitle"});var p=l.calc(n.text,"subtitlefont","text subtitle");this.rows.push({move:p.height})}return kn=e,kn}var Tn,No;function Na(){if(No)return Tn;No=1;function e(t,a,n){if(a.text){a.marginLeft||(a.marginLeft=0),a.klass||(a.klass=""),a.anchor||(a.anchor="start"),a.info||(a.info={startChar:-2,endChar:-2}),a.marginTop&&t.push({move:a.marginTop});var r={left:a.marginLeft,text:a.text,font:a.font,anchor:a.anchor,startChar:a.info.startChar,endChar:a.info.endChar,"dominant-baseline":a["dominant-baseline"]};a.absElemType&&(r.absElemType=a.absElemType),!a.inGroup&&a.klass&&(r.klass=a.klass),a.name&&(r.name=a.name),t.push(r);var s=n.calc("A",a.font,a.klass),l=a.text.split(`
`).length;if(a.text[a.text.length-1]===`
`&&l--,!a.noMove){var c=s.height*1.1*l;t.push({move:Math.round(c)}),a.marginBottom&&t.push({move:a.marginBottom})}}}return Tn=e,Tn}var Sn,Lo;function Mf(){if(Lo)return Sn;Lo=1;const e=Na();function t(a,n,r,s,l,c,f,p){var v=p.calc("i",r,s);if(n==="")a.push({move:v.height});else{if(typeof n=="string"){e(a,{marginLeft:c,text:n,font:r,klass:s,marginTop:f.marginTop,anchor:f.anchor,absElemType:f.absElemType,info:f.info,name:l},p);return}f.marginTop&&a.push({move:f.marginTop});var d=0,u={left:c,anchor:f.anchor,phrases:[]};s&&(u.klass=s),a.push(u);for(var o=0;o<n.length;o++){var h=n[o],i=h.font?h.font:p.attr(r,s).font,g={content:h.text};i&&(g.attrs={"font-family":p.getFamily(i.face),"font-size":i.size,"font-weight":i.weight,"font-style":i.style,"font-decoration":i.decoration}),u.phrases.push(g);var m=p.calc(h.text,i,s);d=Math.max(d,m.height),h.text[h.text.length-1]===" "&&v.width}a.push({move:d})}}return Sn=t,Sn}var En,qo;function Md(){if(qo)return En;qo=1;const e=Na(),t=Mf();function a(n,r,s,l,c,f,p,v,d,u){if(this.rows=[],n.header&&f){var o=u.calc("X","headerfont","abcjs-header abcjs-meta-top").height;e(this.rows,{marginLeft:p,text:n.header.left,font:"headerfont",klass:"header meta-top",marginTop:-o,info:r.header,name:"header"},u),e(this.rows,{marginLeft:p+c/2,text:n.header.center,font:"headerfont",klass:"header meta-top",marginTop:-o,anchor:"middle",info:r.header,name:"header"},u),e(this.rows,{marginLeft:p+c,text:n.header.right,font:"headerfont",klass:"header meta-top",marginTop:-o,anchor:"end",info:r.header,name:"header"},u)}f&&this.rows.push({move:v.top});var h=s.titleleft?"start":"middle",i=s.titleleft?p:p+c/2;if(n.title){var g=d?"abcjs-title":"";t(this.rows,n.title,"titlefont",g,"title",i,{marginTop:v.title,anchor:h,absElemType:"title",info:r.title},u)}if(l.length)for(var m=0;m<l.length&&l[m].subtitle;){var g=d?"abcjs-text abcjs-subtitle":"";t(this.rows,l[m].subtitle.text,"subtitlefont",g,"subtitle",i,{marginTop:v.subtitle,anchor:h,absElemType:"subtitle",info:l[m].subtitle},u),m++}if(n.rhythm||n.origin||n.composer){if(this.rows.push({move:v.composer}),n.rhythm&&n.rhythm.length>0){var b=!!(n.composer||n.origin),g=d?"abcjs-rhythm":"";e(this.rows,{marginLeft:p,text:n.rhythm,font:"infofont",klass:g,absElemType:"rhythm",noMove:b,info:r.rhythm,name:"rhythm"},u)}n.composer&&n.composer,n.origin&&n.origin;var x=n.composer?n.composer:"";if(n.origin&&(typeof x=="string"&&typeof n.origin=="string"?x+=" ("+n.origin+")":typeof x=="string"&&typeof n.origin!="string"?(x=[{text:x}],x.push({text:" ("}),x=x.concat(n.origin),x.push({text:")"})):(x.push({text:" ("}),x=x.concat(n.origin),x.push({text:")"}))),x){var g=d?"abcjs-composer":"";t(this.rows,x,"composerfont",g,"composer",p+c,{anchor:"end",absElemType:"composer",info:r.composer,ingroup:!0},u)}}if(n.author&&n.author.length>0){var g=d?"abcjs-author":"";t(this.rows,n.author,"composerfont",g,"author",p+c,{anchor:"end",absElemType:"author",info:r.author},u)}if(n.partOrder&&n.partOrder.length>0){var g=d?"abcjs-part-order":"";t(this.rows,n.partOrder,"partsfont",g,"part-order",p,{absElemType:"partOrder",info:r.partOrder,anchor:"start"},u)}}return En=a,En}var An,Do;function Bd(){if(Do)return An;Do=1;const e=Na(),t=Mf();function a(s,l,c,f,p,v,d){this.rows=[],s.unalignedWords&&s.unalignedWords.length>0&&this.unalignedWords(s.unalignedWords,f,p,v,d),this.extraText(s,f,p,v,d),s.footer&&c&&this.footer(s.footer,l,f,d)}a.prototype.unalignedWords=function(s,l,c,f,p){var v=f?"abcjs-unaligned-words":"",d="wordsfont",u=p.calc("i",d,v);this.rows.push({move:c.words}),r(this.rows,"",s,l,d,"unalignedWords","unalignedWords",v,"unalignedWords",c,f,p),this.rows.push({move:u.height})};function n(s,l,c,f,p,v,d){c&&(l&&(typeof c=="string"?c=l+c:c=[{text:l}].concat(c)),p=v?"abcjs-extra-text "+p:"",t(s,c,"historyfont",p,"description",f,{absElemType:"extraText",anchor:"start"},d))}function r(s,l,c,f,p,v,d,u,o,h,i,g){if(c){u=i?"abcjs-extra-text "+u:"";var m=g.calc("A",p,u);if(typeof c=="string")l&&(c=l+`
`+c),e(s,{marginLeft:f,text:c,font:p,absElemType:"extraText",name:o,"dominant-baseline":"middle",klass:u},g);else{s.push({startGroup:d,klass:u,name:o}),s.push({move:h.info}),l&&(e(s,{marginLeft:f,text:l,font:p,absElemType:"extraText",name:o,"dominant-baseline":"middle"},g),s.push({move:m.height*3/4}));for(var b=0;b<c.length;b++)t(s,c[b],p,"",o,f,{anchor:"start"},g),b<c.length-1&&typeof c[b]=="string"&&typeof c[b+1]!="string"&&s.push({move:m.height*3/4});s.push({endGroup:d,absElemType:v,startChar:-1,endChar:-1,name:o}),s.push({move:m.height})}}}return a.prototype.extraText=function(s,l,c,f,p){n(this.rows,"Book: ",s.book,l,"abcjs-book",f,p),n(this.rows,"Source: ",s.source,l,"abcjs-source",f,p),n(this.rows,"Discography: ",s.discography,l,"abcjs-discography",f,p),r(this.rows,"Notes:",s.notes,l,"historyfont","extraText","notes","abcjs-notes","description",c,f,p),n(this.rows,"Transcription: ",s.transcription,l,"abcjs-transcription",f,p),r(this.rows,"History:",s.history,l,"historyfont","extraText","history","abcjs-history","description",c,f,p),n(this.rows,"Copyright: ",s["abc-copyright"],l,"abcjs-copyright",f,p),n(this.rows,"Creator: ",s["abc-creator"],l,"abcjs-creator",f,p),n(this.rows,"Edited By: ",s["abc-edited-by"],l,"abcjs-edited-by",f,p)},a.prototype.footer=function(s,l,c,f){var p="header meta-bottom",v="footerfont";this.rows.push({startGroup:"footer",klass:p}),e(this.rows,{marginLeft:c,text:s.left,font:v,klass:p,name:"footer"},f),e(this.rows,{marginLeft:c+l/2,text:s.center,font:v,klass:p,anchor:"middle",name:"footer"},f),e(this.rows,{marginLeft:c+l,text:s.right,font:v,klass:p,anchor:"end",name:"footer"},f)},An=a,An}var Mn,Oo;function Bf(){if(Oo)return Mn;Oo=1;function e(a,n,r,s){if(a.indexOf(n)===0){var l=a.replace(n,""),c=parseInt(l,10);""+c===l&&(r[s]=c)}}function t(a,n){var r=[];if(a.absEl.elemset){for(var s={},l=0;l<a.absEl.elemset.length;l++){var c=a.absEl.elemset[l];if(c)for(var f=c.getAttribute("class").split(" "),p=0;p<f.length;p++)s[f[p]]=!0}for(var v=0;v<Object.keys(s).length;v++)r.push(Object.keys(s)[v])}for(var d={},u=0;u<r.length;u++)e(r[u],"abcjs-v",d,"voice"),e(r[u],"abcjs-l",d,"line"),e(r[u],"abcjs-m",d,"measure");a.staffPos&&(d.staffPos=a.staffPos);for(var o=n.target;o&&o.dataset&&!o.dataset.name&&o.tagName.toLowerCase()!=="svg";)o=o.parentNode;for(var h=n.target;h&&h.dataset&&!h.dataset.index&&h.tagName.toLowerCase()!=="svg";)h=h.parentNode;return h&&h.dataset&&(d.name=h.dataset.name,d.clickedName=o.dataset.name,d.parentClasses=h.classList),o&&o.classList&&(d.clickedClasses=o.classList),d.selectableElement=a.svgEl,{classes:r,analysis:d}}return Mn=t,Mn}var Bn,Io;function Pd(){if(Io)return Bn;Io=1;var e=We(),t=Bf();function a(y,A){if(y.rangeHighlight=x,y.dragging)for(var P=0;P<y.selectables.length;P++){var M=y.selectables[P];M.svgEl.getAttribute("selectable")==="true"&&(M.svgEl.setAttribute("tabindex",0),M.svgEl.setAttribute("data-index",P),M.svgEl.addEventListener("keydown",s.bind(y)),M.svgEl.addEventListener("keyup",l.bind(y)),M.svgEl.addEventListener("focus",r.bind(y)))}for(var N=0;N<A.length;N++)A[N].addEventListener("touchstart",o.bind(y),{passive:!0}),A[N].addEventListener("touchmove",h.bind(y),{passive:!0}),A[N].addEventListener("touchend",i.bind(y),{passive:!0}),A[N].addEventListener("mousedown",o.bind(y)),A[N].addEventListener("mousemove",h.bind(y)),A[N].addEventListener("mouseup",i.bind(y))}function n(y){var A=1,P=1,M=y.target.closest("svg"),N=0;M&&M.viewBox&&M.viewBox.baseVal&&(M.viewBox.baseVal.width!==0&&(A=M.viewBox.baseVal.width/M.clientWidth),M.viewBox.baseVal.height!==0&&(P=M.viewBox.baseVal.height/M.clientHeight),N=M.viewBox.baseVal.y);var B=y.target&&y.target.tagName==="svg",E,T;return B?(E=y.offsetX,T=y.offsetY):(E=y.layerX,T=y.layerY),E=E*A,T=T*P,[E,T+N]}function r(y){this.dragMechanism==="keyboard"&&this.dragYStep!==0&&this.dragTarget&&m.bind(this)(this.dragTarget,this.dragYStep,this.selectables.length,this.dragIndex,y),this.dragYStep=0}function s(y){switch(y.keyCode){case 38:case 40:y.preventDefault()}}function l(y){var A=!1,P=y.target.dataset.index;switch(y.keyCode){case 13:case 32:A=!0,this.dragTarget=this.selectables[P],this.dragIndex=P,this.dragMechanism="keyboard",i.bind(this)(y);break;case 38:A=!0,this.dragTarget=this.selectables[P],this.dragIndex=P,this.dragTarget&&this.dragTarget.isDraggable&&(this.dragging&&this.dragTarget.isDraggable&&this.dragTarget.absEl.highlight(void 0,this.dragColor),this.dragYStep--,this.dragTarget.svgEl.setAttribute("transform","translate(0,"+this.dragYStep*e.STEP+")"));break;case 40:A=!0,this.dragTarget=this.selectables[P],this.dragIndex=P,this.dragMechanism="keyboard",this.dragTarget&&this.dragTarget.isDraggable&&(this.dragging&&this.dragTarget.isDraggable&&this.dragTarget.absEl.highlight(void 0,this.dragColor),this.dragYStep++,this.dragTarget.svgEl.setAttribute("transform","translate(0,"+this.dragYStep*e.STEP+")"));break;case 9:this.dragYStep!==0&&i.bind(this)(y);break}A&&y.preventDefault()}function c(y,A){if(!A)return-1;var P=A.dataset;if(!P)return-1;for(var M=P.index,N=0;N<y.length;N++){var B=y[N].svgEl.dataset;if(B&&M===B.index)return N}return-1}function f(y,A,P){for(var M=9999999,N=-1,B=0;B<y.selectables.length&&M>0;B++){var E=y.selectables[B];if(y.getDim(E),E.dim.left<A&&E.dim.right>A&&E.dim.top<P&&E.dim.bottom>P)N=B,M=0;else if(E.dim.top<P&&E.dim.bottom>P){var T=Math.min(Math.abs(E.dim.left-A),Math.abs(E.dim.right-A));T<M&&(M=T,N=B)}else if(E.dim.left<A&&E.dim.right>A){var L=Math.min(Math.abs(E.dim.top-P),Math.abs(E.dim.bottom-P));L<M&&(M=L,N=B)}else{var R=Math.abs(A-E.dim.left)>Math.abs(A-E.dim.right)?Math.abs(A-E.dim.right):Math.abs(A-E.dim.left),O=Math.abs(P-E.dim.top)>Math.abs(P-E.dim.bottom)?Math.abs(P-E.dim.bottom):Math.abs(P-E.dim.top),w=Math.sqrt(R*R+O*O);w<M&&(M=w,N=B)}}return N>=0&&M<=12?N:-1}function p(y,A,P){if(y.x<=A.offsetX&&y.x+y.width>=A.offsetX&&y.y<=A.offsetY&&y.y+y.height>=A.offsetY)return[A.offsetX,A.offsetY];var M=Math.abs(A.layerY/P-A.offsetY);return M<3?[A.offsetX,A.offsetY]:[A.layerX,A.layerY]}function v(y){if(!y)return null;if(y.tagName==="svg")return y;if(!y.getAttribute)return null;for(var A=y.getAttribute("selectable");!A;)y.parentElement?(y=y.parentElement,y.tagName==="svg"?A=!0:A=y.getAttribute("selectable")):A=!0;return y}function d(y,A){var P,M,N,B=c(y.selectables,v(A.target));return B>=0?(N=p(y.selectables[B].svgEl.getBBox(),A,y.scale),P=N[0],M=N[1]):(N=n(A),P=N[0],M=N[1],B=f(y,P,M)),{x:P,y:M,clickedOn:B}}function u(y){if(!(!y||!y.target||!y.touches||y.touches.length<1)){var A=y.target.getBoundingClientRect(),P=y.touches[0].pageX-A.left,M=y.touches[0].pageY-A.top;y.touches[0].offsetX=P,y.touches[0].offsetY=M,y.touches[0].layerX=y.touches[0].pageX,y.touches[0].layerY=y.touches[0].pageY}}function o(y){var A=y;y.type==="touchstart"&&(u(y),y.touches.length>0&&(A=y.touches[0]));var P=d(this,A);P.clickedOn>=0&&(y.type==="touchstart"||y.button===0)&&this.selectables[P.clickedOn]&&(this.dragTarget=this.selectables[P.clickedOn],this.dragIndex=P.clickedOn,this.dragMechanism="mouse",this.dragMouseStart={x:P.x,y:P.y},this.dragging&&this.dragTarget.isDraggable&&(I(this.renderer.paper,"abcjs-dragging-in-progress"),this.dragTarget.absEl.highlight(void 0,this.dragColor)))}function h(y){var A=y;if(y.type==="touchmove"&&(u(y),y.touches.length>0&&(A=y.touches[0])),this.lastTouchMove=y,!(!this.dragTarget||!this.dragging||!this.dragTarget.isDraggable||this.dragMechanism!=="mouse"||!this.dragMouseStart)){var P=d(this,A),M=Math.round((P.y-this.dragMouseStart.y)/e.STEP);M!==this.dragYStep&&(this.dragYStep=M,this.dragTarget.svgEl.setAttribute("transform","translate(0,"+M*e.STEP+")"))}}function i(y){var A=y;y.type==="touchend"&&this.lastTouchMove&&(u(this.lastTouchMove),this.lastTouchMove&&this.lastTouchMove.touches&&this.lastTouchMove.touches.length>0&&(A=this.lastTouchMove.touches[0])),this.dragTarget&&(b.bind(this)(),this.dragTarget.absEl&&this.dragTarget.absEl.highlight&&(this.selected=[this.dragTarget.absEl],this.dragTarget.absEl.highlight(void 0,this.selectionColor)),m.bind(this)(this.dragTarget,this.dragYStep,this.selectables.length,this.dragIndex,A),this.dragTarget.svgEl&&this.dragTarget.svgEl.focus&&(this.dragTarget.svgEl.focus(),this.dragTarget=null,this.dragIndex=-1),F(this.renderer.svg,"abcjs-dragging-in-progress"))}function g(y){y>=0&&y<this.selectables.length&&(this.dragTarget=this.selectables[y],this.dragIndex=y,this.dragMechanism="keyboard",i.bind(this)({target:this.dragTarget.svgEl}))}function m(y,A,P,M,N){for(var B=t(y,N),E=B.classes,T=B.analysis,L=0;L<this.listeners.length;L++)this.listeners[L](y.absEl.abcelem,y.absEl.tuneNumber,E.join(" "),T,{step:A,max:P,index:M,setSelection:g.bind(this)},N)}function b(){for(var y=0;y<this.selected.length;y++)this.selected[y].unhighlight(void 0,this.renderer.foregroundColor);this.selected=[]}function x(y,A){b.bind(this)();for(var P=0;P<this.staffgroups.length;P++)for(var M=this.staffgroups[P].voices,N=0;N<M.length;N++)for(var B=M[N].children,E=0;E<B.length;E++){var T=B[E].abcelem.startChar,L=B[E].abcelem.endChar;(A>T&&y<L||A===y&&A===L)&&(this.selected[this.selected.length]=B[E],B[E].highlight(void 0,this.selectionColor))}}function C(y){var A=y.getAttribute("class");A||(A="");for(var P=A.split(" "),M={},N=0;N<P.length;N++)M[P[N]]=!0;return M}function S(y,A){var P=[];for(var M in A)A.hasOwnProperty(M)&&P.push(M);y.setAttribute("class",P.join(" "))}function I(y,A){if(y){var P=C(y.svg);P[A]=!0,S(y.svg,P)}}function F(y,A){if(y){var P=C(y.svg);delete P[A],S(y.svg,P)}}return Bn=a,Bn}var Pn,Fo;function La(){if(Fo)return Pn;Fo=1;function e(t,a,n,r,s){return a+(r-a)/(n-t)*(s-t)}return Pn=e,Pn}var Nn,Ro;function Nd(){if(Ro)return Nn;Ro=1;var e=lt(),t=We(),a=La(),n=function(u){if(!(u.elems.length===0||u.allrests)){var o=c(u.stemsUp,u.isgrace),h=u.elems[0],i=u.elems[u.elems.length-1],g=0,m=u.stemsUp?h.abcelem.maxpitch:h.abcelem.minpitch;g=s(h,u.stemsUp,m,g),g=s(i,u.stemsUp,m,g),g=Math.max(u.stemHeight,g+3);var b=p(u.average,u.elems.length,g,u.stemsUp,h.abcelem.averagepitch,i.abcelem.averagepitch,u.isflat,u.min,u.max,u.isgrace),x=f(u.stemsUp,h,i);u.addBeam({startX:x[0],endX:x[1],startY:b[0],endY:b[1],dy:o});for(var C=d(u.elems,u.stemsUp,u.beams[0],u.isgrace,o),S=0;S<C.length;S++)u.addBeam(C[S]);v(u.elems,u.stemsUp,u.beams[0],o,u.mainNote)}},r=function(u){return u===void 0?0:Math.floor(Math.log(u)/Math.log(2))};function s(u,o,h,i){if(!u.children)return i;for(var g=0;g<u.children.length;g++){var m=u.children[g];o&&m.top!==void 0&&m.c==="flags.ugrace"?i=Math.max(i,m.top-h):!o&&m.bottom!==void 0&&m.c==="flags.ugrace"&&(i=Math.max(i,h-m.bottom+7))}return i}function l(u,o,h,i){if(i)return 0;var g=u-o,m=h/2;return g>m&&(g=m),g<-m&&(g=-m),g}function c(u,o){var h=u?t.STEP:-t.STEP;return o&&(h=h*.4),h}function f(u,o,h){var i=o.heads[u?0:o.heads.length-1],g=h.heads[u?0:h.heads.length-1],m=i.x;u&&(m+=i.w-.6);var b=g.x;return b+=u?g.w:.6,[m,b]}function p(u,o,h,i,g,m,b,x,C,S){var I=h-2,F=h-2,y=Math.round(i?Math.max(u+I,C+F):Math.min(u-I,x-F)),A=l(g,m,o,b),P=y+Math.floor(A/2),M=y+Math.floor(-A/2);return S||(i&&y<6||!i&&y>6)&&(P=6,M=6),[P,M]}function v(u,o,h,i,g){for(var m=0;m<u.length;m++){var b=u[m];if(!b.abcelem.rest){var x=!b.addExtra,C=x?g:b,S=b.heads[o?0:b.heads.length-1],I=1/5,F=S.pitch+(o?I:-I),y=o?S.w:0;x||(y+=S.dx);var A=S.x+y,P=a(h.startX,h.startY,h.endX,h.endY,A),M=o?-.6:.6;o||(P-=i/2/t.STEP),x&&(y+=b.heads[0].dx),S.c==="noteheads.slash.quarter"&&(o?F+=1:F-=1);var N=new e(null,y,0,F,{type:"stem",pitch2:P,linewidth:M});N.setX(C.x),C.addRight(N)}}}function d(u,o,h,i,g){for(var m=[],b=[],x=0;x<u.length;x++){var C=u[x];if(!C.abcelem.rest){var S=C.heads[o?0:C.heads.length-1],I=S.x+(o?S.w:0),F=a(h.startX,h.startY,h.endX,h.endY,I),y=o?-1.5:1.5;i&&(y=y*2/3);var A=C.abcelem.duration;A===0&&(A=.25);for(var P=r(A);P<-3;P++){var M=-4-P;if(b[M]?b[M].single=!1:b[M]={x:I+(o?-.6:0),y:F+y*(M+1),durlog:P,single:!0},x>0&&C.abcelem.beambr&&C.abcelem.beambr<=M+1){b[M].split||(b[M].split=[b[M].x]);var N=f(o,u[x-1],C);b[M].split[b[M].split.length-1]>=N[0]&&(N[0]+=C.w),b[M].split.push(N[0]),b[M].split.push(N[1])}}for(var B=b.length-1;B>=0;B--)if(x===u.length-1||r(u[x+1].abcelem.duration)>-B-4){var E=I,T=F+y*(B+1);b[B].single&&(E=x===0?I+5:I-5,T=a(h.startX,h.startY,h.endX,h.endY,E)+y*(B+1));var L={startX:b[B].x,endX:E,startY:b[B].y,endY:T,dy:g};if(b[B].split!==void 0){var R=b[B].split;L.endX<=R[R.length-1]&&(R[R.length-1]-=C.w),R.push(L.endX),L.split=b[B].split}m.push(L),b=b.slice(0,B)}}}return m}return Nn=n,Nn}var Ln,Ho;function Ld(){if(Ho)return Ln;Ho=1;var e=La();function t(s){if(s.anchor1&&s.anchor2){s.hasBeam=!!s.anchor1.parent.beam&&s.anchor1.parent.beam===s.anchor2.parent.beam;var l=s.anchor1.parent.beam;if(s.hasBeam&&(l.elems[0]!==s.anchor1.parent||l.elems[l.elems.length-1]!==s.anchor2.parent)&&(s.hasBeam=!1),s.hasBeam){var c=a(l)?s.anchor1.x+s.anchor1.w:s.anchor1.x;s.yTextPos=n(c,s.anchor2.x,l),s.yTextPos+=a(l)?3:-2,s.xTextPos=r(c,s.anchor2.x),s.top=s.yTextPos+1,s.bottom=s.yTextPos-2,a(l)&&(s.endingHeightAbove=4)}else{s.startNote=Math.max(s.anchor1.parent.top,9)+4,s.endNote=Math.max(s.anchor2.parent.top,9)+4,s.anchor1.parent.type==="rest"&&s.anchor2.parent.type!=="rest"?s.startNote=s.endNote:s.anchor2.parent.type==="rest"&&s.anchor1.parent.type!=="rest"&&(s.endNote=s.startNote);for(var f=0,p=0;p<s.middleElems.length;p++)f=Math.max(f,s.middleElems[p].top);f+=4,(f>s.startNote||f>s.endNote)&&(s.startNote=f,s.endNote=f),s.flatBeams&&(s.startNote=Math.max(s.startNote,s.endNote),s.endNote=Math.max(s.startNote,s.endNote)),s.yTextPos=s.startNote+(s.endNote-s.startNote)/2,s.xTextPos=s.anchor1.x+(s.anchor2.x+s.anchor2.w-s.anchor1.x)/2,s.top=s.yTextPos+1}}delete s.middleElems,delete s.flatBeams}function a(s){return s.stemsUp}function n(s,l,c){if(c.beams.length===0)return 0;c=c.beams[0];var f=s+(l-s)/2;return e(c.startX,c.startY,c.endX,c.endY,f)}function r(s,l){return s+(l-s)/2}return Ln=t,Ln}var qn,zo;function qd(){if(zo)return qn;zo=1;var e=Nd(),t=La(),a=Ld(),n=function(v){for(var d=0;d<v.beams.length;d++)if(v.beams[d].type==="BeamElem"){e(v.beams[d]),r(v.beams[d]);for(var u=0;u<v.beams[d].elems.length;u++)v.adjustRange(v.beams[d].elems[u])}for(v.staff.specialY.chordLines=l(v.children),d=0;d<v.otherchildren.length;d++){var o=v.otherchildren[d];o.type==="TripletElem"&&(a(o),v.adjustRange(o))}v.staff.top=Math.max(v.staff.top,v.top),v.staff.bottom=Math.min(v.staff.bottom,v.bottom)};function r(v){for(var d=1.5,u=0;u<v.elems.length;u++){var o=v.elems[u];if(o.top)for(var h=p(o,v),i=0;i<o.children.length;i++){var g=o.children[i];if(g.klass==="ornament"&&g.position!=="below"&&g.bottom-d<h){var m=h-g.bottom+d;g.bottom+=m,g.top+=m,g.pitch+=m,h=o.top=g.top}}}}function s(v,d){var u=d.getChordDim();if(u){for(var o=0;o<v.length;o++){var h=v[o]<u.left;if(h){o>0&&d.putChordInLane(o),v[o]=u.right;return}}v.push(u.right),d.putChordInLane(v.length-1)}}function l(v){var d=[0],u=[0],o,h,i;for(o=0;o<v.length;o++){for(h=0;h<v[o].children.length;h++)i=v[o].children[h],i.chordHeightAbove&&s(d,i);for(h=v[o].children.length-1;h>=0;h--)i=v[o].children[h],i.chordHeightBelow&&s(u,i)}return(d.length>1||u.length>1)&&f(v,d.length,u.length),{above:d.length,below:u.length}}function c(v){for(var d=0,u=0;u<v.children.length;u++){var o=v.children[u];o.chordHeightBelow&&d++}return d}function f(v,d,u){for(var o=0;o<v.length;o++){c(v[o]);for(var h=0;h<v[o].children.length;h++){var i=v[o].children[h];i.chordHeightAbove&&i.invertLane(d)}}}function p(v,d){return d=d.beams[0],t(d.startX,d.startY,d.endX,d.endY,v.x)}return qn=n,qn}var Dn,Go;function Dd(){if(Go)return Dn;Go=1;var e=We(),t=function(d,u){for(var o,h=0;h<u.staffs.length;h++){var i=u.staffs[h],g={tempoHeightAbove:0,partHeightAbove:0,volumeHeightAbove:0,dynamicHeightAbove:0,endingHeightAbove:0,chordHeightAbove:0,lyricHeightAbove:0,lyricHeightBelow:0,chordHeightBelow:0,volumeHeightBelow:0,dynamicHeightBelow:0};if(d.showDebug&&d.showDebug.indexOf("box")>=0&&(i.originalTop=i.top,i.originalBottom=i.bottom),n(i,g,"lyricHeightAbove"),n(i,g,"chordHeightAbove",i.specialY.chordLines.above),i.specialY.endingHeightAbove&&(i.specialY.chordHeightAbove?i.top+=2:i.top+=i.specialY.endingHeightAbove+a,g.endingHeightAbove=i.top),i.specialY.dynamicHeightAbove&&i.specialY.volumeHeightAbove?(i.top+=Math.max(i.specialY.dynamicHeightAbove,i.specialY.volumeHeightAbove)+a,g.dynamicHeightAbove=i.top,g.volumeHeightAbove=i.top):(n(i,g,"dynamicHeightAbove"),n(i,g,"volumeHeightAbove")),n(i,g,"partHeightAbove"),n(i,g,"tempoHeightAbove"),i.specialY.lyricHeightBelow&&(i.specialY.lyricHeightBelow+=d.spacing.vocal/e.STEP,g.lyricHeightBelow=i.bottom,i.bottom-=i.specialY.lyricHeightBelow+a),i.specialY.chordHeightBelow){g.chordHeightBelow=i.bottom;var m=i.specialY.chordHeightBelow;i.specialY.chordLines.below&&(m*=i.specialY.chordLines.below),i.bottom-=m+a}i.specialY.volumeHeightBelow&&i.specialY.dynamicHeightBelow?(g.volumeHeightBelow=i.bottom,g.dynamicHeightBelow=i.bottom,i.bottom-=Math.max(i.specialY.volumeHeightBelow,i.specialY.dynamicHeightBelow)+a):i.specialY.volumeHeightBelow?(g.volumeHeightBelow=i.bottom,i.bottom-=i.specialY.volumeHeightBelow+a):i.specialY.dynamicHeightBelow&&(g.dynamicHeightBelow=i.bottom,i.bottom-=i.specialY.dynamicHeightBelow+a),d.showDebug&&d.showDebug.indexOf("box")>=0&&(i.positionY=g);for(var b=0;b<i.voices.length;b++){var x=u.voices[i.voices[b]];r(g,x,d.spacing)}if(o!==void 0){var C=i.top-10,S=o+C,I=d.spacing.systemStaffSeparation/e.STEP,F=I-S;F>0&&(i.top+=F)}i.top+=d.spacing.staffTopMargin/e.STEP,o=2-i.bottom}},a=1;function n(d,u,o,h){if(d.specialY[o]){var i=d.specialY[o];h&&(i*=h),d.top+=i+a,u[o]=d.top}}function r(d,u,o){var h,i;for(h=0;h<u.children.length;h++)i=u.children[h],s(d,i,o);for(h=0;h<u.otherchildren.length;h++)switch(i=u.otherchildren[h],i.type){case"CrescendoElem":l(d,i);break;case"DynamicDecoration":c(d,i);break;case"EndingElem":f(d,i);break;case"TieElem":var g=i.getYBounds();u.staff.top=Math.max(u.staff.top,g[0]),u.staff.top=Math.max(u.staff.top,g[1]),u.staff.bottom=Math.min(u.staff.bottom,g[0]),u.staff.bottom=Math.min(u.staff.bottom,g[1]);break}}function s(d,u,o){for(var h=0;h<u.children.length;h++){var i=u.children[h];for(var g in u.specialY)u.specialY.hasOwnProperty(g)&&i[g]&&(i.pitch=d[g],i.top===void 0&&(i.type==="TempoElement"?p(d,i):v(d,i,o),u.pushTop(i.top),u.pushBottom(i.bottom)))}}function l(d,u){u.dynamicHeightAbove?u.pitch=d.dynamicHeightAbove:u.pitch=d.dynamicHeightBelow}function c(d,u){u.volumeHeightAbove?u.pitch=d.volumeHeightAbove:u.pitch=d.volumeHeightBelow}function f(d,u){u.pitch=d.endingHeightAbove-2}function p(d,u){if(u.pitch=d.tempoHeightAbove,u.top=d.tempoHeightAbove,u.bottom=d.tempoHeightAbove,u.note){var o=u.pitch-u.totalHeightInPitches+1;u.note.top=o,u.note.bottom=o;for(var h=0;h<u.note.children.length;h++){var i=u.note.children[h];i.top+=o,i.bottom+=o,i.pitch+=o,i.pitch2!==void 0&&(i.pitch2+=o)}}}function v(d,u,o){switch(u.type){case"part":u.top=d.partHeightAbove+u.height,u.bottom=d.partHeightAbove;break;case"text":case"chord":u.chordHeightAbove?(u.top=d.chordHeightAbove,u.bottom=d.chordHeightAbove):(u.top=d.chordHeightBelow,u.bottom=d.chordHeightBelow);break;case"lyric":u.lyricHeightAbove?(u.top=d.lyricHeightAbove,u.bottom=d.lyricHeightAbove):(u.top=d.lyricHeightBelow+o.vocal/e.STEP,u.bottom=d.lyricHeightBelow+o.vocal/e.STEP,u.pitch-=o.vocal/e.STEP);break;case"debug":u.top=d.chordHeightAbove,u.bottom=d.chordHeightAbove;break}(u.pitch===void 0||u.top===void 0)&&console.error("RelativeElement position not set.",u.type,u.pitch,u.top,d)}return Dn=t,Dn}var On,Yo;function Od(){if(Yo)return On;Yo=1;var e=function(){};e.beginLayout=function(n,r){r.i=0,r.durationindex=0,r.startx=n,r.minx=n,r.nextx=n,r.spacingduration=0},e.layoutEnded=function(n){return n.i>=n.children.length},e.getNextX=function(n){return Math.max(n.minx,n.nextx)},e.getSpacingUnits=function(n){return Math.sqrt(n.spacingduration*8)},e.layoutOneItem=function(n,r,s,l,c){var f=s.children[s.i];if(!f)return 0;var p=n-s.minx,v=s.durationindex+f.duration>0?l:0;if(f.abcelem.el_type==="note"&&!f.abcelem.rest&&s.voicenumber!==0&&c){var d=c.children[c.i],u=d&&(f.abcelem.maxpitch<=d.abcelem.maxpitch+1&&f.abcelem.maxpitch>=d.abcelem.minpitch-1||f.abcelem.minpitch<=d.abcelem.maxpitch+1&&f.abcelem.minpitch>=d.abcelem.minpitch-1);if(u&&f.abcelem.minpitch===d.abcelem.minpitch&&f.abcelem.maxpitch===d.abcelem.maxpitch&&d.heads&&d.heads.length>0&&f.heads&&f.heads.length>0&&d.heads[0].c===f.heads[0].c&&(u=!1),u){var o=d.heads&&d.heads.length>0?d.heads[0].realWidth:d.fixed.w;f.adjustedWidth||(f.adjustedWidth=o+f.w),f.w=f.adjustedWidth;for(var h=0;h<f.children.length;h++){var i=f.children[h];i.name.indexOf("accidental")<0&&(i.adjustedWidth||(i.adjustedWidth=i.dx+o),i.dx=i.adjustedWidth)}}}var g=t(f,v);return p<g&&(s.i===0||f.type!=="bar"||s.children[s.i-1].type!=="part"&&s.children[s.i-1].type!=="tempo")&&(n+=g-p),f.setX(n),s.spacingduration=f.duration,s.minx=n+a(f),s.i!==s.children.length-1&&(s.minx+=f.minspacing),this.updateNextX(n,r,s),n},e.shiftRight=function(n,r){var s=r.children[r.i];s&&(s.setX(s.x+n),r.minx+=n,r.nextx+=n)},e.updateNextX=function(n,r,s){s.nextx=n+r*this.getSpacingUnits(s)},e.updateIndices=function(n){this.layoutEnded(n)||(n.durationindex+=n.children[n.i].duration,n.children[n.i].type==="bar"&&(n.durationindex=Math.round(n.durationindex*64)/64),n.i++)};function t(n,r){var s=0;return(n.type==="note"||n.type==="bar")&&(s=r),-n.extraw+s}function a(n){return n.w}return On=e,On}var In,$o;function Id(){if($o)return In;$o=1;var e=Od();function t(l){for(var c=0,f=0;f<l.length;f++){var p=l[f];if(p.children.length>0){var v=p.children.length-1,d=p.children[v];if(d.abcelem.el_type==="bar"){var u=d.children[0].x;u>c?c=u:d.children[0].x=c}}}}var a=function(l,c,f,p,v){var d=1e-7,u=0,o=1e3,h=v;p.startx=h;var i,g=0;for(f&&console.log("init layout",l),i=0;i<p.voices.length;i++)e.beginLayout(h,p.voices[i]);for(var m=0;!n(p.voices);){for(g=null,i=0;i<p.voices.length;i++)!e.layoutEnded(p.voices[i])&&(!g||r(p.voices[i])<g)&&(g=r(p.voices[i]));var b=[],x=[];for(i=0;i<p.voices.length;i++){var C=r(p.voices[i]);C-g>d?x.push(p.voices[i]):b.push(p.voices[i])}m=0;var S=0;for(i=0;i<b.length;i++)e.getNextX(b[i])>h&&(h=e.getNextX(b[i]),m=e.getSpacingUnits(b[i]),S=b[i].spacingduration);u+=m,o=Math.min(o,m),f&&console.log("currentduration: ",g,u,o);var I=void 0;for(i=0;i<b.length;i++){var F=b[i];F.voicenumber===0&&(I=i);var y=I!==void 0&&b[I].voicenumber!==F.voicenumber?b[I]:void 0;s(F,y)||(y=void 0);var A=e.layoutOneItem(h,l,F,c,y),P=A-h;if(P>0){h=A;for(var M=0;M<i;M++)e.shiftRight(P,b[M])}}for(i=0;i<x.length;i++)x[i].spacingduration-=S,e.updateNextX(h,l,x[i]);for(i=0;i<b.length;i++){var N=b[i];e.updateIndices(N)}}for(i=0;i<p.voices.length;i++)e.getNextX(p.voices[i])>h&&(h=e.getNextX(p.voices[i]),m=e.getSpacingUnits(p.voices[i]));return t(p.voices),u+=m,p.setWidth(h),{spacingUnits:u,minSpace:o}};function n(l){for(var c=0;c<l.length;c++)if(!e.layoutEnded(l[c]))return!1;return!0}function r(l){return l.durationindex-(l.children[l.i]&&l.children[l.i].duration>0?0:5e-7)}function s(l,c){return!l||!l.staff||!l.staff.voices||l.staff.voices.length===0||!c||!c.staff||!c.staff.voices||c.staff.voices.length===0?!1:l.staff.voices[0]===c.staff.voices[0]}return In=a,In}var Fn,Wo;function Pf(){if(Wo)return Fn;Wo=1;function e(r,s,l,c,f){var p=r.padding.left,v=0,d,u;for(d=0;d<l.length;d++)l[d].header&&(u=s.calc(l[d].header,"voicefont",""),v=Math.max(v,u.width));if(v=t(v,c,s),v=t(v,f,s),v){var o=s.calc("A","voicefont","");v+=o.width}p+=v;var h=0;return h=a(c,p,h),h=a(f,p,h),p+h}function t(r,s,l){if(s){for(var c=0;c<s.length;c++)if(s[c].header){var f=l.calc(s[c].header,"voicefont","");r=Math.max(r,f.width)}}return r}function a(r,s,l){if(r)for(var c=0;c<r.length;c++)n(s,r[c]),l=Math.max(l,r[c].getWidth());return l}function n(r,s){s.x=r}return Fn=e,Fn}var Rn,Uo;function Fd(){if(Uo)return Rn;Uo=1;var e=Pf();function t(n,r,s){var l=e(n,r.getTextSize,r.voices,r.brace,r.bracket),c=a(r,s.minPadding),f=c.totalDuration,p=c.minSpacing,v=p*f;s.minWidth&&(v=Math.max(v,s.minWidth));var d=s.minPadding?s.minPadding/2:2;r.startx=l,r.w=v+l;for(var u=0;u<r.voices.length;u++){var o=r.voices[u];o.startx=l,o.w=v+l;for(var h=l,i=!1,g=0,m=0;m<o.children.length;m++){var b=o.children[m];i||(b.duration!==0?(i=!0,g=(v+l-h)/f,r.gridStart=h):(b.x=h,h+=b.w+b.minspacing)),i&&(s.align==="center"?b.x=h+b.duration*g/2-b.w/2:b.duration===0?b.x=h+1-b.w:b.x=h+d-b.extraw,h+=b.duration*g);for(var x=0;x<b.children.length;x++){var C=b.children[x],S=C.dx?C.dx:0;C.x=b.x+S}}r.gridEnd=h}return v}function a(n,r){for(var s=0,l=0,c=0;c<n.voices.length;c++){for(var f=0,p=n.voices[c],v=0;v<p.children.length;v++){var d=p.children[v];if(f+=d.duration,d.duration){var u=(d.w+r)/d.duration;s=Math.max(s,u)}}l=Math.max(l,f)}return{totalDuration:l,minSpacing:s}}return Rn=t,Rn}var Hn,Vo;function Rd(){if(Vo)return Hn;Vo=1;var e=qd(),t=Dd(),a=Id(),n=Pf(),r=Fd(),s=function(p,v,d,u,o,h){var i,g,m=d;for(i=0;i<v.lines.length;i++)if(g=v.lines[i],g.staff){var b;h!==void 0?b=r(p,g.staffGroup,h):b=l(p,m,u,g.staffGroup,v.formatting,i===v.lines.length-1,!1),Math.round(b)>Math.round(m)&&(m=b,o&&(i=-1))}for(i=0;i<v.lines.length;i++)if(g=v.lines[i],g.staffGroup&&g.staffGroup.voices){for(var x=0;x<g.staffGroup.voices.length;x++)e(g.staffGroup.voices[x]);t(p,g.staffGroup)}for(i=0;i<v.lines.length;i++)g=v.lines[i],g.staffGroup&&g.staffGroup.setHeight();return m},l=function(p,v,d,u,o,h,i){for(var g=n(p,u.getTextSize,u.voices,u.brace,u.bracket),m=d,b=0;b<8;b++){var x=a(m,p.minPadding,i,u,g);if(m=c(h,o.stretchlast,v+p.padding.left,u.w,m,x.spacingUnits,x.minSpace,p.padding.left+p.padding.right),m===null)break}return f(u.voices),u.w-g};function c(p,v,d,u,o,h,i,g){if(p)if(v===void 0){if(u/d<.66)return null}else{var m=1-(u+g)/d,b=m<v;if(!b)return null}if(Math.abs(d-u)<2)return null;var x=h*o,C=u-x;return h>0?(o=(d-C)/h,o*i>50&&(o=50/i),o):null}function f(p){for(var v=0;v<p.length;v++)for(var d=p[v],u=1;u<d.children.length-1;u++){var o=d.children[u];if(o.abcelem.rest&&(o.abcelem.rest.type==="whole"||o.abcelem.rest.type==="multimeasure")){var h=d.children[u-1],i=d.children[u+1];o.center(h,i)}}}return Hn=s,Hn}var zn,jo;function Hd(){if(jo)return zn;jo=1;var e=function(a){this.shouldAddClasses=a.shouldAddClasses,this.reset()};return e.prototype.reset=function(){this.lineNumber=null,this.voiceNumber=null,this.measureNumber=null,this.measureTotalPerLine=[],this.noteNumber=null},e.prototype.incrLine=function(){this.lineNumber===null?this.lineNumber=0:this.lineNumber++,this.voiceNumber=null,this.measureNumber=null,this.noteNumber=null},e.prototype.incrVoice=function(){this.voiceNumber===null?this.voiceNumber=0:this.voiceNumber++,this.measureNumber=null,this.noteNumber=null},e.prototype.isInMeasure=function(){return this.measureNumber!==null},e.prototype.newMeasure=function(){this.measureNumber&&(this.measureTotalPerLine[this.lineNumber]=this.measureNumber),this.measureNumber=null,this.noteNumber=null},e.prototype.startMeasure=function(){this.measureNumber=0,this.noteNumber=0},e.prototype.incrMeasure=function(){this.measureNumber++,this.noteNumber=0},e.prototype.incrNote=function(){this.noteNumber++},e.prototype.measureTotal=function(){for(var t=0,a=0;a<this.lineNumber;a++)t+=this.measureTotalPerLine[a]?this.measureTotalPerLine[a]:0;return this.measureNumber&&(t+=this.measureNumber),t},e.prototype.getCurrent=function(t){return{line:this.lineNumber,measure:this.measureNumber,measureTotal:this.measureTotal(),voice:this.voiceNumber,note:this.noteNumber}},e.prototype.generate=function(t){if(!this.shouldAddClasses)return"";var a=[];if(t&&t.length>0&&a.push(t),t==="abcjs-tab-number")return a.join(" ");if(t==="text instrument-name")return"abcjs-text abcjs-instrument-name";if(this.lineNumber!==null&&a.push("l"+this.lineNumber),this.measureNumber!==null&&a.push("m"+this.measureNumber),this.measureNumber!==null&&a.push("mm"+this.measureTotal()),this.voiceNumber!==null&&a.push("v"+this.voiceNumber),t&&(t.indexOf("note")>=0||t.indexOf("rest")>=0||t.indexOf("lyric")>=0)&&this.noteNumber!==null&&a.push("n"+this.noteNumber),a.length>0){a=a.join(" "),a=a.split(" ");for(var n=0;n<a.length;n++)a[n].indexOf("abcjs-")!==0&&a[n].length>0&&(a[n]="abcjs-"+a[n])}return a.join(" ")},zn=e,zn}var Gn,Ko;function zd(){if(Ko)return Gn;Ko=1;var e=function(a,n){this.formatting=a,this.classes=n};return e.prototype.updateFonts=function(t){t.gchordfont&&(this.formatting.gchordfont=t.gchordfont),t.tripletfont&&(this.formatting.tripletfont=t.tripletfont),t.annotationfont&&(this.formatting.annotationfont=t.annotationfont),t.vocalfont&&(this.formatting.vocalfont=t.vocalfont)},e.prototype.getFamily=function(t){return t[0]==='"'&&t[t.length-1]==='"'?t.substring(1,t.length-1):t},e.prototype.calc=function(t,a){var n;typeof t=="string"?(n=this.formatting[t],n?n={face:n.face,size:Math.round(n.size*4/3),decoration:n.decoration,style:n.style,weight:n.weight,box:n.box}:n={face:"Arial",size:Math.round(12*4/3),decoration:"underline",style:"normal",weight:"normal"}):n={face:t.face,size:Math.round(t.size*4/3),decoration:t.decoration,style:t.style,weight:t.weight,box:t.box};var r=this.formatting.fontboxpadding?this.formatting.fontboxpadding:.1;n.padding=n.size*r;var s={"font-size":n.size,"font-style":n.style,"font-family":this.getFamily(n.face),"font-weight":n.weight,"text-decoration":n.decoration,class:this.classes.generate(a)};return{font:n,attr:s}},Gn=e,Gn}var Yn,Xo;function Gd(){if(Xo)return Yn;Xo=1;var e=function(a,n){this.getFontAndAttr=a,this.svg=n};return e.prototype.updateFonts=function(t){this.getFontAndAttr.updateFonts(t)},e.prototype.attr=function(t,a){return this.getFontAndAttr.calc(t,a)},e.prototype.getFamily=function(t){return t[0]==='"'&&t[t.length-1]==='"'?t.substring(1,t.length-1):t},e.prototype.calc=function(t,a,n,r){var s;typeof a=="string"?s=this.attr(a,n):s={font:{face:a.face,size:a.size,decoration:a.decoration,style:a.style,weight:a.weight},attr:{"font-size":a.size,"font-style":a.style,"font-family":this.getFamily(a.face),"font-weight":a.weight,"text-decoration":a.decoration,class:this.getFontAndAttr.classes.generate(n)}};var l=this.svg.getTextSize(t,s.attr,r);return s.font.box?{height:l.height+s.font.padding*4,width:l.width+s.font.padding*4}:l},e.prototype.baselineToCenter=function(t,a,n,r,s){var l=this.calc(t,a,n).height,c=this.attr(a,n).font.size;return l*.5+(s-r-2)*c},Yn=e,Yn}var $n,Jo;function Rt(){if(Jo)return $n;Jo=1;var e=function(){for(var t=0,a,n=arguments[t++],r=[],s,l,c,f;n;){if(s=/^[^\x25]+/.exec(n))r.push(s[0]);else if(s=/^\x25{2}/.exec(n))r.push("%");else if(s=/^\x25(?:(\d+)\$)?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(n)){if((a=arguments[s[1]||t++])==null||a==null)throw"Too few arguments.";if(/[^s]/.test(s[7])&&typeof a!="number")throw"Expecting number but found "+typeof a;switch(s[7]){case"b":a=a.toString(2);break;case"c":a=String.fromCharCode(a);break;case"d":a=parseInt(a);break;case"e":a=s[6]?a.toExponential(s[6]):a.toExponential();break;case"f":a=s[6]?parseFloat(a).toFixed(s[6]):parseFloat(a);break;case"o":a=a.toString(8);break;case"s":a=(a=String(a))&&s[6]?a.substring(0,s[6]):a;break;case"u":a=Math.abs(a);break;case"x":a=a.toString(16);break;case"X":a=a.toString(16).toUpperCase();break}a=/[def]/.test(s[7])&&s[2]&&a>0?"+"+a:a,c=s[3]?s[3]=="0"?"0":s[3][1]:" ",f=s[5]-String(a).length,l=s[5]?str_repeat(c,f):"",r.push(s[4]?a+l:l+a)}else throw"Huh ?!";n=n.substring(s[0].length)}return r.join("")};return $n=e,$n}var Wn,Qo;function ft(){if(Qo)return Wn;Qo=1;function e(t){return parseFloat(t.toFixed(2))}return Wn=e,Wn}var Un,Zo;function Pt(){if(Zo)return Un;Zo=1;var e=ft();function t(a,n,r){var s=n.y;if(n.phrases){var p=a.paper.richTextLine(n.phrases,n.x,n.y,n.klass,n.anchor);return p}if(n.lane){var l=n.dim.font.size*.25;s+=(n.dim.font.size+l)*n.lane}var c;n.dim?(c=n.dim,c.attr.class=n.klass):c=a.controller.getFontAndAttr.calc(n.type,n.klass),n.anchor&&(c.attr["text-anchor"]=n.anchor),n["dominant-baseline"]&&(c.attr["dominant-baseline"]=n["dominant-baseline"]),c.attr.x=n.x,c.attr.y=s,n.centerVertically||(c.attr.y+=c.font.size),n.type==="debugfont"&&(console.log("Debug msg: "+n.text),c.attr.stroke="#ff0000"),n.cursor&&(c.attr.cursor=n.cursor);var f;n.name=="free-text"?f=n.text.replace(/^[ \t]*\n/gm,` 
`):f=n.text.replace(/\n\n/g,`
 
`),f=f.replace(/^\n/,` 
`),c.font.box&&(r||a.paper.openGroup({klass:c.attr.class,fill:a.foregroundColor,"data-name":n.name}),c.attr["text-anchor"]==="end"?c.attr.x-=c.font.padding:c.attr["text-anchor"]==="start"&&(c.attr.x+=c.font.padding),c.attr.y+=c.font.padding,delete c.attr.class),n.noClass&&delete c.attr.class,c.attr.x=e(c.attr.x),c.attr.y=e(c.attr.y),n.name&&(c.attr["data-name"]=n.name);var p=a.paper.text(f,c.attr);if(c.font.box){var v=p.getBBox(),d=0;c.attr["text-anchor"]==="middle"?d=v.width/2+c.font.padding:c.attr["text-anchor"]==="end"&&(d=v.width+c.font.padding*2);var u=0;n.centerVertically&&(u=v.height-c.font.padding),a.paper.rect({"data-name":"box",x:Math.round(n.x-d),y:Math.round(s-u),width:Math.round(v.width+c.font.padding*2),height:Math.round(v.height+c.font.padding*2)}),r||(p=a.paper.closeGroup())}return p}return Un=t,Un}var Vn,ec;function Yd(){if(ec)return Vn;ec=1;var e=Rt(),t=We(),a=Pt();function n(f,p,v){var d=p.startVoice.staff.absoluteY-t.STEP*10;return p.endVoice&&p.endVoice.staff?p.endY=p.endVoice.staff.absoluteY-t.STEP*2:p.lastContinuedVoice&&p.lastContinuedVoice.staff?p.endY=p.lastContinuedVoice.staff.absoluteY-t.STEP*2:p.endY=p.startVoice.staff.absoluteY-t.STEP*2,c(f,p.x,d,p.endY,p.type,p.header,v)}function r(f,p,v,d,u){p+=t.STEP;var o=t.STEP*.75,h=t.STEP*.75,i=d-v,g=e("M %f %f l %f %f l %f %f l %f %f z",p,v-h,0,i+h*2,o,0,0,-(i+h*2)),m=t.STEP*2,b=t.STEP;return g+=e("M %f %f q %f %f %f %f q %f %f %f %f z",p+o,v-h,m*.6,b*.2,m,-b,-m*.1,b*.3,-m,b+t.STEP),g+=e("M %f %f q %f %f %f %f q %f %f %f %f z",p+o,v+h+i,m*.6,-b*.2,m,b,-m*.1,-b*.3,-m,-b-t.STEP),f.paper.path({path:g,stroke:f.foregroundColor,fill:f.foregroundColor,class:f.controller.classes.generate(u),"data-name":u})}function s(f,p,v,d,u){var o=d-v,h=l(p,v,[7.5,-8,21,0,18.5,-10.5,7.5],[0,o/5.5,o/3.14,o/2,o/2.93,o/4.88,0]);return h+=l(p,v,[0,17.5,-7.5,6.6,-5,20,0],[o/2,o/1.46,o/1.22,o,o/1.19,o/1.42,o/2]),f.paper.path({path:h,stroke:f.foregroundColor,fill:f.foregroundColor,class:f.controller.classes.generate(u),"data-name":u})}function l(f,p,v,d){return e("M %f %f C %f %f %f %f %f %f C %f %f %f %f %f %f z",f+v[0],p+d[0],f+v[1],p+d[1],f+v[2],p+d[2],f+v[3],p+d[3],f+v[4],p+d[4],f+v[5],p+d[5],f+v[6],p+d[6])}var c=function(f,p,v,d,u,o,h){var i;if(o){f.paper.openGroup({klass:f.controller.classes.generate("staff-extra voice-name"),"data-name":u});var g=v+(d-v)/2;g=g-f.controller.getTextSize.baselineToCenter(o,"voicefont","staff-extra voice-name",0,1),a(f,{x:f.padding.left,y:g,text:o,type:"voicefont",klass:"staff-extra voice-name",anchor:"start",centerVertically:!0})}return u==="brace"?i=s(f,p,v,d,u):u==="bracket"&&(i=r(f,p,v,d,u)),o&&(i=f.paper.closeGroup()),h.wrapSvgEl({el_type:u,startChar:-1,endChar:-1},i),i};return Vn=n,Vn}var jn,tc;function x0(){if(tc)return jn;tc=1;function e(t,a,n){var r=t.paper.path(a);return r}return jn=e,jn}var Kn,rc;function $d(){if(rc)return Kn;rc=1;var e=Rt(),t=x0(),a=ft();function n(i,g,m){(!g.anchor1||!g.anchor2||!g.anchor1.heads||!g.anchor2.heads||g.anchor1.heads.length===0||g.anchor2.heads.length===0)&&window.console.error("Glissando Element not set.");var b=4,x=i.calcY(g.anchor1.heads[0].pitch),C=i.calcY(g.anchor2.heads[0].pitch),S=g.anchor1.x+g.anchor1.w/2,I=g.anchor2.x+g.anchor2.w/2,F=r(S,x,I,C),y=g.anchor1.w/2+b,A=g.anchor2.w/2+b,P=s(S,x,I,C),M=l(x,P,y);l(C,P,-A);var N=c(F-y-A),B=h(i,S+y,M,N,P);return m.wrapSvgEl({el_type:"glissando",startChar:-1,endChar:-1},B),[B]}function r(i,g,m,b){var x=m-i,C=b-g;return Math.sqrt(x*x+C*C)}function s(i,g,m,b){return(b-g)/(m-i)}function l(i,g,m){return a(i+m*g)}function c(i){var g=5;return Math.max(2,Math.floor((i-g*2)/6))}var f=[[3.5,-4.8]],p=[[1.5,-1],[.3,-.3],[-3.5,3.8]],v=[[-1.5,2]],d=[[3,4],[3,-4]],u=[[-3,4],[-3,-4]];function o(i,g){for(var m="",b=0;b<i.length;b++)m+="l"+i[b][0]+" "+l(i[b][1],g,i[b][0]);return m}var h=function(i,g,m,b,x){var C=e("M %f %f",g,m);C+=o(f,x);var S;for(S=0;S<b;S++)C+=o(d,x);for(C+=o(p,x),S=0;S<b;S++)C+=o(u,x);return C+=o(v,x)+"z",t(i,{path:C,highlight:"stroke",stroke:i.foregroundColor,class:i.controller.classes.generate("decoration"),"data-name":"glissando"})};return Kn=n,Kn}var Xn,nc;function Wd(){if(nc)return Xn;nc=1;var e=Rt(),t=x0(),a=ft();function n(s,l,c){l.pitch===void 0&&window.console.error("Crescendo Element y-coordinate not set.");var f=s.calcY(l.pitch)+4,p=8,v=l.anchor1?l.anchor1.x:0,d=l.anchor2?l.anchor2.x:800,u;return l.dir==="<"?u=r(s,f+p/2,f,f+p/2,f+p,v,d):u=r(s,f,f+p/2,f+p,f+p/2,v,d),c.wrapSvgEl({el_type:"dynamicDecoration",startChar:-1,endChar:-1},u),[u]}var r=function(s,l,c,f,p,v,d){l=a(l),c=a(c),f=a(f),p=a(p),v=a(v),d=a(d);var u=e("M %f %f L %f %f M %f %f L %f %f",v,l,d,c,v,f,d,p);return t(s,{path:u,highlight:"stroke",stroke:s.foregroundColor,class:s.controller.classes.generate("dynamics decoration"),"data-name":"dynamics"})};return Xn=n,Xn}var Jn,ic;function qa(){if(ic)return Jn;ic=1;var e=ft();function t(){this.ingroup=!1}t.prototype.beginGroup=function(n,r){this.paper=n,this.controller=r,this.path=[],this.lastM=[0,0],this.ingroup=!0,this.paper.openGroup()},t.prototype.isInGroup=function(){return this.ingroup},t.prototype.addPath=function(n){if(n=n||[],n.length!==0){n[0][0]="m",n[0][1]=e(n[0][1]-this.lastM[0]),n[0][2]=e(n[0][2]-this.lastM[1]),this.lastM[0]+=n[0][1],this.lastM[1]+=n[0][2],this.path.push(n[0]);for(var r=1,s=n.length;r<s;r++)n[r][0]==="m"&&(this.lastM[0]+=n[r][1],this.lastM[1]+=n[r][2]),this.path.push(n[r])}},t.prototype.endGroup=function(n,r){this.ingroup=!1;for(var s="",l=0;l<this.path.length;l++)s+=this.path[l].join(" ");this.path=[];var c=this.paper.closeGroup();return c&&(c.setAttribute("class",this.controller.classes.generate(n)),c.setAttribute("fill",this.controller.renderer.foregroundColor),c.setAttribute("stroke","none"),c.setAttribute("data-name",r)),c};var a=new t;return Jn=a,Jn}var Qn,ac;function Nf(){if(ac)return Qn;ac=1;var e=Pt(),t=Bt(),a=qa();function n(s,l,c,f,p){var v,d;if(!f)return null;if(f.length>1&&f.indexOf(".")<0){var u=a.isInGroup()?"":p.klass;s.paper.openGroup({"data-name":p.name,klass:u});for(var o=0,h=0;h<f.length;h++){var i=f[h];d=t.getYCorr(i),v=t.printSymbol(l+o,s.calcY(c+d),i,s.paper,{stroke:p.stroke,fill:p.fill}),v?h<f.length-1&&(o+=r(i,f[h+1],t.getSymbolWidth(i))):e(s,{x:l,y:s.y,text:"no symbol:"+f,type:"debugfont",klass:"debug-msg",anchor:"start"},!1)}var g=s.paper.closeGroup();return g}else return d=t.getYCorr(f),a.isInGroup()?v=t.printSymbol(l,s.calcY(c+d),f,s.paper,{"data-name":p.name}):v=t.printSymbol(l,s.calcY(c+d),f,s.paper,{klass:p.klass,stroke:p.stroke,fill:p.fill,"data-name":p.name}),v||(e(s,{x:l,y:s.y,text:"no symbol:"+f,type:"debugfont",klass:"debug-msg",anchor:"start"},!1),null)}function r(s,l,c){var f=c;return s==="f"&&l==="f"&&(f=f*2/3),s==="p"&&l==="p"&&(f=f*5/6),s==="f"&&l==="z"&&(f=f*5/8),f}return Qn=n,Qn}var Zn,sc;function Ud(){if(sc)return Zn;sc=1;var e=Nf();function t(a,n,r){n.pitch===void 0&&window.console.error("Dynamic Element y-coordinate not set.");var s=1,l=1,c=e(a,n.anchor.x,n.pitch,n.dec,{scalex:s,scaley:l,klass:a.controller.classes.generate("decoration dynamics"),fill:a.foregroundColor,stroke:"none",name:"dynamics"});return r.wrapSvgEl({el_type:"dynamicDecoration",startChar:-1,endChar:-1,decoration:n.dec},c),[c]}return Zn=t,Zn}var ei,oc;function Vd(){if(oc)return ei;oc=1;var e=Rt(),t=Pt(),a=x0(),n=ft();function r(c,f,p){c.paper.openGroup({klass:c.controller.classes.generate("triplet "+f.durationClass),"data-name":"triplet"}),f.hasBeam||l(c,f.anchor1.x,f.startNote,f.anchor2.x+f.anchor2.w,f.endNote),t(c,{x:f.xTextPos,y:c.calcY(f.yTextPos-1),text:""+f.number,type:"tripletfont",anchor:"middle",centerVertically:!0,noClass:!0,name:""+f.number},!0);var v=c.paper.closeGroup();return p.wrapSvgEl({el_type:"triplet",startChar:-1,endChar:-1},v),v}function s(c,f,p,v){return e("M %f %f L %f %f",n(c),n(f),n(p),n(v))}function l(c,f,p,v,d){p=c.calcY(p),d=c.calcY(d);var u=5,o="";o+=s(f,p,f,p+u),o+=s(v,d,v,d+u);var h=f+(v-f)/2,i=8,g=(d-p)/(v-f),m=h-i,b=p+(m-f)*g;o+=s(f,p,m,b);var x=h+i,C=p+(x-f)*g;o+=s(x,C,v,d),a(c,{path:o,stroke:c.foregroundColor,"data-name":"triplet-bracket"})}return ei=r,ei}var ti,cc;function jd(){if(cc)return ti;cc=1;var e=Rt(),t=Pt(),a=x0(),n=ft();function r(s,l,c,f,p){l.pitch===void 0&&window.console.error("Ending Element y-coordinate not set.");var v=n(s.calcY(l.pitch)),d=20,u="";l.anchor1&&(c=n(l.anchor1.x+l.anchor1.w),u+=e("M %f %f L %f %f ",c,v,c,n(v+d))),l.anchor2&&(f=n(l.anchor2.x),u+=e("M %f %f L %f %f ",f,v,f,n(v+d))),u+=e("M %f %f L %f %f ",c,v,f,v),s.paper.openGroup({klass:s.controller.classes.generate("ending"),fill:s.foregroundColor,"data-name":"ending"}),a(s,{path:u,stroke:s.foregroundColor,fill:s.foregroundColor,"data-name":"line"}),l.anchor1&&t(s,{x:n(c+5),y:n(s.calcY(l.pitch-.5)),text:l.text,type:"repeatfont",klass:"ending",anchor:"start",noClass:!0,name:l.text});var o=s.paper.closeGroup();return p.wrapSvgEl({el_type:"ending",startChar:-1,endChar:-1},o),[o]}return ti=r,ti}var ri,lc;function Kd(){if(lc)return ri;lc=1;var e=Rt(),t=ft();function a(s,l,c,f,p){n(l,c,f);var v="";l.anchor1?v+="abcjs-start-m"+l.anchor1.parent.counters.measure+"-n"+l.anchor1.parent.counters.note:v+="abcjs-start-edge",l.anchor2?v+=" abcjs-end-m"+l.anchor2.parent.counters.measure+"-n"+l.anchor2.parent.counters.note:v+=" abcjs-end-edge",l.hint&&(v="abcjs-hint");var d=l.fixedY?1.5:0,u=r(s,l.startX,l.endX,l.startY+d,l.endY+d,l.above,v,l.isTie,l.dotted),o=-1;l.anchor1&&!l.isTie&&(o=l.anchor1.parent.abcelem.startChar-1);var h=-1;return l.anchor2&&!l.isTie&&(h=l.anchor2.parent.abcelem.endChar+1),p.wrapSvgEl({el_type:"slur",startChar:o,endChar:h},u),[u]}var n=function(s,l,c){!s.anchor1||!s.anchor2||s.anchor1.pitch===s.anchor2.pitch&&s.internalNotes.length===0?s.isTie=!0:s.isTie=!1,s.isTie?(s.calcTieDirection(),s.calcX(l,c),s.calcTieY()):(s.calcSlurDirection(),s.calcX(l,c),s.calcSlurY()),s.avoidCollisionAbove()},r=function(s,l,c,f,p,v,d,u,o){var h=u?1.2:1.5;l=t(l+6),c=t(c+4),f=f+(v?h:-h),p=p+(v?h:-h);var i=t(s.calcY(f)),g=t(s.calcY(p)),m=c-l,b=g-i,x=Math.sqrt(m*m+b*b),C=m/x,S=b/x,I=x/3.5,F=u?10:25,y=(v?-1:1)*Math.min(F,Math.max(4,I)),A=t(l+I*C-y*S),P=t(i+I*S+y*C),M=t(c-I*C-y*S),N=t(g-I*S+y*C),B=2;d?d+=" slur":d="slur",d+=u?" tie":" legato";var E;if(o){d+=" dotted";var T=e("M %f %f C %f %f %f %f %f %f",l,i,A,P,M,N,c,g);E=s.paper.path({path:T,stroke:s.foregroundColor,fill:"none","stroke-dasharray":"5 5",class:s.controller.classes.generate(d),"data-name":u?"tie":"slur"})}else{var L=e("M %f %f C %f %f %f %f %f %f C %f %f %f %f %f %f z",l,i,A,P,M,N,c,g,t(M-B*S),t(N+B*C),t(A-B*S),t(P+B*C),l,i);E=s.paper.path({path:L,stroke:"none",fill:s.foregroundColor,class:s.controller.classes.generate(d),"data-name":u?"tie":"slur"})}return E};return ri=a,ri}var ni,fc;function Xd(){if(fc)return ni;fc=1;var e=x0(),t=ft();function a(l,c){if(c.beams.length!==0){for(var f="",p=0;p<c.beams.length;p++){var v=c.beams[p];if(v.split){for(var d=r(l,v.startX,v.startY,v.endX,v.endY),u=[],o=0;o<v.split.length;o+=2)u.push([v.split[o],v.split[o+1]]);for(o=0;o<u.length;o++){var h=s(v.startX,v.startY,d,u[o][0]),i=s(v.startX,v.startY,d,u[o][1]);f+=n(l,u[o][0],h,u[o][1],i,v.dy)}}else f+=n(l,v.startX,v.startY,v.endX,v.endY,v.dy)}var g=("abcjs-d"+c.duration).replace(/\./g,"-"),m=l.controller.classes.generate("beam-elem "+g),b=e(l,{path:f,stroke:"none",fill:l.foregroundColor,class:m});return[b]}}function n(l,c,f,p,v,d){f=t(l.calcY(f)),v=t(l.calcY(v)),c=t(c),p=t(p);var u=t(f+d),o=t(v+d);return"M"+c+" "+f+" L"+p+" "+v+"L"+p+" "+o+" L"+c+" "+u+"z"}function r(l,c,f,p,v){return(v-f)/(p-c)}function s(l,c,f,p){var v=p-l;return c+v*f}return ni=a,ni}var ii,uc;function Lf(){if(uc)return ii;uc=1;var e=qa(),t=ft();function a(n,r,s,l,c,f,p){if(s<0||l<c){var v=t(c);c=t(l),l=v}else l=t(l),c=t(c);r=t(r);var d=t(r+s);if(n.firefox112){r+=s/2;var o={x1:r,x2:r,y1:l,y2:c,stroke:n.foregroundColor,"stroke-width":Math.abs(s)};return f&&(o.class=f),p&&(o["data-name"]=p),n.paper.lineToBack(o)}for(var u=[["M",r,l],["L",r,c],["L",d,c],["L",d,l],["z"]],o={path:""},h=0;h<u.length;h++)o.path+=u[h].join(" ");return f&&(o.class=f),p&&(o["data-name"]=p),e.isInGroup()||(o.stroke="none",o.fill=n.foregroundColor),n.paper.pathToBack(o)}return ii=a,ii}var ai,hc;function Jd(){if(hc)return ai;hc=1;var e=Rt(),t=ft();function a(n,r,s,l,c,f,p){var v=n.foregroundColor;r=t(r),s=t(s);var d=t(l-p),u=t(l+p);if(n.firefox112){l+=p/2;var o={x1:r,x2:s,y1:l,y2:l,stroke:n.foregroundColor,"stroke-width":Math.abs(p*2)};return c&&(o.class=c),f&&(o["data-name"]=f),n.paper.lineToBack(o)}var h=e("M %f %f L %f %f L %f %f L %f %f z",r,d,s,d,s,u,r,u),i={path:h,stroke:"none",fill:v};f&&(i["data-name"]=f),c&&(i.class=c);var g=n.paper.pathToBack(i);return g}return ai=a,ai}var si,dc;function qf(){if(dc)return si;dc=1;var e=Jd();function t(a,n,r,s,l,c,f){var p=a.calcY(s);return e(a,n,r,p,l,c,f)}return si=t,si}var oi,pc;function Df(){if(pc)return oi;pc=1;var e=Pt(),t=Lf(),a=qf(),n=Nf();function r(l,c,f){c.pitch===void 0&&window.console.error(c.type+" Relative Element y-coordinate not set.");var p=l.calcY(c.pitch);switch(c.type){case"symbol":if(c.c===null)return null;var v="symbol";c.klass&&(v+=" "+c.klass),c.graphelem=n(l,c.x,c.pitch,c.c,{scalex:c.scalex,scaley:c.scaley,klass:l.controller.classes.generate(v),name:c.name});break;case"debug":c.graphelem=e(l,{x:c.x,y:l.calcY(15),text:""+c.c,type:"debugfont",klass:l.controller.classes.generate("debug-msg"),anchor:"start",centerVertically:!1,dim:c.dim},!1);break;case"tabNumber":var d="middle",u="tabnumberfont",o="abcjs-tab-number";c.isGrace&&(u="tabgracefont",p+=2.5,o="tab-grace"),c.graphelem=e(l,{x:c.x,y:p,text:""+c.c,type:u,klass:l.controller.classes.generate(o),anchor:d,centerVertically:!1,dim:c.dim,cursor:"default"},!1);break;case"barNumber":c.graphelem=e(l,{x:c.x,y:p,text:""+c.c,type:"measurefont",klass:l.controller.classes.generate("bar-number"),anchor:"middle",dim:c.dim,name:"bar-number"},!0);break;case"lyric":c.graphelem=e(l,{x:c.x,y:p,text:c.c,type:"vocalfont",klass:l.controller.classes.generate("lyric"),anchor:"middle",dim:c.dim,name:"lyric"},!1);break;case"chord":c.graphelem=e(l,{x:c.x,y:p,text:c.c,type:"gchordfont",klass:l.controller.classes.generate("chord"),anchor:"middle",dim:c.dim,lane:c.getLane(),name:"chord"},!1);break;case"decoration":c.graphelem=e(l,{x:c.x,y:p+6,text:c.c,type:"annotationfont",klass:l.controller.classes.generate("annotation"),anchor:c.anchor,centerVertically:!0,dim:c.dim},!1);break;case"text":c.graphelem=e(l,{x:c.x,y:p,text:c.c,type:"annotationfont",klass:l.controller.classes.generate("annotation"),anchor:"start",centerVertically:c.centerVertically,dim:c.dim,lane:c.getLane(),name:"annotation"},!1);break;case"multimeasure-text":c.graphelem=e(l,{x:c.x+c.w/2,y:p,text:c.c,type:"tempofont",klass:l.controller.classes.generate("rest"),anchor:"middle",centerVertically:!1,dim:c.dim},!1);break;case"part":c.graphelem=e(l,{x:c.x,y:p,text:c.c,type:"partsfont",klass:l.controller.classes.generate("part"),anchor:"start",dim:c.dim,name:c.c},!0);break;case"bar":c.graphelem=t(l,c.x,c.linewidth+l.lineThickness,p,f||l.calcY(c.pitch2),null,"bar");break;case"stem":var h=c.linewidth>0?c.linewidth+l.lineThickness:c.linewidth-l.lineThickness;c.graphelem=t(l,c.x,h,p,l.calcY(c.pitch2),"abcjs-stem","stem");break;case"ledger":c.graphelem=a(l,c.x,c.x+c.w,c.pitch,"abcjs-ledger","ledger",.35+l.lineThickness);break}return c.scalex!==1&&c.graphelem&&s(l.paper,c.graphelem,c.scalex,c.scaley,c.x,p),c.graphelem}function s(l,c,f,p,v,d){l.setAttributeOnElement(c,{style:"transform:scale("+f+","+p+");transform-origin:"+v+"px "+d+"px;"})}return oi=r,oi}var ci,vc;function Qd(){if(vc)return ci;vc=1;var e=Df(),t=Pt();function a(n,r){var s=r.x;r.pitch===void 0&&window.console.error("Tempo Element y-coordinate not set."),r.tempo.el_type="tempo";var l=n.calcY(r.pitch)+2,c,f;if(r.tempo.preString){c=t(n,{x:s,y:l,text:r.tempo.preString,type:"tempofont",klass:"abcjs-tempo",anchor:"start",noClass:!0,name:"pre"},!0),f=n.controller.getTextSize.calc(r.tempo.preString,"tempofont","tempo",c);var p=f.width,v=p/r.tempo.preString.length;s+=p+v}if(r.note){r.note.setX(s);for(var d=0;d<r.note.children.length;d++)e(n,r.note.children[d],s);s+=r.note.w+5;var u="= "+r.tempo.bpm;c=t(n,{x:s,y:l,text:u,type:"tempofont",klass:"abcjs-tempo",anchor:"start",noClass:!0,name:"beats"}),f=n.controller.getTextSize.calc(u,"tempofont","tempo",c);var o=f.width,h=o/u.length;s+=o+h}r.tempo.postString&&t(n,{x:s,y:l,text:r.tempo.postString,type:"tempofont",klass:"abcjs-tempo",anchor:"start",noClass:!0,name:"post"},!0)}return ci=a,ci}var li,gc;function Zd(){if(gc)return li;gc=1;var e=Qd(),t=Df(),a=We(),n=Pa(),r=qa();function s(l,c,f,p,v){if(!c.invisible){var d=c.children.length>0&&c.children[0].type==="TempoElement";c.elemset=[],r.beginGroup(l.paper,l.controller);for(var u=0;u<c.children.length;u++){var o=c.children[u];switch(o.type){case"TempoElement":e(l,o);break;default:var h=t(l,o,f);o.type==="symbol"&&o.c&&o.c.indexOf("notehead")>=0&&h.setAttribute("class","abcjs-notehead")}}var i=c.type;if((c.type==="note"||c.type==="rest")&&(c.counters=l.controller.classes.getCurrent(),i+=" d"+Math.round(c.durationClass*1e3)/1e3,i=i.replace(/\./g,"-"),c.abcelem.pitches))for(var g=0;g<c.abcelem.pitches.length;g++)i+=" p"+c.abcelem.pitches[g].pitch;var m=r.endGroup(i,c.type);if(m){if(c.cloned&&(c.cloned.overrideClasses=m.className.baseVal),c.overrideClasses){var b=m.classList&&m.classList.length>0?m.classList[0]+" ":"";m.setAttribute("class",b+c.overrideClasses)}if(d)c.startChar=c.abcelem.startChar,c.endChar=c.abcelem.endChar,p.add(c,m,!1,v);else{c.elemset.push(m);var x=!1;(c.type==="note"||c.type==="tabNumber")&&(x=!0),p.add(c,m,x,v)}}else c.elemset.length>0&&p.add(c,c.elemset[0],c.type==="note",v);if(c.klass&&n(c.elemset,"mark","","#00ff00"),c.hint&&n(c.elemset,"abcjs-hint","",null),c.abcelem.abselem=c,c.heads&&c.heads.length>0){c.notePositions=[];for(var C=0;C<c.heads.length;C++)c.notePositions.push({x:c.heads[C].x+c.heads[C].w/2,y:v.zero-c.heads[C].pitch*a.STEP})}}}return li=s,li}var fi,bc;function e2(){if(bc)return fi;bc=1;var e=$d(),t=Wd(),a=Ud(),n=Vd(),r=jd(),s=Kd(),l=Xd(),c=Pt(),f=Zd();function p(d,u,o,h,i){var g=u.w-1;d.staffbottom=u.staff.bottom;var m=d.foregroundColor;if(u.color&&(d.foregroundColor=u.color),u.header){var b=c(d,{x:d.padding.left,y:d.calcY(u.headerPosition),text:u.header,type:"voicefont",klass:"staff-extra voice-name",anchor:"start",centerVertically:!0,name:"voice-name"},!0);h.wrapSvgEl({el_type:"voiceName",startChar:-1,endChar:-1,text:u.header},b)}var x,C,S=!1;for(x=0;x<u.children.length;x++){C=u.children[x],(C.type==="note"||C.type==="rest")&&(S=!0);var I=!1;C.type!=="staff-extra"&&!d.controller.classes.isInMeasure()&&(d.controller.classes.startMeasure(),I=!0),u.staff.isTabStaff&&(C.invisible=!1,C.type=="bar"&&C.abcelem.lastBar&&(o=u.topLine)),f(d,C,u.barto||x===u.children.length-1?o:0,h,i),(C.type==="note"||v(C))&&d.controller.classes.incrNote(),C.type==="bar"&&!I&&S&&d.controller.classes.incrMeasure()}for(d.controller.classes.startMeasure(),x=0;x<u.beams.length;x++){var F=u.beams[x];F==="bar"?d.controller.classes.incrMeasure():l(d,F,h)}for(d.controller.classes.startMeasure(),x=0;x<u.otherchildren.length;x++)if(C=u.otherchildren[x],C==="bar")d.controller.classes.incrMeasure();else switch(C.type){case"GlissandoElem":C.elemset=e(d,C,h);break;case"CrescendoElem":C.elemset=t(d,C,h);break;case"DynamicDecoration":C.elemset=a(d,C,h);break;case"TripletElem":n(d,C,h);break;case"EndingElem":C.elemset=r(d,C,u.startx+10,g,h);break;case"TieElem":C.elemset=s(d,C,u.startx+10,g,h);break;default:console.log(C),f(d,C,u.startx+10,g,h,i)}d.foregroundColor=m}function v(d){return d.type!=="rest"?!1:!!(d.abcelem&&d.abcelem.rest&&d.abcelem.rest.type!=="spacer")}return fi=p,fi}var ui,mc;function t2(){if(mc)return ui;mc=1;var e=qf();function t(a,n,r,s,l,c){var f="abcjs-top-line",p=2;l&&(p=l),a.paper.openGroup({prepend:!0,klass:a.controller.classes.generate("abcjs-staff")});var v=0,d=0;if(s===1)e(a,n,r,6,f,null,c+a.lineThickness),v=a.calcY(10),d=a.calcY(2);else for(var u=s-1;u>=0;u--){var o=(u+1)*p;d=a.calcY(o),v===0&&(v=d),e(a,n,r,o,f,null,c+a.lineThickness),f=void 0}return a.paper.closeGroup(),[v,d]}return ui=t,ui}var hi,yc;function r2(){if(yc)return hi;yc=1;function e(t,a,n){var r=t.paper.rectBeneath(a);return n&&t.paper.text(n,{x:0,y:a.y+7,"text-anchor":"start","font-size":"14px",fill:"rgba(0,0,255,.4)",stroke:"rgba(0,0,255,.4)"}),r}return hi=e,hi}var di,wc;function n2(){if(wc)return di;wc=1;function e(t,a){var n="rgba(0,0,0,255)",r="rgba(0,0,0,0)",s=Math.round(t.y),l=t.controller.width,c=(l-a)/2,f=c+a,p="M "+c+" "+s+" L "+f+" "+s+" L "+f+" "+(s+1)+" L "+c+" "+(s+1)+" L "+c+" "+s+" z";t.paper.pathToBack({path:p,stroke:r,fill:n,class:t.controller.classes.generate("defined-text")})}return di=e,di}var pi,xc;function Of(){if(xc)return pi;xc=1;var e=n2(),t=Pt();function a(n,r,s){for(var l=0;l<r.rows.length;l++){var c=r.rows[l];if(c.absmove)n.absolutemoveY(c.absmove);else if(c.move)n.moveY(c.move);else if(c.text||c.phrases){var f=c.left?c.left:0,p=t(n,{x:f,y:n.y,text:c.text,phrases:c.phrases,"dominant-baseline":c["dominant-baseline"],type:c.font,klass:c.klass,name:c.name,anchor:c.anchor});c.absElemType&&s.wrapSvgEl({el_type:c.absElemType,name:c.name,startChar:c.startChar,endChar:c.endChar,text:c.text},p)}else if(c.separator)e(n,c.separator);else if(c.startGroup)n.paper.openGroup({klass:c.klass,"data-name":c.name});else if(c.endGroup){var v=n.paper.closeGroup();c.absElemType&&s.wrapSvgEl({el_type:c.absElemType,name:c.name,startChar:c.startChar,endChar:c.endChar,text:""},v)}}}return pi=a,pi}var vi,_c;function i2(){if(_c)return vi;_c=1;var e=We(),t=Yd(),a=e2(),n=t2(),r=r2(),s=Lf(),l=Of();function c(v,d,u,o){for(var h,i=v.y,g=0;g<d.staffs.length;g++){var m=d.staffs[g];v.moveY(e.STEP,m.top),m.absoluteY=v.y,v.showDebug&&(v.showDebug.indexOf("box")>=0&&m.voices&&p(v,d.voices,m.voices),v.showDebug.indexOf("grid")>=0&&(v.paper.dottedLine({x1:v.padding.left,x2:v.padding.left+v.controller.width,y1:i,y2:i,stroke:"#0000ff"}),r(v,{x:v.padding.left,y:v.calcY(m.originalTop),width:v.controller.width,height:v.calcY(m.originalBottom)-v.calcY(m.originalTop),fill:v.foregroundColor,stroke:v.foregroundColor,"fill-opacity":.1,"stroke-opacity":.1}),h=0,E(m,"chordHeightAbove"),E(m,"chordHeightBelow"),E(m,"dynamicHeightAbove"),E(m,"dynamicHeightBelow"),E(m,"endingHeightAbove"),E(m,"lyricHeightAbove"),E(m,"lyricHeightBelow"),E(m,"partHeightAbove"),E(m,"tempoHeightAbove"),E(m,"volumeHeightAbove"),E(m,"volumeHeightBelow"))),v.moveY(e.STEP,-m.bottom),v.showDebug&&v.showDebug.indexOf("grid")>=0&&v.paper.dottedLine({x1:v.padding.left,x2:v.padding.left+v.controller.width,y1:v.y,y2:v.y,stroke:"#0000aa"})}for(var b,x,C=2,S=0,I=0;I<d.voices.length;I++){var F=d.voices[I].staff,y=d.voices[I].tabNameInfos;if(v.y=F.absoluteY,v.controller.classes.incrVoice(),!d.voices[I].duplicate){if(b||(b=v.calcY(10)),x=v.calcY(C),F.lines!==0){F.linePitch&&(C=F.linePitch),v.controller.classes.newMeasure();var A=n(v,d.startx,d.w,F.lines,F.linePitch,.35);x=A[1],F.bottomLine=x,F.topLine=A[0],F.hasTab&&(S=F.topLine),F.hasStaff&&(S=F.hasStaff.topLine,d.voices[I].barto=!0,d.voices[I].topLine=b)}f(v,F.absoluteY,d.brace,I,u),f(v,F.absoluteY,d.bracket,I,u)}a(v,d.voices[I],S,u,{top:i,zero:v.y,height:d.height*e.STEP});var P=0;if(y){var M={rows:[]};M.rows.push({absmove:x+2});var N=8;M.rows.push({left:d.startx+N,text:y.name,font:"tablabelfont",klass:"text instrument-name",anchor:"start"}),M.rows.push({move:y.textSize.height}),l(v,M),P=y.textSize.height}v.controller.classes.newMeasure(),d.voices[I].duplicate||(S=v.calcY(2+P))}v.controller.classes.newMeasure();var B=d.staffs.length;B>1&&(b=d.staffs[0].topLine,x=d.staffs[B-1].bottomLine,s(v,d.startx,.6,b,x,null)),v.y=i;function E(T,L){var R=["rgb(207,27,36)","rgb(168,214,80)","rgb(110,161,224)","rgb(191,119,218)","rgb(195,30,151)","rgb(31,170,177)","rgb(220,166,142)"];if(T.positionY&&T.positionY[L]){var O=T.specialY[L]*e.STEP;L==="chordHeightAbove"&&T.specialY.chordLines&&T.specialY.chordLines.above&&(O*=T.specialY.chordLines.above),L==="chordHeightBelow"&&T.specialY.chordLines&&T.specialY.chordLines.below&&(O*=T.specialY.chordLines.below),r(v,{x:v.padding.left,y:v.calcY(T.positionY[L]),width:v.controller.width,height:O,fill:R[h],stroke:R[h],"fill-opacity":.4,"stroke-opacity":.4},L.substr(0,4)),h+=1,h>6&&(h=0)}}}function f(v,d,u,o,h){if(u)for(var i=0;i<u.length;i++)u[i].isStartVoice(o)&&(u[i].startY=d-e.STEP*10,u[i].elemset=t(v,u[i],h))}function p(v,d,u){for(var o=0;o<u.length;o++)for(var h=d[u[o]].children,i=0;i<h.length;i++){var g=h[i],m=g.getFixedCoords();if(!(g.invisible||m.t===void 0||m.b===void 0)){var b=(m.t-m.b)*e.STEP;r(v,{x:m.x,y:v.calcY(m.t),width:m.w,height:b,fill:"#88e888","fill-opacity":.4,stroke:"#4aa93d","stroke-opacity":.8});for(var x=0;x<g.children.length;x++){var C=g.children[x],S=C.getChordDim();if(S){var I=v.calcY(C.pitch);I+=C.dim.font.size*C.getLane(),r(v,{x:S.left,y:I,width:S.right-S.left,height:C.dim.font.size,fill:"none",stroke:"#4aa93d","stroke-opacity":.8})}}}}}return vi=c,vi}var gi,Cc;function a2(){if(Cc)return gi;Cc=1;function e(t,a,n,r){var s=(a+t.padding.left+t.padding.right)*n,l=(t.y+t.padding.bottom)*n;if(t.isPrint&&(l=Math.max(l,1056)),t.ariaLabel!==""){var c="Sheet Music";t.abctune&&t.abctune.metaText&&t.abctune.metaText.title&&(c+=' for "'+t.abctune.metaText.title+'"'),t.paper.setTitle(c);var f=t.ariaLabel?t.ariaLabel:c;t.paper.setAttribute("aria-label",f)}var p=["-webkit-touch-callout: none;","-webkit-user-select: none;","-khtml-user-select: none;","-moz-user-select: none;","-ms-user-select: none;","user-select: none;"];t.paper.insertStyles(".abcjs-dragging-in-progress text, .abcjs-dragging-in-progress tspan {"+p.join(" ")+"}");var v={overflow:"hidden"};r==="resize"?t.paper.setResponsiveWidth(s,l):(v.width="",v.height=l+"px",n<1?(v.width=s+"px",t.paper.setSize(s/n,l/n)):t.paper.setSize(s,l)),t.paper.setScale(n),t.paper.setParentStyles(v)}return gi=e,gi}var bi,kc;function s2(){if(kc)return bi;kc=1;var e=Cf(),t=kf();function a(n,r,s){this.elements=[],this.paper=n,this.tuneNumber=s,this.selectTypes=r}return a.prototype.getElements=function(){return this.elements},a.prototype.add=function(n,r,s,l){if(this.canSelect(n)){var c;this.selectTypes===void 0?c={selectable:!1,"data-index":this.elements.length}:c={selectable:!0,tabindex:0,"data-index":this.elements.length},this.paper.setAttributeOnElement(r,c);var f={absEl:n,svgEl:r,isDraggable:s};l!==void 0&&(f.staffPos=l),this.elements.push(f)}},a.prototype.canSelect=function(n){return this.selectTypes===!1||!n||!n.abcelem?!1:this.selectTypes===!0?!0:this.selectTypes===void 0?n.abcelem.el_type==="note"||n.abcelem.el_type==="tabNumber":this.selectTypes.indexOf(n.abcelem.el_type)>=0},a.prototype.wrapSvgEl=function(n,r){var s={tuneNumber:this.tuneNumber,abcelem:n,elemset:[r],highlight:e,unhighlight:t};this.add(s,r,!1)},bi=a,bi}var mi,Tc;function o2(){if(Tc)return mi;Tc=1;var e=i2(),t=a2(),a=Of(),n=We(),r=s2();function s(f,p,v,d,u,o,h,i,g,m){var b=new r(f.paper,i,g),x={};p.shouldAddClasses&&(x.klass="abcjs-meta-top"),f.paper.openGroup(x),f.moveY(f.padding.top),a(f,v.topText,b),f.paper.closeGroup(),f.moveY(f.spacing.music);for(var C=[],S=0,I=0;I<v.lines.length;I++){p.incrLine();var F=v.lines[I];if(F.staff){if(S++,v.formatting.maxStaves&&S>v.formatting.maxStaves)break;p.shouldAddClasses&&(x.klass="abcjs-staff-wrapper abcjs-l"+p.lineNumber),f.paper.openGroup(x),F.vskip&&f.moveY(F.vskip),C.length>=1&&c(f,f.spacing.staffSeparation,C[C.length-1],F.staffGroup);var y=l(f,F.staffGroup,b,I);y.line=m+I,C.push(y),f.paper.closeGroup()}else F.nonMusic&&(p.shouldAddClasses&&(x.klass="abcjs-non-music"),f.paper.openGroup(x),a(f,F.nonMusic,b),f.paper.closeGroup())}return p.reset(),v.bottomText&&v.bottomText.rows&&v.bottomText.rows.length>0&&(p.shouldAddClasses&&(x.klass="abcjs-meta-bottom"),f.paper.openGroup(x),f.moveY(24),a(f,v.bottomText,b),f.paper.closeGroup()),t(f,u,h,o),{staffgroups:C,selectables:b.getElements()}}function l(f,p,v,d){e(f,p,v,d);var u=p.height*n.STEP;return f.y+=u,p}function c(f,p,v,d){var u=v.staffs[v.staffs.length-1],o=-(u.bottom-2),h=d.staffs[0].top-10,i=h+o,g=i*n.STEP;g<p&&f.moveY(p-g)}return mi=s,mi}var yi,Sc;function c2(){if(Sc)return yi;Sc=1;var e=Bf();function t(a){for(var n=a;n&&n.attributes&&n.tagName.toLowerCase()!=="svg"&&!n.attributes.selectable;)n=n.parentNode;if(n&&n.attributes&&n.attributes.selectable){var r=n.attributes["data-index"].nodeValue;if(r&&(r=parseInt(r,10),r>=0&&r<this.selectables.length)){var s=this.selectables[r],l=e(s,a);return l.index=r,l.element=s,l}}return null}return yi=t,yi}var wi,Ec;function If(){if(Ec)return wi;Ec=1;var e=We(),t=Cd(),a=Td(),n=Sd(),r=Ed(),s=Ad(),l=Md(),c=Bd(),f=Pd(),p=Rd(),v=Hd(),d=zd(),u=Gd(),o=o2(),h=Ef(),i=c2(),g=function(x,C){C=C||{},this.findSelectableElement=i,this.oneSvgPerLine=C.oneSvgPerLine,this.selectionColor=C.selectionColor,this.dragColor=C.dragColor?C.dragColor:C.selectionColor,this.dragging=!!C.dragging,this.selectTypes=C.selectTypes,this.responsive=C.responsive,this.space=3*e.SPACE,this.initialClef=C.initialClef,this.timeBasedLayout=C.timeBasedLayout,this.expandToWidest=!!C.expandToWidest,this.scale=C.scale?parseFloat(C.scale):0,this.classes=new v({shouldAddClasses:C.add_classes}),this.scale>.1||(this.scale=void 0),C.staffwidth?(this.staffwidthScreen=C.staffwidth,this.staffwidthPrint=C.staffwidth):(this.staffwidthScreen=740,this.staffwidthPrint=680),this.listeners=[],C.clickListener&&this.addSelectListener(C.clickListener),this.renderer=new a(x),this.renderer.setPaddingOverride(C),C.showDebug&&(this.renderer.showDebug=C.showDebug),C.jazzchords&&(this.jazzchords=C.jazzchords),C.accentAbove&&(this.accentAbove=C.accentAbove),C.germanAlphabet&&(this.germanAlphabet=C.germanAlphabet),C.lineThickness&&(this.lineThickness=C.lineThickness),this.renderer.controller=this,this.renderer.foregroundColor=C.foregroundColor?C.foregroundColor:"currentColor",C.ariaLabel!==void 0&&(this.renderer.ariaLabel=C.ariaLabel),this.renderer.minPadding=C.minPadding?C.minPadding:0,this.reset()};g.prototype.reset=function(){this.selected=[],this.staffgroups=[],this.engraver&&this.engraver.reset(),this.engraver=null,this.renderer.reset(),this.dragTarget=null,this.dragIndex=-1,this.dragMouseStart={x:-1,y:-1},this.dragYStep=0,this.lineThickness&&this.renderer.setLineThickness(this.lineThickness)},g.prototype.engraveABC=function(x,C,S){x[0]===void 0&&(x=[x]),this.reset();for(var I=0;I<x.length;I++)C===void 0&&(C=I),this.getFontAndAttr=new d(x[I].formatting,this.classes),this.getTextSize=new u(this.getFontAndAttr,this.renderer.paper),this.engraveTune(x[I],C,S)},g.prototype.adjustNonScaledItems=function(x){this.width/=x,this.renderer.adjustNonScaledItems(x)},g.prototype.getMeasureWidths=function(x){this.reset(),this.getFontAndAttr=new d(x.formatting,this.classes),this.getTextSize=new u(this.getFontAndAttr,this.renderer.paper);var C=this.jazzchords;this.setupTune(x,0),this.constructTuneElements(x),p(this.renderer,x,0,this.space,this.timeBasedLayout);for(var S=[],I,F=!0,y=0;y<x.lines.length;y++){var A=x.lines[y];if(A.staff){if(F&&(I={left:0,measureWidths:[],total:0},S.push(I),F=!1),A.staffGroup.voices.length>0)for(var P=A.staffGroup.voices[0],M=!1,N=0,B=0;B<P.children.length;B++){var E=P.children[B];!M&&!E.isClef&&!E.isKeySig&&(M=!0,I.left=E.x,N=E.x),E.type==="bar"&&(I.measureWidths.push(E.x-N),I.total+=E.x-N,N=E.x)}}else F=!0}return this.jazzchords=C,S},g.prototype.setupTune=function(x,C){this.classes.reset(),x.formatting.jazzchords!==void 0&&(this.jazzchords=x.formatting.jazzchords),x.formatting.accentAbove!==void 0&&(this.accentAbove=x.formatting.accentAbove),this.renderer.newTune(x),this.engraver=new t(this.getTextSize,C,{bagpipes:x.formatting.bagpipes,flatbeams:x.formatting.flatbeams,graceSlurs:x.formatting.graceSlurs!==!1,percmap:x.formatting.percmap,initialClef:this.initialClef,jazzchords:this.jazzchords,timeBasedLayout:this.timeBasedLayout,accentAbove:this.accentAbove,germanAlphabet:this.germanAlphabet}),this.engraver.setStemHeight(this.renderer.spacing.stemHeight),this.engraver.measureLength=x.getMeterFraction().num/x.getMeterFraction().den,x.formatting.staffwidth?this.width=x.formatting.staffwidth*1.33:this.width=this.renderer.isPrint?this.staffwidthPrint:this.staffwidthScreen;var S=x.formatting.scale?x.formatting.scale:this.scale;return this.responsive==="resize"&&(S=void 0),S===void 0&&(S=this.renderer.isPrint?.75:1),this.adjustNonScaledItems(S),S},g.prototype.constructTuneElements=function(x){x.topText=new l(x.metaText,x.metaTextInfo,x.formatting,x.lines,this.width,this.renderer.isPrint,this.renderer.padding.left,this.renderer.spacing,this.classes.shouldAddClasses,this.getTextSize);var C,S,I=!1,F=!1;for(C=0;C<x.lines.length;C++)if(S=x.lines[C],S.staff)F=!0,S.staffGroup=this.engraver.createABCLine(S.staff,I?null:x.metaText.tempo,C),I=!0;else if(S.subtitle){if(F){var y=this.width/2+this.renderer.padding.left;S.nonMusic=new s(this.renderer.spacing.subtitle,x.formatting,S.subtitle,y,this.renderer.padding.left,this.getTextSize)}}else S.text!==void 0?(F=!0,S.nonMusic=new n(S.text,S.vskip,this.getFontAndAttr,this.renderer.padding.left,this.width,this.getTextSize)):S.separator!==void 0&&S.separator.lineLength&&(F=!0,S.nonMusic=new r(S.separator.spaceAbove,S.separator.lineLength,S.separator.spaceBelow));x.bottomText=new c(x.metaText,this.width,this.renderer.isPrint,this.renderer.padding.left,this.renderer.spacing,this.classes.shouldAddClasses,this.getTextSize)},g.prototype.engraveTune=function(x,C,S){var I=this.jazzchords,F=this.setupTune(x,C);this.constructTuneElements(x);var y=p(this.renderer,x,this.width,this.space,this.expandToWidest,this.timeBasedLayout);if(this.expandToWidest&&y>this.width+1&&(x.topText=new l(x.metaText,x.metaTextInfo,x.formatting,x.lines,y,this.renderer.isPrint,this.renderer.padding.left,this.renderer.spacing,this.classes.shouldAddClasses,this.getTextSize),x.lines&&x.lines.length>0))for(var A=x.lines.length,P=0;P<A;++P){var M=x.lines[P];if(M.nonMusic&&M.nonMusic.rows&&M.nonMusic.rows.length>0)for(var N=M.nonMusic.rows.length,B=0;B<N;++B){var E=M.nonMusic.rows[B];E.left&&(M.subtitle?E.left=y/2+this.renderer.padding.left:M.text&&M.text.length>0&&M.text[0].center&&(E.left=y/2+this.renderer.padding.left))}}x.tablatures&&h.layoutTablatures(this.renderer,x);var T=o(this.renderer,this.classes,x,this.width,y,this.responsive,F,this.selectTypes,C,S);if(this.staffgroups=T.staffgroups,this.selectables=T.selectables,this.oneSvgPerLine){var L=this.renderer.paper.svg.parentNode;this.svgs=m(this.renderer,L,x.metaText.title,this.responsive,F)}else this.svgs=[this.renderer.paper.svg];f(this,this.svgs),this.jazzchords=I};function m(x,C,S,I,F){S||(S="Untitled");var y=C.querySelector("svg");I==="resize"&&(C.style.paddingBottom="");for(var A=y.querySelector("style"),P=I==="resize"?y.viewBox.baseVal.width:y.getAttribute("width"),M=C.querySelectorAll("svg > g"),N=0,B=[],E=0;E<M.length;E++){var T=M[E],L=T.getBBox(),R=L.y-N,O=L.height+R,w=document.createElement("div"),_="overflow: hidden;";I!=="resize"&&(_+="height:"+O*F+"px;"),w.setAttribute("style",_);var k=b(y),q='Sheet Music for "'+S+'" section '+(E+1);k.setAttribute("aria-label",q),I!=="resize"&&k.setAttribute("height",O),I==="resize"&&(k.style.position="");var z=x.firefox112?O+1:O;k.setAttribute("viewBox","0 "+N+" "+P+" "+z),k.appendChild(A.cloneNode(!0));var U=document.createElement("title");U.innerText=q,k.appendChild(U),k.appendChild(T),w.appendChild(k),B.push(k),C.appendChild(w),N=L.y+L.height}return C.removeChild(y),B}function b(x){for(var C="http://www.w3.org/2000/svg",S=document.createElementNS(C,"svg"),I=0;I<x.attributes.length;I++){var F=x.attributes[I];F.name!=="height"&&F.name!="aria-label"&&S.setAttribute(F.name,F.value)}return S}return g.prototype.getDim=function(x){if(!x.dim){var C=x.svgEl.getBBox();x.dim={left:Math.round(C.x),top:Math.round(C.y),right:Math.round(C.x+C.width),bottom:Math.round(C.y+C.height)}}return x.dim},g.prototype.addSelectListener=function(x){this.listeners[this.listeners.length]=x},wi=g,wi}var xi,Ac;function Ff(){if(Ac)return xi;Ac=1;var e=J0();wf();var t=If(),a=xf(),n=bf(),r={};function s(){var p=window.innerWidth;for(var v in r)if(r.hasOwnProperty(v)){var d=r[v],u=d.offsetLeft;p-=u*2,d.style.width=p+"px"}}try{window.addEventListener("resize",s),window.addEventListener("orientationChange",s)}catch{}function l(p,v,d,u,o){d.viewportHorizontal?(p.innerHTML='<div class="abcjs-inner"></div>',d.scrollHorizontal?(p.style.overflowX="auto",p.style.overflowY="hidden"):p.style.overflow="hidden",r[p.id]=p,p=p.children[0]):d.viewportVertical?(p.innerHTML='<div class="abcjs-inner scroll-amount"></div>',p.style.overflowX="hidden",p.style.overflowY="auto",p=p.children[0]):p.innerHTML="";var h=new t(p,d);if(h.engraveABC(v,u,o),v.engraver=h,d.viewportVertical||d.viewportHorizontal){var i=p.parentNode;i.style.width=p.style.width}}var c=function(p,v,d,u,o){var h={},i;if(d){for(i in d)d.hasOwnProperty(i)&&(h[i]=d[i]);h.warnings_id&&h.tablature&&(h.tablature.warning_id=h.warnings_id)}if(u)for(i in u)u.hasOwnProperty(i)&&(i==="listener"?u[i].highlight&&(h.clickListener=u[i].highlight):h[i]=u[i]);if(o)for(i in o)o.hasOwnProperty(i)&&(h[i]=o[i]);function g(m,b,x,C){var S=!1;return m==="*"&&(S=!0,m=document.createElement("div"),m.setAttribute("style","visibility: hidden;"),document.body.appendChild(m)),!S&&h.wrap&&h.staffwidth?(b=f(m,b,x,C,h),b):(h.afterParsing&&h.afterParsing(b,x,C),l(m,b,h,x,0),S&&m.parentNode.removeChild(m),null)}return e.renderEngine(g,p,v,h)};function f(p,v,d,u,o){var h=new t(p,o),i=h.getMeasureWidths(v),g=n.calcLineWraps(v,i,o);if(g.reParse){var m=new a;m.parse(u,g.revisedParams),v=m.getTune();var b=m.getWarnings();b&&(v.warnings=b)}return o.afterParsing&&o.afterParsing(v,d,u),l(p,v,g.revisedParams,d,0),v.explanation=g.explanation,v}return xi=c,xi}var _i,Mc;function l2(){if(Mc)return _i;Mc=1;var e=J0(),t=If(),a=function(n,r){function s(l,c,f,p){l=document.createElement("div"),l.setAttribute("style","visibility: hidden;"),document.body.appendChild(l);var v=new t(l,r),d=v.getMeasureWidths(c);return l.parentNode.removeChild(l),{sections:d}}return e.renderEngine(s,"*",n,r)};return _i=a,_i}var Ci,Bc;function Da(){if(Bc)return Ci;Bc=1;var e={};return Ci=e,Ci}var ki,Pc;function f2(){if(Pc)return ki;Pc=1;var e=Da(),t=function(a,n,r,s){e[n]||(e[n]={});var l=e[n];return l[r]||(l[r]=new Promise(function(c,f){var p=new XMLHttpRequest;let v=a+n+"-mp3/"+r+".mp3";p.open("GET",v,!0),p.responseType="arraybuffer",p.onload=function(){if(p.status!==200){f(Error("Can't load sound at "+v+" status="+p.status));return}var d=function(o){c({instrument:n,name:r,status:"loaded",audioBuffer:o})},u=s.decodeAudioData(p.response,d,function(){f(Error("Can't decode sound at "+v))});u&&typeof u.catch=="function"&&u.catch(f)},p.onerror=function(){f(Error("Can't load sound at "+v))},p.send()}).catch(c=>{throw console.error("Didn't load note",n,r,":",c.message),c})),l[r]};return ki=t,ki}var Ti,Nc;function Oa(){if(Nc)return Ti;Nc=1;var e=["acoustic_grand_piano","bright_acoustic_piano","electric_grand_piano","honkytonk_piano","electric_piano_1","electric_piano_2","harpsichord","clavinet","celesta","glockenspiel","music_box","vibraphone","marimba","xylophone","tubular_bells","dulcimer","drawbar_organ","percussive_organ","rock_organ","church_organ","reed_organ","accordion","harmonica","tango_accordion","acoustic_guitar_nylon","acoustic_guitar_steel","electric_guitar_jazz","electric_guitar_clean","electric_guitar_muted","overdriven_guitar","distortion_guitar","guitar_harmonics","acoustic_bass","electric_bass_finger","electric_bass_pick","fretless_bass","slap_bass_1","slap_bass_2","synth_bass_1","synth_bass_2","violin","viola","cello","contrabass","tremolo_strings","pizzicato_strings","orchestral_harp","timpani","string_ensemble_1","string_ensemble_2","synth_strings_1","synth_strings_2","choir_aahs","voice_oohs","synth_choir","orchestra_hit","trumpet","trombone","tuba","muted_trumpet","french_horn","brass_section","synth_brass_1","synth_brass_2","soprano_sax","alto_sax","tenor_sax","baritone_sax","oboe","english_horn","bassoon","clarinet","piccolo","flute","recorder","pan_flute","blown_bottle","shakuhachi","whistle","ocarina","lead_1_square","lead_2_sawtooth","lead_3_calliope","lead_4_chiff","lead_5_charang","lead_6_voice","lead_7_fifths","lead_8_bass_lead","pad_1_new_age","pad_2_warm","pad_3_polysynth","pad_4_choir","pad_5_bowed","pad_6_metallic","pad_7_halo","pad_8_sweep","fx_1_rain","fx_2_soundtrack","fx_3_crystal","fx_4_atmosphere","fx_5_brightness","fx_6_goblins","fx_7_echoes","fx_8_scifi","sitar","banjo","shamisen","koto","kalimba","bagpipe","fiddle","shanai","tinkle_bell","agogo","steel_drums","woodblock","taiko_drum","melodic_tom","synth_drum","reverse_cymbal","guitar_fret_noise","breath_noise","seashore","bird_tweet","telephone_ring","helicopter","applause","gunshot","percussion"];return Ti=e,Ti}var Si,Lc;function u2(){if(Lc)return Si;Lc=1;var e=Oa(),t=function(a){for(var n=[],r=0;r<a.tracks.length;r++)n.push([]);var s=e[0];return a.tracks.forEach(function(l,c){l.forEach(function(f){switch(f.cmd){case"note":var p=f.instrument!==void 0?e[f.instrument]:s;if(f.duration>0){var v=f.gap?f.gap:0,d=f.duration;v=Math.min(v,d*2/3);var u={pitch:f.pitch,instrument:p,start:Math.round(f.start*1e6)/1e6,end:Math.round((f.start+d-v)*1e6)/1e6,volume:f.volume};f.startChar&&(u.startChar=f.startChar),f.endChar&&(u.endChar=f.endChar),f.style&&(u.style=f.style),f.cents&&(u.cents=f.cents),n[c].push(u)}break;case"program":s=e[f.instrument];break;case"text":break;default:console.log("Unhandled midi event",f)}})}),n};return Si=t,Si}var Ei,qc;function Q0(){if(qc)return Ei;qc=1;function e(t){if(t)window.abcjsAudioContext=t;else if(!window.abcjsAudioContext){var a=window.AudioContext||window.webkitAudioContext;if(a)window.abcjsAudioContext=new a;else return!1}return window.abcjsAudioContext.state!=="suspended"}return Ei=e,Ei}var Ai,Dc;function n0(){if(Dc)return Ai;Dc=1;var e=Q0();function t(){return window.abcjsAudioContext||e(),window.abcjsAudioContext}return Ai=t,Ai}var Mi,Oc;function Z0(){if(Oc)return Mi;Oc=1;var e=n0();function t(){if(!window.Promise||!window.AudioContext&&!window.webkitAudioContext&&!navigator.mozAudioContext&&!navigator.msAudioContext)return!1;var a=e();if(a)return a.resume!==void 0}return Mi=t,Mi}var Bi,Ic;function Ia(){if(Ic)return Bi;Ic=1;var e={21:"A0",22:"Bb0",23:"B0",24:"C1",25:"Db1",26:"D1",27:"Eb1",28:"E1",29:"F1",30:"Gb1",31:"G1",32:"Ab1",33:"A1",34:"Bb1",35:"B1",36:"C2",37:"Db2",38:"D2",39:"Eb2",40:"E2",41:"F2",42:"Gb2",43:"G2",44:"Ab2",45:"A2",46:"Bb2",47:"B2",48:"C3",49:"Db3",50:"D3",51:"Eb3",52:"E3",53:"F3",54:"Gb3",55:"G3",56:"Ab3",57:"A3",58:"Bb3",59:"B3",60:"C4",61:"Db4",62:"D4",63:"Eb4",64:"E4",65:"F4",66:"Gb4",67:"G4",68:"Ab4",69:"A4",70:"Bb4",71:"B4",72:"C5",73:"Db5",74:"D5",75:"Eb5",76:"E5",77:"F5",78:"Gb5",79:"G5",80:"Ab5",81:"A5",82:"Bb5",83:"B5",84:"C6",85:"Db6",86:"D6",87:"Eb6",88:"E6",89:"F6",90:"Gb6",91:"G6",92:"Ab6",93:"A6",94:"Bb6",95:"B6",96:"C7",97:"Db7",98:"D7",99:"Eb7",100:"E7",101:"F7",102:"Gb7",103:"G7",104:"Ab7",105:"A7",106:"Bb7",107:"B7",108:"C8",109:"Db8",110:"D8",111:"Eb8",112:"E8",113:"F8",114:"Gb8",115:"G8",116:"Ab8",117:"A8",118:"Bb8",119:"B8",120:"C9",121:"Db9"};return Bi=e,Bi}var Pi,Fc;function h2(){if(Fc)return Pi;Fc=1;var e=function(a){return window.URL.createObjectURL(t(a.audioBuffers))};function t(a){var n=a[0],r=n.numberOfChannels,s=n.length*r*2+44,l=new ArrayBuffer(s),c=new DataView(l),f=[],p,v,d=0,u=0;for(h(1179011410),h(s-8),h(1163280727),h(544501094),h(16),o(1),o(r),h(n.sampleRate),h(n.sampleRate*2*r),o(r*2),o(16),h(1635017060),h(s-u-4),p=0;p<r;p++)f.push(n.getChannelData(p));for(;u<s;){for(p=0;p<f.length;p++)v=Math.max(-1,Math.min(1,f[p][d])),v=(.5+v<0?v*32768:v*32767)|0,c.setInt16(u,v,!0),u+=2;d++}return new Blob([l],{type:"audio/wav"});function o(i){c.setUint16(u,i,!0),u+=2}function h(i){c.setUint32(u,i,!0),u+=4}}return Pi=e,Pi}var Ni,Rc;function Rf(){if(Rc)return Ni;Rc=1;function e(t){return Math.pow(2,t/1200)}return Ni=e,Ni}var Li,Hc;function d2(){if(Hc)return Li;Hc=1;var e=Da(),t=Ia(),a=Rf();function n(s,l,c,f,p,v,d,u,o){var h=window.OfflineAudioContext||window.webkitOfflineAudioContext,i=c.len*c.tempoMultiplier;v&&(i+=v/1e3),i-=u,i<0&&(i=.005);var g=new h(2,Math.floor((i+d)*l),l),m=t[c.pitch];if(!e[c.instrument])return o&&o("placeNote skipped (instrument empty): "+c.instrument+":"+m),Promise.resolve();var b=e[c.instrument][m];return b?b.then(function(x){var C=g.createBufferSource();C.buffer=x.audioBuffer;var S=c.volume/96*p;C.gainNode=g.createGain(),c.pan&&g.createStereoPanner&&(C.panNode=g.createStereoPanner(),C.panNode.pan.setValueAtTime(c.pan,0)),C.gainNode.gain.value=S,C.gainNode.gain.linearRampToValueAtTime(C.gainNode.gain.value,i),C.gainNode.gain.linearRampToValueAtTime(0,i+d),c.cents&&(C.playbackRate.value=a(c.cents)),C.panNode?(C.panNode.connect(g.destination),C.gainNode.connect(C.panNode)):C.gainNode.connect(g.destination),C.connect(C.gainNode),C.start(0),C.noteOff?C.noteOff(i+d):C.stop(i+d);var I;return g.oncomplete=function(F){if(F.renderedBuffer&&F.renderedBuffer.getChannelData)for(var y=0;y<f.length;y++){var A=f[y]*c.tempoMultiplier;v&&(A-=v/1e3),A<0&&(A=0),A=Math.floor(A*l),r(s,F.renderedBuffer,A)}o&&o("placeNote: "+c.instrument+":"+m),I()},g.startRendering(),new Promise(function(F){I=F})}).catch(function(x){return o&&o("placeNote catch: "+x.message),Promise.reject(x)}):(o&&o("placeNote skipped: "+c.instrument+":"+m),Promise.resolve())}var r=function(s,l,c){for(var f=0;f<2;f++)for(var p=l.getChannelData(f),v=s.getChannelData(f),d=0;d<p.length;d++)v[d+c]+=p[d]};return Li=n,Li}var qi,zc;function Fa(){if(zc)return qi;zc=1;var e=f2(),t=u2(),a=Q0(),n=n0(),r=Z0(),s=Ia(),l=Oa(),c=h2(),f=d2(),p=Da(),v="MIDI is not supported in this browser.",d="https://paulrosen.github.io/midi-js-soundfonts/abcjs/",u="https://paulrosen.github.io/midi-js-soundfonts/FluidR3_GM/",o="https://paulrosen.github.io/midi-js-soundfonts/MusyngKite/";function h(){var i=this;i.audioBufferPossible=void 0,i.directSource=[],i.startTimeSec=void 0,i.pausedTimeSec=void 0,i.audioBuffers=[],i.duration=void 0,i.isRunning=!1,i.options={},i.pickupLength=0,i.init=function(b){b||(b={}),b.options&&(i.options=b.options),a(b.audioContext);var x=n().currentTime;if(i.debugCallback=b.debugCallback,i.debugCallback&&i.debugCallback("init called"),i.audioBufferPossible=i._deviceCapable(),!i.audioBufferPossible)return Promise.reject({status:"NotSupported",message:v});var C=b.options?b.options:{};i.soundFontUrl=C.soundFontUrl?C.soundFontUrl:u,i.soundFontUrl[i.soundFontUrl.length-1]!=="/"&&(i.soundFontUrl+="/"),C.soundFontVolumeMultiplier||C.soundFontVolumeMultiplier===0?i.soundFontVolumeMultiplier=C.soundFontVolumeMultiplier:i.soundFontUrl===u||i.soundFontUrl===o?i.soundFontVolumeMultiplier=3:i.soundFontUrl===d?i.soundFontVolumeMultiplier=.4:i.soundFontVolumeMultiplier=1,C.programOffsets?i.programOffsets=C.programOffsets:i.soundFontUrl===d?i.programOffsets={bright_acoustic_piano:20,honkytonk_piano:20,electric_piano_1:30,electric_piano_2:30,harpsichord:40,clavinet:20,celesta:20,glockenspiel:40,vibraphone:30,marimba:35,xylophone:30,tubular_bells:35,dulcimer:30,drawbar_organ:20,percussive_organ:25,rock_organ:20,church_organ:40,reed_organ:40,accordion:40,harmonica:40,acoustic_guitar_nylon:20,acoustic_guitar_steel:30,electric_guitar_jazz:25,electric_guitar_clean:15,electric_guitar_muted:35,overdriven_guitar:25,distortion_guitar:20,guitar_harmonics:30,electric_bass_finger:15,electric_bass_pick:30,fretless_bass:40,violin:105,viola:50,cello:40,contrabass:60,trumpet:10,trombone:90,alto_sax:20,tenor_sax:20,clarinet:20,flute:50,banjo:50,woodblock:20}:i.programOffsets={};var S=C.fadeLength!==void 0?parseInt(C.fadeLength,10):NaN;if(i.fadeLength=isNaN(S)?200:S,S=C.noteEnd!==void 0?parseInt(C.noteEnd,10):NaN,i.noteEnd=isNaN(S)?0:S,i.pan=C.pan,i.meterSize=1,b.visualObj){i.flattened=b.visualObj.setUpAudio(C);var I=b.visualObj.getMeterFraction();I.den&&(i.meterSize=b.visualObj.getMeterFraction().num/b.visualObj.getMeterFraction().den),i.pickupLength=b.visualObj.getPickupLength()}else if(b.sequence)i.flattened=b.sequence;else return Promise.reject(new Error("Must pass in either a visualObj or a sequence"));i.millisecondsPerMeasure=b.millisecondsPerMeasure?b.millisecondsPerMeasure:b.visualObj?b.visualObj.millisecondsPerMeasure(i.flattened.tempo):1e3,i.beatsPerMeasure=b.visualObj?b.visualObj.getBeatsPerMeasure():4,i.sequenceCallback=C.sequenceCallback,i.callbackContext=C.callbackContext,i.onEnded=C.onEnded,i.meterFraction=b.visualObj?b.visualObj.getMeterFraction():{den:1};var F={},y=[],A=[],P=l[0];i.flattened.tracks.forEach(function(T){T.forEach(function(L){if(L.cmd==="program"&&l[L.instrument]&&(P=l[L.instrument]),L.pitch!==void 0){var R=L.pitch,O=s[R],w=L.instrument!==void 0?l[L.instrument]:P;if(O)if(F[w]||(F[w]={}),!p[w]||!p[w][O])F[w][O]=!0;else{var _=w+":"+O;y.indexOf(_)<0&&y.push(_)}else{var k=w+":"+O;console.log("Can't find note: ",R,k),A.indexOf(k)<0&&A.push(k)}}})}),i.debugCallback&&i.debugCallback("note gathering time = "+Math.floor((n().currentTime-x)*1e3)+"ms"),x=n().currentTime;var M=[];Object.keys(F).forEach(function(T){Object.keys(F[T]).forEach(function(L){M.push({instrument:T,note:L})})}),i.debugCallback&&i.debugCallback("notes "+JSON.stringify(M));for(var N=[],B=256,E=0;E<M.length;E+=B)N.push(M.slice(E,E+B));return new Promise(function(T,L){var R={cached:y,error:A,loaded:[]},O=0,w=function(){i.debugCallback&&i.debugCallback("loadBatch idx="+O+" len="+N.length),O<N.length?i._loadBatch(N[O],i.soundFontUrl,x).then(function(_){i.debugCallback&&i.debugCallback("loadBatch then"),x=n().currentTime,_&&(_.error&&(R.error=R.error.concat(_.error)),_.loaded&&(R.loaded=R.loaded.concat(_.loaded))),O++,w()},L):(i.debugCallback&&i.debugCallback("resolve init"),T(R))};w()})},i._loadBatch=function(b,x,C,S){var I=[];return b.forEach(function(F){i.debugCallback&&i.debugCallback("getNote "+F.instrument+":"+F.note),I.push(e(x,F.instrument,F.note,n()))}),Promise.all(I).then(function(F){i.debugCallback&&i.debugCallback("mp3 load time = "+Math.floor((n().currentTime-C)*1e3)+"ms");for(var y=[],A=[],P=[],M=[],N=0;N<F.length;N++){var B=F[N],E=B.instrument+":"+B.name;B.status==="loaded"?y.push(E):B.status==="pending"?P.push(E):B.status==="cached"?A.push(E):M.push(E+" "+B.message)}if(P.length>0){if(i.debugCallback&&i.debugCallback("pending "+JSON.stringify(P)),S?S=S*2:S=50,S<9e4)return new Promise(function(R,O){setTimeout(function(){var w=[];for(N=0;N<P.length;N++)E=P[N].split(":"),w.push({instrument:E[0],note:E[1]});i.debugCallback&&i.debugCallback("retry "+JSON.stringify(w)),i._loadBatch(w,x,C,S).then(function(_){R(_)}).catch(function(_){O(_)})},S)});for(var T=[],L=0;L<b.length;L++)T.push(b[L].instrument+"/"+b[L].note);return i.debugCallback&&i.debugCallback("loadBatch timeout"),Promise.reject(new Error("timeout attempting to load: "+T.join(", ")))}else return i.debugCallback&&i.debugCallback("loadBatch resolve"),Promise.resolve({loaded:y,cached:A,error:M})}).catch(function(F){i.debugCallback&&i.debugCallback("loadBatch catch "+F.message)})},i.prime=function(){var b=i.fadeLength/1e3;return i.isRunning=!1,i.audioBufferPossible?(i.debugCallback&&i.debugCallback("prime called"),new Promise(function(x,C){try{let O=function(w){var _=w&&w.audioBuffers&&w.audioBuffers.length>0?w.audioBuffers[0].duration:0;return{status:n().state,duration:_}};var R=O,S=n().currentTime,I=i.millisecondsPerMeasure/1e3/i.meterSize;if(i.duration=i.flattened.totalDuration*I,i.duration<=0)return i.audioBuffers=[],x({status:"empty",seconds:0});i.duration+=b;var F=Math.floor(n().sampleRate*i.duration);i.stop();var y=t(i.flattened);i.options.swing&&m(y,i.options.swing,i.meterFraction,i.pickupLength),i.sequenceCallback&&i.sequenceCallback(y,i.callbackContext);var A=g(y.length,i.pan),P={};y.forEach(function(w,_){var k=A&&A.length>_?A[_]:0;w.forEach(function(q){var z=q.instrument+":"+q.pitch+":"+q.volume+":"+Math.round((q.end-q.start)*1e3)/1e3+":"+k+":"+I+":"+(q.cents?q.cents:0);i.debugCallback&&i.debugCallback("noteMapTrack "+z),P[z]||(P[z]=[]),P[z].push(q.start)})});for(var M=[],N=n().createBuffer(2,F,n().sampleRate),B=0;B<Object.keys(P).length;B++){var E=Object.keys(P)[B],T=E.split(":"),L=T[6]!==void 0?parseFloat(T[6]):0;T={instrument:T[0],pitch:parseInt(T[1],10),volume:parseInt(T[2],10),len:parseFloat(T[3]),pan:parseFloat(T[4]),tempoMultiplier:parseFloat(T[5]),cents:L},M.push(f(N,n().sampleRate,T,P[E],i.soundFontVolumeMultiplier,i.programOffsets[T.instrument],b,i.noteEnd/1e3,i.debugCallback))}i.audioBuffers=[N],i.debugCallback&&(i.debugCallback("sampleRate = "+n().sampleRate),i.debugCallback("totalSamples = "+F),i.debugCallback("creationTime = "+Math.floor((n().currentTime-S)*1e3)+"ms")),Promise.all(M).then(function(){n().state==="suspended"?n().resume().then(function(){x(O(i))}):n().state==="interrupted"?n().suspend().then(function(){n().resume().then(function(){x(O(i))})}):x(O(i))}).catch(function(w){C(w)})}catch(O){C(O)}})):Promise.reject(new Error(v))};function g(b,x){if(x==null)return null;var C=[];if(x.length){for(var S=0;S<b;S++)if(S<x.length){var I=parseFloat(x[S]);I<-1?I=-1:I>1&&(I=1),C.push(I)}else C.push(0);return C}else{var F=parseFloat(x);if(F*(b-1)>2)return null;for(var y=b%2===0,A=y?0-F/2:0,P=A+F,M=0;M<b;M++)y=M%2===0,y?(C.push(A),A-=F):(C.push(P),P+=F);return C}}i.start=function(){if(!i.audioBufferPossible)throw new Error(v);i.debugCallback&&i.debugCallback("start called");var b=i.pausedTimeSec?i.pausedTimeSec:0;i._kickOffSound(b),i.startTimeSec=n().currentTime-b,i.pausedTimeSec=void 0,i.debugCallback&&i.debugCallback("MIDI STARTED",i.startTimeSec)},i.pause=function(){if(!i.audioBufferPossible)throw new Error(v);return i.debugCallback&&i.debugCallback("pause called"),i.pausedTimeSec=i.stop(),i.pausedTimeSec},i.resume=function(){i.start()},i.seek=function(b,x){var C;switch(x){case"seconds":C=b;break;case"beats":C=b*i.millisecondsPerMeasure/i.beatsPerMeasure/1e3;break;default:C=(i.duration-i.fadeLength/1e3)*b;break}if(!i.audioBufferPossible)throw new Error(v);i.debugCallback&&i.debugCallback("seek called sec="+C),i.isRunning?(i.stop(),i._kickOffSound(C)):i.pausedTimeSec=C,i.pausedTimeSec=C},i.stop=function(){i.isRunning=!1,i.pausedTimeSec=void 0,i.directSource.forEach(function(x){try{x.stop()}catch(C){console.log("direct source didn't stop:",C)}}),i.directSource=[];var b=n().currentTime-i.startTimeSec;return b},i.finished=function(){i.startTimeSec=void 0,i.pausedTimeSec=void 0,i.isRunning=!1},i.download=function(){return c(i)},i.getAudioBuffer=function(){return i.audioBuffers[0]},i.getIsRunning=function(){return i.isRunning},i._deviceCapable=function(){return r()?!0:(console.warn(v),i.debugCallback&&i.debugCallback(v),!1)},i._kickOffSound=function(b){i.isRunning=!0,i.directSource=[],i.audioBuffers.forEach(function(x,C){i.directSource[C]=n().createBufferSource(),i.directSource[C].buffer=x,i.directSource[C].connect(n().destination)}),i.directSource.forEach(function(x){x.start(0,b)}),i.onEnded&&(i.directSource[0].onended=function(){i.onEnded(i.callbackContext)})};function m(b,x,C,S){if(!(C.den!=4&&C.den!=8)&&(x=parseFloat(x),!(isNaN(x)||x<=50))){x>75&&(x=75),x=x/50-1;var I=0,F=.25;C.den===8&&(F=F/2);for(var y=F/2,A=y*x,P=0;P<b.length;P++)for(var M=b[P],N=0;N<M.length;N++){var B=M[N];if((B.start-S)%y==0&&(B.start-S)%F!=0&&(N==0||M[N-1].start<=M[N].start-y)&&(N==M.length-1||M[N+1].start>=M[N].start+y)){var E=B.start;B.start+=A,B.volume*=1+I,N>0&&M[N-1].end==E&&(M[N-1].end=B.start,M[N-1].volume*=1-I)}}}}}return qi=h,qi}var Di,Gc;function Hf(){if(Gc)return Di;Gc=1;var e=function(){var t=this;t.tracks=[],t.totalDuration=0,t.currentInstrument=[],t.starts=[],t.addTrack=function(){return t.tracks.push([]),t.currentInstrument.push(0),t.starts.push(0),t.tracks.length-1},t.setInstrument=function(a,n){t.tracks[a].push({channel:0,cmd:"program",instrument:n}),t.currentInstrument[a]=n},t.appendNote=function(a,n,r,s,l){var c={cmd:"note",duration:r,gap:0,instrument:t.currentInstrument[a],pitch:n,start:t.starts[a],volume:s};l&&(c.cents=l),t.tracks[a].push(c),t.starts[a]+=r,t.totalDuration=Math.max(t.totalDuration,t.starts[a])}};return Di=e,Di}var Oi,Yc;function p2(){if(Yc)return Oi;Yc=1;var e=`
<svg version="1.0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 700 700" preserveAspectRatio="xMidYMid meet">
	<g transform="translate(0,700) scale(0.1,-0.1)" >
	<path d="M3111 6981 c-20 -37 -90 -55 -364 -96 -120 -18 -190 -33 -244 -55
	-42 -17 -124 -42 -182 -56 -78 -18 -119 -34 -157 -60 -28 -19 -86 -46 -128
	-60 -43 -13 -107 -42 -144 -64 -37 -23 -84 -46 -106 -52 -21 -7 -56 -29 -79
	-50 -22 -22 -61 -50 -86 -63 -26 -13 -67 -40 -91 -60 -24 -20 -65 -47 -90 -60
	-25 -13 -53 -31 -61 -41 -8 -9 -32 -30 -54 -46 -75 -54 -486 -460 -512 -507
	-15 -25 -48 -69 -75 -98 -26 -28 -48 -57 -48 -63 0 -6 -18 -29 -39 -53 -21
	-23 -56 -71 -77 -107 -20 -36 -50 -80 -65 -97 -16 -18 -33 -52 -40 -75 -12
	-47 -47 -115 -84 -166 -13 -18 -30 -56 -38 -83 -8 -27 -34 -80 -56 -118 -33
	-53 -46 -91 -62 -167 -12 -63 -34 -127 -59 -179 -42 -84 -60 -166 -60 -270 0
	-90 26 -122 125 -154 54 -17 96 -19 430 -20 305 -1 381 2 430 14 82 22 140 51
	153 78 6 12 22 47 37 77 14 30 38 77 54 103 15 27 34 73 40 103 7 30 28 78 48
	107 19 28 44 74 55 101 10 28 34 67 53 87 18 20 49 61 68 90 19 30 44 63 57
	74 13 11 36 40 52 65 59 94 232 270 306 313 20 11 57 37 82 58 25 20 70 52
	100 72 30 19 66 47 79 61 13 14 49 35 80 46 30 12 80 37 111 56 31 19 95 45
	143 58 48 12 110 37 139 55 63 40 127 55 323 76 83 9 208 28 279 41 156 29
	165 29 330 4 453 -71 514 -84 606 -130 31 -16 83 -36 116 -45 32 -9 84 -34
	115 -56 31 -21 82 -48 113 -60 32 -11 72 -33 89 -48 18 -16 59 -45 92 -65 33
	-21 74 -51 90 -66 17 -15 49 -40 73 -54 52 -32 65 -61 50 -113 -8 -31 -61 -90
	-277 -308 -300 -303 -361 -382 -369 -481 -2 -29 0 -66 6 -81 13 -40 88 -138
	115 -151 12 -6 54 -26 92 -44 l70 -33 945 -2 c520 -1 975 2 1012 7 64 8 191
	50 231 76 11 7 33 34 50 60 22 34 42 51 65 58 l32 9 0 1101 0 1102 -32 9 c-21
	7 -44 26 -64 55 -60 84 -77 97 -140 110 -44 9 -76 10 -127 2 -59 -9 -77 -17
	-134 -62 -37 -28 -172 -155 -301 -281 -129 -127 -249 -237 -267 -245 -25 -10
	-41 -11 -71 -2 -58 15 -112 45 -124 69 -6 11 -35 35 -64 54 -28 18 -58 41 -66
	50 -8 9 -41 35 -75 58 -33 22 -77 56 -99 75 -21 18 -64 46 -95 61 -31 14 -73
	39 -93 55 -20 15 -70 40 -110 55 -40 15 -97 44 -127 64 -29 21 -78 44 -107 53
	-30 8 -77 31 -105 51 -42 28 -73 39 -173 60 -68 14 -154 39 -196 58 -95 43
	-131 51 -343 76 -209 24 -242 32 -279 70 l-30 29 -328 0 c-312 0 -330 -1 -339
	-19z"></path>
	<path d="M254 2875 c-89 -16 -107 -26 -145 -78 -32 -44 -62 -66 -91 -67 -17 0
	-18 -61 -18 -1140 l0 -1140 24 0 c16 0 41 -17 72 -50 40 -42 61 -55 117 -72
	l69 -21 82 23 c44 12 96 30 114 39 18 9 148 132 290 272 141 141 267 261 279
	268 51 26 86 14 176 -61 32 -26 62 -48 66 -48 5 0 36 -25 70 -55 34 -30 74
	-61 89 -69 15 -8 37 -28 50 -45 12 -17 50 -45 84 -62 34 -17 78 -44 98 -60 19
	-16 61 -37 93 -48 32 -11 81 -37 107 -56 27 -20 76 -45 109 -56 33 -12 75 -31
	93 -44 62 -45 93 -58 191 -82 54 -12 130 -37 168 -54 68 -29 180 -58 226 -59
	62 0 183 -64 183 -96 0 -12 88 -14 639 -14 l639 0 12 30 c18 44 76 66 233 89
	89 14 160 30 200 47 34 15 106 42 159 60 54 18 112 44 130 57 47 35 85 52 146
	67 29 7 76 28 105 48 29 20 77 48 107 63 30 15 66 39 80 54 14 15 50 40 81 56
	31 15 78 46 104 69 26 22 61 46 79 54 17 7 43 26 56 42 14 16 41 41 60 56 64
	48 380 362 408 405 15 23 40 51 55 63 15 12 36 38 46 58 11 21 37 57 58 82 22
	25 49 62 62 83 13 20 38 56 57 78 19 23 50 74 69 113 19 39 46 86 59 104 14
	18 34 62 46 98 12 36 32 77 45 92 31 38 60 97 80 167 9 33 26 76 37 95 29 50
	47 103 68 206 10 52 32 117 51 155 29 56 33 74 34 140 0 94 -10 108 -101 138
	-61 20 -83 21 -463 21 -226 0 -421 -4 -451 -10 -63 -12 -86 -30 -110 -85 -10
	-22 -33 -63 -52 -92 -21 -31 -42 -80 -53 -123 -11 -44 -32 -93 -56 -128 -20
	-32 -47 -83 -59 -115 -12 -32 -37 -77 -56 -100 -19 -23 -50 -65 -69 -94 -19
	-29 -44 -57 -54 -63 -11 -5 -29 -27 -42 -47 -52 -85 -234 -277 -300 -315 -25
	-15 -53 -38 -62 -51 -9 -14 -42 -39 -74 -57 -32 -18 -75 -48 -95 -66 -21 -18
	-59 -44 -85 -58 -26 -13 -72 -40 -100 -59 -35 -24 -78 -41 -128 -52 -47 -11
	-99 -31 -139 -56 -69 -42 -94 -49 -391 -110 -245 -51 -425 -66 -595 -50 -168
	16 -230 27 -330 61 -47 16 -123 35 -170 44 -98 17 -123 25 -172 58 -20 14 -71
	37 -114 53 -44 15 -95 40 -115 56 -20 16 -70 42 -110 59 -40 16 -88 45 -108
	63 -20 19 -55 46 -78 61 -24 14 -49 35 -55 47 -7 11 -34 33 -60 49 -50 31 -65
	61 -53 102 4 13 130 147 281 298 236 238 277 283 299 335 15 32 35 71 46 86
	12 18 19 44 19 76 0 42 -8 63 -53 138 -92 151 11 139 -1207 141 -798 2 -1030
	0 -1086 -11z"></path>
	</g>
</svg>
`;return Oi=e,Oi}var Ii,$c;function v2(){if($c)return Ii;$c=1;var e=`
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 25" class="abcjs-play-svg">
    <g>
    <polygon points="4 0 23 12.5 4 25"/>
    </g>
</svg>
`;return Ii=e,Ii}var Fi,Wc;function g2(){if(Wc)return Fi;Wc=1;var e=`
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 25" class="abcjs-pause-svg">
  <g>
    <rect width="8.23" height="25"/>
    <rect width="8.23" height="25" x="17"/>
  </g>
</svg>
`;return Fi=e,Fi}var Ri,Uc;function b2(){if(Uc)return Ri;Uc=1;var e=`
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" class="abcjs-loading-svg">
    <circle cx="50" cy="50" fill="none" stroke-width="20" r="35" stroke-dasharray="160 55"></circle>
</svg>
`;return Ri=e,Ri}var Hi,Vc;function m2(){if(Vc)return Hi;Vc=1;var e=`
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 25">
  <g>
    <polygon points="5 12.5 24 0 24 25"/>
    <rect width="3" height="25" x="0" y="0"/>
  </g>
</svg>
`;return Hi=e,Hi}var zi,jc;function zf(){if(jc)return zi;jc=1;var e=Z0(),t=Q0(),a=n0(),n=p2(),r=v2(),s=g2(),l=b2(),c=m2();function f(o,h){var i=this;if(typeof o=="string"){var g=o;if(o=document.querySelector(g),!o)throw new Error('Cannot find element "'+g+'" in the DOM.')}else if(!(o instanceof HTMLElement))throw new Error("The first parameter must be a valid element or selector in the DOM.");if(i.parent=o,i.options={},h&&(i.options=Object.assign({},h)),i.options.ac&&t(i.options.ac),p(i.parent,i.options),u(i),i.disable=function(b){var x=i.parent.querySelector(".abcjs-inline-audio");b?x.classList.add("abcjs-disabled"):x.classList.remove("abcjs-disabled")},i.setWarp=function(b,x){var C=i.parent.querySelector(".abcjs-midi-tempo");C.value=Math.round(x),i.setTempo(b)},i.setTempo=function(b){var x=i.parent.querySelector(".abcjs-midi-current-tempo");x&&(x.innerHTML=Math.round(b))},i.resetAll=function(){for(var b=i.parent.querySelectorAll(".abcjs-pushed"),x=0;x<b.length;x++){var C=b[x];C.classList.remove("abcjs-pushed")}},i.pushPlay=function(b){var x=i.parent.querySelector(".abcjs-midi-start");x&&(b?x.classList.add("abcjs-pushed"):x.classList.remove("abcjs-pushed"))},i.pushLoop=function(b){var x=i.parent.querySelector(".abcjs-midi-loop");x&&(b?x.classList.add("abcjs-pushed"):x.classList.remove("abcjs-pushed"))},i.setProgress=function(b,x){var C=i.parent.querySelector(".abcjs-midi-progress-background"),S=i.parent.querySelector(".abcjs-midi-progress-indicator");if(!(!C||!S)){var I=C.clientWidth,F=I*b;S.style.left=F+"px";var y=i.parent.querySelector(".abcjs-midi-clock");if(y){var A=x*b/1e3,P=Math.floor(A/60),M=Math.floor(A%60),N=M<10?"0"+M:M;y.innerHTML=P+":"+N}}},i.options.afterResume){var m=!1;i.options.ac?m=i.options.ac.state!=="suspended":a()&&(m=a().state!=="suspended"),m&&i.options.afterResume()}}function p(o,h){var i=!!h.loopHandler,g=!!h.restartHandler,m=!!h.playHandler||!!h.playPromiseHandler,b=!!h.progressHandler,x=!!h.warpHandler,C=h.hasClock!==!1,S=`<div class="abcjs-inline-audio">
`;if(i){var I=h.repeatTitle?h.repeatTitle:"Click to toggle play once/repeat.",F=h.repeatAria?h.repeatAria:I;S+='<button type="button" class="abcjs-midi-loop abcjs-btn" title="'+I+'" aria-label="'+F+'">'+n+`</button>
`}if(g){var y=h.restartTitle?h.restartTitle:"Click to go to beginning.",A=h.restartAria?h.restartAria:y;S+='<button type="button" class="abcjs-midi-reset abcjs-btn" title="'+y+'" aria-label="'+A+'">'+c+`</button>
`}if(m){var P=h.playTitle?h.playTitle:"Click to play/pause.",M=h.playAria?h.playAria:P;S+='<button type="button" class="abcjs-midi-start abcjs-btn" title="'+P+'" aria-label="'+M+'">'+r+s+l+`</button>
`}if(b){var N=h.randomTitle?h.randomTitle:"Click to change the playback position.",B=h.randomAria?h.randomAria:N;S+='<button type="button" class="abcjs-midi-progress-background" title="'+N+'" aria-label="'+B+`"><span class="abcjs-midi-progress-indicator"></span></button>
`}if(C&&(S+=`<span class="abcjs-midi-clock"></span>
`),x){var E=h.warpTitle?h.warpTitle:"Change the playback speed.",T=h.warpAria?h.warpAria:E,L=h.bpm?h.bpm:"BPM";S+='<span class="abcjs-tempo-wrapper"><label><input class="abcjs-midi-tempo" type="number" min="1" max="300" value="100" title="'+E+'" aria-label="'+T+'">%</label><span>&nbsp;(<span class="abcjs-midi-current-tempo"></span> '+L+`)</span></span>
`}S+='<div class="abcjs-css-warning" style="font-size: 12px;color:red;border: 1px solid red;text-align: center;width: 300px;margin-top: 4px;font-weight: bold;border-radius: 4px;">CSS required: load abcjs-audio.css</div>',S+=`</div>
`,o.innerHTML=S}function v(o,h,i,g,m){var b=!0;if(a()?b=a().state==="suspended":t(),!e())throw{status:"NotSupported",message:"This browser does not support audio."};(b||m)&&i&&i.classList.add("abcjs-loading"),b?a().resume().then(function(){g?g().then(function(x){d(o,h,i,m)}):d(o,h,i,m)}):d(o,h,i,m)}function d(o,h,i,g){g?o(h).then(function(){i&&i.classList.remove("abcjs-loading")}):(o(h),i&&i.classList.remove("abcjs-loading"))}function u(o){var h=!!o.options.loopHandler,i=!!o.options.restartHandler,g=!!o.options.playHandler||!!o.options.playPromiseHandler,m=!!o.options.progressHandler,b=!!o.options.warpHandler,x=o.parent.querySelector(".abcjs-midi-start");h&&o.parent.querySelector(".abcjs-midi-loop").addEventListener("click",function(C){v(o.options.loopHandler,C,x,o.options.afterResume)}),i&&o.parent.querySelector(".abcjs-midi-reset").addEventListener("click",function(C){v(o.options.restartHandler,C,x,o.options.afterResume)}),g&&x.addEventListener("click",function(C){v(o.options.playPromiseHandler||o.options.playHandler,C,x,o.options.afterResume,!!o.options.playPromiseHandler)}),m&&o.parent.querySelector(".abcjs-midi-progress-background").addEventListener("click",function(C){v(o.options.progressHandler,C,x,o.options.afterResume)}),b&&o.parent.querySelector(".abcjs-midi-tempo").addEventListener("change",function(C){v(o.options.warpHandler,C,x,o.options.afterResume)})}return zi=f,zi}var Gi,Kc;function y2(){if(Kc)return Gi;Kc=1;var e=Hf(),t=Fa(),a=n0();function n(s,l,c,f,p){for(var v=new e,d=0;d<s.length;d++){var u=s[d],o=v.addTrack();if(v.setInstrument(o,u.instrument),d===0&&l)for(var h=0;h<l.length;h++){var i=l[h];v.appendNote(o,i.pitch,1/64,i.volume,i.cents)}v.appendNote(o,u.pitch,u.duration,u.volume,u.cents)}var g=a();return g.state==="suspended"?g.resume().then(function(){return r(v,c,f,p)}):r(v,c,f,p)}function r(s,l,c,f){var p=new t;return p.init({sequence:s,millisecondsPerMeasure:l,options:{soundFontUrl:c},debugCallback:f}).then(function(){return p.prime()}).then(function(){return p.start(),Promise.resolve()})}return Gi=n,Gi}var Yi,Xc;function Gf(){if(Xc)return Yi;Xc=1;var e=zf(),t=Fa(),a=Aa(),n=n0();function r(){var s=this;s.warp=100,s.cursorControl=null,s.visualObj=null,s.timer=null,s.midiBuffer=null,s.options=null,s.currentTempo=null,s.control=null,s.isLooping=!1,s.isStarted=!1,s.isLoaded=!1,s.isLoading=!1,s.load=function(c,f,p){p||(p={}),p.displayPlay===void 0&&(p.displayPlay=!0),p.displayProgress===void 0&&(p.displayProgress=!0),s.control=new e(c,{loopHandler:p.displayLoop?s.toggleLoop:void 0,restartHandler:p.displayRestart?s.restart:void 0,playPromiseHandler:p.displayPlay?s.play:void 0,progressHandler:p.displayProgress?s.randomAccess:void 0,warpHandler:p.displayWarp?s.onWarp:void 0,afterResume:s.init}),s.cursorControl=f,s.disable(!0)},s.disable=function(c){s.control&&s.control.disable(c)},s.setTune=function(c,f,p){return s.visualObj=c,s.disable(!1),s.options=p||{},s.control&&(s.pause(),s.setProgress(0,1),s.control.resetAll(),s.restart(),s.isStarted=!1),s.isLooping=!1,f?s.go():Promise.resolve({status:"no-audio-context"})},s.go=function(){s.isLoading=!0;var c=s.visualObj.millisecondsPerMeasure()*100/s.warp;s.currentTempo=Math.round(s.visualObj.getBeatsPerMeasure()/c*6e4),s.control&&s.control.setTempo(s.currentTempo),s.percent=0;var f;return s.midiBuffer||(s.midiBuffer=new t),n().resume().then(function(p){return s.midiBuffer.init({visualObj:s.visualObj,options:s.options,millisecondsPerMeasure:c})}).then(function(p){return f=p,s.midiBuffer.prime()}).then(function(){var p=16;return s.cursorControl&&s.cursorControl.beatSubdivisions!==void 0&&parseInt(s.cursorControl.beatSubdivisions,10)>=1&&parseInt(s.cursorControl.beatSubdivisions,10)<=64&&(p=parseInt(s.cursorControl.beatSubdivisions,10)),s.timer=new a(s.visualObj,{beatCallback:s.beatCallback,eventCallback:s.eventCallback,lineEndCallback:s.lineEndCallback,qpm:s.currentTempo,extraMeasuresAtBeginning:s.cursorControl?s.cursorControl.extraMeasuresAtBeginning:void 0,lineEndAnticipation:s.cursorControl?s.cursorControl.lineEndAnticipation:0,beatSubdivisions:p}),s.cursorControl&&s.cursorControl.onReady&&typeof s.cursorControl.onReady=="function"&&s.cursorControl.onReady(s),s.isLoaded=!0,s.isLoading=!1,Promise.resolve({status:"created",notesStatus:f})})},s.destroy=function(){s.timer&&(s.timer.reset(),s.timer.stop(),s.timer=null),s.midiBuffer&&(s.midiBuffer.stop(),s.midiBuffer=null),s.setProgress(0,1),s.control&&s.control.resetAll()},s.play=function(){return s.runWhenReady(s._play,void 0)};function l(c){return new Promise(function(f){setTimeout(f,c)})}s.runWhenReady=function(c,f){return s.visualObj?s.isLoading?l(500).then(function(){return s.isLoading?s.runWhenReady(c,f):c(f)}):s.isLoaded?c(f):s.go().then(function(){return c(f)}):Promise.resolve({status:"loading"})},s._play=function(){return n().resume().then(function(){return s.isStarted=!s.isStarted,s.isStarted?(s.cursorControl&&s.cursorControl.onStart&&typeof s.cursorControl.onStart=="function"&&s.cursorControl.onStart(),s.midiBuffer.start(),s.timer.start(s.percent),s.control&&s.control.pushPlay(!0)):s.pause(),Promise.resolve({status:"ok"})})},s.pause=function(){s.timer&&(s.timer.pause(),s.midiBuffer.pause(),s.control&&s.control.pushPlay(!1))},s.toggleLoop=function(){s.isLooping=!s.isLooping,s.control&&s.control.pushLoop(s.isLooping)},s.restart=function(){s.timer&&(s.timer.setProgress(0),s.midiBuffer.seek(0))},s.randomAccess=function(c){return s.runWhenReady(s._randomAccess,c)},s._randomAccess=function(c){var f=c.target.classList.contains("abcjs-midi-progress-indicator")?c.target.parentNode:c.target,p=(c.x-f.getBoundingClientRect().left)/f.offsetWidth;return p<0&&(p=0),p>1&&(p=1),s.seek(p),Promise.resolve({status:"ok"})},s.seek=function(c,f){s.timer&&s.midiBuffer&&(s.timer.setProgress(c,f),s.midiBuffer.seek(c,f))},s.setWarp=function(c){if(parseInt(c,10)>0){s.warp=parseInt(c,10);var f=s.isStarted,p=s.percent;return s.destroy(),s.isStarted=!1,s.go().then(function(){return s.setProgress(p,s.midiBuffer.duration*1e3),s.control&&s.control.setWarp(s.currentTempo,s.warp),f?s.play().then(function(){return s.seek(p),Promise.resolve()}):(s.seek(p),Promise.resolve())})}return Promise.resolve()},s.onWarp=function(c){var f=c.target.value;return s.setWarp(f)},s.setProgress=function(c,f){s.percent=c,s.control&&s.control.setProgress(c,f)},s.finished=function(){if(s.timer.reset(),s.isLooping)return s.timer.start(0),s.midiBuffer.finished(),s.midiBuffer.start(),"continue";s.timer.stop(),s.isStarted&&(s.control&&s.control.pushPlay(!1),s.isStarted=!1,s.midiBuffer.finished(),s.cursorControl&&s.cursorControl.onFinished&&typeof s.cursorControl.onFinished=="function"&&s.cursorControl.onFinished(),s.setProgress(0,1))},s.beatCallback=function(c,f,p,v){var d=c/f;s.setProgress(d,p),s.cursorControl&&s.cursorControl.onBeat&&typeof s.cursorControl.onBeat=="function"&&s.cursorControl.onBeat(c,f,p,v)},s.eventCallback=function(c){if(c)s.cursorControl&&s.cursorControl.onEvent&&typeof s.cursorControl.onEvent=="function"&&s.cursorControl.onEvent(c);else return s.finished()},s.lineEndCallback=function(c,f){s.cursorControl&&s.cursorControl.onLineEnd&&typeof s.cursorControl.onLineEnd=="function"&&s.cursorControl.onLineEnd(c,f)},s.getUrl=function(){return s.midiBuffer.download()},s.download=function(c){var f=s.getUrl(),p=document.createElement("a");document.body.appendChild(p),p.setAttribute("style","display: none;"),p.href=f,p.download=c||"output.wav",p.click(),window.URL.revokeObjectURL(f),document.body.removeChild(p)}}return Yi=r,Yi}var $i,Jc;function Yf(){if(Jc)return $i;Jc=1;var e=Rf(),t;return function(){function a(u,o){for(var h in o)o.hasOwnProperty(h)&&u.setAttribute(h,o[h]);return u}function n(){this.trackstrings="",this.trackcount=0,this.noteOnAndChannel="%90",this.noteOffAndChannel="%80"}n.prototype.setTempo=function(u){this.trackcount===0&&(this.startTrack(),this.track+="%00%FF%51%03"+p(Math.round(6e7/u),6),this.endTrack())},n.prototype.setGlobalInfo=function(u,o,h,i){if(this.trackcount===0){this.startTrack();var g=Math.round(6e7/u);this.track+="%00%FF%51%03"+p(g,6),h&&(this.track+=l(h)),i&&(this.track+=c(i)),o&&(this.track+=s(o,"%01")),this.endTrack()}},n.prototype.startTrack=function(){this.noteWarped={},this.track="",this.trackName="",this.trackInstrument="",this.silencelength=0,this.trackcount++,this.instrument&&this.setInstrument(this.instrument)},n.prototype.endTrack=function(){this.track=this.trackName+this.trackInstrument+this.track;var u=p(this.track.length/3+4,8);this.track="MTrk"+u+this.track+"%00%FF%2F%00",this.trackstrings+=this.track},n.prototype.setText=function(u,o){switch(u){case"name":this.trackName=s(o,"%03");break}},n.prototype.setInstrument=function(u){this.trackInstrument="%00%C0"+p(u,2),this.instrument=u},n.prototype.setChannel=function(u,o){this.channel=u;var h="%00%B"+this.channel.toString(16);this.track+=h+"%79%00",this.track+=h+"%40%00",this.track+=h+"%5B%30",o||(o=0),o=Math.round((o+1)*64),this.track+=h+"%0A"+p(o,2),this.track+=h+"%07%64",this.noteOnAndChannel="%9"+this.channel.toString(16),this.noteOffAndChannel="%8"+this.channel.toString(16)};var r=4096;n.prototype.startNote=function(u,o,h){if(this.track+=d(this.silencelength),this.silencelength=0,h){this.track+="%e"+this.channel.toString(16);var i=Math.round(e(h)*r);this.track+=v(8192+i),this.track+=d(0),this.noteWarped[u]=!0}this.track+=this.noteOnAndChannel,this.track+="%"+u.toString(16)+p(o,2)},n.prototype.endNote=function(u){this.track+=d(this.silencelength),this.silencelength=0,this.noteWarped[u]&&(this.track+="%e"+this.channel.toString(16),this.track+=v(8192),this.track+=d(0),this.noteWarped[u]=!1),this.track+=this.noteOffAndChannel,this.track+="%"+u.toString(16)+"%00"},n.prototype.addRest=function(u){this.silencelength+=u,this.silencelength<0&&(this.silencelength=0)},n.prototype.getData=function(){return"data:audio/midi,MThd%00%00%00%06%00%01"+p(this.trackcount,4)+"%01%e0"+this.trackstrings},n.prototype.embed=function(u,o){var h=this.getData(),i=a(document.createElement("a"),{href:h});if(i.innerHTML="download midi",u.insertBefore(i,u.firstChild),!o){var g=a(document.createElement("embed"),{src:h,type:"video/quicktime",controller:"true",autoplay:"false",loop:"false",enablejavascript:"true",style:"display:block; height: 20px;"});u.insertBefore(g,u.firstChild)}};function s(u,o){for(var h="",i=0;i<u.length;i++)h+=p(u.charCodeAt(i),2);return"%00%FF"+o+p(h.length/3,2)+h}function l(u){if(!u||!u.accidentals)return"";for(var o="%00%FF%59%02",h=0,i=256,g=0;g<u.accidentals.length;g++)u.accidentals[g].acc==="sharp"?h++:u.accidentals[g].acc==="flat"&&i--;var m=p(i!==256?i:h,2),b=u.mode==="m"?"%01":"%00";return o+m+b}function c(u){var o="%00%FF%58%04"+p(u.num,2),h={1:0,2:1,4:2,8:3,16:4,32:5},i=h[u.den];if(!i)return"";o+=p(i,2);var g;switch(u.num+"/"+u.den){case"2/4":case"3/4":case"4/4":case"5/4":g=24;break;case"6/4":g=72;break;case"2/2":case"3/2":case"4/2":g=48;break;case"3/8":case"6/8":case"9/8":case"12/8":g=36;break}return g?(o+=p(g,2),o+"%08"):""}function f(u){for(var o="",h=0;h<u.length;h+=2)o+="%",o+=u.substr(h,2);return o}function p(u,o){var h=u.toString(16);for(h=h.split(".")[0];h.length<o;)h="0"+h;return h.length>o&&(h=h.substring(0,o)),f(h)}function v(u){u=Math.round(u);var o=u%128,h=u-o;return p(h*2+o,4)}function d(u){var o=0,h=[];for(u=Math.round(u);u!==0;)h.push(u&127),u=u>>7;for(var i=h.length-1;i>=0;i--){o=o<<8;var g=h[i];i!==0&&(g=g|128),o=o|g}var m=o.toString(16).length;return m+=m%2,p(o,m)}t=function(){return new n}}(),$i=t,$i}var Wi,Qc;function w2(){if(Qc)return Wi;Qc=1;var e=Yf(),t;return function(){var a=1920;t=function(s,l){l===void 0&&(l={});var c=s.setUpAudio(l),f=e(),p=s.metaText?s.metaText.title:void 0;p&&p.length>128&&(p=p.substring(0,124)+"...");var v=s.getKeySignature(),d=s.getMeterFraction(),u=c.tempo,o=u/60;if(d.den==8){var h=s.millisecondsPerMeasure();u=6e4/(h/d.num)/2,o=u/60}f.setGlobalInfo(u,p,v,d);for(var i=0;i<c.tracks.length;i++){f.startTrack();for(var g={},m=0;m<c.tracks[i].length;m++){var b=c.tracks[i][m];switch(b.cmd){case"text":f.setText(b.type,b.text);break;case"program":var x=0;l.pan&&l.pan.length>i&&(x=l.pan[i]),b.instrument===128?(f.setChannel(9,x),f.setInstrument(0)):(f.setChannel(b.channel,x),f.setInstrument(b.instrument));break;case"note":var C=b.gap*o,S=b.start,I=S+b.duration-C;g[S]||(g[S]=[]),g[S].push({pitch:b.pitch,volume:b.volume,cents:b.cents}),g[I]||(g[I]=[]),g[I].push({pitch:b.pitch,volume:0});break;default:console.log("MIDI create Unknown: "+b.cmd)}}n(f,g,a),f.endTrack()}return f.getData()};function n(r,s,l){for(var c=Object.keys(s),f=0;f<c.length;f++)c[f]=parseFloat(c[f]);c.sort(function(i,g){return i-g});for(var p=0,v=0;v<c.length;v++){var d=s[c[v]];if(c[v]>p){var u=(c[v]-p)*l;r.addRest(u),p=c[v]}for(var o=0;o<d.length;o++){var h=d[o];h.volume?r.startNote(h.pitch,h.volume,h.cents):r.endNote(h.pitch)}}}}(),Wi=t,Wi}var Ui,Zc;function x2(){if(Zc)return Ui;Zc=1;var e=J0(),t=w2(),a=function(s,l){var c={};if(l)for(var f in l)l.hasOwnProperty(f)&&(c[f]=l[f]);c.generateInline=!1;function p(v,d,u){var o=t(d,c);switch(c.midiOutputType){case"encoded":return o;case"binary":var h=o.replace("data:audio/midi,","");h=h.replace(/MThd/g,"%4d%54%68%64"),h=h.replace(/MTrk/g,"%4d%54%72%6b");for(var i=new ArrayBuffer(h.length/3),g=new Uint8Array(i),m=0;m<h.length/3;m++){var b=m*3+1,x=parseInt(h.substring(b,b+2),16);g[m]=x}return g;case"link":default:return r(d,c,o,u)}}return typeof s=="string"?e.renderEngine(p,"*",s,c):p(null,s,0)};function n(s){var l={};return s&&l.toString.call(s)==="[object Function]"}var r=function(s,l,c,f){var p=["abcjs-download-midi","abcjs-midi-"+f];l.downloadClass&&p.push(l.downloadClass);var v='<div class="'+p.join(" ")+'">';l.preTextDownload&&(v+=l.preTextDownload);var d=s.metaText&&s.metaText.title?s.metaText.title:"Untitled",u;l.downloadLabel&&n(l.downloadLabel)?u=l.downloadLabel(s,f):l.downloadLabel?u=l.downloadLabel.replace(/%T/,d):u='Download MIDI for "'+d+'"',d=d.toLowerCase().replace(/'/g,"").replace(/\W/g,"_").replace(/__/g,"_");var o=l.fileName?l.fileName:d+".midi";return v+='<a download="'+o+'" href="'+c+'">'+u+"</a>",l.postTextDownload&&(v+=l.postTextDownload),v+"</div>"};return Ui=a,Ui}var Vi,el;function $f(){if(el)return Vi;el=1;try{if(typeof window.CustomEvent!="function"){var e=function(a,n){n=n||{bubbles:!1,cancelable:!1,detail:void 0};var r=document.createEvent("CustomEvent");return r.initCustomEvent(a,n.bubbles,n.cancelable,n.detail),r};e.prototype=window.Event.prototype,window.CustomEvent=e}}catch{}var t=function(a){this.isEditArea=!0,typeof a=="string"?(this.textarea=document.getElementById(a),this.textarea||(this.textarea=document.querySelector(a))):this.textarea=a,this.initialText=this.textarea.value,this.isDragging=!1};return t.prototype.addSelectionListener=function(a){this.textarea.onmousemove=function(n){this.isDragging&&a.fireSelectionChanged()}},t.prototype.addChangeListener=function(a){this.changelistener=a,this.textarea.onkeyup=function(){a.fireChanged()},this.textarea.onmousedown=function(){this.isDragging=!0,a.fireSelectionChanged()},this.textarea.onmouseup=function(){this.isDragging=!1,a.fireChanged()},this.textarea.onchange=function(){a.fireChanged()}},t.prototype.getSelection=function(){return{start:this.textarea.selectionStart,end:this.textarea.selectionEnd}},t.prototype.setSelection=function(a,n){if(this.textarea.setSelectionRange)this.textarea.setSelectionRange(a,n);else if(this.textarea.createTextRange){var r=this.textarea.createTextRange();r.collapse(!0),r.moveEnd("character",n),r.moveStart("character",a),r.select()}this.textarea.focus()},t.prototype.getString=function(){return this.textarea.value},t.prototype.setString=function(a){this.textarea.value=a,this.initialText=this.getString(),this.changelistener&&this.changelistener.fireChanged()},t.prototype.getElem=function(){return this.textarea},Vi=t,Vi}var ji,tl;function _2(){if(tl)return ji;tl=1;var e=yt(),t=Gf(),a=Z0(),n=Ff(),r=$f();function s(c){var f={},p;if(c.abcjsParams)for(p in c.abcjsParams)c.abcjsParams.hasOwnProperty(p)&&(f[p]=c.abcjsParams[p]);if(c.midi_options)for(p in c.midi_options)c.midi_options.hasOwnProperty(p)&&(f[p]=c.midi_options[p]);if(c.parser_options)for(p in c.parser_options)c.parser_options.hasOwnProperty(p)&&(f[p]=c.parser_options[p]);if(c.render_options)for(p in c.render_options)c.render_options.hasOwnProperty(p)&&(f[p]=c.render_options[p]);return f.tablature&&c.warnings_id&&(f.tablature.warnings_id=c.warnings_id),f}var l=function(c,f){this.abcjsParams=s(f),f.indicate_changed&&(this.indicate_changed=!0),typeof c=="string"?this.editarea=new r(c):c.isEditArea?this.editarea=c:this.editarea=new r(c),this.editarea.addSelectionListener(this),this.editarea.addChangeListener(this),f.canvas_id?this.div=f.canvas_id:f.paper_id?this.div=f.paper_id:(this.div=document.createElement("DIV"),this.editarea.getElem().parentNode.insertBefore(this.div,this.editarea.getElem())),typeof this.div=="string"&&(this.div=document.getElementById(this.div)),f.selectionChangeCallback&&(this.selectionChangeCallback=f.selectionChangeCallback),this.clientClickListener=this.abcjsParams.clickListener,this.abcjsParams.clickListener=this.highlight.bind(this),f.synth&&a()&&(this.synth={el:f.synth.el,cursorControl:f.synth.cursorControl,options:f.synth.options}),f.generate_midi&&(this.generate_midi=f.generate_midi,this.abcjsParams.generateDownload&&(typeof f.midi_download_id=="string"?this.downloadMidi=document.getElementById(f.midi_download_id):f.midi_download_id&&(this.downloadMidi=f.midi_download_id)),this.abcjsParams.generateInline!==!1&&(typeof f.midi_id=="string"?this.inlineMidi=document.getElementById(f.midi_id):f.midi_id&&(this.inlineMidi=f.midi_id))),f.warnings_id?typeof f.warnings_id=="string"?this.warningsdiv=document.getElementById(f.warnings_id):this.warningsdiv=f.warnings_id:f.generate_warnings&&(this.warningsdiv=document.createElement("div"),this.div.parentNode.insertBefore(this.warningsdiv,this.div)),this.onchangeCallback=f.onchange,this.redrawCallback=f.redrawCallback,this.currentAbc="",this.tunes=[],this.bReentry=!1,this.parseABC(),this.modelChanged(),this.addClassName=function(p,v){var d=function(u,o){var h=u.className;return h.length>0&&(h===o||new RegExp("(^|\\s)"+o+"(\\s|$)").test(h))};return d(p,v)||(p.className+=(p.className?" ":"")+v),p},this.removeClassName=function(p,v){return p.className=e.strip(p.className.replace(new RegExp("(^|\\s+)"+v+"(\\s+|$)")," ")),p},this.setReadOnly=function(p){var v="abc_textarea_readonly",d=this.editarea.getElem();p?(d.setAttribute("readonly","yes"),this.addClassName(d,v)):(d.removeAttribute("readonly"),this.removeClassName(d,v))}};return l.prototype.redrawMidi=function(){if(this.generate_midi&&!this.midiPause){var c=new window.CustomEvent("generateMidi",{detail:{tunes:this.tunes,abcjsParams:this.abcjsParams,downloadMidiEl:this.downloadMidi,inlineMidiEl:this.inlineMidi,engravingEl:this.div}});window.dispatchEvent(c)}if(this.synth){var f=this.synth.synthControl;this.synth.synthControl||(this.synth.synthControl=new t,this.synth.synthControl.load(this.synth.el,this.synth.cursorControl,this.synth.options)),this.synth.synthControl.setTune(this.tunes[0],f,this.synth.options)}},l.prototype.modelChanged=function(){if(!this.bReentry){this.bReentry=!0;try{this.timerId=null,this.redrawCallback&&this.redrawCallback(!0),this.synth&&this.synth.synthControl&&this.synth.synthControl.disable(!0),this.tunes=n(this.div,this.currentAbc,this.abcjsParams),this.tunes.length>0&&(this.warnings=this.tunes[0].warnings),this.redrawMidi(),this.redrawCallback&&this.redrawCallback(!1)}catch(c){console.error("ABCJS error: ",c),this.warnings||(this.warnings=[]),this.warnings.push(c.message)}this.warningsdiv&&(this.warningsdiv.innerHTML=this.warnings?this.warnings.join("<br />"):"No errors"),this.updateSelection(),this.bReentry=!1}},l.prototype.paramChanged=function(c){if(c)for(var f in c)c.hasOwnProperty(f)&&(this.abcjsParams[f]=c[f]);this.currentAbc="",this.fireChanged()},l.prototype.getTunes=function(){return this.tunes},l.prototype.synthParamChanged=function(c){if(this.synth){if(this.synth.options={},c)for(var f in c)c.hasOwnProperty(f)&&(this.synth.options[f]=c[f]);this.currentAbc="",this.fireChanged()}},l.prototype.parseABC=function(){var c=this.editarea.getString();return c===this.currentAbc?(this.updateSelection(),!1):(this.currentAbc=c,!0)},l.prototype.updateSelection=function(){var c=this.editarea.getSelection();try{this.tunes.length>0&&this.tunes[0].engraver&&this.tunes[0].engraver.rangeHighlight(c.start,c.end)}catch{}this.selectionChangeCallback&&this.selectionChangeCallback(c.start,c.end)},l.prototype.fireSelectionChanged=function(){this.updateSelection()},l.prototype.setDirtyStyle=function(c){if(this.indicate_changed!==void 0){var f=function(u,o){var h=function(i,g){var m=i.className;return m.length>0&&(m===g||new RegExp("(^|\\s)"+g+"(\\s|$)").test(m))};return h(u,o)||(u.className+=(u.className?" ":"")+o),u},p=function(u,o){return u.className=e.strip(u.className.replace(new RegExp("(^|\\s+)"+o+"(\\s+|$)")," ")),u},v="abc_textarea_dirty",d=this.editarea.getElem();c?f(d,v):p(d,v)}},l.prototype.fireChanged=function(){if(!this.bIsPaused&&this.parseABC()){var c=this;this.timerId&&clearTimeout(this.timerId),this.timerId=setTimeout(function(){c.modelChanged()},300);var f=this.isDirty();this.wasDirty!==f&&(this.wasDirty=f,this.setDirtyStyle(f)),this.onchangeCallback&&this.onchangeCallback(this)}},l.prototype.setNotDirty=function(){this.editarea.initialText=this.editarea.getString(),this.wasDirty=!1,this.setDirtyStyle(!1)},l.prototype.isDirty=function(){return this.indicate_changed===void 0?!1:this.editarea.initialText!==this.editarea.getString()},l.prototype.highlight=function(c,f,p,v,d,u){this.editarea.setSelection(c.startChar,c.endChar),this.selectionChangeCallback&&this.selectionChangeCallback(c.startChar,c.endChar),this.clientClickListener&&this.clientClickListener(c,f,p,v,d,u)},l.prototype.pause=function(c){this.bIsPaused=c,c||this.fireChanged()},l.prototype.millisecondsPerMeasure=function(){return!this.synth||!this.synth.synthControl||!this.synth.synthControl.visualObj?0:this.synth.synthControl.visualObj.millisecondsPerMeasure()},l.prototype.pauseMidi=function(c){this.midiPause=c,c||this.redrawMidi()},ji=l,ji}var Ki,rl;function C2(){if(rl)return Ki;rl=1;var e=zh(),t=Gh(),a=J0(),n=mf(),r=ad(),s={};s.signature="abcjs-basic v"+e,Object.keys(t).forEach(function(x){s[x]=t[x]}),Object.keys(a).forEach(function(x){s[x]=a[x]}),s.renderAbc=Ff(),s.tuneMetrics=l2(),s.TimingCallbacks=Aa();var l=Bt();s.setGlyph=l.setSymbol,s.strTranspose=r;var c=Fa(),f=Oa(),p=Ia(),v=Hf(),d=zf(),u=Q0(),o=n0(),h=Z0(),i=y2(),g=Gf(),m=x2(),b=Yf();return s.synth={CreateSynth:c,instrumentIndexToName:f,pitchToNoteName:p,SynthController:g,SynthSequence:v,CreateSynthControl:d,registerAudioContext:u,activeAudioContext:o,supportsAudio:h,playEvent:i,getMidiFile:m,sequence:n,midiRenderer:b},s.Editor=_2(),s.EditArea=$f(),Ki=s,Ki}var k2=C2();const Ra=Hh(k2),T2={class:"display"},S2={ref:"paper",class:"paper"},E2={class:"keyboard-buttons"},A2=$0({__name:"beamKeyboard",emits:["insertBeamedToken"],setup(e,{emit:t}){const a=Dl("paper"),n=et([]),r=K0(()=>n.value.join("")),s=p=>{n.value.push(p)},l=t,c=()=>{n.value.length!==0&&(l("insertBeamedToken",n.value.join("")),n.value=[])},f=()=>{n.value.pop()};return gt(n,p=>{Ra.renderAbc(a.value,`X:1
L:1/1
K:none clef=none stafflines=0
V:1 stem=up
${p.join("")}
`)},{deep:!0}),(p,v)=>(_e(),Se(Me,null,[le("div",T2,[le("div",S2,null,512),le("code",null,st(r.value),1)]),le("div",E2,[le("button",{onClick:v[0]||(v[0]=d=>s("B/8"))},"八分音符"),le("button",{onClick:v[1]||(v[1]=d=>s("B/16"))},"十六分音符")]),le("button",{onClick:v[2]||(v[2]=d=>s(" "))},"空格"),le("button",{onClick:v[3]||(v[3]=d=>f())},"後退"),v[5]||(v[5]=le("br",null,null,-1)),le("button",{onClick:v[4]||(v[4]=d=>c())},"插入")],64))}}),M2={class:"sequencer-container"},B2={class:"length-selector"},P2=["value"],N2={class:"display"},L2={class:"checkbox-grid"},q2=["id","onUpdate:modelValue"],D2=["for"],O2=$0({__name:"checkboxKeyboard",emits:["insert"],setup(e,{emit:t}){const a=et(null);Ca(()=>{f()});const n=t,r=()=>{n("insert",d(c.value))},s=[4,8,12,16],l=et(4),c=et(Array.from({length:l.value/4},()=>Array(4).fill(!1)));gt(l,u=>{const o=u/4;c.value=Array.from({length:o},()=>Array(4).fill(!1))}),gt(c,()=>{f()},{deep:!0});const f=()=>{a.value&&Ra.renderAbc(a.value,`X:1
L:1/1
K:none clef=none stafflines=0
V:1 stem=up
${d(c.value)}`,{responsive:"resize"})},p=u=>u.map(o=>{let h=0;for(let i=0;i<4;i++)o[i]&&(h+=1<<3-i);return h}),v=u=>({0:["z/4"],1:["z3/16","B/16"],2:["z/8","B/8"],3:["z/8","B/16","B/16"],4:["z/16","B3/16"],5:["z/16","B/16","z/16","B/16"],6:["z/16","B/16","B/8"],7:["z/16","B/16","B/16","B/16"],8:["B/4"],9:["B3/16","B/16"],10:["B/8","B/8"],11:["B/8","B/16","B/16"],12:["B/16","B3/16"],13:["B/16","B/8","B/16"],14:["B/16","B/16","B/8"],15:["B/16","B/16","B/16","B/16"]})[u].join(""),d=u=>{let o="";const h=p(u);o+=v(h[0])+" ";for(let i=1;i<h.length;i++){const g=h[i-1],m=h[i];m>=1&&m<=7?g===0?o+=v(m)+" ":o+="-"+v(8^m)+" ":o+=v(m)+" "}return o};return(u,o)=>(_e(),Se("div",M2,[le("div",B2,[o[1]||(o[1]=le("span",null,"Length:",-1)),(_e(),Se(Me,null,kt(s,h=>le("label",{key:h},[Ut(le("input",{type:"radio",value:h,"onUpdate:modelValue":o[0]||(o[0]=i=>l.value=i),name:"length-group"},null,8,P2),[[sh,l.value]]),Sa(" "+st(h),1)])),64))]),le("div",N2,[le("div",{ref_key:"paper",ref:a,class:"paper"},null,512)]),le("div",L2,[(_e(!0),Se(Me,null,kt(c.value,(h,i)=>(_e(),Se(Me,{key:i},[(_e(!0),Se(Me,null,kt(h,(g,m)=>(_e(),Se("div",{key:m,class:"checkbox-wrapper"},[Ut(le("input",{type:"checkbox",id:`note-${i}-${m}`,"onUpdate:modelValue":b=>c.value[i][m]=b},null,8,q2),[[ff,c.value[i][m]]]),le("label",{for:`note-${i}-${m}`},st(i*4+m+1),9,D2)]))),128))],64))),128))]),le("button",{onClick:r},"insert")]))}}),I2=X0(O2,[["__scopeId","data-v-a1e55bf2"]]),F2={ref:"paper",class:"paper"},R2={class:"virtual-keyboard"},H2=$0({__name:"abc",setup(e){const t=et(""),a=et("4/4"),n=et(!0),r=K0(()=>`X:1
T:${t.value}
M:${a.value}
L:1/1
K:none clef=perc stafflines=${n.value?1:0}
V:1 stem=up
%%MIDI channel 10
%%MIDI drummap B 75`),s=Dl("paper"),l=()=>{const v=`${r.value}
${c.value}`;Ra.renderAbc(s.value,v,{responsive:"resize"})},c=et("[T:1/4=123]B/8B/8 B/8B/8 B/16B/16B/16B/16 B/16B3/16 | "),f=et(c.value.split(" ")),p=v=>{if(v==="clear"){f.value=[];return}if(v==="back"){f.value.pop();return}f.value.push(v)};return gt(c,v=>{console.log("ABC String Updated"),console.log("ABC Tokens:",f.value),f.value=v.split(" "),l()}),gt(f,v=>{c.value=v.join(" "),l()},{deep:!0}),gt([t,a,n],()=>{console.log("ABC Header Updated:",r.value),l()}),Ca(()=>{l()}),(v,d)=>(_e(),Se(Me,null,[Ut(le("input",{"onUpdate:modelValue":d[0]||(d[0]=u=>t.value=u),placeholder:"輸入標題"},null,512),[[fr,t.value]]),d[4]||(d[4]=le("br",null,null,-1)),Ut(le("input",{"onUpdate:modelValue":d[1]||(d[1]=u=>a.value=u),placeholder:"4/4"},null,512),[[fr,a.value]]),d[5]||(d[5]=le("br",null,null,-1)),Ut(le("input",{"onUpdate:modelValue":d[2]||(d[2]=u=>n.value=u),type:"checkbox"},null,512),[[ff,n.value]]),d[6]||(d[6]=Sa("有線")),d[7]||(d[7]=le("br",null,null,-1)),le("div",F2,null,512),le("div",R2,[$e(kh,null,{input1:Wt(()=>[Ut(le("textarea",{ref:"textarea","onUpdate:modelValue":d[3]||(d[3]=u=>c.value=u),rows:"10",cols:"80",class:"textarea"},null,512),[[fr,c.value]])]),input2:Wt(()=>[$e(Rh,{onKeyPress:p})]),input3:Wt(()=>[$e(Ih,{onKeyPress:p})]),input4:Wt(()=>[$e(A2,{onInsertBeamedToken:p})]),input5:Wt(()=>[$e(I2,{onInsert:p})]),_:1})])],64))}}),z2=X0(H2,[["__scopeId","data-v-1c71a590"]]),G2={__name:"App",setup(e){return(t,a)=>(_e(),O0(z2))}};lh(G2).mount("#app");
